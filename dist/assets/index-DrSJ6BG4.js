(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function nF(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pb={exports:{}},Hd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xT;function rH(){if(xT)return Hd;xT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,n,o){var r=null;if(o!==void 0&&(r=""+o),n.key!==void 0&&(r=""+n.key),"key"in n){o={};for(var a in n)a!=="key"&&(o[a]=n[a])}else o=n;return n=o.ref,{$$typeof:e,type:s,key:r,ref:n!==void 0?n:null,props:o}}return Hd.Fragment=t,Hd.jsx=i,Hd.jsxs=i,Hd}var MT;function aH(){return MT||(MT=1,pb.exports=rH()),pb.exports}var ve=aH(),fb={exports:{}},Ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DT;function lH(){if(DT)return Ke;DT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),r=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;function f(G){return G===null||typeof G!="object"?null:(G=p&&G[p]||G["@@iterator"],typeof G=="function"?G:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,b={};function w(G,W,Y){this.props=G,this.context=W,this.refs=b,this.updater=Y||v}w.prototype.isReactComponent={},w.prototype.setState=function(G,W){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,W,"setState")},w.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function S(){}S.prototype=w.prototype;function M(G,W,Y){this.props=G,this.context=W,this.refs=b,this.updater=Y||v}var R=M.prototype=new S;R.constructor=M,y(R,w.prototype),R.isPureReactComponent=!0;var A=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},F=Object.prototype.hasOwnProperty;function P(G,W,Y,X,ee,fe){return Y=fe.ref,{$$typeof:e,type:G,key:W,ref:Y!==void 0?Y:null,props:fe}}function N(G,W){return P(G.type,W,void 0,void 0,void 0,G.props)}function O(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function B(G){var W={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Y){return W[Y]})}var V=/\/+/g;function U(G,W){return typeof G=="object"&&G!==null&&G.key!=null?B(""+G.key):W.toString(36)}function se(){}function Ce(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(se,se):(G.status="pending",G.then(function(W){G.status==="pending"&&(G.status="fulfilled",G.value=W)},function(W){G.status==="pending"&&(G.status="rejected",G.reason=W)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function Se(G,W,Y,X,ee){var fe=typeof G;(fe==="undefined"||fe==="boolean")&&(G=null);var le=!1;if(G===null)le=!0;else switch(fe){case"bigint":case"string":case"number":le=!0;break;case"object":switch(G.$$typeof){case e:case t:le=!0;break;case d:return le=G._init,Se(le(G._payload),W,Y,X,ee)}}if(le)return ee=ee(G),le=X===""?"."+U(G,0):X,A(ee)?(Y="",le!=null&&(Y=le.replace(V,"$&/")+"/"),Se(ee,W,Y,"",function(ae){return ae})):ee!=null&&(O(ee)&&(ee=N(ee,Y+(ee.key==null||G&&G.key===ee.key?"":(""+ee.key).replace(V,"$&/")+"/")+le)),W.push(ee)),1;le=0;var be=X===""?".":X+":";if(A(G))for(var ue=0;ue<G.length;ue++)X=G[ue],fe=be+U(X,ue),le+=Se(X,W,Y,fe,ee);else if(ue=f(G),typeof ue=="function")for(G=ue.call(G),ue=0;!(X=G.next()).done;)X=X.value,fe=be+U(X,ue++),le+=Se(X,W,Y,fe,ee);else if(fe==="object"){if(typeof G.then=="function")return Se(Ce(G),W,Y,X,ee);throw W=String(G),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return le}function H(G,W,Y){if(G==null)return G;var X=[],ee=0;return Se(G,X,"","",function(fe){return W.call(Y,fe,ee++)}),X}function q(G){if(G._status===-1){var W=G._result;W=W(),W.then(function(Y){(G._status===0||G._status===-1)&&(G._status=1,G._result=Y)},function(Y){(G._status===0||G._status===-1)&&(G._status=2,G._result=Y)}),G._status===-1&&(G._status=0,G._result=W)}if(G._status===1)return G._result.default;throw G._result}var ie=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)};function he(){}return Ke.Children={map:H,forEach:function(G,W,Y){H(G,function(){W.apply(this,arguments)},Y)},count:function(G){var W=0;return H(G,function(){W++}),W},toArray:function(G){return H(G,function(W){return W})||[]},only:function(G){if(!O(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Ke.Component=w,Ke.Fragment=i,Ke.Profiler=n,Ke.PureComponent=M,Ke.StrictMode=s,Ke.Suspense=c,Ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ke.__COMPILER_RUNTIME={__proto__:null,c:function(G){return T.H.useMemoCache(G)}},Ke.cache=function(G){return function(){return G.apply(null,arguments)}},Ke.cloneElement=function(G,W,Y){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var X=y({},G.props),ee=G.key,fe=void 0;if(W!=null)for(le in W.ref!==void 0&&(fe=void 0),W.key!==void 0&&(ee=""+W.key),W)!F.call(W,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&W.ref===void 0||(X[le]=W[le]);var le=arguments.length-2;if(le===1)X.children=Y;else if(1<le){for(var be=Array(le),ue=0;ue<le;ue++)be[ue]=arguments[ue+2];X.children=be}return P(G.type,ee,void 0,void 0,fe,X)},Ke.createContext=function(G){return G={$$typeof:r,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:o,_context:G},G},Ke.createElement=function(G,W,Y){var X,ee={},fe=null;if(W!=null)for(X in W.key!==void 0&&(fe=""+W.key),W)F.call(W,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(ee[X]=W[X]);var le=arguments.length-2;if(le===1)ee.children=Y;else if(1<le){for(var be=Array(le),ue=0;ue<le;ue++)be[ue]=arguments[ue+2];ee.children=be}if(G&&G.defaultProps)for(X in le=G.defaultProps,le)ee[X]===void 0&&(ee[X]=le[X]);return P(G,fe,void 0,void 0,null,ee)},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(G){return{$$typeof:a,render:G}},Ke.isValidElement=O,Ke.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:q}},Ke.memo=function(G,W){return{$$typeof:h,type:G,compare:W===void 0?null:W}},Ke.startTransition=function(G){var W=T.T,Y={};T.T=Y;try{var X=G(),ee=T.S;ee!==null&&ee(Y,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(he,ie)}catch(fe){ie(fe)}finally{T.T=W}},Ke.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ke.use=function(G){return T.H.use(G)},Ke.useActionState=function(G,W,Y){return T.H.useActionState(G,W,Y)},Ke.useCallback=function(G,W){return T.H.useCallback(G,W)},Ke.useContext=function(G){return T.H.useContext(G)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(G,W){return T.H.useDeferredValue(G,W)},Ke.useEffect=function(G,W,Y){var X=T.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(G,W)},Ke.useId=function(){return T.H.useId()},Ke.useImperativeHandle=function(G,W,Y){return T.H.useImperativeHandle(G,W,Y)},Ke.useInsertionEffect=function(G,W){return T.H.useInsertionEffect(G,W)},Ke.useLayoutEffect=function(G,W){return T.H.useLayoutEffect(G,W)},Ke.useMemo=function(G,W){return T.H.useMemo(G,W)},Ke.useOptimistic=function(G,W){return T.H.useOptimistic(G,W)},Ke.useReducer=function(G,W,Y){return T.H.useReducer(G,W,Y)},Ke.useRef=function(G){return T.H.useRef(G)},Ke.useState=function(G){return T.H.useState(G)},Ke.useSyncExternalStore=function(G,W,Y){return T.H.useSyncExternalStore(G,W,Y)},Ke.useTransition=function(){return T.H.useTransition()},Ke.version="19.1.0",Ke}var RT;function Lx(){return RT||(RT=1,fb.exports=lH()),fb.exports}var L=Lx();const pe=nF(L);var mb={exports:{}},Vd={},vb={exports:{}},yb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AT;function cH(){return AT||(AT=1,function(e){function t(H,q){var ie=H.length;H.push(q);e:for(;0<ie;){var he=ie-1>>>1,G=H[he];if(0<n(G,q))H[he]=q,H[ie]=G,ie=he;else break e}}function i(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var q=H[0],ie=H.pop();if(ie!==q){H[0]=ie;e:for(var he=0,G=H.length,W=G>>>1;he<W;){var Y=2*(he+1)-1,X=H[Y],ee=Y+1,fe=H[ee];if(0>n(X,ie))ee<G&&0>n(fe,X)?(H[he]=fe,H[ee]=ie,he=ee):(H[he]=X,H[Y]=ie,he=Y);else if(ee<G&&0>n(fe,ie))H[he]=fe,H[ee]=ie,he=ee;else break e}}return q}function n(H,q){var ie=H.sortIndex-q.sortIndex;return ie!==0?ie:H.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();e.unstable_now=function(){return r.now()-a}}var c=[],h=[],d=1,p=null,f=3,v=!1,y=!1,b=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function A(H){for(var q=i(h);q!==null;){if(q.callback===null)s(h);else if(q.startTime<=H)s(h),q.sortIndex=q.expirationTime,t(c,q);else break;q=i(h)}}function T(H){if(b=!1,A(H),!y)if(i(c)!==null)y=!0,F||(F=!0,U());else{var q=i(h);q!==null&&Se(T,q.startTime-H)}}var F=!1,P=-1,N=5,O=-1;function B(){return w?!0:!(e.unstable_now()-O<N)}function V(){if(w=!1,F){var H=e.unstable_now();O=H;var q=!0;try{e:{y=!1,b&&(b=!1,M(P),P=-1),v=!0;var ie=f;try{t:{for(A(H),p=i(c);p!==null&&!(p.expirationTime>H&&B());){var he=p.callback;if(typeof he=="function"){p.callback=null,f=p.priorityLevel;var G=he(p.expirationTime<=H);if(H=e.unstable_now(),typeof G=="function"){p.callback=G,A(H),q=!0;break t}p===i(c)&&s(c),A(H)}else s(c);p=i(c)}if(p!==null)q=!0;else{var W=i(h);W!==null&&Se(T,W.startTime-H),q=!1}}break e}finally{p=null,f=ie,v=!1}q=void 0}}finally{q?U():F=!1}}}var U;if(typeof R=="function")U=function(){R(V)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,Ce=se.port2;se.port1.onmessage=V,U=function(){Ce.postMessage(null)}}else U=function(){S(V,0)};function Se(H,q){P=S(function(){H(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(H){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var ie=f;f=q;try{return H()}finally{f=ie}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=f;f=H;try{return q()}finally{f=ie}},e.unstable_scheduleCallback=function(H,q,ie){var he=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?he+ie:he):ie=he,H){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ie+G,H={id:d++,callback:q,priorityLevel:H,startTime:ie,expirationTime:G,sortIndex:-1},ie>he?(H.sortIndex=ie,t(h,H),i(c)===null&&H===i(h)&&(b?(M(P),P=-1):b=!0,Se(T,ie-he))):(H.sortIndex=G,t(c,H),y||v||(y=!0,F||(F=!0,U()))),H},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(H){var q=f;return function(){var ie=f;f=q;try{return H.apply(this,arguments)}finally{f=ie}}}}(yb)),yb}var ET;function uH(){return ET||(ET=1,vb.exports=cH()),vb.exports}var Cb={exports:{}},vs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TT;function hH(){if(TT)return vs;TT=1;var e=Lx();function t(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},n=Symbol.for("react.portal");function o(c,h,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:p==null?null:""+p,children:c,containerInfo:h,implementation:d}}var r=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return vs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,vs.createPortal=function(c,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(c,h,null,d)},vs.flushSync=function(c){var h=r.T,d=s.p;try{if(r.T=null,s.p=2,c)return c()}finally{r.T=h,s.p=d,s.d.f()}},vs.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(c,h))},vs.prefetchDNS=function(c){typeof c=="string"&&s.d.D(c)},vs.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var d=h.as,p=a(d,h.crossOrigin),f=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?s.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:f,fetchPriority:v}):d==="script"&&s.d.X(c,{crossOrigin:p,integrity:f,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},vs.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=a(h.as,h.crossOrigin);s.d.M(c,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(c)},vs.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,p=a(d,h.crossOrigin);s.d.L(c,d,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},vs.preloadModule=function(c,h){if(typeof c=="string")if(h){var d=a(h.as,h.crossOrigin);s.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(c)},vs.requestFormReset=function(c){s.d.r(c)},vs.unstable_batchedUpdates=function(c,h){return c(h)},vs.useFormState=function(c,h,d){return r.H.useFormState(c,h,d)},vs.useFormStatus=function(){return r.H.useHostTransitionStatus()},vs.version="19.1.0",vs}var IT;function oF(){if(IT)return Cb.exports;IT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Cb.exports=hH(),Cb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LT;function dH(){if(LT)return Vd;LT=1;var e=uH(),t=Lx(),i=oF();function s(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function o(l){var u=l,g=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(g=u.return),l=u.return;while(l)}return u.tag===3?g:null}function r(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function a(l){if(o(l)!==l)throw Error(s(188))}function c(l){var u=l.alternate;if(!u){if(u=o(l),u===null)throw Error(s(188));return u!==l?null:l}for(var g=l,m=u;;){var C=g.return;if(C===null)break;var x=C.alternate;if(x===null){if(m=C.return,m!==null){g=m;continue}break}if(C.child===x.child){for(x=C.child;x;){if(x===g)return a(C),l;if(x===m)return a(C),u;x=x.sibling}throw Error(s(188))}if(g.return!==m.return)g=C,m=x;else{for(var I=!1,k=C.child;k;){if(k===g){I=!0,g=C,m=x;break}if(k===m){I=!0,m=C,g=x;break}k=k.sibling}if(!I){for(k=x.child;k;){if(k===g){I=!0,g=x,m=C;break}if(k===m){I=!0,m=x,g=C;break}k=k.sibling}if(!I)throw Error(s(189))}}if(g.alternate!==m)throw Error(s(190))}if(g.tag!==3)throw Error(s(188));return g.stateNode.current===g?l:u}function h(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=h(l),u!==null)return u;l=l.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(l){return l===null||typeof l!="object"?null:(l=V&&l[V]||l["@@iterator"],typeof l=="function"?l:null)}var se=Symbol.for("react.client.reference");function Ce(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===se?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case y:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case F:return"SuspenseList";case O:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case v:return"Portal";case R:return(l.displayName||"Context")+".Provider";case M:return(l._context.displayName||"Context")+".Consumer";case A:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case P:return u=l.displayName||null,u!==null?u:Ce(l.type)||"Memo";case N:u=l._payload,l=l._init;try{return Ce(l(u))}catch{}}return null}var Se=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},he=[],G=-1;function W(l){return{current:l}}function Y(l){0>G||(l.current=he[G],he[G]=null,G--)}function X(l,u){G++,he[G]=l.current,l.current=u}var ee=W(null),fe=W(null),le=W(null),be=W(null);function ue(l,u){switch(X(le,u),X(fe,l),X(ee,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?XE(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=XE(u),l=QE(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Y(ee),X(ee,l)}function ae(){Y(ee),Y(fe),Y(le)}function we(l){l.memoizedState!==null&&X(be,l);var u=ee.current,g=QE(u,l.type);u!==g&&(X(fe,l),X(ee,g))}function Re(l){fe.current===l&&(Y(ee),Y(fe)),be.current===l&&(Y(be),Nd._currentValue=ie)}var Ee=Object.prototype.hasOwnProperty,_e=e.unstable_scheduleCallback,We=e.unstable_cancelCallback,Ve=e.unstable_shouldYield,kt=e.unstable_requestPaint,ft=e.unstable_now,Fi=e.unstable_getCurrentPriorityLevel,_i=e.unstable_ImmediatePriority,Mt=e.unstable_UserBlockingPriority,mt=e.unstable_NormalPriority,Di=e.unstable_LowPriority,li=e.unstable_IdlePriority,Cl=e.log,dr=e.unstable_setDisableYieldValue,wt=null,Nt=null;function Eo(l){if(typeof Cl=="function"&&dr(l),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(wt,l)}catch{}}var tn=Math.clz32?Math.clz32:YG,jG=Math.log,UG=Math.LN2;function YG(l){return l>>>=0,l===0?32:31-(jG(l)/UG|0)|0}var qp=256,Xp=4194304;function Sl(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function Qp(l,u,g){var m=l.pendingLanes;if(m===0)return 0;var C=0,x=l.suspendedLanes,I=l.pingedLanes;l=l.warmLanes;var k=m&134217727;return k!==0?(m=k&~x,m!==0?C=Sl(m):(I&=k,I!==0?C=Sl(I):g||(g=k&~l,g!==0&&(C=Sl(g))))):(k=m&~x,k!==0?C=Sl(k):I!==0?C=Sl(I):g||(g=m&~l,g!==0&&(C=Sl(g)))),C===0?0:u!==0&&u!==C&&(u&x)===0&&(x=C&-C,g=u&-u,x>=g||x===32&&(g&4194048)!==0)?u:C}function jh(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function KG(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kD(){var l=qp;return qp<<=1,(qp&4194048)===0&&(qp=256),l}function ND(){var l=Xp;return Xp<<=1,(Xp&62914560)===0&&(Xp=4194304),l}function sC(l){for(var u=[],g=0;31>g;g++)u.push(l);return u}function Uh(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function $G(l,u,g,m,C,x){var I=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var k=l.entanglements,z=l.expirationTimes,$=l.hiddenUpdates;for(g=I&~g;0<g;){var oe=31-tn(g),ce=1<<oe;k[oe]=0,z[oe]=-1;var Q=$[oe];if(Q!==null)for($[oe]=null,oe=0;oe<Q.length;oe++){var J=Q[oe];J!==null&&(J.lane&=-536870913)}g&=~ce}m!==0&&OD(l,m,0),x!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=x&~(I&~u))}function OD(l,u,g){l.pendingLanes|=u,l.suspendedLanes&=~u;var m=31-tn(u);l.entangledLanes|=u,l.entanglements[m]=l.entanglements[m]|1073741824|g&4194090}function GD(l,u){var g=l.entangledLanes|=u;for(l=l.entanglements;g;){var m=31-tn(g),C=1<<m;C&u|l[m]&u&&(l[m]|=u),g&=~C}}function nC(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function oC(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function BD(){var l=q.p;return l!==0?l:(l=window.event,l===void 0?32:vT(l.type))}function ZG(l,u){var g=q.p;try{return q.p=l,u()}finally{q.p=g}}var ca=Math.random().toString(36).slice(2),fs="__reactFiber$"+ca,Vs="__reactProps$"+ca,Wc="__reactContainer$"+ca,rC="__reactEvents$"+ca,qG="__reactListeners$"+ca,XG="__reactHandles$"+ca,zD="__reactResources$"+ca,Yh="__reactMarker$"+ca;function aC(l){delete l[fs],delete l[Vs],delete l[rC],delete l[qG],delete l[XG]}function jc(l){var u=l[fs];if(u)return u;for(var g=l.parentNode;g;){if(u=g[Wc]||g[fs]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(l=iT(l);l!==null;){if(g=l[fs])return g;l=iT(l)}return u}l=g,g=l.parentNode}return null}function Uc(l){if(l=l[fs]||l[Wc]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function Kh(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(s(33))}function Yc(l){var u=l[zD];return u||(u=l[zD]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Wi(l){l[Yh]=!0}var HD=new Set,VD={};function bl(l,u){Kc(l,u),Kc(l+"Capture",u)}function Kc(l,u){for(VD[l]=u,l=0;l<u.length;l++)HD.add(u[l])}var QG=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_D={},WD={};function JG(l){return Ee.call(WD,l)?!0:Ee.call(_D,l)?!1:QG.test(l)?WD[l]=!0:(_D[l]=!0,!1)}function Jp(l,u,g){if(JG(u))if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+g)}}function ef(l,u,g){if(g===null)l.removeAttribute(u);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+g)}}function gr(l,u,g,m){if(m===null)l.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(u,g,""+m)}}var lC,jD;function $c(l){if(lC===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);lC=u&&u[1]||"",jD=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lC+l+jD}var cC=!1;function uC(l,u){if(!l||cC)return"";cC=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(J){var Q=J}Reflect.construct(l,[],ce)}else{try{ce.call()}catch(J){Q=J}l.call(ce.prototype)}}else{try{throw Error()}catch(J){Q=J}(ce=l())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(J){if(J&&Q&&typeof J.stack=="string")return[J.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=m.DetermineComponentFrameRoot(),I=x[0],k=x[1];if(I&&k){var z=I.split(`
`),$=k.split(`
`);for(C=m=0;m<z.length&&!z[m].includes("DetermineComponentFrameRoot");)m++;for(;C<$.length&&!$[C].includes("DetermineComponentFrameRoot");)C++;if(m===z.length||C===$.length)for(m=z.length-1,C=$.length-1;1<=m&&0<=C&&z[m]!==$[C];)C--;for(;1<=m&&0<=C;m--,C--)if(z[m]!==$[C]){if(m!==1||C!==1)do if(m--,C--,0>C||z[m]!==$[C]){var oe=`
`+z[m].replace(" at new "," at ");return l.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",l.displayName)),oe}while(1<=m&&0<=C);break}}}finally{cC=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?$c(g):""}function eB(l){switch(l.tag){case 26:case 27:case 5:return $c(l.type);case 16:return $c("Lazy");case 13:return $c("Suspense");case 19:return $c("SuspenseList");case 0:case 15:return uC(l.type,!1);case 11:return uC(l.type.render,!1);case 1:return uC(l.type,!0);case 31:return $c("Activity");default:return""}}function UD(l){try{var u="";do u+=eB(l),l=l.return;while(l);return u}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function Dn(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function YD(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function tB(l){var u=YD(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),m=""+l[u];if(!l.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var C=g.get,x=g.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return C.call(this)},set:function(I){m=""+I,x.call(this,I)}}),Object.defineProperty(l,u,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function(I){m=""+I},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function tf(l){l._valueTracker||(l._valueTracker=tB(l))}function KD(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var g=u.getValue(),m="";return l&&(m=YD(l)?l.checked?"true":"false":l.value),l=m,l!==g?(u.setValue(l),!0):!1}function sf(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var iB=/[\n"\\]/g;function Rn(l){return l.replace(iB,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function hC(l,u,g,m,C,x,I,k){l.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?l.type=I:l.removeAttribute("type"),u!=null?I==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+Dn(u)):l.value!==""+Dn(u)&&(l.value=""+Dn(u)):I!=="submit"&&I!=="reset"||l.removeAttribute("value"),u!=null?dC(l,I,Dn(u)):g!=null?dC(l,I,Dn(g)):m!=null&&l.removeAttribute("value"),C==null&&x!=null&&(l.defaultChecked=!!x),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?l.name=""+Dn(k):l.removeAttribute("name")}function $D(l,u,g,m,C,x,I,k){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(l.type=x),u!=null||g!=null){if(!(x!=="submit"&&x!=="reset"||u!=null))return;g=g!=null?""+Dn(g):"",u=u!=null?""+Dn(u):g,k||u===l.value||(l.value=u),l.defaultValue=u}m=m??C,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=k?l.checked:!!m,l.defaultChecked=!!m,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(l.name=I)}function dC(l,u,g){u==="number"&&sf(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function Zc(l,u,g,m){if(l=l.options,u){u={};for(var C=0;C<g.length;C++)u["$"+g[C]]=!0;for(g=0;g<l.length;g++)C=u.hasOwnProperty("$"+l[g].value),l[g].selected!==C&&(l[g].selected=C),C&&m&&(l[g].defaultSelected=!0)}else{for(g=""+Dn(g),u=null,C=0;C<l.length;C++){if(l[C].value===g){l[C].selected=!0,m&&(l[C].defaultSelected=!0);return}u!==null||l[C].disabled||(u=l[C])}u!==null&&(u.selected=!0)}}function ZD(l,u,g){if(u!=null&&(u=""+Dn(u),u!==l.value&&(l.value=u),g==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=g!=null?""+Dn(g):""}function qD(l,u,g,m){if(u==null){if(m!=null){if(g!=null)throw Error(s(92));if(Se(m)){if(1<m.length)throw Error(s(93));m=m[0]}g=m}g==null&&(g=""),u=g}g=Dn(u),l.defaultValue=g,m=l.textContent,m===g&&m!==""&&m!==null&&(l.value=m)}function qc(l,u){if(u){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=u;return}}l.textContent=u}var sB=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function XD(l,u,g){var m=u.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":m?l.setProperty(u,g):typeof g!="number"||g===0||sB.has(u)?u==="float"?l.cssFloat=g:l[u]=(""+g).trim():l[u]=g+"px"}function QD(l,u,g){if(u!=null&&typeof u!="object")throw Error(s(62));if(l=l.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var C in u)m=u[C],u.hasOwnProperty(C)&&g[C]!==m&&XD(l,C,m)}else for(var x in u)u.hasOwnProperty(x)&&XD(l,x,u[x])}function gC(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nB=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oB=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function nf(l){return oB.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var pC=null;function fC(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Xc=null,Qc=null;function JD(l){var u=Uc(l);if(u&&(l=u.stateNode)){var g=l[Vs]||null;e:switch(l=u.stateNode,u.type){case"input":if(hC(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),u=g.name,g.type==="radio"&&u!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Rn(""+u)+'"][type="radio"]'),u=0;u<g.length;u++){var m=g[u];if(m!==l&&m.form===l.form){var C=m[Vs]||null;if(!C)throw Error(s(90));hC(m,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(u=0;u<g.length;u++)m=g[u],m.form===l.form&&KD(m)}break e;case"textarea":ZD(l,g.value,g.defaultValue);break e;case"select":u=g.value,u!=null&&Zc(l,!!g.multiple,u,!1)}}}var mC=!1;function eR(l,u,g){if(mC)return l(u,g);mC=!0;try{var m=l(u);return m}finally{if(mC=!1,(Xc!==null||Qc!==null)&&(Wf(),Xc&&(u=Xc,l=Qc,Qc=Xc=null,JD(u),l)))for(u=0;u<l.length;u++)JD(l[u])}}function $h(l,u){var g=l.stateNode;if(g===null)return null;var m=g[Vs]||null;if(m===null)return null;g=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(s(231,u,typeof g));return g}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vC=!1;if(pr)try{var Zh={};Object.defineProperty(Zh,"passive",{get:function(){vC=!0}}),window.addEventListener("test",Zh,Zh),window.removeEventListener("test",Zh,Zh)}catch{vC=!1}var ua=null,yC=null,of=null;function tR(){if(of)return of;var l,u=yC,g=u.length,m,C="value"in ua?ua.value:ua.textContent,x=C.length;for(l=0;l<g&&u[l]===C[l];l++);var I=g-l;for(m=1;m<=I&&u[g-m]===C[x-m];m++);return of=C.slice(l,1<m?1-m:void 0)}function rf(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function af(){return!0}function iR(){return!1}function _s(l){function u(g,m,C,x,I){this._reactName=g,this._targetInst=C,this.type=m,this.nativeEvent=x,this.target=I,this.currentTarget=null;for(var k in l)l.hasOwnProperty(k)&&(g=l[k],this[k]=g?g(x):x[k]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?af:iR,this.isPropagationStopped=iR,this}return d(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=af)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=af)},persist:function(){},isPersistent:af}),u}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lf=_s(wl),qh=d({},wl,{view:0,detail:0}),rB=_s(qh),CC,SC,Xh,cf=d({},qh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wC,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Xh&&(Xh&&l.type==="mousemove"?(CC=l.screenX-Xh.screenX,SC=l.screenY-Xh.screenY):SC=CC=0,Xh=l),CC)},movementY:function(l){return"movementY"in l?l.movementY:SC}}),sR=_s(cf),aB=d({},cf,{dataTransfer:0}),lB=_s(aB),cB=d({},qh,{relatedTarget:0}),bC=_s(cB),uB=d({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),hB=_s(uB),dB=d({},wl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),gB=_s(dB),pB=d({},wl,{data:0}),nR=_s(pB),fB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yB(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=vB[l])?!!u[l]:!1}function wC(){return yB}var CB=d({},qh,{key:function(l){if(l.key){var u=fB[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=rf(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?mB[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wC,charCode:function(l){return l.type==="keypress"?rf(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?rf(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),SB=_s(CB),bB=d({},cf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oR=_s(bB),wB=d({},qh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wC}),xB=_s(wB),MB=d({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),DB=_s(MB),RB=d({},cf,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),AB=_s(RB),EB=d({},wl,{newState:0,oldState:0}),TB=_s(EB),IB=[9,13,27,32],xC=pr&&"CompositionEvent"in window,Qh=null;pr&&"documentMode"in document&&(Qh=document.documentMode);var LB=pr&&"TextEvent"in window&&!Qh,rR=pr&&(!xC||Qh&&8<Qh&&11>=Qh),aR=" ",lR=!1;function cR(l,u){switch(l){case"keyup":return IB.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uR(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Jc=!1;function FB(l,u){switch(l){case"compositionend":return uR(u);case"keypress":return u.which!==32?null:(lR=!0,aR);case"textInput":return l=u.data,l===aR&&lR?null:l;default:return null}}function PB(l,u){if(Jc)return l==="compositionend"||!xC&&cR(l,u)?(l=tR(),of=yC=ua=null,Jc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return rR&&u.locale!=="ko"?null:u.data;default:return null}}var kB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hR(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!kB[l.type]:u==="textarea"}function dR(l,u,g,m){Xc?Qc?Qc.push(m):Qc=[m]:Xc=m,u=Zf(u,"onChange"),0<u.length&&(g=new lf("onChange","change",null,g,m),l.push({event:g,listeners:u}))}var Jh=null,ed=null;function NB(l){YE(l,0)}function uf(l){var u=Kh(l);if(KD(u))return l}function gR(l,u){if(l==="change")return u}var pR=!1;if(pr){var MC;if(pr){var DC="oninput"in document;if(!DC){var fR=document.createElement("div");fR.setAttribute("oninput","return;"),DC=typeof fR.oninput=="function"}MC=DC}else MC=!1;pR=MC&&(!document.documentMode||9<document.documentMode)}function mR(){Jh&&(Jh.detachEvent("onpropertychange",vR),ed=Jh=null)}function vR(l){if(l.propertyName==="value"&&uf(ed)){var u=[];dR(u,ed,l,fC(l)),eR(NB,u)}}function OB(l,u,g){l==="focusin"?(mR(),Jh=u,ed=g,Jh.attachEvent("onpropertychange",vR)):l==="focusout"&&mR()}function GB(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return uf(ed)}function BB(l,u){if(l==="click")return uf(u)}function zB(l,u){if(l==="input"||l==="change")return uf(u)}function HB(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var sn=typeof Object.is=="function"?Object.is:HB;function td(l,u){if(sn(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var g=Object.keys(l),m=Object.keys(u);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var C=g[m];if(!Ee.call(u,C)||!sn(l[C],u[C]))return!1}return!0}function yR(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function CR(l,u){var g=yR(l);l=0;for(var m;g;){if(g.nodeType===3){if(m=l+g.textContent.length,l<=u&&m>=u)return{node:g,offset:u-l};l=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=yR(g)}}function SR(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?SR(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function bR(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=sf(l.document);u instanceof l.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)l=u.contentWindow;else break;u=sf(l.document)}return u}function RC(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var VB=pr&&"documentMode"in document&&11>=document.documentMode,eu=null,AC=null,id=null,EC=!1;function wR(l,u,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;EC||eu==null||eu!==sf(m)||(m=eu,"selectionStart"in m&&RC(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),id&&td(id,m)||(id=m,m=Zf(AC,"onSelect"),0<m.length&&(u=new lf("onSelect","select",null,u,g),l.push({event:u,listeners:m}),u.target=eu)))}function xl(l,u){var g={};return g[l.toLowerCase()]=u.toLowerCase(),g["Webkit"+l]="webkit"+u,g["Moz"+l]="moz"+u,g}var tu={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionrun:xl("Transition","TransitionRun"),transitionstart:xl("Transition","TransitionStart"),transitioncancel:xl("Transition","TransitionCancel"),transitionend:xl("Transition","TransitionEnd")},TC={},xR={};pr&&(xR=document.createElement("div").style,"AnimationEvent"in window||(delete tu.animationend.animation,delete tu.animationiteration.animation,delete tu.animationstart.animation),"TransitionEvent"in window||delete tu.transitionend.transition);function Ml(l){if(TC[l])return TC[l];if(!tu[l])return l;var u=tu[l],g;for(g in u)if(u.hasOwnProperty(g)&&g in xR)return TC[l]=u[g];return l}var MR=Ml("animationend"),DR=Ml("animationiteration"),RR=Ml("animationstart"),_B=Ml("transitionrun"),WB=Ml("transitionstart"),jB=Ml("transitioncancel"),AR=Ml("transitionend"),ER=new Map,IC="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");IC.push("scrollEnd");function eo(l,u){ER.set(l,u),bl(u,[l])}var TR=new WeakMap;function An(l,u){if(typeof l=="object"&&l!==null){var g=TR.get(l);return g!==void 0?g:(u={value:l,source:u,stack:UD(u)},TR.set(l,u),u)}return{value:l,source:u,stack:UD(u)}}var En=[],iu=0,LC=0;function hf(){for(var l=iu,u=LC=iu=0;u<l;){var g=En[u];En[u++]=null;var m=En[u];En[u++]=null;var C=En[u];En[u++]=null;var x=En[u];if(En[u++]=null,m!==null&&C!==null){var I=m.pending;I===null?C.next=C:(C.next=I.next,I.next=C),m.pending=C}x!==0&&IR(g,C,x)}}function df(l,u,g,m){En[iu++]=l,En[iu++]=u,En[iu++]=g,En[iu++]=m,LC|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function FC(l,u,g,m){return df(l,u,g,m),gf(l)}function su(l,u){return df(l,null,null,u),gf(l)}function IR(l,u,g){l.lanes|=g;var m=l.alternate;m!==null&&(m.lanes|=g);for(var C=!1,x=l.return;x!==null;)x.childLanes|=g,m=x.alternate,m!==null&&(m.childLanes|=g),x.tag===22&&(l=x.stateNode,l===null||l._visibility&1||(C=!0)),l=x,x=x.return;return l.tag===3?(x=l.stateNode,C&&u!==null&&(C=31-tn(g),l=x.hiddenUpdates,m=l[C],m===null?l[C]=[u]:m.push(u),u.lane=g|536870912),x):null}function gf(l){if(50<Ad)throw Ad=0,BS=null,Error(s(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var nu={};function UB(l,u,g,m){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(l,u,g,m){return new UB(l,u,g,m)}function PC(l){return l=l.prototype,!(!l||!l.isReactComponent)}function fr(l,u){var g=l.alternate;return g===null?(g=nn(l.tag,u,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=u,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,u=l.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function LR(l,u){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,u=g.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function pf(l,u,g,m,C,x){var I=0;if(m=l,typeof l=="function")PC(l)&&(I=1);else if(typeof l=="string")I=Kz(l,g,ee.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case O:return l=nn(31,g,u,C),l.elementType=O,l.lanes=x,l;case y:return Dl(g.children,C,x,u);case b:I=8,C|=24;break;case w:return l=nn(12,g,u,C|2),l.elementType=w,l.lanes=x,l;case T:return l=nn(13,g,u,C),l.elementType=T,l.lanes=x,l;case F:return l=nn(19,g,u,C),l.elementType=F,l.lanes=x,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:case R:I=10;break e;case M:I=9;break e;case A:I=11;break e;case P:I=14;break e;case N:I=16,m=null;break e}I=29,g=Error(s(130,l===null?"null":typeof l,"")),m=null}return u=nn(I,g,u,C),u.elementType=l,u.type=m,u.lanes=x,u}function Dl(l,u,g,m){return l=nn(7,l,m,u),l.lanes=g,l}function kC(l,u,g){return l=nn(6,l,null,u),l.lanes=g,l}function NC(l,u,g){return u=nn(4,l.children!==null?l.children:[],l.key,u),u.lanes=g,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var ou=[],ru=0,ff=null,mf=0,Tn=[],In=0,Rl=null,mr=1,vr="";function Al(l,u){ou[ru++]=mf,ou[ru++]=ff,ff=l,mf=u}function FR(l,u,g){Tn[In++]=mr,Tn[In++]=vr,Tn[In++]=Rl,Rl=l;var m=mr;l=vr;var C=32-tn(m)-1;m&=~(1<<C),g+=1;var x=32-tn(u)+C;if(30<x){var I=C-C%5;x=(m&(1<<I)-1).toString(32),m>>=I,C-=I,mr=1<<32-tn(u)+C|g<<C|m,vr=x+l}else mr=1<<x|g<<C|m,vr=l}function OC(l){l.return!==null&&(Al(l,1),FR(l,1,0))}function GC(l){for(;l===ff;)ff=ou[--ru],ou[ru]=null,mf=ou[--ru],ou[ru]=null;for(;l===Rl;)Rl=Tn[--In],Tn[In]=null,vr=Tn[--In],Tn[In]=null,mr=Tn[--In],Tn[In]=null}var Rs=null,ci=null,vt=!1,El=null,To=!1,BC=Error(s(519));function Tl(l){var u=Error(s(418,""));throw od(An(u,l)),BC}function PR(l){var u=l.stateNode,g=l.type,m=l.memoizedProps;switch(u[fs]=l,u[Vs]=m,g){case"dialog":tt("cancel",u),tt("close",u);break;case"iframe":case"object":case"embed":tt("load",u);break;case"video":case"audio":for(g=0;g<Td.length;g++)tt(Td[g],u);break;case"source":tt("error",u);break;case"img":case"image":case"link":tt("error",u),tt("load",u);break;case"details":tt("toggle",u);break;case"input":tt("invalid",u),$D(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),tf(u);break;case"select":tt("invalid",u);break;case"textarea":tt("invalid",u),qD(u,m.value,m.defaultValue,m.children),tf(u)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||u.textContent===""+g||m.suppressHydrationWarning===!0||qE(u.textContent,g)?(m.popover!=null&&(tt("beforetoggle",u),tt("toggle",u)),m.onScroll!=null&&tt("scroll",u),m.onScrollEnd!=null&&tt("scrollend",u),m.onClick!=null&&(u.onclick=qf),u=!0):u=!1,u||Tl(l)}function kR(l){for(Rs=l.return;Rs;)switch(Rs.tag){case 5:case 13:To=!1;return;case 27:case 3:To=!0;return;default:Rs=Rs.return}}function sd(l){if(l!==Rs)return!1;if(!vt)return kR(l),vt=!0,!1;var u=l.tag,g;if((g=u!==3&&u!==27)&&((g=u===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||eb(l.type,l.memoizedProps)),g=!g),g&&ci&&Tl(l),kR(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(u===0){ci=io(l.nextSibling);break e}u--}else g!=="$"&&g!=="$!"&&g!=="$?"||u++;l=l.nextSibling}ci=null}}else u===27?(u=ci,Ra(l.type)?(l=nb,nb=null,ci=l):ci=u):ci=Rs?io(l.stateNode.nextSibling):null;return!0}function nd(){ci=Rs=null,vt=!1}function NR(){var l=El;return l!==null&&(Us===null?Us=l:Us.push.apply(Us,l),El=null),l}function od(l){El===null?El=[l]:El.push(l)}var zC=W(null),Il=null,yr=null;function ha(l,u,g){X(zC,u._currentValue),u._currentValue=g}function Cr(l){l._currentValue=zC.current,Y(zC)}function HC(l,u,g){for(;l!==null;){var m=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),l===g)break;l=l.return}}function VC(l,u,g,m){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var x=C.dependencies;if(x!==null){var I=C.child;x=x.firstContext;e:for(;x!==null;){var k=x;x=C;for(var z=0;z<u.length;z++)if(k.context===u[z]){x.lanes|=g,k=x.alternate,k!==null&&(k.lanes|=g),HC(x.return,g,l),m||(I=null);break e}x=k.next}}else if(C.tag===18){if(I=C.return,I===null)throw Error(s(341));I.lanes|=g,x=I.alternate,x!==null&&(x.lanes|=g),HC(I,g,l),I=null}else I=C.child;if(I!==null)I.return=C;else for(I=C;I!==null;){if(I===l){I=null;break}if(C=I.sibling,C!==null){C.return=I.return,I=C;break}I=I.return}C=I}}function rd(l,u,g,m){l=null;for(var C=u,x=!1;C!==null;){if(!x){if((C.flags&524288)!==0)x=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var I=C.alternate;if(I===null)throw Error(s(387));if(I=I.memoizedProps,I!==null){var k=C.type;sn(C.pendingProps.value,I.value)||(l!==null?l.push(k):l=[k])}}else if(C===be.current){if(I=C.alternate,I===null)throw Error(s(387));I.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(Nd):l=[Nd])}C=C.return}l!==null&&VC(u,l,g,m),u.flags|=262144}function vf(l){for(l=l.firstContext;l!==null;){if(!sn(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Ll(l){Il=l,yr=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function ms(l){return OR(Il,l)}function yf(l,u){return Il===null&&Ll(l),OR(l,u)}function OR(l,u){var g=u._currentValue;if(u={context:u,memoizedValue:g,next:null},yr===null){if(l===null)throw Error(s(308));yr=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else yr=yr.next=u;return g}var YB=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(g,m){l.push(m)}};this.abort=function(){u.aborted=!0,l.forEach(function(g){return g()})}},KB=e.unstable_scheduleCallback,$B=e.unstable_NormalPriority,Pi={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _C(){return{controller:new YB,data:new Map,refCount:0}}function ad(l){l.refCount--,l.refCount===0&&KB($B,function(){l.controller.abort()})}var ld=null,WC=0,au=0,lu=null;function ZB(l,u){if(ld===null){var g=ld=[];WC=0,au=US(),lu={status:"pending",value:void 0,then:function(m){g.push(m)}}}return WC++,u.then(GR,GR),u}function GR(){if(--WC===0&&ld!==null){lu!==null&&(lu.status="fulfilled");var l=ld;ld=null,au=0,lu=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function qB(l,u){var g=[],m={status:"pending",value:null,reason:null,then:function(C){g.push(C)}};return l.then(function(){m.status="fulfilled",m.value=u;for(var C=0;C<g.length;C++)(0,g[C])(u)},function(C){for(m.status="rejected",m.reason=C,C=0;C<g.length;C++)(0,g[C])(void 0)}),m}var BR=H.S;H.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&ZB(l,u),BR!==null&&BR(l,u)};var Fl=W(null);function jC(){var l=Fl.current;return l!==null?l:Bt.pooledCache}function Cf(l,u){u===null?X(Fl,Fl.current):X(Fl,u.pool)}function zR(){var l=jC();return l===null?null:{parent:Pi._currentValue,pool:l}}var cd=Error(s(460)),HR=Error(s(474)),Sf=Error(s(542)),UC={then:function(){}};function VR(l){return l=l.status,l==="fulfilled"||l==="rejected"}function bf(){}function _R(l,u,g){switch(g=l[g],g===void 0?l.push(u):g!==u&&(u.then(bf,bf),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,jR(l),l;default:if(typeof u.status=="string")u.then(bf,bf);else{if(l=Bt,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=u,l.status="pending",l.then(function(m){if(u.status==="pending"){var C=u;C.status="fulfilled",C.value=m}},function(m){if(u.status==="pending"){var C=u;C.status="rejected",C.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,jR(l),l}throw ud=u,cd}}var ud=null;function WR(){if(ud===null)throw Error(s(459));var l=ud;return ud=null,l}function jR(l){if(l===cd||l===Sf)throw Error(s(483))}var da=!1;function YC(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function KC(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ga(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function pa(l,u,g){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(Dt&2)!==0){var C=m.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),m.pending=u,u=gf(l),IR(l,null,g),u}return df(l,m,u,g),gf(l)}function hd(l,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var m=u.lanes;m&=l.pendingLanes,g|=m,u.lanes=g,GD(l,g)}}function $C(l,u){var g=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var C=null,x=null;if(g=g.firstBaseUpdate,g!==null){do{var I={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};x===null?C=x=I:x=x.next=I,g=g.next}while(g!==null);x===null?C=x=u:x=x.next=u}else C=x=u;g={baseState:m.baseState,firstBaseUpdate:C,lastBaseUpdate:x,shared:m.shared,callbacks:m.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=u:l.next=u,g.lastBaseUpdate=u}var ZC=!1;function dd(){if(ZC){var l=lu;if(l!==null)throw l}}function gd(l,u,g,m){ZC=!1;var C=l.updateQueue;da=!1;var x=C.firstBaseUpdate,I=C.lastBaseUpdate,k=C.shared.pending;if(k!==null){C.shared.pending=null;var z=k,$=z.next;z.next=null,I===null?x=$:I.next=$,I=z;var oe=l.alternate;oe!==null&&(oe=oe.updateQueue,k=oe.lastBaseUpdate,k!==I&&(k===null?oe.firstBaseUpdate=$:k.next=$,oe.lastBaseUpdate=z))}if(x!==null){var ce=C.baseState;I=0,oe=$=z=null,k=x;do{var Q=k.lane&-536870913,J=Q!==k.lane;if(J?(rt&Q)===Q:(m&Q)===Q){Q!==0&&Q===au&&(ZC=!0),oe!==null&&(oe=oe.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var He=l,ke=k;Q=u;var Ft=g;switch(ke.tag){case 1:if(He=ke.payload,typeof He=="function"){ce=He.call(Ft,ce,Q);break e}ce=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=ke.payload,Q=typeof He=="function"?He.call(Ft,ce,Q):He,Q==null)break e;ce=d({},ce,Q);break e;case 2:da=!0}}Q=k.callback,Q!==null&&(l.flags|=64,J&&(l.flags|=8192),J=C.callbacks,J===null?C.callbacks=[Q]:J.push(Q))}else J={lane:Q,tag:k.tag,payload:k.payload,callback:k.callback,next:null},oe===null?($=oe=J,z=ce):oe=oe.next=J,I|=Q;if(k=k.next,k===null){if(k=C.shared.pending,k===null)break;J=k,k=J.next,J.next=null,C.lastBaseUpdate=J,C.shared.pending=null}}while(!0);oe===null&&(z=ce),C.baseState=z,C.firstBaseUpdate=$,C.lastBaseUpdate=oe,x===null&&(C.shared.lanes=0),wa|=I,l.lanes=I,l.memoizedState=ce}}function UR(l,u){if(typeof l!="function")throw Error(s(191,l));l.call(u)}function YR(l,u){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)UR(g[l],u)}var cu=W(null),wf=W(0);function KR(l,u){l=Rr,X(wf,l),X(cu,u),Rr=l|u.baseLanes}function qC(){X(wf,Rr),X(cu,cu.current)}function XC(){Rr=wf.current,Y(cu),Y(wf)}var fa=0,Ze=null,It=null,Ri=null,xf=!1,uu=!1,Pl=!1,Mf=0,pd=0,hu=null,XB=0;function yi(){throw Error(s(321))}function QC(l,u){if(u===null)return!1;for(var g=0;g<u.length&&g<l.length;g++)if(!sn(l[g],u[g]))return!1;return!0}function JC(l,u,g,m,C,x){return fa=x,Ze=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,H.H=l===null||l.memoizedState===null?IA:LA,Pl=!1,x=g(m,C),Pl=!1,uu&&(x=ZR(u,g,m,C)),$R(l),x}function $R(l){H.H=If;var u=It!==null&&It.next!==null;if(fa=0,Ri=It=Ze=null,xf=!1,pd=0,hu=null,u)throw Error(s(300));l===null||ji||(l=l.dependencies,l!==null&&vf(l)&&(ji=!0))}function ZR(l,u,g,m){Ze=l;var C=0;do{if(uu&&(hu=null),pd=0,uu=!1,25<=C)throw Error(s(301));if(C+=1,Ri=It=null,l.updateQueue!=null){var x=l.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}H.H=nz,x=u(g,m)}while(uu);return x}function QB(){var l=H.H,u=l.useState()[0];return u=typeof u.then=="function"?fd(u):u,l=l.useState()[0],(It!==null?It.memoizedState:null)!==l&&(Ze.flags|=1024),u}function eS(){var l=Mf!==0;return Mf=0,l}function tS(l,u,g){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~g}function iS(l){if(xf){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}xf=!1}fa=0,Ri=It=Ze=null,uu=!1,pd=Mf=0,hu=null}function Ws(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ri===null?Ze.memoizedState=Ri=l:Ri=Ri.next=l,Ri}function Ai(){if(It===null){var l=Ze.alternate;l=l!==null?l.memoizedState:null}else l=It.next;var u=Ri===null?Ze.memoizedState:Ri.next;if(u!==null)Ri=u,It=l;else{if(l===null)throw Ze.alternate===null?Error(s(467)):Error(s(310));It=l,l={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},Ri===null?Ze.memoizedState=Ri=l:Ri=Ri.next=l}return Ri}function sS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fd(l){var u=pd;return pd+=1,hu===null&&(hu=[]),l=_R(hu,l,u),u=Ze,(Ri===null?u.memoizedState:Ri.next)===null&&(u=u.alternate,H.H=u===null||u.memoizedState===null?IA:LA),l}function Df(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return fd(l);if(l.$$typeof===R)return ms(l)}throw Error(s(438,String(l)))}function nS(l){var u=null,g=Ze.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var m=Ze.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(C){return C.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=sS(),Ze.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(l),m=0;m<l;m++)g[m]=B;return u.index++,g}function Sr(l,u){return typeof u=="function"?u(l):u}function Rf(l){var u=Ai();return oS(u,It,l)}function oS(l,u,g){var m=l.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=g;var C=l.baseQueue,x=m.pending;if(x!==null){if(C!==null){var I=C.next;C.next=x.next,x.next=I}u.baseQueue=C=x,m.pending=null}if(x=l.baseState,C===null)l.memoizedState=x;else{u=C.next;var k=I=null,z=null,$=u,oe=!1;do{var ce=$.lane&-536870913;if(ce!==$.lane?(rt&ce)===ce:(fa&ce)===ce){var Q=$.revertLane;if(Q===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ce===au&&(oe=!0);else if((fa&Q)===Q){$=$.next,Q===au&&(oe=!0);continue}else ce={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},z===null?(k=z=ce,I=x):z=z.next=ce,Ze.lanes|=Q,wa|=Q;ce=$.action,Pl&&g(x,ce),x=$.hasEagerState?$.eagerState:g(x,ce)}else Q={lane:ce,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},z===null?(k=z=Q,I=x):z=z.next=Q,Ze.lanes|=ce,wa|=ce;$=$.next}while($!==null&&$!==u);if(z===null?I=x:z.next=k,!sn(x,l.memoizedState)&&(ji=!0,oe&&(g=lu,g!==null)))throw g;l.memoizedState=x,l.baseState=I,l.baseQueue=z,m.lastRenderedState=x}return C===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function rS(l){var u=Ai(),g=u.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=l;var m=g.dispatch,C=g.pending,x=u.memoizedState;if(C!==null){g.pending=null;var I=C=C.next;do x=l(x,I.action),I=I.next;while(I!==C);sn(x,u.memoizedState)||(ji=!0),u.memoizedState=x,u.baseQueue===null&&(u.baseState=x),g.lastRenderedState=x}return[x,m]}function qR(l,u,g){var m=Ze,C=Ai(),x=vt;if(x){if(g===void 0)throw Error(s(407));g=g()}else g=u();var I=!sn((It||C).memoizedState,g);I&&(C.memoizedState=g,ji=!0),C=C.queue;var k=JR.bind(null,m,C,l);if(md(2048,8,k,[l]),C.getSnapshot!==u||I||Ri!==null&&Ri.memoizedState.tag&1){if(m.flags|=2048,du(9,Af(),QR.bind(null,m,C,g,u),null),Bt===null)throw Error(s(349));x||(fa&124)!==0||XR(m,u,g)}return g}function XR(l,u,g){l.flags|=16384,l={getSnapshot:u,value:g},u=Ze.updateQueue,u===null?(u=sS(),Ze.updateQueue=u,u.stores=[l]):(g=u.stores,g===null?u.stores=[l]:g.push(l))}function QR(l,u,g,m){u.value=g,u.getSnapshot=m,eA(u)&&tA(l)}function JR(l,u,g){return g(function(){eA(u)&&tA(l)})}function eA(l){var u=l.getSnapshot;l=l.value;try{var g=u();return!sn(l,g)}catch{return!0}}function tA(l){var u=su(l,2);u!==null&&cn(u,l,2)}function aS(l){var u=Ws();if(typeof l=="function"){var g=l;if(l=g(),Pl){Eo(!0);try{g()}finally{Eo(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:l},u}function iA(l,u,g,m){return l.baseState=g,oS(l,It,typeof m=="function"?m:Sr)}function JB(l,u,g,m,C){if(Tf(l))throw Error(s(485));if(l=u.action,l!==null){var x={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){x.listeners.push(I)}};H.T!==null?g(!0):x.isTransition=!1,m(x),g=u.pending,g===null?(x.next=u.pending=x,sA(u,x)):(x.next=g.next,u.pending=g.next=x)}}function sA(l,u){var g=u.action,m=u.payload,C=l.state;if(u.isTransition){var x=H.T,I={};H.T=I;try{var k=g(C,m),z=H.S;z!==null&&z(I,k),nA(l,u,k)}catch($){lS(l,u,$)}finally{H.T=x}}else try{x=g(C,m),nA(l,u,x)}catch($){lS(l,u,$)}}function nA(l,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){oA(l,u,m)},function(m){return lS(l,u,m)}):oA(l,u,g)}function oA(l,u,g){u.status="fulfilled",u.value=g,rA(u),l.state=g,u=l.pending,u!==null&&(g=u.next,g===u?l.pending=null:(g=g.next,u.next=g,sA(l,g)))}function lS(l,u,g){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=g,rA(u),u=u.next;while(u!==m)}l.action=null}function rA(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function aA(l,u){return u}function lA(l,u){if(vt){var g=Bt.formState;if(g!==null){e:{var m=Ze;if(vt){if(ci){t:{for(var C=ci,x=To;C.nodeType!==8;){if(!x){C=null;break t}if(C=io(C.nextSibling),C===null){C=null;break t}}x=C.data,C=x==="F!"||x==="F"?C:null}if(C){ci=io(C.nextSibling),m=C.data==="F!";break e}}Tl(m)}m=!1}m&&(u=g[0])}}return g=Ws(),g.memoizedState=g.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:aA,lastRenderedState:u},g.queue=m,g=AA.bind(null,Ze,m),m.dispatch=g,m=aS(!1),x=gS.bind(null,Ze,!1,m.queue),m=Ws(),C={state:u,dispatch:null,action:l,pending:null},m.queue=C,g=JB.bind(null,Ze,C,x,g),C.dispatch=g,m.memoizedState=l,[u,g,!1]}function cA(l){var u=Ai();return uA(u,It,l)}function uA(l,u,g){if(u=oS(l,u,aA)[0],l=Rf(Sr)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=fd(u)}catch(I){throw I===cd?Sf:I}else m=u;u=Ai();var C=u.queue,x=C.dispatch;return g!==u.memoizedState&&(Ze.flags|=2048,du(9,Af(),ez.bind(null,C,g),null)),[m,x,l]}function ez(l,u){l.action=u}function hA(l){var u=Ai(),g=It;if(g!==null)return uA(u,g,l);Ai(),u=u.memoizedState,g=Ai();var m=g.queue.dispatch;return g.memoizedState=l,[u,m,!1]}function du(l,u,g,m){return l={tag:l,create:g,deps:m,inst:u,next:null},u=Ze.updateQueue,u===null&&(u=sS(),Ze.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=l.next=l:(m=g.next,g.next=l,l.next=m,u.lastEffect=l),l}function Af(){return{destroy:void 0,resource:void 0}}function dA(){return Ai().memoizedState}function Ef(l,u,g,m){var C=Ws();m=m===void 0?null:m,Ze.flags|=l,C.memoizedState=du(1|u,Af(),g,m)}function md(l,u,g,m){var C=Ai();m=m===void 0?null:m;var x=C.memoizedState.inst;It!==null&&m!==null&&QC(m,It.memoizedState.deps)?C.memoizedState=du(u,x,g,m):(Ze.flags|=l,C.memoizedState=du(1|u,x,g,m))}function gA(l,u){Ef(8390656,8,l,u)}function pA(l,u){md(2048,8,l,u)}function fA(l,u){return md(4,2,l,u)}function mA(l,u){return md(4,4,l,u)}function vA(l,u){if(typeof u=="function"){l=l();var g=u(l);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function yA(l,u,g){g=g!=null?g.concat([l]):null,md(4,4,vA.bind(null,u,l),g)}function cS(){}function CA(l,u){var g=Ai();u=u===void 0?null:u;var m=g.memoizedState;return u!==null&&QC(u,m[1])?m[0]:(g.memoizedState=[l,u],l)}function SA(l,u){var g=Ai();u=u===void 0?null:u;var m=g.memoizedState;if(u!==null&&QC(u,m[1]))return m[0];if(m=l(),Pl){Eo(!0);try{l()}finally{Eo(!1)}}return g.memoizedState=[m,u],m}function uS(l,u,g){return g===void 0||(fa&1073741824)!==0?l.memoizedState=u:(l.memoizedState=g,l=xE(),Ze.lanes|=l,wa|=l,g)}function bA(l,u,g,m){return sn(g,u)?g:cu.current!==null?(l=uS(l,g,m),sn(l,u)||(ji=!0),l):(fa&42)===0?(ji=!0,l.memoizedState=g):(l=xE(),Ze.lanes|=l,wa|=l,u)}function wA(l,u,g,m,C){var x=q.p;q.p=x!==0&&8>x?x:8;var I=H.T,k={};H.T=k,gS(l,!1,u,g);try{var z=C(),$=H.S;if($!==null&&$(k,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var oe=qB(z,m);vd(l,u,oe,ln(l))}else vd(l,u,m,ln(l))}catch(ce){vd(l,u,{then:function(){},status:"rejected",reason:ce},ln())}finally{q.p=x,H.T=I}}function tz(){}function hS(l,u,g,m){if(l.tag!==5)throw Error(s(476));var C=xA(l).queue;wA(l,C,u,ie,g===null?tz:function(){return MA(l),g(m)})}function xA(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:ie},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sr,lastRenderedState:g},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function MA(l){var u=xA(l).next.queue;vd(l,u,{},ln())}function dS(){return ms(Nd)}function DA(){return Ai().memoizedState}function RA(){return Ai().memoizedState}function iz(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var g=ln();l=ga(g);var m=pa(u,l,g);m!==null&&(cn(m,u,g),hd(m,u,g)),u={cache:_C()},l.payload=u;return}u=u.return}}function sz(l,u,g){var m=ln();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},Tf(l)?EA(u,g):(g=FC(l,u,g,m),g!==null&&(cn(g,l,m),TA(g,u,m)))}function AA(l,u,g){var m=ln();vd(l,u,g,m)}function vd(l,u,g,m){var C={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(Tf(l))EA(u,C);else{var x=l.alternate;if(l.lanes===0&&(x===null||x.lanes===0)&&(x=u.lastRenderedReducer,x!==null))try{var I=u.lastRenderedState,k=x(I,g);if(C.hasEagerState=!0,C.eagerState=k,sn(k,I))return df(l,u,C,0),Bt===null&&hf(),!1}catch{}finally{}if(g=FC(l,u,C,m),g!==null)return cn(g,l,m),TA(g,u,m),!0}return!1}function gS(l,u,g,m){if(m={lane:2,revertLane:US(),action:m,hasEagerState:!1,eagerState:null,next:null},Tf(l)){if(u)throw Error(s(479))}else u=FC(l,g,m,2),u!==null&&cn(u,l,2)}function Tf(l){var u=l.alternate;return l===Ze||u!==null&&u===Ze}function EA(l,u){uu=xf=!0;var g=l.pending;g===null?u.next=u:(u.next=g.next,g.next=u),l.pending=u}function TA(l,u,g){if((g&4194048)!==0){var m=u.lanes;m&=l.pendingLanes,g|=m,u.lanes=g,GD(l,g)}}var If={readContext:ms,use:Df,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useLayoutEffect:yi,useInsertionEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useSyncExternalStore:yi,useId:yi,useHostTransitionStatus:yi,useFormState:yi,useActionState:yi,useOptimistic:yi,useMemoCache:yi,useCacheRefresh:yi},IA={readContext:ms,use:Df,useCallback:function(l,u){return Ws().memoizedState=[l,u===void 0?null:u],l},useContext:ms,useEffect:gA,useImperativeHandle:function(l,u,g){g=g!=null?g.concat([l]):null,Ef(4194308,4,vA.bind(null,u,l),g)},useLayoutEffect:function(l,u){return Ef(4194308,4,l,u)},useInsertionEffect:function(l,u){Ef(4,2,l,u)},useMemo:function(l,u){var g=Ws();u=u===void 0?null:u;var m=l();if(Pl){Eo(!0);try{l()}finally{Eo(!1)}}return g.memoizedState=[m,u],m},useReducer:function(l,u,g){var m=Ws();if(g!==void 0){var C=g(u);if(Pl){Eo(!0);try{g(u)}finally{Eo(!1)}}}else C=u;return m.memoizedState=m.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},m.queue=l,l=l.dispatch=sz.bind(null,Ze,l),[m.memoizedState,l]},useRef:function(l){var u=Ws();return l={current:l},u.memoizedState=l},useState:function(l){l=aS(l);var u=l.queue,g=AA.bind(null,Ze,u);return u.dispatch=g,[l.memoizedState,g]},useDebugValue:cS,useDeferredValue:function(l,u){var g=Ws();return uS(g,l,u)},useTransition:function(){var l=aS(!1);return l=wA.bind(null,Ze,l.queue,!0,!1),Ws().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,g){var m=Ze,C=Ws();if(vt){if(g===void 0)throw Error(s(407));g=g()}else{if(g=u(),Bt===null)throw Error(s(349));(rt&124)!==0||XR(m,u,g)}C.memoizedState=g;var x={value:g,getSnapshot:u};return C.queue=x,gA(JR.bind(null,m,x,l),[l]),m.flags|=2048,du(9,Af(),QR.bind(null,m,x,g,u),null),g},useId:function(){var l=Ws(),u=Bt.identifierPrefix;if(vt){var g=vr,m=mr;g=(m&~(1<<32-tn(m)-1)).toString(32)+g,u="«"+u+"R"+g,g=Mf++,0<g&&(u+="H"+g.toString(32)),u+="»"}else g=XB++,u="«"+u+"r"+g.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:dS,useFormState:lA,useActionState:lA,useOptimistic:function(l){var u=Ws();u.memoizedState=u.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=gS.bind(null,Ze,!0,g),g.dispatch=u,[l,u]},useMemoCache:nS,useCacheRefresh:function(){return Ws().memoizedState=iz.bind(null,Ze)}},LA={readContext:ms,use:Df,useCallback:CA,useContext:ms,useEffect:pA,useImperativeHandle:yA,useInsertionEffect:fA,useLayoutEffect:mA,useMemo:SA,useReducer:Rf,useRef:dA,useState:function(){return Rf(Sr)},useDebugValue:cS,useDeferredValue:function(l,u){var g=Ai();return bA(g,It.memoizedState,l,u)},useTransition:function(){var l=Rf(Sr)[0],u=Ai().memoizedState;return[typeof l=="boolean"?l:fd(l),u]},useSyncExternalStore:qR,useId:DA,useHostTransitionStatus:dS,useFormState:cA,useActionState:cA,useOptimistic:function(l,u){var g=Ai();return iA(g,It,l,u)},useMemoCache:nS,useCacheRefresh:RA},nz={readContext:ms,use:Df,useCallback:CA,useContext:ms,useEffect:pA,useImperativeHandle:yA,useInsertionEffect:fA,useLayoutEffect:mA,useMemo:SA,useReducer:rS,useRef:dA,useState:function(){return rS(Sr)},useDebugValue:cS,useDeferredValue:function(l,u){var g=Ai();return It===null?uS(g,l,u):bA(g,It.memoizedState,l,u)},useTransition:function(){var l=rS(Sr)[0],u=Ai().memoizedState;return[typeof l=="boolean"?l:fd(l),u]},useSyncExternalStore:qR,useId:DA,useHostTransitionStatus:dS,useFormState:hA,useActionState:hA,useOptimistic:function(l,u){var g=Ai();return It!==null?iA(g,It,l,u):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:nS,useCacheRefresh:RA},gu=null,yd=0;function Lf(l){var u=yd;return yd+=1,gu===null&&(gu=[]),_R(gu,l,u)}function Cd(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function Ff(l,u){throw u.$$typeof===p?Error(s(525)):(l=Object.prototype.toString.call(u),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function FA(l){var u=l._init;return u(l._payload)}function PA(l){function u(j,_){if(l){var K=j.deletions;K===null?(j.deletions=[_],j.flags|=16):K.push(_)}}function g(j,_){if(!l)return null;for(;_!==null;)u(j,_),_=_.sibling;return null}function m(j){for(var _=new Map;j!==null;)j.key!==null?_.set(j.key,j):_.set(j.index,j),j=j.sibling;return _}function C(j,_){return j=fr(j,_),j.index=0,j.sibling=null,j}function x(j,_,K){return j.index=K,l?(K=j.alternate,K!==null?(K=K.index,K<_?(j.flags|=67108866,_):K):(j.flags|=67108866,_)):(j.flags|=1048576,_)}function I(j){return l&&j.alternate===null&&(j.flags|=67108866),j}function k(j,_,K,re){return _===null||_.tag!==6?(_=kC(K,j.mode,re),_.return=j,_):(_=C(_,K),_.return=j,_)}function z(j,_,K,re){var Ae=K.type;return Ae===y?oe(j,_,K.props.children,re,K.key):_!==null&&(_.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===N&&FA(Ae)===_.type)?(_=C(_,K.props),Cd(_,K),_.return=j,_):(_=pf(K.type,K.key,K.props,null,j.mode,re),Cd(_,K),_.return=j,_)}function $(j,_,K,re){return _===null||_.tag!==4||_.stateNode.containerInfo!==K.containerInfo||_.stateNode.implementation!==K.implementation?(_=NC(K,j.mode,re),_.return=j,_):(_=C(_,K.children||[]),_.return=j,_)}function oe(j,_,K,re,Ae){return _===null||_.tag!==7?(_=Dl(K,j.mode,re,Ae),_.return=j,_):(_=C(_,K),_.return=j,_)}function ce(j,_,K){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return _=kC(""+_,j.mode,K),_.return=j,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case f:return K=pf(_.type,_.key,_.props,null,j.mode,K),Cd(K,_),K.return=j,K;case v:return _=NC(_,j.mode,K),_.return=j,_;case N:var re=_._init;return _=re(_._payload),ce(j,_,K)}if(Se(_)||U(_))return _=Dl(_,j.mode,K,null),_.return=j,_;if(typeof _.then=="function")return ce(j,Lf(_),K);if(_.$$typeof===R)return ce(j,yf(j,_),K);Ff(j,_)}return null}function Q(j,_,K,re){var Ae=_!==null?_.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ae!==null?null:k(j,_,""+K,re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case f:return K.key===Ae?z(j,_,K,re):null;case v:return K.key===Ae?$(j,_,K,re):null;case N:return Ae=K._init,K=Ae(K._payload),Q(j,_,K,re)}if(Se(K)||U(K))return Ae!==null?null:oe(j,_,K,re,null);if(typeof K.then=="function")return Q(j,_,Lf(K),re);if(K.$$typeof===R)return Q(j,_,yf(j,K),re);Ff(j,K)}return null}function J(j,_,K,re,Ae){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return j=j.get(K)||null,k(_,j,""+re,Ae);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case f:return j=j.get(re.key===null?K:re.key)||null,z(_,j,re,Ae);case v:return j=j.get(re.key===null?K:re.key)||null,$(_,j,re,Ae);case N:var Xe=re._init;return re=Xe(re._payload),J(j,_,K,re,Ae)}if(Se(re)||U(re))return j=j.get(K)||null,oe(_,j,re,Ae,null);if(typeof re.then=="function")return J(j,_,K,Lf(re),Ae);if(re.$$typeof===R)return J(j,_,K,yf(_,re),Ae);Ff(_,re)}return null}function He(j,_,K,re){for(var Ae=null,Xe=null,Ie=_,Oe=_=0,Yi=null;Ie!==null&&Oe<K.length;Oe++){Ie.index>Oe?(Yi=Ie,Ie=null):Yi=Ie.sibling;var ut=Q(j,Ie,K[Oe],re);if(ut===null){Ie===null&&(Ie=Yi);break}l&&Ie&&ut.alternate===null&&u(j,Ie),_=x(ut,_,Oe),Xe===null?Ae=ut:Xe.sibling=ut,Xe=ut,Ie=Yi}if(Oe===K.length)return g(j,Ie),vt&&Al(j,Oe),Ae;if(Ie===null){for(;Oe<K.length;Oe++)Ie=ce(j,K[Oe],re),Ie!==null&&(_=x(Ie,_,Oe),Xe===null?Ae=Ie:Xe.sibling=Ie,Xe=Ie);return vt&&Al(j,Oe),Ae}for(Ie=m(Ie);Oe<K.length;Oe++)Yi=J(Ie,j,Oe,K[Oe],re),Yi!==null&&(l&&Yi.alternate!==null&&Ie.delete(Yi.key===null?Oe:Yi.key),_=x(Yi,_,Oe),Xe===null?Ae=Yi:Xe.sibling=Yi,Xe=Yi);return l&&Ie.forEach(function(La){return u(j,La)}),vt&&Al(j,Oe),Ae}function ke(j,_,K,re){if(K==null)throw Error(s(151));for(var Ae=null,Xe=null,Ie=_,Oe=_=0,Yi=null,ut=K.next();Ie!==null&&!ut.done;Oe++,ut=K.next()){Ie.index>Oe?(Yi=Ie,Ie=null):Yi=Ie.sibling;var La=Q(j,Ie,ut.value,re);if(La===null){Ie===null&&(Ie=Yi);break}l&&Ie&&La.alternate===null&&u(j,Ie),_=x(La,_,Oe),Xe===null?Ae=La:Xe.sibling=La,Xe=La,Ie=Yi}if(ut.done)return g(j,Ie),vt&&Al(j,Oe),Ae;if(Ie===null){for(;!ut.done;Oe++,ut=K.next())ut=ce(j,ut.value,re),ut!==null&&(_=x(ut,_,Oe),Xe===null?Ae=ut:Xe.sibling=ut,Xe=ut);return vt&&Al(j,Oe),Ae}for(Ie=m(Ie);!ut.done;Oe++,ut=K.next())ut=J(Ie,j,Oe,ut.value,re),ut!==null&&(l&&ut.alternate!==null&&Ie.delete(ut.key===null?Oe:ut.key),_=x(ut,_,Oe),Xe===null?Ae=ut:Xe.sibling=ut,Xe=ut);return l&&Ie.forEach(function(oH){return u(j,oH)}),vt&&Al(j,Oe),Ae}function Ft(j,_,K,re){if(typeof K=="object"&&K!==null&&K.type===y&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case f:e:{for(var Ae=K.key;_!==null;){if(_.key===Ae){if(Ae=K.type,Ae===y){if(_.tag===7){g(j,_.sibling),re=C(_,K.props.children),re.return=j,j=re;break e}}else if(_.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===N&&FA(Ae)===_.type){g(j,_.sibling),re=C(_,K.props),Cd(re,K),re.return=j,j=re;break e}g(j,_);break}else u(j,_);_=_.sibling}K.type===y?(re=Dl(K.props.children,j.mode,re,K.key),re.return=j,j=re):(re=pf(K.type,K.key,K.props,null,j.mode,re),Cd(re,K),re.return=j,j=re)}return I(j);case v:e:{for(Ae=K.key;_!==null;){if(_.key===Ae)if(_.tag===4&&_.stateNode.containerInfo===K.containerInfo&&_.stateNode.implementation===K.implementation){g(j,_.sibling),re=C(_,K.children||[]),re.return=j,j=re;break e}else{g(j,_);break}else u(j,_);_=_.sibling}re=NC(K,j.mode,re),re.return=j,j=re}return I(j);case N:return Ae=K._init,K=Ae(K._payload),Ft(j,_,K,re)}if(Se(K))return He(j,_,K,re);if(U(K)){if(Ae=U(K),typeof Ae!="function")throw Error(s(150));return K=Ae.call(K),ke(j,_,K,re)}if(typeof K.then=="function")return Ft(j,_,Lf(K),re);if(K.$$typeof===R)return Ft(j,_,yf(j,K),re);Ff(j,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,_!==null&&_.tag===6?(g(j,_.sibling),re=C(_,K),re.return=j,j=re):(g(j,_),re=kC(K,j.mode,re),re.return=j,j=re),I(j)):g(j,_)}return function(j,_,K,re){try{yd=0;var Ae=Ft(j,_,K,re);return gu=null,Ae}catch(Ie){if(Ie===cd||Ie===Sf)throw Ie;var Xe=nn(29,Ie,null,j.mode);return Xe.lanes=re,Xe.return=j,Xe}finally{}}}var pu=PA(!0),kA=PA(!1),Ln=W(null),Io=null;function ma(l){var u=l.alternate;X(ki,ki.current&1),X(Ln,l),Io===null&&(u===null||cu.current!==null||u.memoizedState!==null)&&(Io=l)}function NA(l){if(l.tag===22){if(X(ki,ki.current),X(Ln,l),Io===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(Io=l)}}else va()}function va(){X(ki,ki.current),X(Ln,Ln.current)}function br(l){Y(Ln),Io===l&&(Io=null),Y(ki)}var ki=W(0);function Pf(l){for(var u=l;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||sb(g)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function pS(l,u,g,m){u=l.memoizedState,g=g(m,u),g=g==null?u:d({},u,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var fS={enqueueSetState:function(l,u,g){l=l._reactInternals;var m=ln(),C=ga(m);C.payload=u,g!=null&&(C.callback=g),u=pa(l,C,m),u!==null&&(cn(u,l,m),hd(u,l,m))},enqueueReplaceState:function(l,u,g){l=l._reactInternals;var m=ln(),C=ga(m);C.tag=1,C.payload=u,g!=null&&(C.callback=g),u=pa(l,C,m),u!==null&&(cn(u,l,m),hd(u,l,m))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var g=ln(),m=ga(g);m.tag=2,u!=null&&(m.callback=u),u=pa(l,m,g),u!==null&&(cn(u,l,g),hd(u,l,g))}};function OA(l,u,g,m,C,x,I){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,x,I):u.prototype&&u.prototype.isPureReactComponent?!td(g,m)||!td(C,x):!0}function GA(l,u,g,m){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,m),u.state!==l&&fS.enqueueReplaceState(u,u.state,null)}function kl(l,u){var g=u;if("ref"in u){g={};for(var m in u)m!=="ref"&&(g[m]=u[m])}if(l=l.defaultProps){g===u&&(g=d({},g));for(var C in l)g[C]===void 0&&(g[C]=l[C])}return g}var kf=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function BA(l){kf(l)}function zA(l){console.error(l)}function HA(l){kf(l)}function Nf(l,u){try{var g=l.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function VA(l,u,g){try{var m=l.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function mS(l,u,g){return g=ga(g),g.tag=3,g.payload={element:null},g.callback=function(){Nf(l,u)},g}function _A(l){return l=ga(l),l.tag=3,l}function WA(l,u,g,m){var C=g.type.getDerivedStateFromError;if(typeof C=="function"){var x=m.value;l.payload=function(){return C(x)},l.callback=function(){VA(u,g,m)}}var I=g.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(l.callback=function(){VA(u,g,m),typeof C!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var k=m.stack;this.componentDidCatch(m.value,{componentStack:k!==null?k:""})})}function oz(l,u,g,m,C){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=g.alternate,u!==null&&rd(u,g,C,!0),g=Ln.current,g!==null){switch(g.tag){case 13:return Io===null?HS():g.alternate===null&&ui===0&&(ui=3),g.flags&=-257,g.flags|=65536,g.lanes=C,m===UC?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([m]):u.add(m),_S(l,m,C)),!1;case 22:return g.flags|=65536,m===UC?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([m]):g.add(m)),_S(l,m,C)),!1}throw Error(s(435,g.tag))}return _S(l,m,C),HS(),!1}if(vt)return u=Ln.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=C,m!==BC&&(l=Error(s(422),{cause:m}),od(An(l,g)))):(m!==BC&&(u=Error(s(423),{cause:m}),od(An(u,g))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,m=An(m,g),C=mS(l.stateNode,m,C),$C(l,C),ui!==4&&(ui=2)),!1;var x=Error(s(520),{cause:m});if(x=An(x,g),Rd===null?Rd=[x]:Rd.push(x),ui!==4&&(ui=2),u===null)return!0;m=An(m,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,l=C&-C,g.lanes|=l,l=mS(g.stateNode,m,l),$C(g,l),!1;case 1:if(u=g.type,x=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(xa===null||!xa.has(x))))return g.flags|=65536,C&=-C,g.lanes|=C,C=_A(C),WA(C,l,g,m),$C(g,C),!1}g=g.return}while(g!==null);return!1}var jA=Error(s(461)),ji=!1;function ts(l,u,g,m){u.child=l===null?kA(u,null,g,m):pu(u,l.child,g,m)}function UA(l,u,g,m,C){g=g.render;var x=u.ref;if("ref"in m){var I={};for(var k in m)k!=="ref"&&(I[k]=m[k])}else I=m;return Ll(u),m=JC(l,u,g,I,x,C),k=eS(),l!==null&&!ji?(tS(l,u,C),wr(l,u,C)):(vt&&k&&OC(u),u.flags|=1,ts(l,u,m,C),u.child)}function YA(l,u,g,m,C){if(l===null){var x=g.type;return typeof x=="function"&&!PC(x)&&x.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=x,KA(l,u,x,m,C)):(l=pf(g.type,null,m,u,u.mode,C),l.ref=u.ref,l.return=u,u.child=l)}if(x=l.child,!MS(l,C)){var I=x.memoizedProps;if(g=g.compare,g=g!==null?g:td,g(I,m)&&l.ref===u.ref)return wr(l,u,C)}return u.flags|=1,l=fr(x,m),l.ref=u.ref,l.return=u,u.child=l}function KA(l,u,g,m,C){if(l!==null){var x=l.memoizedProps;if(td(x,m)&&l.ref===u.ref)if(ji=!1,u.pendingProps=m=x,MS(l,C))(l.flags&131072)!==0&&(ji=!0);else return u.lanes=l.lanes,wr(l,u,C)}return vS(l,u,g,m,C)}function $A(l,u,g){var m=u.pendingProps,C=m.children,x=l!==null?l.memoizedState:null;if(m.mode==="hidden"){if((u.flags&128)!==0){if(m=x!==null?x.baseLanes|g:g,l!==null){for(C=u.child=l.child,x=0;C!==null;)x=x|C.lanes|C.childLanes,C=C.sibling;u.childLanes=x&~m}else u.childLanes=0,u.child=null;return ZA(l,u,m,g)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&Cf(u,x!==null?x.cachePool:null),x!==null?KR(u,x):qC(),NA(u);else return u.lanes=u.childLanes=536870912,ZA(l,u,x!==null?x.baseLanes|g:g,g)}else x!==null?(Cf(u,x.cachePool),KR(u,x),va(),u.memoizedState=null):(l!==null&&Cf(u,null),qC(),va());return ts(l,u,C,g),u.child}function ZA(l,u,g,m){var C=jC();return C=C===null?null:{parent:Pi._currentValue,pool:C},u.memoizedState={baseLanes:g,cachePool:C},l!==null&&Cf(u,null),qC(),NA(u),l!==null&&rd(l,u,m,!0),null}function Of(l,u){var g=u.ref;if(g===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(s(284));(l===null||l.ref!==g)&&(u.flags|=4194816)}}function vS(l,u,g,m,C){return Ll(u),g=JC(l,u,g,m,void 0,C),m=eS(),l!==null&&!ji?(tS(l,u,C),wr(l,u,C)):(vt&&m&&OC(u),u.flags|=1,ts(l,u,g,C),u.child)}function qA(l,u,g,m,C,x){return Ll(u),u.updateQueue=null,g=ZR(u,m,g,C),$R(l),m=eS(),l!==null&&!ji?(tS(l,u,x),wr(l,u,x)):(vt&&m&&OC(u),u.flags|=1,ts(l,u,g,x),u.child)}function XA(l,u,g,m,C){if(Ll(u),u.stateNode===null){var x=nu,I=g.contextType;typeof I=="object"&&I!==null&&(x=ms(I)),x=new g(m,x),u.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=fS,u.stateNode=x,x._reactInternals=u,x=u.stateNode,x.props=m,x.state=u.memoizedState,x.refs={},YC(u),I=g.contextType,x.context=typeof I=="object"&&I!==null?ms(I):nu,x.state=u.memoizedState,I=g.getDerivedStateFromProps,typeof I=="function"&&(pS(u,g,I,m),x.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(I=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),I!==x.state&&fS.enqueueReplaceState(x,x.state,null),gd(u,m,x,C),dd(),x.state=u.memoizedState),typeof x.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(l===null){x=u.stateNode;var k=u.memoizedProps,z=kl(g,k);x.props=z;var $=x.context,oe=g.contextType;I=nu,typeof oe=="object"&&oe!==null&&(I=ms(oe));var ce=g.getDerivedStateFromProps;oe=typeof ce=="function"||typeof x.getSnapshotBeforeUpdate=="function",k=u.pendingProps!==k,oe||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(k||$!==I)&&GA(u,x,m,I),da=!1;var Q=u.memoizedState;x.state=Q,gd(u,m,x,C),dd(),$=u.memoizedState,k||Q!==$||da?(typeof ce=="function"&&(pS(u,g,ce,m),$=u.memoizedState),(z=da||OA(u,g,z,m,Q,$,I))?(oe||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(u.flags|=4194308)):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=$),x.props=m,x.state=$,x.context=I,m=z):(typeof x.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{x=u.stateNode,KC(l,u),I=u.memoizedProps,oe=kl(g,I),x.props=oe,ce=u.pendingProps,Q=x.context,$=g.contextType,z=nu,typeof $=="object"&&$!==null&&(z=ms($)),k=g.getDerivedStateFromProps,($=typeof k=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(I!==ce||Q!==z)&&GA(u,x,m,z),da=!1,Q=u.memoizedState,x.state=Q,gd(u,m,x,C),dd();var J=u.memoizedState;I!==ce||Q!==J||da||l!==null&&l.dependencies!==null&&vf(l.dependencies)?(typeof k=="function"&&(pS(u,g,k,m),J=u.memoizedState),(oe=da||OA(u,g,oe,m,Q,J,z)||l!==null&&l.dependencies!==null&&vf(l.dependencies))?($||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(m,J,z),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(m,J,z)),typeof x.componentDidUpdate=="function"&&(u.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof x.componentDidUpdate!="function"||I===l.memoizedProps&&Q===l.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||I===l.memoizedProps&&Q===l.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=J),x.props=m,x.state=J,x.context=z,m=oe):(typeof x.componentDidUpdate!="function"||I===l.memoizedProps&&Q===l.memoizedState||(u.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||I===l.memoizedProps&&Q===l.memoizedState||(u.flags|=1024),m=!1)}return x=m,Of(l,u),m=(u.flags&128)!==0,x||m?(x=u.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:x.render(),u.flags|=1,l!==null&&m?(u.child=pu(u,l.child,null,C),u.child=pu(u,null,g,C)):ts(l,u,g,C),u.memoizedState=x.state,l=u.child):l=wr(l,u,C),l}function QA(l,u,g,m){return nd(),u.flags|=256,ts(l,u,g,m),u.child}var yS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function CS(l){return{baseLanes:l,cachePool:zR()}}function SS(l,u,g){return l=l!==null?l.childLanes&~g:0,u&&(l|=Fn),l}function JA(l,u,g){var m=u.pendingProps,C=!1,x=(u.flags&128)!==0,I;if((I=x)||(I=l!==null&&l.memoizedState===null?!1:(ki.current&2)!==0),I&&(C=!0,u.flags&=-129),I=(u.flags&32)!==0,u.flags&=-33,l===null){if(vt){if(C?ma(u):va(),vt){var k=ci,z;if(z=k){e:{for(z=k,k=To;z.nodeType!==8;){if(!k){k=null;break e}if(z=io(z.nextSibling),z===null){k=null;break e}}k=z}k!==null?(u.memoizedState={dehydrated:k,treeContext:Rl!==null?{id:mr,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},z=nn(18,null,null,0),z.stateNode=k,z.return=u,u.child=z,Rs=u,ci=null,z=!0):z=!1}z||Tl(u)}if(k=u.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return sb(k)?u.lanes=32:u.lanes=536870912,null;br(u)}return k=m.children,m=m.fallback,C?(va(),C=u.mode,k=Gf({mode:"hidden",children:k},C),m=Dl(m,C,g,null),k.return=u,m.return=u,k.sibling=m,u.child=k,C=u.child,C.memoizedState=CS(g),C.childLanes=SS(l,I,g),u.memoizedState=yS,m):(ma(u),bS(u,k))}if(z=l.memoizedState,z!==null&&(k=z.dehydrated,k!==null)){if(x)u.flags&256?(ma(u),u.flags&=-257,u=wS(l,u,g)):u.memoizedState!==null?(va(),u.child=l.child,u.flags|=128,u=null):(va(),C=m.fallback,k=u.mode,m=Gf({mode:"visible",children:m.children},k),C=Dl(C,k,g,null),C.flags|=2,m.return=u,C.return=u,m.sibling=C,u.child=m,pu(u,l.child,null,g),m=u.child,m.memoizedState=CS(g),m.childLanes=SS(l,I,g),u.memoizedState=yS,u=C);else if(ma(u),sb(k)){if(I=k.nextSibling&&k.nextSibling.dataset,I)var $=I.dgst;I=$,m=Error(s(419)),m.stack="",m.digest=I,od({value:m,source:null,stack:null}),u=wS(l,u,g)}else if(ji||rd(l,u,g,!1),I=(g&l.childLanes)!==0,ji||I){if(I=Bt,I!==null&&(m=g&-g,m=(m&42)!==0?1:nC(m),m=(m&(I.suspendedLanes|g))!==0?0:m,m!==0&&m!==z.retryLane))throw z.retryLane=m,su(l,m),cn(I,l,m),jA;k.data==="$?"||HS(),u=wS(l,u,g)}else k.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=z.treeContext,ci=io(k.nextSibling),Rs=u,vt=!0,El=null,To=!1,l!==null&&(Tn[In++]=mr,Tn[In++]=vr,Tn[In++]=Rl,mr=l.id,vr=l.overflow,Rl=u),u=bS(u,m.children),u.flags|=4096);return u}return C?(va(),C=m.fallback,k=u.mode,z=l.child,$=z.sibling,m=fr(z,{mode:"hidden",children:m.children}),m.subtreeFlags=z.subtreeFlags&65011712,$!==null?C=fr($,C):(C=Dl(C,k,g,null),C.flags|=2),C.return=u,m.return=u,m.sibling=C,u.child=m,m=C,C=u.child,k=l.child.memoizedState,k===null?k=CS(g):(z=k.cachePool,z!==null?($=Pi._currentValue,z=z.parent!==$?{parent:$,pool:$}:z):z=zR(),k={baseLanes:k.baseLanes|g,cachePool:z}),C.memoizedState=k,C.childLanes=SS(l,I,g),u.memoizedState=yS,m):(ma(u),g=l.child,l=g.sibling,g=fr(g,{mode:"visible",children:m.children}),g.return=u,g.sibling=null,l!==null&&(I=u.deletions,I===null?(u.deletions=[l],u.flags|=16):I.push(l)),u.child=g,u.memoizedState=null,g)}function bS(l,u){return u=Gf({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Gf(l,u){return l=nn(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function wS(l,u,g){return pu(u,l.child,null,g),l=bS(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function eE(l,u,g){l.lanes|=u;var m=l.alternate;m!==null&&(m.lanes|=u),HC(l.return,u,g)}function xS(l,u,g,m,C){var x=l.memoizedState;x===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:C}:(x.isBackwards=u,x.rendering=null,x.renderingStartTime=0,x.last=m,x.tail=g,x.tailMode=C)}function tE(l,u,g){var m=u.pendingProps,C=m.revealOrder,x=m.tail;if(ts(l,u,m.children,g),m=ki.current,(m&2)!==0)m=m&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&eE(l,g,u);else if(l.tag===19)eE(l,g,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}m&=1}switch(X(ki,m),C){case"forwards":for(g=u.child,C=null;g!==null;)l=g.alternate,l!==null&&Pf(l)===null&&(C=g),g=g.sibling;g=C,g===null?(C=u.child,u.child=null):(C=g.sibling,g.sibling=null),xS(u,!1,C,g,x);break;case"backwards":for(g=null,C=u.child,u.child=null;C!==null;){if(l=C.alternate,l!==null&&Pf(l)===null){u.child=C;break}l=C.sibling,C.sibling=g,g=C,C=l}xS(u,!0,g,null,x);break;case"together":xS(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function wr(l,u,g){if(l!==null&&(u.dependencies=l.dependencies),wa|=u.lanes,(g&u.childLanes)===0)if(l!==null){if(rd(l,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(s(153));if(u.child!==null){for(l=u.child,g=fr(l,l.pendingProps),u.child=g,g.return=u;l.sibling!==null;)l=l.sibling,g=g.sibling=fr(l,l.pendingProps),g.return=u;g.sibling=null}return u.child}function MS(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&vf(l)))}function rz(l,u,g){switch(u.tag){case 3:ue(u,u.stateNode.containerInfo),ha(u,Pi,l.memoizedState.cache),nd();break;case 27:case 5:we(u);break;case 4:ue(u,u.stateNode.containerInfo);break;case 10:ha(u,u.type,u.memoizedProps.value);break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(ma(u),u.flags|=128,null):(g&u.child.childLanes)!==0?JA(l,u,g):(ma(u),l=wr(l,u,g),l!==null?l.sibling:null);ma(u);break;case 19:var C=(l.flags&128)!==0;if(m=(g&u.childLanes)!==0,m||(rd(l,u,g,!1),m=(g&u.childLanes)!==0),C){if(m)return tE(l,u,g);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),X(ki,ki.current),m)break;return null;case 22:case 23:return u.lanes=0,$A(l,u,g);case 24:ha(u,Pi,l.memoizedState.cache)}return wr(l,u,g)}function iE(l,u,g){if(l!==null)if(l.memoizedProps!==u.pendingProps)ji=!0;else{if(!MS(l,g)&&(u.flags&128)===0)return ji=!1,rz(l,u,g);ji=(l.flags&131072)!==0}else ji=!1,vt&&(u.flags&1048576)!==0&&FR(u,mf,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var m=u.elementType,C=m._init;if(m=C(m._payload),u.type=m,typeof m=="function")PC(m)?(l=kl(m,l),u.tag=1,u=XA(null,u,m,l,g)):(u.tag=0,u=vS(null,u,m,l,g));else{if(m!=null){if(C=m.$$typeof,C===A){u.tag=11,u=UA(null,u,m,l,g);break e}else if(C===P){u.tag=14,u=YA(null,u,m,l,g);break e}}throw u=Ce(m)||m,Error(s(306,u,""))}}return u;case 0:return vS(l,u,u.type,u.pendingProps,g);case 1:return m=u.type,C=kl(m,u.pendingProps),XA(l,u,m,C,g);case 3:e:{if(ue(u,u.stateNode.containerInfo),l===null)throw Error(s(387));m=u.pendingProps;var x=u.memoizedState;C=x.element,KC(l,u),gd(u,m,null,g);var I=u.memoizedState;if(m=I.cache,ha(u,Pi,m),m!==x.cache&&VC(u,[Pi],g,!0),dd(),m=I.element,x.isDehydrated)if(x={element:m,isDehydrated:!1,cache:I.cache},u.updateQueue.baseState=x,u.memoizedState=x,u.flags&256){u=QA(l,u,m,g);break e}else if(m!==C){C=An(Error(s(424)),u),od(C),u=QA(l,u,m,g);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(ci=io(l.firstChild),Rs=u,vt=!0,El=null,To=!0,g=kA(u,null,m,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(nd(),m===C){u=wr(l,u,g);break e}ts(l,u,m,g)}u=u.child}return u;case 26:return Of(l,u),l===null?(g=rT(u.type,null,u.pendingProps,null))?u.memoizedState=g:vt||(g=u.type,l=u.pendingProps,m=Xf(le.current).createElement(g),m[fs]=u,m[Vs]=l,ss(m,g,l),Wi(m),u.stateNode=m):u.memoizedState=rT(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return we(u),l===null&&vt&&(m=u.stateNode=sT(u.type,u.pendingProps,le.current),Rs=u,To=!0,C=ci,Ra(u.type)?(nb=C,ci=io(m.firstChild)):ci=C),ts(l,u,u.pendingProps.children,g),Of(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&vt&&((C=m=ci)&&(m=kz(m,u.type,u.pendingProps,To),m!==null?(u.stateNode=m,Rs=u,ci=io(m.firstChild),To=!1,C=!0):C=!1),C||Tl(u)),we(u),C=u.type,x=u.pendingProps,I=l!==null?l.memoizedProps:null,m=x.children,eb(C,x)?m=null:I!==null&&eb(C,I)&&(u.flags|=32),u.memoizedState!==null&&(C=JC(l,u,QB,null,null,g),Nd._currentValue=C),Of(l,u),ts(l,u,m,g),u.child;case 6:return l===null&&vt&&((l=g=ci)&&(g=Nz(g,u.pendingProps,To),g!==null?(u.stateNode=g,Rs=u,ci=null,l=!0):l=!1),l||Tl(u)),null;case 13:return JA(l,u,g);case 4:return ue(u,u.stateNode.containerInfo),m=u.pendingProps,l===null?u.child=pu(u,null,m,g):ts(l,u,m,g),u.child;case 11:return UA(l,u,u.type,u.pendingProps,g);case 7:return ts(l,u,u.pendingProps,g),u.child;case 8:return ts(l,u,u.pendingProps.children,g),u.child;case 12:return ts(l,u,u.pendingProps.children,g),u.child;case 10:return m=u.pendingProps,ha(u,u.type,m.value),ts(l,u,m.children,g),u.child;case 9:return C=u.type._context,m=u.pendingProps.children,Ll(u),C=ms(C),m=m(C),u.flags|=1,ts(l,u,m,g),u.child;case 14:return YA(l,u,u.type,u.pendingProps,g);case 15:return KA(l,u,u.type,u.pendingProps,g);case 19:return tE(l,u,g);case 31:return m=u.pendingProps,g=u.mode,m={mode:m.mode,children:m.children},l===null?(g=Gf(m,g),g.ref=u.ref,u.child=g,g.return=u,u=g):(g=fr(l.child,m),g.ref=u.ref,u.child=g,g.return=u,u=g),u;case 22:return $A(l,u,g);case 24:return Ll(u),m=ms(Pi),l===null?(C=jC(),C===null&&(C=Bt,x=_C(),C.pooledCache=x,x.refCount++,x!==null&&(C.pooledCacheLanes|=g),C=x),u.memoizedState={parent:m,cache:C},YC(u),ha(u,Pi,C)):((l.lanes&g)!==0&&(KC(l,u),gd(u,null,null,g),dd()),C=l.memoizedState,x=u.memoizedState,C.parent!==m?(C={parent:m,cache:m},u.memoizedState=C,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=C),ha(u,Pi,m)):(m=x.cache,ha(u,Pi,m),m!==C.cache&&VC(u,[Pi],g,!0))),ts(l,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function xr(l){l.flags|=4}function sE(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!hT(u)){if(u=Ln.current,u!==null&&((rt&4194048)===rt?Io!==null:(rt&62914560)!==rt&&(rt&536870912)===0||u!==Io))throw ud=UC,HR;l.flags|=8192}}function Bf(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?ND():536870912,l.lanes|=u,yu|=u)}function Sd(l,u){if(!vt)switch(l.tailMode){case"hidden":u=l.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function qt(l){var u=l.alternate!==null&&l.alternate.child===l.child,g=0,m=0;if(u)for(var C=l.child;C!==null;)g|=C.lanes|C.childLanes,m|=C.subtreeFlags&65011712,m|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)g|=C.lanes|C.childLanes,m|=C.subtreeFlags,m|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=m,l.childLanes=g,u}function az(l,u,g){var m=u.pendingProps;switch(GC(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(u),null;case 1:return qt(u),null;case 3:return g=u.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),Cr(Pi),ae(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(sd(u)?xr(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,NR())),qt(u),null;case 26:return g=u.memoizedState,l===null?(xr(u),g!==null?(qt(u),sE(u,g)):(qt(u),u.flags&=-16777217)):g?g!==l.memoizedState?(xr(u),qt(u),sE(u,g)):(qt(u),u.flags&=-16777217):(l.memoizedProps!==m&&xr(u),qt(u),u.flags&=-16777217),null;case 27:Re(u),g=le.current;var C=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==m&&xr(u);else{if(!m){if(u.stateNode===null)throw Error(s(166));return qt(u),null}l=ee.current,sd(u)?PR(u):(l=sT(C,m,g),u.stateNode=l,xr(u))}return qt(u),null;case 5:if(Re(u),g=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==m&&xr(u);else{if(!m){if(u.stateNode===null)throw Error(s(166));return qt(u),null}if(l=ee.current,sd(u))PR(u);else{switch(C=Xf(le.current),l){case 1:l=C.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=C.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=C.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof m.is=="string"?C.createElement("select",{is:m.is}):C.createElement("select"),m.multiple?l.multiple=!0:m.size&&(l.size=m.size);break;default:l=typeof m.is=="string"?C.createElement(g,{is:m.is}):C.createElement(g)}}l[fs]=u,l[Vs]=m;e:for(C=u.child;C!==null;){if(C.tag===5||C.tag===6)l.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===u)break e;for(;C.sibling===null;){if(C.return===null||C.return===u)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}u.stateNode=l;e:switch(ss(l,g,m),g){case"button":case"input":case"select":case"textarea":l=!!m.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&xr(u)}}return qt(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==m&&xr(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(s(166));if(l=le.current,sd(u)){if(l=u.stateNode,g=u.memoizedProps,m=null,C=Rs,C!==null)switch(C.tag){case 27:case 5:m=C.memoizedProps}l[fs]=u,l=!!(l.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||qE(l.nodeValue,g)),l||Tl(u)}else l=Xf(l).createTextNode(m),l[fs]=u,u.stateNode=l}return qt(u),null;case 13:if(m=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=sd(u),m!==null&&m.dehydrated!==null){if(l===null){if(!C)throw Error(s(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(s(317));C[fs]=u}else nd(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;qt(u),C=!1}else C=NR(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return u.flags&256?(br(u),u):(br(u),null)}if(br(u),(u.flags&128)!==0)return u.lanes=g,u;if(g=m!==null,l=l!==null&&l.memoizedState!==null,g){m=u.child,C=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(C=m.alternate.memoizedState.cachePool.pool);var x=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(x=m.memoizedState.cachePool.pool),x!==C&&(m.flags|=2048)}return g!==l&&g&&(u.child.flags|=8192),Bf(u,u.updateQueue),qt(u),null;case 4:return ae(),l===null&&ZS(u.stateNode.containerInfo),qt(u),null;case 10:return Cr(u.type),qt(u),null;case 19:if(Y(ki),C=u.memoizedState,C===null)return qt(u),null;if(m=(u.flags&128)!==0,x=C.rendering,x===null)if(m)Sd(C,!1);else{if(ui!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(x=Pf(l),x!==null){for(u.flags|=128,Sd(C,!1),l=x.updateQueue,u.updateQueue=l,Bf(u,l),u.subtreeFlags=0,l=g,g=u.child;g!==null;)LR(g,l),g=g.sibling;return X(ki,ki.current&1|2),u.child}l=l.sibling}C.tail!==null&&ft()>Vf&&(u.flags|=128,m=!0,Sd(C,!1),u.lanes=4194304)}else{if(!m)if(l=Pf(x),l!==null){if(u.flags|=128,m=!0,l=l.updateQueue,u.updateQueue=l,Bf(u,l),Sd(C,!0),C.tail===null&&C.tailMode==="hidden"&&!x.alternate&&!vt)return qt(u),null}else 2*ft()-C.renderingStartTime>Vf&&g!==536870912&&(u.flags|=128,m=!0,Sd(C,!1),u.lanes=4194304);C.isBackwards?(x.sibling=u.child,u.child=x):(l=C.last,l!==null?l.sibling=x:u.child=x,C.last=x)}return C.tail!==null?(u=C.tail,C.rendering=u,C.tail=u.sibling,C.renderingStartTime=ft(),u.sibling=null,l=ki.current,X(ki,m?l&1|2:l&1),u):(qt(u),null);case 22:case 23:return br(u),XC(),m=u.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(g&536870912)!==0&&(u.flags&128)===0&&(qt(u),u.subtreeFlags&6&&(u.flags|=8192)):qt(u),g=u.updateQueue,g!==null&&Bf(u,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048),l!==null&&Y(Fl),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),Cr(Pi),qt(u),null;case 25:return null;case 30:return null}throw Error(s(156,u.tag))}function lz(l,u){switch(GC(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Cr(Pi),ae(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return Re(u),null;case 13:if(br(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(s(340));nd()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Y(ki),null;case 4:return ae(),null;case 10:return Cr(u.type),null;case 22:case 23:return br(u),XC(),l!==null&&Y(Fl),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Cr(Pi),null;case 25:return null;default:return null}}function nE(l,u){switch(GC(u),u.tag){case 3:Cr(Pi),ae();break;case 26:case 27:case 5:Re(u);break;case 4:ae();break;case 13:br(u);break;case 19:Y(ki);break;case 10:Cr(u.type);break;case 22:case 23:br(u),XC(),l!==null&&Y(Fl);break;case 24:Cr(Pi)}}function bd(l,u){try{var g=u.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var C=m.next;g=C;do{if((g.tag&l)===l){m=void 0;var x=g.create,I=g.inst;m=x(),I.destroy=m}g=g.next}while(g!==C)}}catch(k){Ot(u,u.return,k)}}function ya(l,u,g){try{var m=u.updateQueue,C=m!==null?m.lastEffect:null;if(C!==null){var x=C.next;m=x;do{if((m.tag&l)===l){var I=m.inst,k=I.destroy;if(k!==void 0){I.destroy=void 0,C=u;var z=g,$=k;try{$()}catch(oe){Ot(C,z,oe)}}}m=m.next}while(m!==x)}}catch(oe){Ot(u,u.return,oe)}}function oE(l){var u=l.updateQueue;if(u!==null){var g=l.stateNode;try{YR(u,g)}catch(m){Ot(l,l.return,m)}}}function rE(l,u,g){g.props=kl(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(m){Ot(l,u,m)}}function wd(l,u){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof g=="function"?l.refCleanup=g(m):g.current=m}}catch(C){Ot(l,u,C)}}function Lo(l,u){var g=l.ref,m=l.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(C){Ot(l,u,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(C){Ot(l,u,C)}else g.current=null}function aE(l){var u=l.type,g=l.memoizedProps,m=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(C){Ot(l,l.return,C)}}function DS(l,u,g){try{var m=l.stateNode;Tz(m,l.type,g,u),m[Vs]=u}catch(C){Ot(l,l.return,C)}}function lE(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ra(l.type)||l.tag===4}function RS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||lE(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ra(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function AS(l,u,g){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,u):(u=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,u.appendChild(l),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=qf));else if(m!==4&&(m===27&&Ra(l.type)&&(g=l.stateNode,u=null),l=l.child,l!==null))for(AS(l,u,g),l=l.sibling;l!==null;)AS(l,u,g),l=l.sibling}function zf(l,u,g){var m=l.tag;if(m===5||m===6)l=l.stateNode,u?g.insertBefore(l,u):g.appendChild(l);else if(m!==4&&(m===27&&Ra(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(zf(l,u,g),l=l.sibling;l!==null;)zf(l,u,g),l=l.sibling}function cE(l){var u=l.stateNode,g=l.memoizedProps;try{for(var m=l.type,C=u.attributes;C.length;)u.removeAttributeNode(C[0]);ss(u,m,g),u[fs]=l,u[Vs]=g}catch(x){Ot(l,l.return,x)}}var Mr=!1,Ci=!1,ES=!1,uE=typeof WeakSet=="function"?WeakSet:Set,Ui=null;function cz(l,u){if(l=l.containerInfo,QS=sm,l=bR(l),RC(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var C=m.anchorOffset,x=m.focusNode;m=m.focusOffset;try{g.nodeType,x.nodeType}catch{g=null;break e}var I=0,k=-1,z=-1,$=0,oe=0,ce=l,Q=null;t:for(;;){for(var J;ce!==g||C!==0&&ce.nodeType!==3||(k=I+C),ce!==x||m!==0&&ce.nodeType!==3||(z=I+m),ce.nodeType===3&&(I+=ce.nodeValue.length),(J=ce.firstChild)!==null;)Q=ce,ce=J;for(;;){if(ce===l)break t;if(Q===g&&++$===C&&(k=I),Q===x&&++oe===m&&(z=I),(J=ce.nextSibling)!==null)break;ce=Q,Q=ce.parentNode}ce=J}g=k===-1||z===-1?null:{start:k,end:z}}else g=null}g=g||{start:0,end:0}}else g=null;for(JS={focusedElem:l,selectionRange:g},sm=!1,Ui=u;Ui!==null;)if(u=Ui,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,Ui=l;else for(;Ui!==null;){switch(u=Ui,x=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&x!==null){l=void 0,g=u,C=x.memoizedProps,x=x.memoizedState,m=g.stateNode;try{var He=kl(g.type,C,g.elementType===g.type);l=m.getSnapshotBeforeUpdate(He,x),m.__reactInternalSnapshotBeforeUpdate=l}catch(ke){Ot(g,g.return,ke)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,g=l.nodeType,g===9)ib(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":ib(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(s(163))}if(l=u.sibling,l!==null){l.return=u.return,Ui=l;break}Ui=u.return}}function hE(l,u,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:Ca(l,g),m&4&&bd(5,g);break;case 1:if(Ca(l,g),m&4)if(l=g.stateNode,u===null)try{l.componentDidMount()}catch(I){Ot(g,g.return,I)}else{var C=kl(g.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(C,u,l.__reactInternalSnapshotBeforeUpdate)}catch(I){Ot(g,g.return,I)}}m&64&&oE(g),m&512&&wd(g,g.return);break;case 3:if(Ca(l,g),m&64&&(l=g.updateQueue,l!==null)){if(u=null,g.child!==null)switch(g.child.tag){case 27:case 5:u=g.child.stateNode;break;case 1:u=g.child.stateNode}try{YR(l,u)}catch(I){Ot(g,g.return,I)}}break;case 27:u===null&&m&4&&cE(g);case 26:case 5:Ca(l,g),u===null&&m&4&&aE(g),m&512&&wd(g,g.return);break;case 12:Ca(l,g);break;case 13:Ca(l,g),m&4&&pE(l,g),m&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=yz.bind(null,g),Oz(l,g))));break;case 22:if(m=g.memoizedState!==null||Mr,!m){u=u!==null&&u.memoizedState!==null||Ci,C=Mr;var x=Ci;Mr=m,(Ci=u)&&!x?Sa(l,g,(g.subtreeFlags&8772)!==0):Ca(l,g),Mr=C,Ci=x}break;case 30:break;default:Ca(l,g)}}function dE(l){var u=l.alternate;u!==null&&(l.alternate=null,dE(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&aC(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Yt=null,js=!1;function Dr(l,u,g){for(g=g.child;g!==null;)gE(l,u,g),g=g.sibling}function gE(l,u,g){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(wt,g)}catch{}switch(g.tag){case 26:Ci||Lo(g,u),Dr(l,u,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Ci||Lo(g,u);var m=Yt,C=js;Ra(g.type)&&(Yt=g.stateNode,js=!1),Dr(l,u,g),Ld(g.stateNode),Yt=m,js=C;break;case 5:Ci||Lo(g,u);case 6:if(m=Yt,C=js,Yt=null,Dr(l,u,g),Yt=m,js=C,Yt!==null)if(js)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(g.stateNode)}catch(x){Ot(g,u,x)}else try{Yt.removeChild(g.stateNode)}catch(x){Ot(g,u,x)}break;case 18:Yt!==null&&(js?(l=Yt,tT(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),zd(l)):tT(Yt,g.stateNode));break;case 4:m=Yt,C=js,Yt=g.stateNode.containerInfo,js=!0,Dr(l,u,g),Yt=m,js=C;break;case 0:case 11:case 14:case 15:Ci||ya(2,g,u),Ci||ya(4,g,u),Dr(l,u,g);break;case 1:Ci||(Lo(g,u),m=g.stateNode,typeof m.componentWillUnmount=="function"&&rE(g,u,m)),Dr(l,u,g);break;case 21:Dr(l,u,g);break;case 22:Ci=(m=Ci)||g.memoizedState!==null,Dr(l,u,g),Ci=m;break;default:Dr(l,u,g)}}function pE(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{zd(l)}catch(g){Ot(u,u.return,g)}}function uz(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new uE),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new uE),u;default:throw Error(s(435,l.tag))}}function TS(l,u){var g=uz(l);u.forEach(function(m){var C=Cz.bind(null,l,m);g.has(m)||(g.add(m),m.then(C,C))})}function on(l,u){var g=u.deletions;if(g!==null)for(var m=0;m<g.length;m++){var C=g[m],x=l,I=u,k=I;e:for(;k!==null;){switch(k.tag){case 27:if(Ra(k.type)){Yt=k.stateNode,js=!1;break e}break;case 5:Yt=k.stateNode,js=!1;break e;case 3:case 4:Yt=k.stateNode.containerInfo,js=!0;break e}k=k.return}if(Yt===null)throw Error(s(160));gE(x,I,C),Yt=null,js=!1,x=C.alternate,x!==null&&(x.return=null),C.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)fE(u,l),u=u.sibling}var to=null;function fE(l,u){var g=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:on(u,l),rn(l),m&4&&(ya(3,l,l.return),bd(3,l),ya(5,l,l.return));break;case 1:on(u,l),rn(l),m&512&&(Ci||g===null||Lo(g,g.return)),m&64&&Mr&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var C=to;if(on(u,l),rn(l),m&512&&(Ci||g===null||Lo(g,g.return)),m&4){var x=g!==null?g.memoizedState:null;if(m=l.memoizedState,g===null)if(m===null)if(l.stateNode===null){e:{m=l.type,g=l.memoizedProps,C=C.ownerDocument||C;t:switch(m){case"title":x=C.getElementsByTagName("title")[0],(!x||x[Yh]||x[fs]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=C.createElement(m),C.head.insertBefore(x,C.querySelector("head > title"))),ss(x,m,g),x[fs]=l,Wi(x),m=x;break e;case"link":var I=cT("link","href",C).get(m+(g.href||""));if(I){for(var k=0;k<I.length;k++)if(x=I[k],x.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&x.getAttribute("rel")===(g.rel==null?null:g.rel)&&x.getAttribute("title")===(g.title==null?null:g.title)&&x.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){I.splice(k,1);break t}}x=C.createElement(m),ss(x,m,g),C.head.appendChild(x);break;case"meta":if(I=cT("meta","content",C).get(m+(g.content||""))){for(k=0;k<I.length;k++)if(x=I[k],x.getAttribute("content")===(g.content==null?null:""+g.content)&&x.getAttribute("name")===(g.name==null?null:g.name)&&x.getAttribute("property")===(g.property==null?null:g.property)&&x.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&x.getAttribute("charset")===(g.charSet==null?null:g.charSet)){I.splice(k,1);break t}}x=C.createElement(m),ss(x,m,g),C.head.appendChild(x);break;default:throw Error(s(468,m))}x[fs]=l,Wi(x),m=x}l.stateNode=m}else uT(C,l.type,l.stateNode);else l.stateNode=lT(C,m,l.memoizedProps);else x!==m?(x===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):x.count--,m===null?uT(C,l.type,l.stateNode):lT(C,m,l.memoizedProps)):m===null&&l.stateNode!==null&&DS(l,l.memoizedProps,g.memoizedProps)}break;case 27:on(u,l),rn(l),m&512&&(Ci||g===null||Lo(g,g.return)),g!==null&&m&4&&DS(l,l.memoizedProps,g.memoizedProps);break;case 5:if(on(u,l),rn(l),m&512&&(Ci||g===null||Lo(g,g.return)),l.flags&32){C=l.stateNode;try{qc(C,"")}catch(J){Ot(l,l.return,J)}}m&4&&l.stateNode!=null&&(C=l.memoizedProps,DS(l,C,g!==null?g.memoizedProps:C)),m&1024&&(ES=!0);break;case 6:if(on(u,l),rn(l),m&4){if(l.stateNode===null)throw Error(s(162));m=l.memoizedProps,g=l.stateNode;try{g.nodeValue=m}catch(J){Ot(l,l.return,J)}}break;case 3:if(em=null,C=to,to=Qf(u.containerInfo),on(u,l),to=C,rn(l),m&4&&g!==null&&g.memoizedState.isDehydrated)try{zd(u.containerInfo)}catch(J){Ot(l,l.return,J)}ES&&(ES=!1,mE(l));break;case 4:m=to,to=Qf(l.stateNode.containerInfo),on(u,l),rn(l),to=m;break;case 12:on(u,l),rn(l);break;case 13:on(u,l),rn(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(NS=ft()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,TS(l,m)));break;case 22:C=l.memoizedState!==null;var z=g!==null&&g.memoizedState!==null,$=Mr,oe=Ci;if(Mr=$||C,Ci=oe||z,on(u,l),Ci=oe,Mr=$,rn(l),m&8192)e:for(u=l.stateNode,u._visibility=C?u._visibility&-2:u._visibility|1,C&&(g===null||z||Mr||Ci||Nl(l)),g=null,u=l;;){if(u.tag===5||u.tag===26){if(g===null){z=g=u;try{if(x=z.stateNode,C)I=x.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{k=z.stateNode;var ce=z.memoizedProps.style,Q=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;k.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(J){Ot(z,z.return,J)}}}else if(u.tag===6){if(g===null){z=u;try{z.stateNode.nodeValue=C?"":z.memoizedProps}catch(J){Ot(z,z.return,J)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=l.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,TS(l,g))));break;case 19:on(u,l),rn(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,TS(l,m)));break;case 30:break;case 21:break;default:on(u,l),rn(l)}}function rn(l){var u=l.flags;if(u&2){try{for(var g,m=l.return;m!==null;){if(lE(m)){g=m;break}m=m.return}if(g==null)throw Error(s(160));switch(g.tag){case 27:var C=g.stateNode,x=RS(l);zf(l,x,C);break;case 5:var I=g.stateNode;g.flags&32&&(qc(I,""),g.flags&=-33);var k=RS(l);zf(l,k,I);break;case 3:case 4:var z=g.stateNode.containerInfo,$=RS(l);AS(l,$,z);break;default:throw Error(s(161))}}catch(oe){Ot(l,l.return,oe)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function mE(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;mE(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Ca(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)hE(l,u.alternate,u),u=u.sibling}function Nl(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:ya(4,u,u.return),Nl(u);break;case 1:Lo(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&rE(u,u.return,g),Nl(u);break;case 27:Ld(u.stateNode);case 26:case 5:Lo(u,u.return),Nl(u);break;case 22:u.memoizedState===null&&Nl(u);break;case 30:Nl(u);break;default:Nl(u)}l=l.sibling}}function Sa(l,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,C=l,x=u,I=x.flags;switch(x.tag){case 0:case 11:case 15:Sa(C,x,g),bd(4,x);break;case 1:if(Sa(C,x,g),m=x,C=m.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch($){Ot(m,m.return,$)}if(m=x,C=m.updateQueue,C!==null){var k=m.stateNode;try{var z=C.shared.hiddenCallbacks;if(z!==null)for(C.shared.hiddenCallbacks=null,C=0;C<z.length;C++)UR(z[C],k)}catch($){Ot(m,m.return,$)}}g&&I&64&&oE(x),wd(x,x.return);break;case 27:cE(x);case 26:case 5:Sa(C,x,g),g&&m===null&&I&4&&aE(x),wd(x,x.return);break;case 12:Sa(C,x,g);break;case 13:Sa(C,x,g),g&&I&4&&pE(C,x);break;case 22:x.memoizedState===null&&Sa(C,x,g),wd(x,x.return);break;case 30:break;default:Sa(C,x,g)}u=u.sibling}}function IS(l,u){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&ad(g))}function LS(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&ad(l))}function Fo(l,u,g,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)vE(l,u,g,m),u=u.sibling}function vE(l,u,g,m){var C=u.flags;switch(u.tag){case 0:case 11:case 15:Fo(l,u,g,m),C&2048&&bd(9,u);break;case 1:Fo(l,u,g,m);break;case 3:Fo(l,u,g,m),C&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&ad(l)));break;case 12:if(C&2048){Fo(l,u,g,m),l=u.stateNode;try{var x=u.memoizedProps,I=x.id,k=x.onPostCommit;typeof k=="function"&&k(I,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(z){Ot(u,u.return,z)}}else Fo(l,u,g,m);break;case 13:Fo(l,u,g,m);break;case 23:break;case 22:x=u.stateNode,I=u.alternate,u.memoizedState!==null?x._visibility&2?Fo(l,u,g,m):xd(l,u):x._visibility&2?Fo(l,u,g,m):(x._visibility|=2,fu(l,u,g,m,(u.subtreeFlags&10256)!==0)),C&2048&&IS(I,u);break;case 24:Fo(l,u,g,m),C&2048&&LS(u.alternate,u);break;default:Fo(l,u,g,m)}}function fu(l,u,g,m,C){for(C=C&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var x=l,I=u,k=g,z=m,$=I.flags;switch(I.tag){case 0:case 11:case 15:fu(x,I,k,z,C),bd(8,I);break;case 23:break;case 22:var oe=I.stateNode;I.memoizedState!==null?oe._visibility&2?fu(x,I,k,z,C):xd(x,I):(oe._visibility|=2,fu(x,I,k,z,C)),C&&$&2048&&IS(I.alternate,I);break;case 24:fu(x,I,k,z,C),C&&$&2048&&LS(I.alternate,I);break;default:fu(x,I,k,z,C)}u=u.sibling}}function xd(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=l,m=u,C=m.flags;switch(m.tag){case 22:xd(g,m),C&2048&&IS(m.alternate,m);break;case 24:xd(g,m),C&2048&&LS(m.alternate,m);break;default:xd(g,m)}u=u.sibling}}var Md=8192;function mu(l){if(l.subtreeFlags&Md)for(l=l.child;l!==null;)yE(l),l=l.sibling}function yE(l){switch(l.tag){case 26:mu(l),l.flags&Md&&l.memoizedState!==null&&Zz(to,l.memoizedState,l.memoizedProps);break;case 5:mu(l);break;case 3:case 4:var u=to;to=Qf(l.stateNode.containerInfo),mu(l),to=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=Md,Md=16777216,mu(l),Md=u):mu(l));break;default:mu(l)}}function CE(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Dd(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var m=u[g];Ui=m,bE(m,l)}CE(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)SE(l),l=l.sibling}function SE(l){switch(l.tag){case 0:case 11:case 15:Dd(l),l.flags&2048&&ya(9,l,l.return);break;case 3:Dd(l);break;case 12:Dd(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Hf(l)):Dd(l);break;default:Dd(l)}}function Hf(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var m=u[g];Ui=m,bE(m,l)}CE(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:ya(8,u,u.return),Hf(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,Hf(u));break;default:Hf(u)}l=l.sibling}}function bE(l,u){for(;Ui!==null;){var g=Ui;switch(g.tag){case 0:case 11:case 15:ya(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ad(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,Ui=m;else e:for(g=l;Ui!==null;){m=Ui;var C=m.sibling,x=m.return;if(dE(m),m===g){Ui=null;break e}if(C!==null){C.return=x,Ui=C;break e}Ui=x}}}var hz={getCacheForType:function(l){var u=ms(Pi),g=u.data.get(l);return g===void 0&&(g=l(),u.data.set(l,g)),g}},dz=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Bt=null,et=null,rt=0,Rt=0,an=null,ba=!1,vu=!1,FS=!1,Rr=0,ui=0,wa=0,Ol=0,PS=0,Fn=0,yu=0,Rd=null,Us=null,kS=!1,NS=0,Vf=1/0,_f=null,xa=null,is=0,Ma=null,Cu=null,Su=0,OS=0,GS=null,wE=null,Ad=0,BS=null;function ln(){if((Dt&2)!==0&&rt!==0)return rt&-rt;if(H.T!==null){var l=au;return l!==0?l:US()}return BD()}function xE(){Fn===0&&(Fn=(rt&536870912)===0||vt?kD():536870912);var l=Ln.current;return l!==null&&(l.flags|=32),Fn}function cn(l,u,g){(l===Bt&&(Rt===2||Rt===9)||l.cancelPendingCommit!==null)&&(bu(l,0),Da(l,rt,Fn,!1)),Uh(l,g),((Dt&2)===0||l!==Bt)&&(l===Bt&&((Dt&2)===0&&(Ol|=g),ui===4&&Da(l,rt,Fn,!1)),Po(l))}function ME(l,u,g){if((Dt&6)!==0)throw Error(s(327));var m=!g&&(u&124)===0&&(u&l.expiredLanes)===0||jh(l,u),C=m?fz(l,u):VS(l,u,!0),x=m;do{if(C===0){vu&&!m&&Da(l,u,0,!1);break}else{if(g=l.current.alternate,x&&!gz(g)){C=VS(l,u,!1),x=!1;continue}if(C===2){if(x=u,l.errorRecoveryDisabledLanes&x)var I=0;else I=l.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){u=I;e:{var k=l;C=Rd;var z=k.current.memoizedState.isDehydrated;if(z&&(bu(k,I).flags|=256),I=VS(k,I,!1),I!==2){if(FS&&!z){k.errorRecoveryDisabledLanes|=x,Ol|=x,C=4;break e}x=Us,Us=C,x!==null&&(Us===null?Us=x:Us.push.apply(Us,x))}C=I}if(x=!1,C!==2)continue}}if(C===1){bu(l,0),Da(l,u,0,!0);break}e:{switch(m=l,x=C,x){case 0:case 1:throw Error(s(345));case 4:if((u&4194048)!==u)break;case 6:Da(m,u,Fn,!ba);break e;case 2:Us=null;break;case 3:case 5:break;default:throw Error(s(329))}if((u&62914560)===u&&(C=NS+300-ft(),10<C)){if(Da(m,u,Fn,!ba),Qp(m,0,!0)!==0)break e;m.timeoutHandle=JE(DE.bind(null,m,g,Us,_f,kS,u,Fn,Ol,yu,ba,x,2,-0,0),C);break e}DE(m,g,Us,_f,kS,u,Fn,Ol,yu,ba,x,0,-0,0)}}break}while(!0);Po(l)}function DE(l,u,g,m,C,x,I,k,z,$,oe,ce,Q,J){if(l.timeoutHandle=-1,ce=u.subtreeFlags,(ce&8192||(ce&16785408)===16785408)&&(kd={stylesheets:null,count:0,unsuspend:$z},yE(u),ce=qz(),ce!==null)){l.cancelPendingCommit=ce(FE.bind(null,l,u,x,g,m,C,I,k,z,oe,1,Q,J)),Da(l,x,I,!$);return}FE(l,u,x,g,m,C,I,k,z)}function gz(l){for(var u=l;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var C=g[m],x=C.getSnapshot;C=C.value;try{if(!sn(x(),C))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Da(l,u,g,m){u&=~PS,u&=~Ol,l.suspendedLanes|=u,l.pingedLanes&=~u,m&&(l.warmLanes|=u),m=l.expirationTimes;for(var C=u;0<C;){var x=31-tn(C),I=1<<x;m[x]=-1,C&=~I}g!==0&&OD(l,g,u)}function Wf(){return(Dt&6)===0?(Ed(0),!1):!0}function zS(){if(et!==null){if(Rt===0)var l=et.return;else l=et,yr=Il=null,iS(l),gu=null,yd=0,l=et;for(;l!==null;)nE(l.alternate,l),l=l.return;et=null}}function bu(l,u){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,Lz(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),zS(),Bt=l,et=g=fr(l.current,null),rt=u,Rt=0,an=null,ba=!1,vu=jh(l,u),FS=!1,yu=Fn=PS=Ol=wa=ui=0,Us=Rd=null,kS=!1,(u&8)!==0&&(u|=u&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=u;0<m;){var C=31-tn(m),x=1<<C;u|=l[C],m&=~x}return Rr=u,hf(),g}function RE(l,u){Ze=null,H.H=If,u===cd||u===Sf?(u=WR(),Rt=3):u===HR?(u=WR(),Rt=4):Rt=u===jA?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,an=u,et===null&&(ui=1,Nf(l,An(u,l.current)))}function AE(){var l=H.H;return H.H=If,l===null?If:l}function EE(){var l=H.A;return H.A=hz,l}function HS(){ui=4,ba||(rt&4194048)!==rt&&Ln.current!==null||(vu=!0),(wa&134217727)===0&&(Ol&134217727)===0||Bt===null||Da(Bt,rt,Fn,!1)}function VS(l,u,g){var m=Dt;Dt|=2;var C=AE(),x=EE();(Bt!==l||rt!==u)&&(_f=null,bu(l,u)),u=!1;var I=ui;e:do try{if(Rt!==0&&et!==null){var k=et,z=an;switch(Rt){case 8:zS(),I=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(u=!0);var $=Rt;if(Rt=0,an=null,wu(l,k,z,$),g&&vu){I=0;break e}break;default:$=Rt,Rt=0,an=null,wu(l,k,z,$)}}pz(),I=ui;break}catch(oe){RE(l,oe)}while(!0);return u&&l.shellSuspendCounter++,yr=Il=null,Dt=m,H.H=C,H.A=x,et===null&&(Bt=null,rt=0,hf()),I}function pz(){for(;et!==null;)TE(et)}function fz(l,u){var g=Dt;Dt|=2;var m=AE(),C=EE();Bt!==l||rt!==u?(_f=null,Vf=ft()+500,bu(l,u)):vu=jh(l,u);e:do try{if(Rt!==0&&et!==null){u=et;var x=an;t:switch(Rt){case 1:Rt=0,an=null,wu(l,u,x,1);break;case 2:case 9:if(VR(x)){Rt=0,an=null,IE(u);break}u=function(){Rt!==2&&Rt!==9||Bt!==l||(Rt=7),Po(l)},x.then(u,u);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:VR(x)?(Rt=0,an=null,IE(u)):(Rt=0,an=null,wu(l,u,x,7));break;case 5:var I=null;switch(et.tag){case 26:I=et.memoizedState;case 5:case 27:var k=et;if(!I||hT(I)){Rt=0,an=null;var z=k.sibling;if(z!==null)et=z;else{var $=k.return;$!==null?(et=$,jf($)):et=null}break t}}Rt=0,an=null,wu(l,u,x,5);break;case 6:Rt=0,an=null,wu(l,u,x,6);break;case 8:zS(),ui=6;break e;default:throw Error(s(462))}}mz();break}catch(oe){RE(l,oe)}while(!0);return yr=Il=null,H.H=m,H.A=C,Dt=g,et!==null?0:(Bt=null,rt=0,hf(),ui)}function mz(){for(;et!==null&&!Ve();)TE(et)}function TE(l){var u=iE(l.alternate,l,Rr);l.memoizedProps=l.pendingProps,u===null?jf(l):et=u}function IE(l){var u=l,g=u.alternate;switch(u.tag){case 15:case 0:u=qA(g,u,u.pendingProps,u.type,void 0,rt);break;case 11:u=qA(g,u,u.pendingProps,u.type.render,u.ref,rt);break;case 5:iS(u);default:nE(g,u),u=et=LR(u,Rr),u=iE(g,u,Rr)}l.memoizedProps=l.pendingProps,u===null?jf(l):et=u}function wu(l,u,g,m){yr=Il=null,iS(u),gu=null,yd=0;var C=u.return;try{if(oz(l,C,u,g,rt)){ui=1,Nf(l,An(g,l.current)),et=null;return}}catch(x){if(C!==null)throw et=C,x;ui=1,Nf(l,An(g,l.current)),et=null;return}u.flags&32768?(vt||m===1?l=!0:vu||(rt&536870912)!==0?l=!1:(ba=l=!0,(m===2||m===9||m===3||m===6)&&(m=Ln.current,m!==null&&m.tag===13&&(m.flags|=16384))),LE(u,l)):jf(u)}function jf(l){var u=l;do{if((u.flags&32768)!==0){LE(u,ba);return}l=u.return;var g=az(u.alternate,u,Rr);if(g!==null){et=g;return}if(u=u.sibling,u!==null){et=u;return}et=u=l}while(u!==null);ui===0&&(ui=5)}function LE(l,u){do{var g=lz(l.alternate,l);if(g!==null){g.flags&=32767,et=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(l=l.sibling,l!==null)){et=l;return}et=l=g}while(l!==null);ui=6,et=null}function FE(l,u,g,m,C,x,I,k,z){l.cancelPendingCommit=null;do Uf();while(is!==0);if((Dt&6)!==0)throw Error(s(327));if(u!==null){if(u===l.current)throw Error(s(177));if(x=u.lanes|u.childLanes,x|=LC,$G(l,g,x,I,k,z),l===Bt&&(et=Bt=null,rt=0),Cu=u,Ma=l,Su=g,OS=x,GS=C,wE=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,Sz(mt,function(){return GE(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=H.T,H.T=null,C=q.p,q.p=2,I=Dt,Dt|=4;try{cz(l,u,g)}finally{Dt=I,q.p=C,H.T=m}}is=1,PE(),kE(),NE()}}function PE(){if(is===1){is=0;var l=Ma,u=Cu,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=H.T,H.T=null;var m=q.p;q.p=2;var C=Dt;Dt|=4;try{fE(u,l);var x=JS,I=bR(l.containerInfo),k=x.focusedElem,z=x.selectionRange;if(I!==k&&k&&k.ownerDocument&&SR(k.ownerDocument.documentElement,k)){if(z!==null&&RC(k)){var $=z.start,oe=z.end;if(oe===void 0&&(oe=$),"selectionStart"in k)k.selectionStart=$,k.selectionEnd=Math.min(oe,k.value.length);else{var ce=k.ownerDocument||document,Q=ce&&ce.defaultView||window;if(Q.getSelection){var J=Q.getSelection(),He=k.textContent.length,ke=Math.min(z.start,He),Ft=z.end===void 0?ke:Math.min(z.end,He);!J.extend&&ke>Ft&&(I=Ft,Ft=ke,ke=I);var j=CR(k,ke),_=CR(k,Ft);if(j&&_&&(J.rangeCount!==1||J.anchorNode!==j.node||J.anchorOffset!==j.offset||J.focusNode!==_.node||J.focusOffset!==_.offset)){var K=ce.createRange();K.setStart(j.node,j.offset),J.removeAllRanges(),ke>Ft?(J.addRange(K),J.extend(_.node,_.offset)):(K.setEnd(_.node,_.offset),J.addRange(K))}}}}for(ce=[],J=k;J=J.parentNode;)J.nodeType===1&&ce.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<ce.length;k++){var re=ce[k];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}sm=!!QS,JS=QS=null}finally{Dt=C,q.p=m,H.T=g}}l.current=u,is=2}}function kE(){if(is===2){is=0;var l=Ma,u=Cu,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=H.T,H.T=null;var m=q.p;q.p=2;var C=Dt;Dt|=4;try{hE(l,u.alternate,u)}finally{Dt=C,q.p=m,H.T=g}}is=3}}function NE(){if(is===4||is===3){is=0,kt();var l=Ma,u=Cu,g=Su,m=wE;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?is=5:(is=0,Cu=Ma=null,OE(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(xa=null),oC(g),u=u.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(wt,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=H.T,C=q.p,q.p=2,H.T=null;try{for(var x=l.onRecoverableError,I=0;I<m.length;I++){var k=m[I];x(k.value,{componentStack:k.stack})}}finally{H.T=u,q.p=C}}(Su&3)!==0&&Uf(),Po(l),C=l.pendingLanes,(g&4194090)!==0&&(C&42)!==0?l===BS?Ad++:(Ad=0,BS=l):Ad=0,Ed(0)}}function OE(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,ad(u)))}function Uf(l){return PE(),kE(),NE(),GE()}function GE(){if(is!==5)return!1;var l=Ma,u=OS;OS=0;var g=oC(Su),m=H.T,C=q.p;try{q.p=32>g?32:g,H.T=null,g=GS,GS=null;var x=Ma,I=Su;if(is=0,Cu=Ma=null,Su=0,(Dt&6)!==0)throw Error(s(331));var k=Dt;if(Dt|=4,SE(x.current),vE(x,x.current,I,g),Dt=k,Ed(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(wt,x)}catch{}return!0}finally{q.p=C,H.T=m,OE(l,u)}}function BE(l,u,g){u=An(g,u),u=mS(l.stateNode,u,2),l=pa(l,u,2),l!==null&&(Uh(l,2),Po(l))}function Ot(l,u,g){if(l.tag===3)BE(l,l,g);else for(;u!==null;){if(u.tag===3){BE(u,l,g);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(xa===null||!xa.has(m))){l=An(g,l),g=_A(2),m=pa(u,g,2),m!==null&&(WA(g,m,u,l),Uh(m,2),Po(m));break}}u=u.return}}function _S(l,u,g){var m=l.pingCache;if(m===null){m=l.pingCache=new dz;var C=new Set;m.set(u,C)}else C=m.get(u),C===void 0&&(C=new Set,m.set(u,C));C.has(g)||(FS=!0,C.add(g),l=vz.bind(null,l,u,g),u.then(l,l))}function vz(l,u,g){var m=l.pingCache;m!==null&&m.delete(u),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Bt===l&&(rt&g)===g&&(ui===4||ui===3&&(rt&62914560)===rt&&300>ft()-NS?(Dt&2)===0&&bu(l,0):PS|=g,yu===rt&&(yu=0)),Po(l)}function zE(l,u){u===0&&(u=ND()),l=su(l,u),l!==null&&(Uh(l,u),Po(l))}function yz(l){var u=l.memoizedState,g=0;u!==null&&(g=u.retryLane),zE(l,g)}function Cz(l,u){var g=0;switch(l.tag){case 13:var m=l.stateNode,C=l.memoizedState;C!==null&&(g=C.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(u),zE(l,g)}function Sz(l,u){return _e(l,u)}var Yf=null,xu=null,WS=!1,Kf=!1,jS=!1,Gl=0;function Po(l){l!==xu&&l.next===null&&(xu===null?Yf=xu=l:xu=xu.next=l),Kf=!0,WS||(WS=!0,wz())}function Ed(l,u){if(!jS&&Kf){jS=!0;do for(var g=!1,m=Yf;m!==null;){if(l!==0){var C=m.pendingLanes;if(C===0)var x=0;else{var I=m.suspendedLanes,k=m.pingedLanes;x=(1<<31-tn(42|l)+1)-1,x&=C&~(I&~k),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(g=!0,WE(m,x))}else x=rt,x=Qp(m,m===Bt?x:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(x&3)===0||jh(m,x)||(g=!0,WE(m,x));m=m.next}while(g);jS=!1}}function bz(){HE()}function HE(){Kf=WS=!1;var l=0;Gl!==0&&(Iz()&&(l=Gl),Gl=0);for(var u=ft(),g=null,m=Yf;m!==null;){var C=m.next,x=VE(m,u);x===0?(m.next=null,g===null?Yf=C:g.next=C,C===null&&(xu=g)):(g=m,(l!==0||(x&3)!==0)&&(Kf=!0)),m=C}Ed(l)}function VE(l,u){for(var g=l.suspendedLanes,m=l.pingedLanes,C=l.expirationTimes,x=l.pendingLanes&-62914561;0<x;){var I=31-tn(x),k=1<<I,z=C[I];z===-1?((k&g)===0||(k&m)!==0)&&(C[I]=KG(k,u)):z<=u&&(l.expiredLanes|=k),x&=~k}if(u=Bt,g=rt,g=Qp(l,l===u?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,g===0||l===u&&(Rt===2||Rt===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&We(m),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||jh(l,g)){if(u=g&-g,u===l.callbackPriority)return u;switch(m!==null&&We(m),oC(g)){case 2:case 8:g=Mt;break;case 32:g=mt;break;case 268435456:g=li;break;default:g=mt}return m=_E.bind(null,l),g=_e(g,m),l.callbackPriority=u,l.callbackNode=g,u}return m!==null&&m!==null&&We(m),l.callbackPriority=2,l.callbackNode=null,2}function _E(l,u){if(is!==0&&is!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(Uf()&&l.callbackNode!==g)return null;var m=rt;return m=Qp(l,l===Bt?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(ME(l,m,u),VE(l,ft()),l.callbackNode!=null&&l.callbackNode===g?_E.bind(null,l):null)}function WE(l,u){if(Uf())return null;ME(l,u,!0)}function wz(){Fz(function(){(Dt&6)!==0?_e(_i,bz):HE()})}function US(){return Gl===0&&(Gl=kD()),Gl}function jE(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:nf(""+l)}function UE(l,u){var g=u.ownerDocument.createElement("input");return g.name=u.name,g.value=u.value,l.id&&g.setAttribute("form",l.id),u.parentNode.insertBefore(g,u),l=new FormData(l),g.parentNode.removeChild(g),l}function xz(l,u,g,m,C){if(u==="submit"&&g&&g.stateNode===C){var x=jE((C[Vs]||null).action),I=m.submitter;I&&(u=(u=I[Vs]||null)?jE(u.formAction):I.getAttribute("formAction"),u!==null&&(x=u,I=null));var k=new lf("action","action",null,m,C);l.push({event:k,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Gl!==0){var z=I?UE(C,I):new FormData(C);hS(g,{pending:!0,data:z,method:C.method,action:x},null,z)}}else typeof x=="function"&&(k.preventDefault(),z=I?UE(C,I):new FormData(C),hS(g,{pending:!0,data:z,method:C.method,action:x},x,z))},currentTarget:C}]})}}for(var YS=0;YS<IC.length;YS++){var KS=IC[YS],Mz=KS.toLowerCase(),Dz=KS[0].toUpperCase()+KS.slice(1);eo(Mz,"on"+Dz)}eo(MR,"onAnimationEnd"),eo(DR,"onAnimationIteration"),eo(RR,"onAnimationStart"),eo("dblclick","onDoubleClick"),eo("focusin","onFocus"),eo("focusout","onBlur"),eo(_B,"onTransitionRun"),eo(WB,"onTransitionStart"),eo(jB,"onTransitionCancel"),eo(AR,"onTransitionEnd"),Kc("onMouseEnter",["mouseout","mouseover"]),Kc("onMouseLeave",["mouseout","mouseover"]),Kc("onPointerEnter",["pointerout","pointerover"]),Kc("onPointerLeave",["pointerout","pointerover"]),bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bl("onBeforeInput",["compositionend","keypress","textInput","paste"]),bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Td="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Td));function YE(l,u){u=(u&4)!==0;for(var g=0;g<l.length;g++){var m=l[g],C=m.event;m=m.listeners;e:{var x=void 0;if(u)for(var I=m.length-1;0<=I;I--){var k=m[I],z=k.instance,$=k.currentTarget;if(k=k.listener,z!==x&&C.isPropagationStopped())break e;x=k,C.currentTarget=$;try{x(C)}catch(oe){kf(oe)}C.currentTarget=null,x=z}else for(I=0;I<m.length;I++){if(k=m[I],z=k.instance,$=k.currentTarget,k=k.listener,z!==x&&C.isPropagationStopped())break e;x=k,C.currentTarget=$;try{x(C)}catch(oe){kf(oe)}C.currentTarget=null,x=z}}}}function tt(l,u){var g=u[rC];g===void 0&&(g=u[rC]=new Set);var m=l+"__bubble";g.has(m)||(KE(u,l,2,!1),g.add(m))}function $S(l,u,g){var m=0;u&&(m|=4),KE(g,l,m,u)}var $f="_reactListening"+Math.random().toString(36).slice(2);function ZS(l){if(!l[$f]){l[$f]=!0,HD.forEach(function(g){g!=="selectionchange"&&(Rz.has(g)||$S(g,!1,l),$S(g,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[$f]||(u[$f]=!0,$S("selectionchange",!1,u))}}function KE(l,u,g,m){switch(vT(u)){case 2:var C=Jz;break;case 8:C=eH;break;default:C=cb}g=C.bind(null,u,g,l),C=void 0,!vC||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),m?C!==void 0?l.addEventListener(u,g,{capture:!0,passive:C}):l.addEventListener(u,g,!0):C!==void 0?l.addEventListener(u,g,{passive:C}):l.addEventListener(u,g,!1)}function qS(l,u,g,m,C){var x=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var I=m.tag;if(I===3||I===4){var k=m.stateNode.containerInfo;if(k===C)break;if(I===4)for(I=m.return;I!==null;){var z=I.tag;if((z===3||z===4)&&I.stateNode.containerInfo===C)return;I=I.return}for(;k!==null;){if(I=jc(k),I===null)return;if(z=I.tag,z===5||z===6||z===26||z===27){m=x=I;continue e}k=k.parentNode}}m=m.return}eR(function(){var $=x,oe=fC(g),ce=[];e:{var Q=ER.get(l);if(Q!==void 0){var J=lf,He=l;switch(l){case"keypress":if(rf(g)===0)break e;case"keydown":case"keyup":J=SB;break;case"focusin":He="focus",J=bC;break;case"focusout":He="blur",J=bC;break;case"beforeblur":case"afterblur":J=bC;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=sR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=lB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=xB;break;case MR:case DR:case RR:J=hB;break;case AR:J=DB;break;case"scroll":case"scrollend":J=rB;break;case"wheel":J=AB;break;case"copy":case"cut":case"paste":J=gB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=oR;break;case"toggle":case"beforetoggle":J=TB}var ke=(u&4)!==0,Ft=!ke&&(l==="scroll"||l==="scrollend"),j=ke?Q!==null?Q+"Capture":null:Q;ke=[];for(var _=$,K;_!==null;){var re=_;if(K=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||K===null||j===null||(re=$h(_,j),re!=null&&ke.push(Id(_,re,K))),Ft)break;_=_.return}0<ke.length&&(Q=new J(Q,He,null,g,oe),ce.push({event:Q,listeners:ke}))}}if((u&7)===0){e:{if(Q=l==="mouseover"||l==="pointerover",J=l==="mouseout"||l==="pointerout",Q&&g!==pC&&(He=g.relatedTarget||g.fromElement)&&(jc(He)||He[Wc]))break e;if((J||Q)&&(Q=oe.window===oe?oe:(Q=oe.ownerDocument)?Q.defaultView||Q.parentWindow:window,J?(He=g.relatedTarget||g.toElement,J=$,He=He?jc(He):null,He!==null&&(Ft=o(He),ke=He.tag,He!==Ft||ke!==5&&ke!==27&&ke!==6)&&(He=null)):(J=null,He=$),J!==He)){if(ke=sR,re="onMouseLeave",j="onMouseEnter",_="mouse",(l==="pointerout"||l==="pointerover")&&(ke=oR,re="onPointerLeave",j="onPointerEnter",_="pointer"),Ft=J==null?Q:Kh(J),K=He==null?Q:Kh(He),Q=new ke(re,_+"leave",J,g,oe),Q.target=Ft,Q.relatedTarget=K,re=null,jc(oe)===$&&(ke=new ke(j,_+"enter",He,g,oe),ke.target=K,ke.relatedTarget=Ft,re=ke),Ft=re,J&&He)t:{for(ke=J,j=He,_=0,K=ke;K;K=Mu(K))_++;for(K=0,re=j;re;re=Mu(re))K++;for(;0<_-K;)ke=Mu(ke),_--;for(;0<K-_;)j=Mu(j),K--;for(;_--;){if(ke===j||j!==null&&ke===j.alternate)break t;ke=Mu(ke),j=Mu(j)}ke=null}else ke=null;J!==null&&$E(ce,Q,J,ke,!1),He!==null&&Ft!==null&&$E(ce,Ft,He,ke,!0)}}e:{if(Q=$?Kh($):window,J=Q.nodeName&&Q.nodeName.toLowerCase(),J==="select"||J==="input"&&Q.type==="file")var Ae=gR;else if(hR(Q))if(pR)Ae=zB;else{Ae=GB;var Xe=OB}else J=Q.nodeName,!J||J.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&gC($.elementType)&&(Ae=gR):Ae=BB;if(Ae&&(Ae=Ae(l,$))){dR(ce,Ae,g,oe);break e}Xe&&Xe(l,Q,$),l==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&dC(Q,"number",Q.value)}switch(Xe=$?Kh($):window,l){case"focusin":(hR(Xe)||Xe.contentEditable==="true")&&(eu=Xe,AC=$,id=null);break;case"focusout":id=AC=eu=null;break;case"mousedown":EC=!0;break;case"contextmenu":case"mouseup":case"dragend":EC=!1,wR(ce,g,oe);break;case"selectionchange":if(VB)break;case"keydown":case"keyup":wR(ce,g,oe)}var Ie;if(xC)e:{switch(l){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Jc?cR(l,g)&&(Oe="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(Oe="onCompositionStart");Oe&&(rR&&g.locale!=="ko"&&(Jc||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Jc&&(Ie=tR()):(ua=oe,yC="value"in ua?ua.value:ua.textContent,Jc=!0)),Xe=Zf($,Oe),0<Xe.length&&(Oe=new nR(Oe,l,null,g,oe),ce.push({event:Oe,listeners:Xe}),Ie?Oe.data=Ie:(Ie=uR(g),Ie!==null&&(Oe.data=Ie)))),(Ie=LB?FB(l,g):PB(l,g))&&(Oe=Zf($,"onBeforeInput"),0<Oe.length&&(Xe=new nR("onBeforeInput","beforeinput",null,g,oe),ce.push({event:Xe,listeners:Oe}),Xe.data=Ie)),xz(ce,l,$,g,oe)}YE(ce,u)})}function Id(l,u,g){return{instance:l,listener:u,currentTarget:g}}function Zf(l,u){for(var g=u+"Capture",m=[];l!==null;){var C=l,x=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||x===null||(C=$h(l,g),C!=null&&m.unshift(Id(l,C,x)),C=$h(l,u),C!=null&&m.push(Id(l,C,x))),l.tag===3)return m;l=l.return}return[]}function Mu(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function $E(l,u,g,m,C){for(var x=u._reactName,I=[];g!==null&&g!==m;){var k=g,z=k.alternate,$=k.stateNode;if(k=k.tag,z!==null&&z===m)break;k!==5&&k!==26&&k!==27||$===null||(z=$,C?($=$h(g,x),$!=null&&I.unshift(Id(g,$,z))):C||($=$h(g,x),$!=null&&I.push(Id(g,$,z)))),g=g.return}I.length!==0&&l.push({event:u,listeners:I})}var Az=/\r\n?/g,Ez=/\u0000|\uFFFD/g;function ZE(l){return(typeof l=="string"?l:""+l).replace(Az,`
`).replace(Ez,"")}function qE(l,u){return u=ZE(u),ZE(l)===u}function qf(){}function Lt(l,u,g,m,C,x){switch(g){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||qc(l,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&qc(l,""+m);break;case"className":ef(l,"class",m);break;case"tabIndex":ef(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":ef(l,g,m);break;case"style":QD(l,m,x);break;case"data":if(u!=="object"){ef(l,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||g!=="href")){l.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(g);break}m=nf(""+m),l.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(g==="formAction"?(u!=="input"&&Lt(l,u,"name",C.name,C,null),Lt(l,u,"formEncType",C.formEncType,C,null),Lt(l,u,"formMethod",C.formMethod,C,null),Lt(l,u,"formTarget",C.formTarget,C,null)):(Lt(l,u,"encType",C.encType,C,null),Lt(l,u,"method",C.method,C,null),Lt(l,u,"target",C.target,C,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(g);break}m=nf(""+m),l.setAttribute(g,m);break;case"onClick":m!=null&&(l.onclick=qf);break;case"onScroll":m!=null&&tt("scroll",l);break;case"onScrollEnd":m!=null&&tt("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(g=m.__html,g!=null){if(C.children!=null)throw Error(s(60));l.innerHTML=g}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}g=nf(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,""+m):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":m===!0?l.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,m):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(g,m):l.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(g):l.setAttribute(g,m);break;case"popover":tt("beforetoggle",l),tt("toggle",l),Jp(l,"popover",m);break;case"xlinkActuate":gr(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":gr(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":gr(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":gr(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":gr(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":gr(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":gr(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":gr(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":gr(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Jp(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=nB.get(g)||g,Jp(l,g,m))}}function XS(l,u,g,m,C,x){switch(g){case"style":QD(l,m,x);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(g=m.__html,g!=null){if(C.children!=null)throw Error(s(60));l.innerHTML=g}}break;case"children":typeof m=="string"?qc(l,m):(typeof m=="number"||typeof m=="bigint")&&qc(l,""+m);break;case"onScroll":m!=null&&tt("scroll",l);break;case"onScrollEnd":m!=null&&tt("scrollend",l);break;case"onClick":m!=null&&(l.onclick=qf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!VD.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(C=g.endsWith("Capture"),u=g.slice(2,C?g.length-7:void 0),x=l[Vs]||null,x=x!=null?x[g]:null,typeof x=="function"&&l.removeEventListener(u,x,C),typeof m=="function")){typeof x!="function"&&x!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(u,m,C);break e}g in l?l[g]=m:m===!0?l.setAttribute(g,""):Jp(l,g,m)}}}function ss(l,u,g){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",l),tt("load",l);var m=!1,C=!1,x;for(x in g)if(g.hasOwnProperty(x)){var I=g[x];if(I!=null)switch(x){case"src":m=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,u));default:Lt(l,u,x,I,g,null)}}C&&Lt(l,u,"srcSet",g.srcSet,g,null),m&&Lt(l,u,"src",g.src,g,null);return;case"input":tt("invalid",l);var k=x=I=C=null,z=null,$=null;for(m in g)if(g.hasOwnProperty(m)){var oe=g[m];if(oe!=null)switch(m){case"name":C=oe;break;case"type":I=oe;break;case"checked":z=oe;break;case"defaultChecked":$=oe;break;case"value":x=oe;break;case"defaultValue":k=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,u));break;default:Lt(l,u,m,oe,g,null)}}$D(l,x,k,z,$,I,C,!1),tf(l);return;case"select":tt("invalid",l),m=I=x=null;for(C in g)if(g.hasOwnProperty(C)&&(k=g[C],k!=null))switch(C){case"value":x=k;break;case"defaultValue":I=k;break;case"multiple":m=k;default:Lt(l,u,C,k,g,null)}u=x,g=I,l.multiple=!!m,u!=null?Zc(l,!!m,u,!1):g!=null&&Zc(l,!!m,g,!0);return;case"textarea":tt("invalid",l),x=C=m=null;for(I in g)if(g.hasOwnProperty(I)&&(k=g[I],k!=null))switch(I){case"value":m=k;break;case"defaultValue":C=k;break;case"children":x=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:Lt(l,u,I,k,g,null)}qD(l,m,C,x),tf(l);return;case"option":for(z in g)if(g.hasOwnProperty(z)&&(m=g[z],m!=null))switch(z){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Lt(l,u,z,m,g,null)}return;case"dialog":tt("beforetoggle",l),tt("toggle",l),tt("cancel",l),tt("close",l);break;case"iframe":case"object":tt("load",l);break;case"video":case"audio":for(m=0;m<Td.length;m++)tt(Td[m],l);break;case"image":tt("error",l),tt("load",l);break;case"details":tt("toggle",l);break;case"embed":case"source":case"link":tt("error",l),tt("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in g)if(g.hasOwnProperty($)&&(m=g[$],m!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,u));default:Lt(l,u,$,m,g,null)}return;default:if(gC(u)){for(oe in g)g.hasOwnProperty(oe)&&(m=g[oe],m!==void 0&&XS(l,u,oe,m,g,void 0));return}}for(k in g)g.hasOwnProperty(k)&&(m=g[k],m!=null&&Lt(l,u,k,m,g,null))}function Tz(l,u,g,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,x=null,I=null,k=null,z=null,$=null,oe=null;for(J in g){var ce=g[J];if(g.hasOwnProperty(J)&&ce!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":z=ce;default:m.hasOwnProperty(J)||Lt(l,u,J,null,m,ce)}}for(var Q in m){var J=m[Q];if(ce=g[Q],m.hasOwnProperty(Q)&&(J!=null||ce!=null))switch(Q){case"type":x=J;break;case"name":C=J;break;case"checked":$=J;break;case"defaultChecked":oe=J;break;case"value":I=J;break;case"defaultValue":k=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,u));break;default:J!==ce&&Lt(l,u,Q,J,m,ce)}}hC(l,I,k,z,$,oe,x,C);return;case"select":J=I=k=Q=null;for(x in g)if(z=g[x],g.hasOwnProperty(x)&&z!=null)switch(x){case"value":break;case"multiple":J=z;default:m.hasOwnProperty(x)||Lt(l,u,x,null,m,z)}for(C in m)if(x=m[C],z=g[C],m.hasOwnProperty(C)&&(x!=null||z!=null))switch(C){case"value":Q=x;break;case"defaultValue":k=x;break;case"multiple":I=x;default:x!==z&&Lt(l,u,C,x,m,z)}u=k,g=I,m=J,Q!=null?Zc(l,!!g,Q,!1):!!m!=!!g&&(u!=null?Zc(l,!!g,u,!0):Zc(l,!!g,g?[]:"",!1));return;case"textarea":J=Q=null;for(k in g)if(C=g[k],g.hasOwnProperty(k)&&C!=null&&!m.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Lt(l,u,k,null,m,C)}for(I in m)if(C=m[I],x=g[I],m.hasOwnProperty(I)&&(C!=null||x!=null))switch(I){case"value":Q=C;break;case"defaultValue":J=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:C!==x&&Lt(l,u,I,C,m,x)}ZD(l,Q,J);return;case"option":for(var He in g)if(Q=g[He],g.hasOwnProperty(He)&&Q!=null&&!m.hasOwnProperty(He))switch(He){case"selected":l.selected=!1;break;default:Lt(l,u,He,null,m,Q)}for(z in m)if(Q=m[z],J=g[z],m.hasOwnProperty(z)&&Q!==J&&(Q!=null||J!=null))switch(z){case"selected":l.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:Lt(l,u,z,Q,m,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in g)Q=g[ke],g.hasOwnProperty(ke)&&Q!=null&&!m.hasOwnProperty(ke)&&Lt(l,u,ke,null,m,Q);for($ in m)if(Q=m[$],J=g[$],m.hasOwnProperty($)&&Q!==J&&(Q!=null||J!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,u));break;default:Lt(l,u,$,Q,m,J)}return;default:if(gC(u)){for(var Ft in g)Q=g[Ft],g.hasOwnProperty(Ft)&&Q!==void 0&&!m.hasOwnProperty(Ft)&&XS(l,u,Ft,void 0,m,Q);for(oe in m)Q=m[oe],J=g[oe],!m.hasOwnProperty(oe)||Q===J||Q===void 0&&J===void 0||XS(l,u,oe,Q,m,J);return}}for(var j in g)Q=g[j],g.hasOwnProperty(j)&&Q!=null&&!m.hasOwnProperty(j)&&Lt(l,u,j,null,m,Q);for(ce in m)Q=m[ce],J=g[ce],!m.hasOwnProperty(ce)||Q===J||Q==null&&J==null||Lt(l,u,ce,Q,m,J)}var QS=null,JS=null;function Xf(l){return l.nodeType===9?l:l.ownerDocument}function XE(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function QE(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function eb(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var tb=null;function Iz(){var l=window.event;return l&&l.type==="popstate"?l===tb?!1:(tb=l,!0):(tb=null,!1)}var JE=typeof setTimeout=="function"?setTimeout:void 0,Lz=typeof clearTimeout=="function"?clearTimeout:void 0,eT=typeof Promise=="function"?Promise:void 0,Fz=typeof queueMicrotask=="function"?queueMicrotask:typeof eT<"u"?function(l){return eT.resolve(null).then(l).catch(Pz)}:JE;function Pz(l){setTimeout(function(){throw l})}function Ra(l){return l==="head"}function tT(l,u){var g=u,m=0,C=0;do{var x=g.nextSibling;if(l.removeChild(g),x&&x.nodeType===8)if(g=x.data,g==="/$"){if(0<m&&8>m){g=m;var I=l.ownerDocument;if(g&1&&Ld(I.documentElement),g&2&&Ld(I.body),g&4)for(g=I.head,Ld(g),I=g.firstChild;I;){var k=I.nextSibling,z=I.nodeName;I[Yh]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&I.rel.toLowerCase()==="stylesheet"||g.removeChild(I),I=k}}if(C===0){l.removeChild(x),zd(u);return}C--}else g==="$"||g==="$?"||g==="$!"?C++:m=g.charCodeAt(0)-48;else m=0;g=x}while(g);zd(u)}function ib(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var g=u;switch(u=u.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":ib(g),aC(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function kz(l,u,g,m){for(;l.nodeType===1;){var C=g;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[Yh])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(x=l.getAttribute("rel"),x==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(x!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(x=l.getAttribute("src"),(x!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&x&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var x=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===x)return l}else return l;if(l=io(l.nextSibling),l===null)break}return null}function Nz(l,u,g){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=io(l.nextSibling),l===null))return null;return l}function sb(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function Oz(l,u){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")u();else{var m=function(){u(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function io(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var nb=null;function iT(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(u===0)return l;u--}else g==="/$"&&u++}l=l.previousSibling}return null}function sT(l,u,g){switch(u=Xf(g),l){case"html":if(l=u.documentElement,!l)throw Error(s(452));return l;case"head":if(l=u.head,!l)throw Error(s(453));return l;case"body":if(l=u.body,!l)throw Error(s(454));return l;default:throw Error(s(451))}}function Ld(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);aC(l)}var Pn=new Map,nT=new Set;function Qf(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Ar=q.d;q.d={f:Gz,r:Bz,D:zz,C:Hz,L:Vz,m:_z,X:jz,S:Wz,M:Uz};function Gz(){var l=Ar.f(),u=Wf();return l||u}function Bz(l){var u=Uc(l);u!==null&&u.tag===5&&u.type==="form"?MA(u):Ar.r(l)}var Du=typeof document>"u"?null:document;function oT(l,u,g){var m=Du;if(m&&typeof u=="string"&&u){var C=Rn(u);C='link[rel="'+l+'"][href="'+C+'"]',typeof g=="string"&&(C+='[crossorigin="'+g+'"]'),nT.has(C)||(nT.add(C),l={rel:l,crossOrigin:g,href:u},m.querySelector(C)===null&&(u=m.createElement("link"),ss(u,"link",l),Wi(u),m.head.appendChild(u)))}}function zz(l){Ar.D(l),oT("dns-prefetch",l,null)}function Hz(l,u){Ar.C(l,u),oT("preconnect",l,u)}function Vz(l,u,g){Ar.L(l,u,g);var m=Du;if(m&&l&&u){var C='link[rel="preload"][as="'+Rn(u)+'"]';u==="image"&&g&&g.imageSrcSet?(C+='[imagesrcset="'+Rn(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(C+='[imagesizes="'+Rn(g.imageSizes)+'"]')):C+='[href="'+Rn(l)+'"]';var x=C;switch(u){case"style":x=Ru(l);break;case"script":x=Au(l)}Pn.has(x)||(l=d({rel:"preload",href:u==="image"&&g&&g.imageSrcSet?void 0:l,as:u},g),Pn.set(x,l),m.querySelector(C)!==null||u==="style"&&m.querySelector(Fd(x))||u==="script"&&m.querySelector(Pd(x))||(u=m.createElement("link"),ss(u,"link",l),Wi(u),m.head.appendChild(u)))}}function _z(l,u){Ar.m(l,u);var g=Du;if(g&&l){var m=u&&typeof u.as=="string"?u.as:"script",C='link[rel="modulepreload"][as="'+Rn(m)+'"][href="'+Rn(l)+'"]',x=C;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Au(l)}if(!Pn.has(x)&&(l=d({rel:"modulepreload",href:l},u),Pn.set(x,l),g.querySelector(C)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Pd(x)))return}m=g.createElement("link"),ss(m,"link",l),Wi(m),g.head.appendChild(m)}}}function Wz(l,u,g){Ar.S(l,u,g);var m=Du;if(m&&l){var C=Yc(m).hoistableStyles,x=Ru(l);u=u||"default";var I=C.get(x);if(!I){var k={loading:0,preload:null};if(I=m.querySelector(Fd(x)))k.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":u},g),(g=Pn.get(x))&&ob(l,g);var z=I=m.createElement("link");Wi(z),ss(z,"link",l),z._p=new Promise(function($,oe){z.onload=$,z.onerror=oe}),z.addEventListener("load",function(){k.loading|=1}),z.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Jf(I,u,m)}I={type:"stylesheet",instance:I,count:1,state:k},C.set(x,I)}}}function jz(l,u){Ar.X(l,u);var g=Du;if(g&&l){var m=Yc(g).hoistableScripts,C=Au(l),x=m.get(C);x||(x=g.querySelector(Pd(C)),x||(l=d({src:l,async:!0},u),(u=Pn.get(C))&&rb(l,u),x=g.createElement("script"),Wi(x),ss(x,"link",l),g.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(C,x))}}function Uz(l,u){Ar.M(l,u);var g=Du;if(g&&l){var m=Yc(g).hoistableScripts,C=Au(l),x=m.get(C);x||(x=g.querySelector(Pd(C)),x||(l=d({src:l,async:!0,type:"module"},u),(u=Pn.get(C))&&rb(l,u),x=g.createElement("script"),Wi(x),ss(x,"link",l),g.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},m.set(C,x))}}function rT(l,u,g,m){var C=(C=le.current)?Qf(C):null;if(!C)throw Error(s(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(u=Ru(g.href),g=Yc(C).hoistableStyles,m=g.get(u),m||(m={type:"style",instance:null,count:0,state:null},g.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=Ru(g.href);var x=Yc(C).hoistableStyles,I=x.get(l);if(I||(C=C.ownerDocument||C,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(l,I),(x=C.querySelector(Fd(l)))&&!x._p&&(I.instance=x,I.state.loading=5),Pn.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Pn.set(l,g),x||Yz(C,l,g,I.state))),u&&m===null)throw Error(s(528,""));return I}if(u&&m!==null)throw Error(s(529,""));return null;case"script":return u=g.async,g=g.src,typeof g=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Au(g),g=Yc(C).hoistableScripts,m=g.get(u),m||(m={type:"script",instance:null,count:0,state:null},g.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,l))}}function Ru(l){return'href="'+Rn(l)+'"'}function Fd(l){return'link[rel="stylesheet"]['+l+"]"}function aT(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function Yz(l,u,g,m){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=l.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),ss(u,"link",g),Wi(u),l.head.appendChild(u))}function Au(l){return'[src="'+Rn(l)+'"]'}function Pd(l){return"script[async]"+l}function lT(l,u,g){if(u.count++,u.instance===null)switch(u.type){case"style":var m=l.querySelector('style[data-href~="'+Rn(g.href)+'"]');if(m)return u.instance=m,Wi(m),m;var C=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),Wi(m),ss(m,"style",C),Jf(m,g.precedence,l),u.instance=m;case"stylesheet":C=Ru(g.href);var x=l.querySelector(Fd(C));if(x)return u.state.loading|=4,u.instance=x,Wi(x),x;m=aT(g),(C=Pn.get(C))&&ob(m,C),x=(l.ownerDocument||l).createElement("link"),Wi(x);var I=x;return I._p=new Promise(function(k,z){I.onload=k,I.onerror=z}),ss(x,"link",m),u.state.loading|=4,Jf(x,g.precedence,l),u.instance=x;case"script":return x=Au(g.src),(C=l.querySelector(Pd(x)))?(u.instance=C,Wi(C),C):(m=g,(C=Pn.get(x))&&(m=d({},g),rb(m,C)),l=l.ownerDocument||l,C=l.createElement("script"),Wi(C),ss(C,"link",m),l.head.appendChild(C),u.instance=C);case"void":return null;default:throw Error(s(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,Jf(m,g.precedence,l));return u.instance}function Jf(l,u,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=m.length?m[m.length-1]:null,x=C,I=0;I<m.length;I++){var k=m[I];if(k.dataset.precedence===u)x=k;else if(x!==C)break}x?x.parentNode.insertBefore(l,x.nextSibling):(u=g.nodeType===9?g.head:g,u.insertBefore(l,u.firstChild))}function ob(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function rb(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var em=null;function cT(l,u,g){if(em===null){var m=new Map,C=em=new Map;C.set(g,m)}else C=em,m=C.get(g),m||(m=new Map,C.set(g,m));if(m.has(l))return m;for(m.set(l,null),g=g.getElementsByTagName(l),C=0;C<g.length;C++){var x=g[C];if(!(x[Yh]||x[fs]||l==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var I=x.getAttribute(u)||"";I=l+I;var k=m.get(I);k?k.push(x):m.set(I,[x])}}return m}function uT(l,u,g){l=l.ownerDocument||l,l.head.insertBefore(g,u==="title"?l.querySelector("head > title"):null)}function Kz(l,u,g){if(g===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function hT(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var kd=null;function $z(){}function Zz(l,u,g){if(kd===null)throw Error(s(475));var m=kd;if(u.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var C=Ru(g.href),x=l.querySelector(Fd(C));if(x){l=x._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(m.count++,m=tm.bind(m),l.then(m,m)),u.state.loading|=4,u.instance=x,Wi(x);return}x=l.ownerDocument||l,g=aT(g),(C=Pn.get(C))&&ob(g,C),x=x.createElement("link"),Wi(x);var I=x;I._p=new Promise(function(k,z){I.onload=k,I.onerror=z}),ss(x,"link",g),u.instance=x}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(m.count++,u=tm.bind(m),l.addEventListener("load",u),l.addEventListener("error",u))}}function qz(){if(kd===null)throw Error(s(475));var l=kd;return l.stylesheets&&l.count===0&&ab(l,l.stylesheets),0<l.count?function(u){var g=setTimeout(function(){if(l.stylesheets&&ab(l,l.stylesheets),l.unsuspend){var m=l.unsuspend;l.unsuspend=null,m()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(g)}}:null}function tm(){if(this.count--,this.count===0){if(this.stylesheets)ab(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var im=null;function ab(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,im=new Map,u.forEach(Xz,l),im=null,tm.call(l))}function Xz(l,u){if(!(u.state.loading&4)){var g=im.get(l);if(g)var m=g.get(null);else{g=new Map,im.set(l,g);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<C.length;x++){var I=C[x];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(g.set(I.dataset.precedence,I),m=I)}m&&g.set(null,m)}C=u.instance,I=C.getAttribute("data-precedence"),x=g.get(I)||m,x===m&&g.set(null,C),g.set(I,C),this.count++,m=tm.bind(this),C.addEventListener("load",m),C.addEventListener("error",m),x?x.parentNode.insertBefore(C,x.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),u.state.loading|=4}}var Nd={$$typeof:R,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function Qz(l,u,g,m,C,x,I,k){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=sC(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sC(0),this.hiddenUpdates=sC(null),this.identifierPrefix=m,this.onUncaughtError=C,this.onCaughtError=x,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function dT(l,u,g,m,C,x,I,k,z,$,oe,ce){return l=new Qz(l,u,g,I,k,z,$,ce),u=1,x===!0&&(u|=24),x=nn(3,null,null,u),l.current=x,x.stateNode=l,u=_C(),u.refCount++,l.pooledCache=u,u.refCount++,x.memoizedState={element:m,isDehydrated:g,cache:u},YC(x),l}function gT(l){return l?(l=nu,l):nu}function pT(l,u,g,m,C,x){C=gT(C),m.context===null?m.context=C:m.pendingContext=C,m=ga(u),m.payload={element:g},x=x===void 0?null:x,x!==null&&(m.callback=x),g=pa(l,m,u),g!==null&&(cn(g,l,u),hd(g,l,u))}function fT(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<u?g:u}}function lb(l,u){fT(l,u),(l=l.alternate)&&fT(l,u)}function mT(l){if(l.tag===13){var u=su(l,67108864);u!==null&&cn(u,l,67108864),lb(l,67108864)}}var sm=!0;function Jz(l,u,g,m){var C=H.T;H.T=null;var x=q.p;try{q.p=2,cb(l,u,g,m)}finally{q.p=x,H.T=C}}function eH(l,u,g,m){var C=H.T;H.T=null;var x=q.p;try{q.p=8,cb(l,u,g,m)}finally{q.p=x,H.T=C}}function cb(l,u,g,m){if(sm){var C=ub(m);if(C===null)qS(l,u,m,nm,g),yT(l,m);else if(iH(C,l,u,g,m))m.stopPropagation();else if(yT(l,m),u&4&&-1<tH.indexOf(l)){for(;C!==null;){var x=Uc(C);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var I=Sl(x.pendingLanes);if(I!==0){var k=x;for(k.pendingLanes|=2,k.entangledLanes|=2;I;){var z=1<<31-tn(I);k.entanglements[1]|=z,I&=~z}Po(x),(Dt&6)===0&&(Vf=ft()+500,Ed(0))}}break;case 13:k=su(x,2),k!==null&&cn(k,x,2),Wf(),lb(x,2)}if(x=ub(m),x===null&&qS(l,u,m,nm,g),x===C)break;C=x}C!==null&&m.stopPropagation()}else qS(l,u,m,null,g)}}function ub(l){return l=fC(l),hb(l)}var nm=null;function hb(l){if(nm=null,l=jc(l),l!==null){var u=o(l);if(u===null)l=null;else{var g=u.tag;if(g===13){if(l=r(u),l!==null)return l;l=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return nm=l,null}function vT(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Fi()){case _i:return 2;case Mt:return 8;case mt:case Di:return 32;case li:return 268435456;default:return 32}default:return 32}}var db=!1,Aa=null,Ea=null,Ta=null,Od=new Map,Gd=new Map,Ia=[],tH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yT(l,u){switch(l){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Od.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gd.delete(u.pointerId)}}function Bd(l,u,g,m,C,x){return l===null||l.nativeEvent!==x?(l={blockedOn:u,domEventName:g,eventSystemFlags:m,nativeEvent:x,targetContainers:[C]},u!==null&&(u=Uc(u),u!==null&&mT(u)),l):(l.eventSystemFlags|=m,u=l.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),l)}function iH(l,u,g,m,C){switch(u){case"focusin":return Aa=Bd(Aa,l,u,g,m,C),!0;case"dragenter":return Ea=Bd(Ea,l,u,g,m,C),!0;case"mouseover":return Ta=Bd(Ta,l,u,g,m,C),!0;case"pointerover":var x=C.pointerId;return Od.set(x,Bd(Od.get(x)||null,l,u,g,m,C)),!0;case"gotpointercapture":return x=C.pointerId,Gd.set(x,Bd(Gd.get(x)||null,l,u,g,m,C)),!0}return!1}function CT(l){var u=jc(l.target);if(u!==null){var g=o(u);if(g!==null){if(u=g.tag,u===13){if(u=r(g),u!==null){l.blockedOn=u,ZG(l.priority,function(){if(g.tag===13){var m=ln();m=nC(m);var C=su(g,m);C!==null&&cn(C,g,m),lb(g,m)}});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function om(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var g=ub(l.nativeEvent);if(g===null){g=l.nativeEvent;var m=new g.constructor(g.type,g);pC=m,g.target.dispatchEvent(m),pC=null}else return u=Uc(g),u!==null&&mT(u),l.blockedOn=g,!1;u.shift()}return!0}function ST(l,u,g){om(l)&&g.delete(u)}function sH(){db=!1,Aa!==null&&om(Aa)&&(Aa=null),Ea!==null&&om(Ea)&&(Ea=null),Ta!==null&&om(Ta)&&(Ta=null),Od.forEach(ST),Gd.forEach(ST)}function rm(l,u){l.blockedOn===u&&(l.blockedOn=null,db||(db=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sH)))}var am=null;function bT(l){am!==l&&(am=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){am===l&&(am=null);for(var u=0;u<l.length;u+=3){var g=l[u],m=l[u+1],C=l[u+2];if(typeof m!="function"){if(hb(m||g)===null)continue;break}var x=Uc(g);x!==null&&(l.splice(u,3),u-=3,hS(x,{pending:!0,data:C,method:g.method,action:m},m,C))}}))}function zd(l){function u(z){return rm(z,l)}Aa!==null&&rm(Aa,l),Ea!==null&&rm(Ea,l),Ta!==null&&rm(Ta,l),Od.forEach(u),Gd.forEach(u);for(var g=0;g<Ia.length;g++){var m=Ia[g];m.blockedOn===l&&(m.blockedOn=null)}for(;0<Ia.length&&(g=Ia[0],g.blockedOn===null);)CT(g),g.blockedOn===null&&Ia.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var C=g[m],x=g[m+1],I=C[Vs]||null;if(typeof x=="function")I||bT(g);else if(I){var k=null;if(x&&x.hasAttribute("formAction")){if(C=x,I=x[Vs]||null)k=I.formAction;else if(hb(C)!==null)continue}else k=I.action;typeof k=="function"?g[m+1]=k:(g.splice(m,3),m-=3),bT(g)}}}function gb(l){this._internalRoot=l}lm.prototype.render=gb.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(s(409));var g=u.current,m=ln();pT(g,m,l,u,null,null)},lm.prototype.unmount=gb.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;pT(l.current,2,null,l,null,null),Wf(),u[Wc]=null}};function lm(l){this._internalRoot=l}lm.prototype.unstable_scheduleHydration=function(l){if(l){var u=BD();l={blockedOn:null,target:l,priority:u};for(var g=0;g<Ia.length&&u!==0&&u<Ia[g].priority;g++);Ia.splice(g,0,l),g===0&&CT(l)}};var wT=t.version;if(wT!=="19.1.0")throw Error(s(527,wT,"19.1.0"));q.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=c(u),l=l!==null?h(l):null,l=l===null?null:l.stateNode,l};var nH={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cm.isDisabled&&cm.supportsFiber)try{wt=cm.inject(nH),Nt=cm}catch{}}return Vd.createRoot=function(l,u){if(!n(l))throw Error(s(299));var g=!1,m="",C=BA,x=zA,I=HA,k=null;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(x=u.onCaughtError),u.onRecoverableError!==void 0&&(I=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(k=u.unstable_transitionCallbacks)),u=dT(l,1,!1,null,null,g,m,C,x,I,k,null),l[Wc]=u.current,ZS(l),new gb(u)},Vd.hydrateRoot=function(l,u,g){if(!n(l))throw Error(s(299));var m=!1,C="",x=BA,I=zA,k=HA,z=null,$=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(C=g.identifierPrefix),g.onUncaughtError!==void 0&&(x=g.onUncaughtError),g.onCaughtError!==void 0&&(I=g.onCaughtError),g.onRecoverableError!==void 0&&(k=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(z=g.unstable_transitionCallbacks),g.formState!==void 0&&($=g.formState)),u=dT(l,1,!0,u,g??null,m,C,x,I,k,z,$),u.context=gT(null),g=u.current,m=ln(),m=nC(m),C=ga(m),C.callback=null,pa(g,C,m),g=m,u.current.lanes=g,Uh(u,g),Po(u),l[Wc]=u.current,ZS(l),new lm(u)},Vd.version="19.1.0",Vd}var FT;function gH(){if(FT)return mb.exports;FT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mb.exports=dH(),mb.exports}var pH=gH(),_d={},PT;function fH(){if(PT)return _d;PT=1,Object.defineProperty(_d,"__esModule",{value:!0}),_d.parse=r,_d.serialize=h;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString,o=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function r(f,v){const y=new o,b=f.length;if(b<2)return y;const w=(v==null?void 0:v.decode)||d;let S=0;do{const M=f.indexOf("=",S);if(M===-1)break;const R=f.indexOf(";",S),A=R===-1?b:R;if(M>A){S=f.lastIndexOf(";",M-1)+1;continue}const T=a(f,S,M),F=c(f,M,T),P=f.slice(T,F);if(y[P]===void 0){let N=a(f,M+1,A),O=c(f,A,N);const B=w(f.slice(N,O));y[P]=B}S=A+1}while(S<b);return y}function a(f,v,y){do{const b=f.charCodeAt(v);if(b!==32&&b!==9)return v}while(++v<y);return y}function c(f,v,y){for(;v>y;){const b=f.charCodeAt(--v);if(b!==32&&b!==9)return v+1}return y}function h(f,v,y){const b=(y==null?void 0:y.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const w=b(v);if(!t.test(w))throw new TypeError(`argument val is invalid: ${v}`);let S=f+"="+w;if(!y)return S;if(y.maxAge!==void 0){if(!Number.isInteger(y.maxAge))throw new TypeError(`option maxAge is invalid: ${y.maxAge}`);S+="; Max-Age="+y.maxAge}if(y.domain){if(!i.test(y.domain))throw new TypeError(`option domain is invalid: ${y.domain}`);S+="; Domain="+y.domain}if(y.path){if(!s.test(y.path))throw new TypeError(`option path is invalid: ${y.path}`);S+="; Path="+y.path}if(y.expires){if(!p(y.expires)||!Number.isFinite(y.expires.valueOf()))throw new TypeError(`option expires is invalid: ${y.expires}`);S+="; Expires="+y.expires.toUTCString()}if(y.httpOnly&&(S+="; HttpOnly"),y.secure&&(S+="; Secure"),y.partitioned&&(S+="; Partitioned"),y.priority)switch(typeof y.priority=="string"?y.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${y.priority}`)}if(y.sameSite)switch(typeof y.sameSite=="string"?y.sameSite.toLowerCase():y.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${y.sameSite}`)}return S}function d(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function p(f){return n.call(f)==="[object Date]"}return _d}fH();var kT="popstate";function mH(e={}){function t(s,n){let{pathname:o,search:r,hash:a}=s.location;return bw("",{pathname:o,search:r,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function i(s,n){return typeof n=="string"?n:Mg(n)}return yH(t,i,null,e)}function oi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ko(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vH(){return Math.random().toString(36).substring(2,10)}function NT(e,t){return{usr:e.state,key:e.key,idx:t}}function bw(e,t,i=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?dh(t):t,state:i,key:t&&t.key||s||vH()}}function Mg({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function dh(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function yH(e,t,i,s={}){let{window:n=document.defaultView,v5Compat:o=!1}=s,r=n.history,a="POP",c=null,h=d();h==null&&(h=0,r.replaceState({...r.state,idx:h},""));function d(){return(r.state||{idx:null}).idx}function p(){a="POP";let w=d(),S=w==null?null:w-h;h=w,c&&c({action:a,location:b.location,delta:S})}function f(w,S){a="PUSH";let M=bw(b.location,w,S);h=d()+1;let R=NT(M,h),A=b.createHref(M);try{r.pushState(R,"",A)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;n.location.assign(A)}o&&c&&c({action:a,location:b.location,delta:1})}function v(w,S){a="REPLACE";let M=bw(b.location,w,S);h=d();let R=NT(M,h),A=b.createHref(M);r.replaceState(R,"",A),o&&c&&c({action:a,location:b.location,delta:0})}function y(w){let S=n.location.origin!=="null"?n.location.origin:n.location.href,M=typeof w=="string"?w:Mg(w);return M=M.replace(/ $/,"%20"),oi(S,`No window.location.(origin|href) available to create URL for href: ${M}`),new URL(M,S)}let b={get action(){return a},get location(){return e(n,r)},listen(w){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(kT,p),c=w,()=>{n.removeEventListener(kT,p),c=null}},createHref(w){return t(n,w)},createURL:y,encodeLocation(w){let S=y(w);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:f,replace:v,go(w){return r.go(w)}};return b}function rF(e,t,i="/"){return CH(e,t,i,!1)}function CH(e,t,i,s){let n=typeof t=="string"?dh(t):t,o=_r(n.pathname||"/",i);if(o==null)return null;let r=aF(e);SH(r);let a=null;for(let c=0;a==null&&c<r.length;++c){let h=LH(o);a=TH(r[c],h,s)}return a}function aF(e,t=[],i=[],s=""){let n=(o,r,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:r,route:o};c.relativePath.startsWith("/")&&(oi(c.relativePath.startsWith(s),`Absolute route path "${c.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(s.length));let h=Nr([s,c.relativePath]),d=i.concat(c);o.children&&o.children.length>0&&(oi(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),aF(o.children,t,d,h)),!(o.path==null&&!o.index)&&t.push({path:h,score:AH(h,o.index),routesMeta:d})};return e.forEach((o,r)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))n(o,r);else for(let c of lF(o.path))n(o,r,c)}),t}function lF(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,n=i.endsWith("?"),o=i.replace(/\?$/,"");if(s.length===0)return n?[o,""]:[o];let r=lF(s.join("/")),a=[];return a.push(...r.map(c=>c===""?o:[o,c].join("/"))),n&&a.push(...r),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function SH(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:EH(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var bH=/^:[\w-]+$/,wH=3,xH=2,MH=1,DH=10,RH=-2,OT=e=>e==="*";function AH(e,t){let i=e.split("/"),s=i.length;return i.some(OT)&&(s+=RH),t&&(s+=xH),i.filter(n=>!OT(n)).reduce((n,o)=>n+(bH.test(o)?wH:o===""?MH:DH),s)}function EH(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function TH(e,t,i=!1){let{routesMeta:s}=e,n={},o="/",r=[];for(let a=0;a<s.length;++a){let c=s[a],h=a===s.length-1,d=o==="/"?t:t.slice(o.length)||"/",p=qm({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},d),f=c.route;if(!p&&h&&i&&!s[s.length-1].route.index&&(p=qm({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!p)return null;Object.assign(n,p.params),r.push({params:n,pathname:Nr([o,p.pathname]),pathnameBase:NH(Nr([o,p.pathnameBase])),route:f}),p.pathnameBase!=="/"&&(o=Nr([o,p.pathnameBase]))}return r}function qm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=IH(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let o=n[0],r=o.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:s.reduce((h,{paramName:d,isOptional:p},f)=>{if(d==="*"){let y=a[f]||"";r=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const v=a[f];return p&&!v?h[d]=void 0:h[d]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:r,pattern:e}}function IH(e,t=!1,i=!0){Ko(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,a,c)=>(s.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function LH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ko(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _r(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}function FH(e,t="/"){let{pathname:i,search:s="",hash:n=""}=typeof e=="string"?dh(e):e;return{pathname:i?i.startsWith("/")?i:PH(i,t):t,search:OH(s),hash:GH(n)}}function PH(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?i.length>1&&i.pop():n!=="."&&i.push(n)}),i.length>1?i.join("/"):"/"}function Sb(e,t,i,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kH(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function cF(e){let t=kH(e);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function uF(e,t,i,s=!1){let n;typeof e=="string"?n=dh(e):(n={...e},oi(!n.pathname||!n.pathname.includes("?"),Sb("?","pathname","search",n)),oi(!n.pathname||!n.pathname.includes("#"),Sb("#","pathname","hash",n)),oi(!n.search||!n.search.includes("#"),Sb("#","search","hash",n)));let o=e===""||n.pathname==="",r=o?"/":n.pathname,a;if(r==null)a=i;else{let p=t.length-1;if(!s&&r.startsWith("..")){let f=r.split("/");for(;f[0]==="..";)f.shift(),p-=1;n.pathname=f.join("/")}a=p>=0?t[p]:"/"}let c=FH(n,a),h=r&&r!=="/"&&r.endsWith("/"),d=(o||r===".")&&i.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}var Nr=e=>e.join("/").replace(/\/\/+/g,"/"),NH=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),OH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,GH=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function BH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var hF=["POST","PUT","PATCH","DELETE"];new Set(hF);var zH=["GET",...hF];new Set(zH);var gh=L.createContext(null);gh.displayName="DataRouter";var _v=L.createContext(null);_v.displayName="DataRouterState";var dF=L.createContext({isTransitioning:!1});dF.displayName="ViewTransition";var HH=L.createContext(new Map);HH.displayName="Fetchers";var VH=L.createContext(null);VH.displayName="Await";var ir=L.createContext(null);ir.displayName="Navigation";var ip=L.createContext(null);ip.displayName="Location";var sr=L.createContext({outlet:null,matches:[],isDataRoute:!1});sr.displayName="Route";var Fx=L.createContext(null);Fx.displayName="RouteError";function _H(e,{relative:t}={}){oi(sp(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=L.useContext(ir),{hash:n,pathname:o,search:r}=np(e,{relative:t}),a=o;return i!=="/"&&(a=o==="/"?i:Nr([i,o])),s.createHref({pathname:a,search:r,hash:n})}function sp(){return L.useContext(ip)!=null}function ol(){return oi(sp(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(ip).location}var gF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pF(e){L.useContext(ir).static||L.useLayoutEffect(e)}function ph(){let{isDataRoute:e}=L.useContext(sr);return e?t2():WH()}function WH(){oi(sp(),"useNavigate() may be used only in the context of a <Router> component.");let e=L.useContext(gh),{basename:t,navigator:i}=L.useContext(ir),{matches:s}=L.useContext(sr),{pathname:n}=ol(),o=JSON.stringify(cF(s)),r=L.useRef(!1);return pF(()=>{r.current=!0}),L.useCallback((c,h={})=>{if(Ko(r.current,gF),!r.current)return;if(typeof c=="number"){i.go(c);return}let d=uF(c,JSON.parse(o),n,h.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Nr([t,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[t,i,o,n,e])}L.createContext(null);function fF(){let{matches:e}=L.useContext(sr),t=e[e.length-1];return t?t.params:{}}function np(e,{relative:t}={}){let{matches:i}=L.useContext(sr),{pathname:s}=ol(),n=JSON.stringify(cF(i));return L.useMemo(()=>uF(e,JSON.parse(n),s,t==="path"),[e,n,s,t])}function jH(e,t){return mF(e,t)}function mF(e,t,i,s){var M;oi(sp(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n,static:o}=L.useContext(ir),{matches:r}=L.useContext(sr),a=r[r.length-1],c=a?a.params:{},h=a?a.pathname:"/",d=a?a.pathnameBase:"/",p=a&&a.route;{let R=p&&p.path||"";vF(h,!p||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let f=ol(),v;if(t){let R=typeof t=="string"?dh(t):t;oi(d==="/"||((M=R.pathname)==null?void 0:M.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${R.pathname}" was given in the \`location\` prop.`),v=R}else v=f;let y=v.pathname||"/",b=y;if(d!=="/"){let R=d.replace(/^\//,"").split("/");b="/"+y.replace(/^\//,"").split("/").slice(R.length).join("/")}let w=!o&&i&&i.matches&&i.matches.length>0?i.matches:rF(e,{pathname:b});Ko(p||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ko(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=ZH(w&&w.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:Nr([d,n.encodeLocation?n.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?d:Nr([d,n.encodeLocation?n.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),r,i,s);return t&&S?L.createElement(ip.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function UH(){let e=e2(),t=BH(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},r=null;return console.error("Error handled by React Router default ErrorBoundary:",e),r=L.createElement(L.Fragment,null,L.createElement("p",null,"💿 Hey developer 👋"),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:o},"ErrorBoundary")," or"," ",L.createElement("code",{style:o},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},t),i?L.createElement("pre",{style:n},i):null,r)}var YH=L.createElement(UH,null),KH=class extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?L.createElement(sr.Provider,{value:this.props.routeContext},L.createElement(Fx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $H({routeContext:e,match:t,children:i}){let s=L.useContext(gh);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),L.createElement(sr.Provider,{value:e},i)}function ZH(e,t=[],i=null,s=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let n=e,o=i==null?void 0:i.errors;if(o!=null){let c=n.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);oi(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),n=n.slice(0,Math.min(n.length,c+1))}let r=!1,a=-1;if(i)for(let c=0;c<n.length;c++){let h=n[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(a=c),h.route.id){let{loaderData:d,errors:p}=i,f=h.route.loader&&!d.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||f){r=!0,a>=0?n=n.slice(0,a+1):n=[n[0]];break}}}return n.reduceRight((c,h,d)=>{let p,f=!1,v=null,y=null;i&&(p=o&&h.route.id?o[h.route.id]:void 0,v=h.route.errorElement||YH,r&&(a<0&&d===0?(vF("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,y=null):a===d&&(f=!0,y=h.route.hydrateFallbackElement||null)));let b=t.concat(n.slice(0,d+1)),w=()=>{let S;return p?S=v:f?S=y:h.route.Component?S=L.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=c,L.createElement($H,{match:h,routeContext:{outlet:c,matches:b,isDataRoute:i!=null},children:S})};return i&&(h.route.ErrorBoundary||h.route.errorElement||d===0)?L.createElement(KH,{location:i.location,revalidation:i.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}function Px(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qH(e){let t=L.useContext(gh);return oi(t,Px(e)),t}function XH(e){let t=L.useContext(_v);return oi(t,Px(e)),t}function QH(e){let t=L.useContext(sr);return oi(t,Px(e)),t}function kx(e){let t=QH(e),i=t.matches[t.matches.length-1];return oi(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function JH(){return kx("useRouteId")}function e2(){var s;let e=L.useContext(Fx),t=XH("useRouteError"),i=kx("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[i]}function t2(){let{router:e}=qH("useNavigate"),t=kx("useNavigate"),i=L.useRef(!1);return pF(()=>{i.current=!0}),L.useCallback(async(n,o={})=>{Ko(i.current,gF),i.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...o}))},[e,t])}var GT={};function vF(e,t,i){!t&&!GT[e]&&(GT[e]=!0,Ko(!1,i))}L.memo(i2);function i2({routes:e,future:t,state:i}){return mF(e,void 0,i,t)}function ql(e){oi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function s2({basename:e="/",children:t=null,location:i,navigationType:s="POP",navigator:n,static:o=!1}){oi(!sp(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let r=e.replace(/^\/*/,"/"),a=L.useMemo(()=>({basename:r,navigator:n,static:o,future:{}}),[r,n,o]);typeof i=="string"&&(i=dh(i));let{pathname:c="/",search:h="",hash:d="",state:p=null,key:f="default"}=i,v=L.useMemo(()=>{let y=_r(c,r);return y==null?null:{location:{pathname:y,search:h,hash:d,state:p,key:f},navigationType:s}},[r,c,h,d,p,f,s]);return Ko(v!=null,`<Router basename="${r}"> is not able to match the URL "${c}${h}${d}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:L.createElement(ir.Provider,{value:a},L.createElement(ip.Provider,{children:t,value:v}))}function n2({children:e,location:t}){return jH(ww(e),t)}function ww(e,t=[]){let i=[];return L.Children.forEach(e,(s,n)=>{if(!L.isValidElement(s))return;let o=[...t,n];if(s.type===L.Fragment){i.push.apply(i,ww(s.props.children,o));return}oi(s.type===ql,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),oi(!s.props.index||!s.props.children,"An index route cannot have child routes.");let r={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(r.children=ww(s.props.children,o)),i.push(r)}),i}var Fm="get",Pm="application/x-www-form-urlencoded";function Wv(e){return e!=null&&typeof e.tagName=="string"}function o2(e){return Wv(e)&&e.tagName.toLowerCase()==="button"}function r2(e){return Wv(e)&&e.tagName.toLowerCase()==="form"}function a2(e){return Wv(e)&&e.tagName.toLowerCase()==="input"}function l2(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function c2(e,t){return e.button===0&&(!t||t==="_self")&&!l2(e)}var um=null;function u2(){if(um===null)try{new FormData(document.createElement("form"),0),um=!1}catch{um=!0}return um}var h2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function bb(e){return e!=null&&!h2.has(e)?(Ko(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pm}"`),null):e}function d2(e,t){let i,s,n,o,r;if(r2(e)){let a=e.getAttribute("action");s=a?_r(a,t):null,i=e.getAttribute("method")||Fm,n=bb(e.getAttribute("enctype"))||Pm,o=new FormData(e)}else if(o2(e)||a2(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||a.getAttribute("action");if(s=c?_r(c,t):null,i=e.getAttribute("formmethod")||a.getAttribute("method")||Fm,n=bb(e.getAttribute("formenctype"))||bb(a.getAttribute("enctype"))||Pm,o=new FormData(a,e),!u2()){let{name:h,type:d,value:p}=e;if(d==="image"){let f=h?`${h}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else h&&o.append(h,p)}}else{if(Wv(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Fm,s=null,n=Pm,r=e}return o&&n==="text/plain"&&(r=o,o=void 0),{action:s,method:i.toLowerCase(),encType:n,formData:o,body:r}}function Nx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function g2(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function p2(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function f2(e,t,i){let s=await Promise.all(e.map(async n=>{let o=t.routes[n.route.id];if(o){let r=await g2(o,i);return r.links?r.links():[]}return[]}));return C2(s.flat(1).filter(p2).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function BT(e,t,i,s,n,o){let r=(c,h)=>i[h]?c.route.id!==i[h].route.id:!0,a=(c,h)=>{var d;return i[h].pathname!==c.pathname||((d=i[h].route.path)==null?void 0:d.endsWith("*"))&&i[h].params["*"]!==c.params["*"]};return o==="assets"?t.filter((c,h)=>r(c,h)||a(c,h)):o==="data"?t.filter((c,h)=>{var p;let d=s.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(r(c,h)||a(c,h))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((p=i[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function m2(e,t,{includeHydrateFallback:i}={}){return v2(e.map(s=>{let n=t.routes[s.route.id];if(!n)return[];let o=[n.module];return n.clientActionModule&&(o=o.concat(n.clientActionModule)),n.clientLoaderModule&&(o=o.concat(n.clientLoaderModule)),i&&n.hydrateFallbackModule&&(o=o.concat(n.hydrateFallbackModule)),n.imports&&(o=o.concat(n.imports)),o}).flat(1))}function v2(e){return[...new Set(e)]}function y2(e){let t={},i=Object.keys(e).sort();for(let s of i)t[s]=e[s];return t}function C2(e,t){let i=new Set;return new Set(t),e.reduce((s,n)=>{let o=JSON.stringify(y2(n));return i.has(o)||(i.add(o),s.push({key:o,link:n})),s},[])}var S2=new Set([100,101,204,205]);function b2(e,t){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname="_root.data":t&&_r(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.data`:i.pathname=`${i.pathname.replace(/\/$/,"")}.data`,i}function yF(){let e=L.useContext(gh);return Nx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function w2(){let e=L.useContext(_v);return Nx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ox=L.createContext(void 0);Ox.displayName="FrameworkContext";function CF(){let e=L.useContext(Ox);return Nx(e,"You must render this element inside a <HydratedRouter> element"),e}function x2(e,t){let i=L.useContext(Ox),[s,n]=L.useState(!1),[o,r]=L.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:h,onMouseLeave:d,onTouchStart:p}=t,f=L.useRef(null);L.useEffect(()=>{if(e==="render"&&r(!0),e==="viewport"){let b=S=>{S.forEach(M=>{r(M.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[e]),L.useEffect(()=>{if(s){let b=setTimeout(()=>{r(!0)},100);return()=>{clearTimeout(b)}}},[s]);let v=()=>{n(!0)},y=()=>{n(!1),r(!1)};return i?e!=="intent"?[o,f,{}]:[o,f,{onFocus:Wd(a,v),onBlur:Wd(c,y),onMouseEnter:Wd(h,v),onMouseLeave:Wd(d,y),onTouchStart:Wd(p,v)}]:[!1,f,{}]}function Wd(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function M2({page:e,...t}){let{router:i}=yF(),s=L.useMemo(()=>rF(i.routes,e,i.basename),[i.routes,e,i.basename]);return s?L.createElement(R2,{page:e,matches:s,...t}):null}function D2(e){let{manifest:t,routeModules:i}=CF(),[s,n]=L.useState([]);return L.useEffect(()=>{let o=!1;return f2(e,t,i).then(r=>{o||n(r)}),()=>{o=!0}},[e,t,i]),s}function R2({page:e,matches:t,...i}){let s=ol(),{manifest:n,routeModules:o}=CF(),{basename:r}=yF(),{loaderData:a,matches:c}=w2(),h=L.useMemo(()=>BT(e,t,c,n,s,"data"),[e,t,c,n,s]),d=L.useMemo(()=>BT(e,t,c,n,s,"assets"),[e,t,c,n,s]),p=L.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let y=new Set,b=!1;if(t.forEach(S=>{var R;let M=n.routes[S.route.id];!M||!M.hasLoader||(!h.some(A=>A.route.id===S.route.id)&&S.route.id in a&&((R=o[S.route.id])!=null&&R.shouldRevalidate)||M.hasClientLoader?b=!0:y.add(S.route.id))}),y.size===0)return[];let w=b2(e,r);return b&&y.size>0&&w.searchParams.set("_routes",t.filter(S=>y.has(S.route.id)).map(S=>S.route.id).join(",")),[w.pathname+w.search]},[r,a,s,n,h,t,e,o]),f=L.useMemo(()=>m2(d,n),[d,n]),v=D2(d);return L.createElement(L.Fragment,null,p.map(y=>L.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...i})),f.map(y=>L.createElement("link",{key:y,rel:"modulepreload",href:y,...i})),v.map(({key:y,link:b})=>L.createElement("link",{key:y,...b})))}function A2(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var SF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{SF&&(window.__reactRouterVersion="7.5.3")}catch{}function E2({basename:e,children:t,window:i}){let s=L.useRef();s.current==null&&(s.current=mH({window:i,v5Compat:!0}));let n=s.current,[o,r]=L.useState({action:n.action,location:n.location}),a=L.useCallback(c=>{L.startTransition(()=>r(c))},[r]);return L.useLayoutEffect(()=>n.listen(a),[n,a]),L.createElement(s2,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:n})}var bF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cc=L.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:n,reloadDocument:o,replace:r,state:a,target:c,to:h,preventScrollReset:d,viewTransition:p,...f},v){let{basename:y}=L.useContext(ir),b=typeof h=="string"&&bF.test(h),w,S=!1;if(typeof h=="string"&&b&&(w=h,SF))try{let O=new URL(window.location.href),B=h.startsWith("//")?new URL(O.protocol+h):new URL(h),V=_r(B.pathname,y);B.origin===O.origin&&V!=null?h=V+B.search+B.hash:S=!0}catch{Ko(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=_H(h,{relative:n}),[R,A,T]=x2(s,f),F=F2(h,{replace:r,state:a,target:c,preventScrollReset:d,relative:n,viewTransition:p});function P(O){t&&t(O),O.defaultPrevented||F(O)}let N=L.createElement("a",{...f,...T,href:w||M,onClick:S||o?t:P,ref:A2(v,A),target:c,"data-discover":!b&&i==="render"?"true":void 0});return R&&!b?L.createElement(L.Fragment,null,N,L.createElement(M2,{page:M})):N});cc.displayName="Link";var T2=L.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:n=!1,style:o,to:r,viewTransition:a,children:c,...h},d){let p=np(r,{relative:h.relative}),f=ol(),v=L.useContext(_v),{navigator:y,basename:b}=L.useContext(ir),w=v!=null&&G2(p)&&a===!0,S=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,M=f.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;i||(M=M.toLowerCase(),R=R?R.toLowerCase():null,S=S.toLowerCase()),R&&b&&(R=_r(R,b)||R);const A=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let T=M===S||!n&&M.startsWith(S)&&M.charAt(A)==="/",F=R!=null&&(R===S||!n&&R.startsWith(S)&&R.charAt(S.length)==="/"),P={isActive:T,isPending:F,isTransitioning:w},N=T?t:void 0,O;typeof s=="function"?O=s(P):O=[s,T?"active":null,F?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let B=typeof o=="function"?o(P):o;return L.createElement(cc,{...h,"aria-current":N,className:O,ref:d,style:B,to:r,viewTransition:a},typeof c=="function"?c(P):c)});T2.displayName="NavLink";var I2=L.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:n,state:o,method:r=Fm,action:a,onSubmit:c,relative:h,preventScrollReset:d,viewTransition:p,...f},v)=>{let y=N2(),b=O2(a,{relative:h}),w=r.toLowerCase()==="get"?"get":"post",S=typeof a=="string"&&bF.test(a),M=R=>{if(c&&c(R),R.defaultPrevented)return;R.preventDefault();let A=R.nativeEvent.submitter,T=(A==null?void 0:A.getAttribute("formmethod"))||r;y(A||R.currentTarget,{fetcherKey:t,method:T,navigate:i,replace:n,state:o,relative:h,preventScrollReset:d,viewTransition:p})};return L.createElement("form",{ref:v,method:w,action:b,onSubmit:s?c:M,...f,"data-discover":!S&&e==="render"?"true":void 0})});I2.displayName="Form";function L2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wF(e){let t=L.useContext(gh);return oi(t,L2(e)),t}function F2(e,{target:t,replace:i,state:s,preventScrollReset:n,relative:o,viewTransition:r}={}){let a=ph(),c=ol(),h=np(e,{relative:o});return L.useCallback(d=>{if(c2(d,t)){d.preventDefault();let p=i!==void 0?i:Mg(c)===Mg(h);a(e,{replace:p,state:s,preventScrollReset:n,relative:o,viewTransition:r})}},[c,a,h,i,s,t,e,n,o,r])}var P2=0,k2=()=>`__${String(++P2)}__`;function N2(){let{router:e}=wF("useSubmit"),{basename:t}=L.useContext(ir),i=JH();return L.useCallback(async(s,n={})=>{let{action:o,method:r,encType:a,formData:c,body:h}=d2(s,t);if(n.navigate===!1){let d=n.fetcherKey||k2();await e.fetch(d,i,n.action||o,{preventScrollReset:n.preventScrollReset,formData:c,body:h,formMethod:n.method||r,formEncType:n.encType||a,flushSync:n.flushSync})}else await e.navigate(n.action||o,{preventScrollReset:n.preventScrollReset,formData:c,body:h,formMethod:n.method||r,formEncType:n.encType||a,replace:n.replace,state:n.state,fromRouteId:i,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,i])}function O2(e,{relative:t}={}){let{basename:i}=L.useContext(ir),s=L.useContext(sr);oi(s,"useFormAction must be used inside a RouteContext");let[n]=s.matches.slice(-1),o={...np(e||".",{relative:t})},r=ol();if(e==null){o.search=r.search;let a=new URLSearchParams(o.search),c=a.getAll("index");if(c.some(d=>d==="")){a.delete("index"),c.filter(p=>p).forEach(p=>a.append("index",p));let d=a.toString();o.search=d?`?${d}`:""}}return(!e||e===".")&&n.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(o.pathname=o.pathname==="/"?i:Nr([i,o.pathname])),Mg(o)}function G2(e,t={}){let i=L.useContext(dF);oi(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=wF("useViewTransitionState"),n=np(e,{relative:t.relative});if(!i.isTransitioning)return!1;let o=_r(i.currentLocation.pathname,s)||i.currentLocation.pathname,r=_r(i.nextLocation.pathname,s)||i.nextLocation.pathname;return qm(n.pathname,r)!=null||qm(n.pathname,o)!=null}new TextEncoder;[...S2];function B2(){return ve.jsx("div",{className:"hero-section text-center text-white",children:ve.jsxs("div",{className:"hero-overlay",children:[ve.jsx("h1",{className:"display-4",children:"Welcome to MovieVerse 🎬"}),ve.jsx("p",{className:"lead",children:"Discover your next favorite film"})]})})}var fh=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let n=s.get(e);return!n&&i&&(n=new Set,s.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const s=this.getListeners(e,i,!1);s&&(s.delete(t),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const s=(a,c)=>a.forEach(h=>{if(!c.has(h))return;const d=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>h(e)):()=>h(e);t?this.dispatchAsync(d):d()}),n=this.getListeners(i,t,!1)??new Set,o=new Set(n);o.size>0&&s(o,n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{const c=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(i,e)):()=>a(i,e);t?this.dispatchAsync(c):c()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},xF=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(xF||{}),zT={};function Gx(e,t){zT[t]||(e(),zT[t]=!0)}function co(e,...t){console.log("AG Grid: "+e,...t)}function ne(e,...t){Gx(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function dt(e,...t){Gx(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function Bx(e){return!!(e&&e.constructor&&e.call&&e.apply)}function z2(e){H2(e,400)}var wb=[],xb=!1;function HT(e){wb.push(e),!xb&&(xb=!0,window.setTimeout(()=>{const t=wb.slice();wb.length=0,xb=!1,t.forEach(i=>i())},0))}function H2(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function Ns(e,t){let i;return function(...s){const n=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,s)},t)}}function VT(e,t){let i=0;return function(...s){const n=this,o=new Date().getTime();o-i<t||(i=o,e.apply(n,s))}}function V2(e,t,i=100,s){const n=new Date().getTime();let o=null,r=!1;const a=()=>{const c=new Date().getTime()-n>i;(e()||c)&&(t(),r=!0,o!=null&&(window.clearInterval(o),o=null))};a(),r||(o=window.setInterval(a,10))}function _2(...e){return t=>e.reduce((i,s)=>s(i),t)}function Or(e){return e==null||e===""?null:e}function ge(e,t=!1){return e!=null&&(e!==""||t)}function st(e){return!ge(e)}function gn(e){return e==null||e.length===0}function xw(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function uc(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Mw(e){if(e!==void 0)return e===null||e===""?!1:Dw(e)}function Dw(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function Dg(e,t){const i=e?JSON.stringify(e):null,s=t?JSON.stringify(t):null;return i===s}function W2(e,t,i=!1){const s=e==null,n=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&n)return 0;if(s)return-1;if(n)return 1;function o(r,a){return r>a?1:r<a?-1:0}if(typeof e!="string"||!i)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}function km(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}function MF(e,t){return e.get("rowModelType")===t}function Vt(e){return MF(e,"clientSide")}function nr(e){return MF(e,"serverSide")}function gs(e,t){return e.get("domLayout")===t}function Xm(e){return ev(e)!==void 0}function Qm(e){return!e.get("suppressAsyncEvents")}function DF(e){return typeof e.get("getRowHeight")=="function"}function j2(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function Qa(e,t,i=!1,s){if(s==null&&(s=e.environment.getDefaultRowHeight()),DF(e)){if(i)return{height:s,estimated:!0};const r={node:t,data:t.data},a=e.getCallback("getRowHeight")(r);if(Rw(a))return a===0&&ne("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,a),estimated:!1}}if(t.detail&&e.get("masterDetail"))return U2(e);const n=e.get("rowHeight");return{height:n&&Rw(n)?n:s,estimated:!1}}function U2(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return Rw(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function hc(e){const{environment:t}=e,i=e.get("rowHeight");if(!i||st(i))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return s!==-1?s:(ne("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function Rw(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function Rg(e,t,i){const s=t[e.getDomDataKey()];return s?s[i]:void 0}function Sc(e,t,i,s){const n=e.getDomDataKey();let o=t[n];st(o)&&(o={},t[n]=o),o[i]=s}function gi(e){let t=null;const i=e.get("getDocument");return i&&ge(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&ge(t)?t:document}function RF(e){return gi(e).defaultView||window}function Ag(e){return e.eGridDiv.getRootNode()}function ni(e){return Ag(e).activeElement}function AF(e){const t=gi(e),i=ni(e);return i===null||i===t.body}function ju(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function jv(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||gs(e,"print"))}function zo(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function Aw(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function EF(e){const t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function TF(e){const t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;const i=e.get("groupIncludeFooter");if(typeof i=="function"){const s=e.getCallback("groupIncludeFooter");return n=>s(n)?"bottom":void 0}return()=>i?"bottom":void 0}function IF(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function Uv(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function mh(e){const t=e.getCallback("getRowId");return t===void 0?t:i=>{let s=t(i);return typeof s!="string"&&(ne("The getRowId callback must return a string. The ID ",s," is being cast to a string."),s=String(s)),s}}function Qu(e){return(e==null?void 0:e.checkboxes)??!0}function Jm(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function Y2(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function K2(e){return typeof e.get("rowSelection")!="string"}function $2(e){return e.get("cellSelection")!==void 0}function Z2(e){const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?(t==null?void 0:t.suppressMultiRanges)??!1:!1:e.get("suppressMultiRangeSelection")}function Wr(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function q2(e){var s;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((s=t.handle)==null?void 0:s.mode)==="range":!1:e.get("enableRangeHandle")}function _T(e){var s;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((s=t.handle)==null?void 0:s.mode)==="fill":!1:e.get("enableFillHandle")}function LF(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const i=e.get("suppressRowClickSelection"),s=e.get("suppressRowDeselection");return i&&s?!1:i?"enableDeselection":s?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function X2(e){const t=LF(e);return t===!0||t==="enableSelection"}function WT(e){const t=LF(e);return t===!0||t==="enableDeselection"}function zx(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function ev(e){const t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t==null?void 0:t.mode}function FF(e){return ev(e)==="multiRow"}function Q2(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function Hx(e){const t=e.get("rowSelection");if(typeof t=="string"){const i=e.get("groupSelectsChildren"),s=e.get("groupSelectsFiltered");return i&&s?"filteredDescendants":i?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function bc(e){const t=Hx(e);return t==="descendants"||t==="filteredDescendants"}function Mb(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function it(e){if(!(!e||!e.length))return e[e.length-1]}function rl(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((s,n)=>i?i(s,t[n]):t[n]===s)}function J2(e){return e.sort((t,i)=>t-i)}function PF(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function Os(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function eV(e,t){for(let i=0;i<t.length;i++)PF(e,t[i])}function tV(e,t){for(let i=0;i<t.length;i++)Os(e,t[i])}function tv(e,t,i){e.splice(i,0,t)}function kF(e,t,i){tV(e,t),t.slice().reverse().forEach(s=>tv(e,s,i))}function dc(e,t){return e.indexOf(t)>-1}function iV(e){return(e==null?void 0:e.flatMap(t=>t))??[]}function jT(e,t){t==null||e==null||t.forEach(i=>e.push(i))}var NF="__ag_Grid_Stop_Propagation",sV=["touchstart","touchend","touchmove","touchcancel","scroll"],Db={};function Ju(e){e[NF]=!0}function Gr(e){return e[NF]===!0}var OF=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof Db[i]=="boolean")return Db[i];const s=document.createElement(e[i]||"div");return i="on"+i,Db[i]=i in s}})();function Ew(e,t,i){let s=t;for(;s;){const n=Rg(e,s,i);if(n)return n;s=s.parentElement}return null}function nV(e,t){return!t||!e?!1:rV(t).indexOf(e)>=0}function oV(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function rV(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():oV(t)}function aV(e,t,i,s){const o=dc(sV,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,o)}var te=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new fh),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const s in t){const n=t[s];n&&i.push(this._setupListener(e,s,n))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?aV(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const s=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==s),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,s=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=n.changeSet.id}const o={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};t(o)};e.forEach(n=>this.setupGridOptionListener(n,s))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function Ls(e){return e instanceof Nm}var Nm=class extends te{constructor(e,t,i,s){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=zF(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=s}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Ja(t)?e.push(t):Ls(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let o=0,r=s.length;o<r;o++){const a=s[o];if(!a.isVisible())continue;const c=a.getColumnGroupShow();c==="open"?(e=!0,i=!0):c==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach(s=>{Ls(s)&&s.isPadding()?t(s.children):e.push(s)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},GF="ag-Grid-ControlsColumn",lV=class extends te{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return[];const i=Qu(t),s=Jm(t);if(i||s){const n=e.get("selectionColumnDef"),r={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:e.get("enableRtl")?"right":"left",comparator(c,h,d,p){const f=d.isSelected(),v=p.isSelected();return f&&v?0:f?1:-1},editable:!1,suppressFillHandle:!0,...n,colId:`${GF}`},a=new jx(r,null,r.colId,!1);return this.createBean(a),[a]}return[]}},Yv="ag-Grid-AutoColumn";function Vx(e){const t=[],i=s=>{for(let n=0;n<s.length;n++){const o=s[n];Ja(o)?t.push(o):Ls(o)&&i(o.getChildren())}};return i(e),t}function Lr(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function Ha(e,t,i){const s={};if(!t)return;jr(null,t,o=>{s[o.getInstanceId()]=o}),i&&jr(null,i,o=>{s[o.getInstanceId()]=null});const n=Object.values(s).filter(o=>o!=null);e.destroyBeans(n)}function Tw(e){return e.getId().startsWith(Yv)}function op(e){return e.getColId().startsWith(GF)}function Om(e){let t=[];return e instanceof Array?e.some(s=>typeof s!="string")?ne("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):ne("colDef.type should be of type 'string' | 'string[]'"),t}var _x=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e,t){const{frameworkOverrides:i,wrappedListeners:s}=this;let n=t;if(i.shouldWrapOutgoing){n=r=>{i.wrapOutgoing(()=>t(r))};let o=s.get(e);o||(o=new Map,s.set(e,o)),o.set(t,n)}return n}wrapGlobal(e){const{frameworkOverrides:t,wrappedGlobalListeners:i}=this;let s=e;return t.shouldWrapOutgoing&&(s=(n,o)=>{t.wrapOutgoing(()=>e(n,o))},i.set(e,s)),s}unwrap(e,t){const{wrappedListeners:i}=this,s=i.get(e);if(s){const n=s.get(t);if(n)return s.delete(t),s.size===0&&i.delete(e),n}return t}unwrapGlobal(e){const{wrappedGlobalListeners:t}=this,i=t.get(e);return i?(t.delete(e),i):e}},Wx=new Set(["__proto__","constructor","prototype"]);function ao(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const[i,s]of Object.entries(e))t(i,s)}}function BF(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){if(Wx.has(i[s]))continue;const n=i[s],o=e[n];t[n]=o}return t}function Iw(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach(n=>{if(t&&t.indexOf(n)>=0||Wx.has(n))return;const o=i[n];Fw(o)&&o.constructor===Object?s[n]=Iw(o):s[n]=o}),s}function Lw(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const i=[];for(const s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&i.push(e[s]);return i}function Fs(e,t,i=!0,s=!1){ge(t)&&ao(t,(n,o)=>{if(Wx.has(n))return;let r=e[n];r!==o&&(s&&r==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(r={},e[n]=r),Fw(o)&&Fw(r)&&!Array.isArray(r)?Fs(r,o,i,s):(i||o!==void 0)&&(e[n]=o))})}function ug(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let n=e;for(let o=0;o<s.length;o++){if(n==null)return;n=n[s[o]]}return n}function Fw(e){return typeof e=="object"&&e!==null}var cV={resizable:!0,sortable:!0},uV=0;function zF(){return uV++}function Ja(e){return e instanceof jx}var jx=class extends te{constructor(e,t,i,s){super(),this.isColumn=!0,this.instanceId=zF(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new fh,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=s,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);const s=e.hide,n=e.initialHide;s!==void 0?this.visible=!s:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const o=e.flex,r=e.initialFlex;o!==void 0?this.flex=o:r!==void 0&&(this.flex=r)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=ge(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=ge(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=ge(this.colDef.tooltipField)||ge(this.colDef.tooltipValueGetter)||ge(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=uc(e.width),s=uc(e.initialWidth);return i!=null?t=i:s!=null?t=s:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(st(this.colDef)||st(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){var s;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new _x(this.frameworkOverrides));const i=((s=this.frameworkEventListenerService)==null?void 0:s.wrap(e,t))??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){var s;const i=((s=this.frameworkEventListenerService)==null?void 0:s.unwrap(e,t))??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const t=this.gos.get("rowSelection");if(t&&typeof t!="string"){const i=op(this)&&Qu(t);return this.isColumnFunc(e,i)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??cV[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return st(this.sort)}isSorting(){return ge(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const s=this.createColumnEvent("filterChanged",t);i&&Fs(s,i),this.columnEventService.dispatchEvent(s)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const i=e===!0;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(st(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(st(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},hV={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},dV=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=xw(e);let i=0;for(;;){let s;if(e?(s=e,i!==0&&(s+="_"+i)):t?(s=t,i!==0&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},gV=class extends te{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,s){const n=new dV,{existingCols:o,existingGroups:r,existingColKeys:a}=this.extractExistingTreeData(i);n.addExistingKeys(a);const c=this.recursivelyCreateColumns(e,0,t,o,n,r,s),h=this.findMaxDept(c,0),d=this.balanceColumnTree(c,0,h,n);return jr(null,d,(f,v)=>{Ls(f)&&f.setupExpandable(),f.setOriginalParent(v)}),{columnTree:d,treeDept:h}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&jr(null,e,n=>{if(Ls(n)){const o=n;i.push(o)}else{const o=n;s.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:i,existingColKeys:s}}balanceTreeForAutoCols(e,t){const i=[],s=this.findDepth(t);return e.forEach(n=>{let o=n;for(let r=s-1;r>=0;r--){const a=new Nm(null,`FAKE_PATH_${n.getId()}}_${r}`,!0,r);this.createBean(a),a.setChildren([o]),o.setOriginalParent(a),o=a}s===0&&n.setOriginalParent(null),i.push(o)}),[i,s]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&Ls(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const n=[];for(let o=0;o<e.length;o++){const r=e[o];if(Ls(r)){const a=r,c=this.balanceColumnTree(a.getChildren(),t+1,i,s);a.setChildren(c),n.push(a)}else{let a,c;for(let h=i-1;h>=t;h--){const d=s.getUniqueKey(null,null),p=this.createMergedColGroupDef(null),f=new Nm(p,d,!0,t);this.createBean(f),c&&c.setChildren([f]),c=f,a||(a=c)}if(a&&c)if(n.push(a),e.some(d=>Ls(d))){c.setChildren([r]);continue}else{c.setChildren(e);break}n.push(r)}}return n}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const n=e[s];if(Ls(n)){const o=n,r=this.findMaxDept(o.getChildren(),t+1);i<r&&(i=r)}}return i}recursivelyCreateColumns(e,t,i,s,n,o,r){if(!e)return[];const a=new Array(e.length);for(let c=0;c<a.length;c++){const h=e[c];this.isColumnGroup(h)?a[c]=this.createColumnGroup(i,h,t,s,n,o,r):a[c]=this.createColumn(i,h,s,n,r)}return a}createColumnGroup(e,t,i,s,n,o,r){const a=this.createMergedColGroupDef(t),c=n.getUniqueKey(a.groupId||null,null),h=new Nm(a,c,!1,i);this.createBean(h);const d=this.findExistingGroup(t,o);d&&o.splice(d.idx,1);const p=d==null?void 0:d.group;p&&h.setExpanded(p.isExpanded());const f=this.recursivelyCreateColumns(a.children,i+1,e,s,n,o,r);return h.setChildren(f),h}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,n){var a;const o=this.findExistingColumn(t,i);o&&(i==null||i.splice(o.idx,1));let r=o==null?void 0:o.column;if(r){const c=this.addColumnDefaultAndTypes(t,r.getColId());r.setColDef(c,t,n),this.applyColumnState(r,c,n)}else{const c=s.getUniqueKey(t.colId,t.field),h=this.addColumnDefaultAndTypes(t,c);r=new jx(h,t,c,e),this.createBean(r)}return(a=this.dataTypeService)==null||a.addColumnListeners(r),r}applyColumnState(e,t,i){const s=uc(t.flex);if(s!==void 0&&e.setFlex(s),e.getFlex()<=0){const a=uc(t.width);if(a!=null)e.setActualWidth(a,i);else{const c=e.getActualWidth();e.setActualWidth(c,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));const o=uc(t.sortIndex);o!==void 0&&e.setSortIndex(o);const r=Mw(t.hide);r!==void 0&&e.setVisible(!r,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(s.field===e.field)return{idx:i,column:t[i]};continue}if(s===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let s=0;s<t.length;s++){const n=t[s];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:s,group:n}}}addColumnDefaultAndTypes(e,t){var a;const i={},s=this.gos.get("defaultColDef");Fs(i,s,!1,!0);const n=this.updateColDefAndGetColumnType(i,e,t);n&&this.assignColumnTypes(n,i),Fs(i,e,!1,!0);const o=this.gos.get("autoGroupColumnDef"),r=zo(this.gos);return e.rowGroup&&o&&r&&Fs(i,{sort:o.sort,initialSort:o.initialSort},!1,!0),(a=this.dataTypeService)==null||a.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){var o;const s=(o=this.dataTypeService)==null?void 0:o.updateColDefAndGetColumnType(e,t,i),n=t.type??s??e.type;return e.type=n,n?Om(n):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},hV),s=this.gos.get("columnTypes")||{};ao(s,(n,o)=>{n in i?ne(`the column type '${n}' is a default column type and cannot be overridden.`):(o.type&&ne("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[n]=o)}),e.forEach(n=>{const o=i[n.trim()];o?Fs(t,o,!1,!0):ne("colDef.type '"+n+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function jr(e,t,i){if(t)for(let s=0;s<t.length;s++){const n=t[s];Ls(n)&&jr(n,n.getChildren(),i),i(n,e)}}var pV=class extends te{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(ic(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,ic(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(ic(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(ic(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),ic(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){var h,d,p;const t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const i=(h=this.colDefCols)==null?void 0:h.list,s=(d=this.colDefCols)==null?void 0:d.tree,n=this.columnFactory.createColumnTree(this.colDefs,!0,s,e);Ha(this.context,(p=this.colDefCols)==null?void 0:p.tree,n.columnTree);const o=n.columnTree,r=n.treeDept,a=Vx(o),c={};a.forEach(f=>c[f.getId()]=f),this.colDefCols={tree:o,treeDepth:r,list:a,map:c},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){var n,o,r;if(!this.colDefCols)return;const t=(n=this.cols)==null?void 0:n.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const i=j2(this.gos,this.showingPivotResult);(!e||i)&&this.restoreColOrder(),this.positionLockedCols(),(o=this.showRowGroupColsService)==null||o.refresh(),(r=this.quickFilterService)==null||r.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!rl(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){const{map:t,list:i,tree:s,treeDepth:n}=e;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n},e.list.some(r=>{var a;return((a=this.cols)==null?void 0:a.map[r.getColId()])!==void 0})||(this.lastPivotOrder=null)}else{const{map:t,list:i,tree:s,treeDepth:n}=this.colDefCols;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(s=>{const n=Tw(s);if(e){const o=t&&dc(t,s);return n||o}else return n||s.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),UT(this.cols))}createAutoCols(){var y;const e=Uv(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),n=!(i.length>0||this.gos.get("treeData"))||t||e,o=()=>{this.autoCols&&(Ha(this.context,this.autoCols.tree),this.autoCols=null)};if(n||!this.autoColService){o();return}const r=this.autoColService.createAutoCols(i)??[],a=KT(r,((y=this.autoCols)==null?void 0:y.list)||null),c=this.cols.treeDepth,d=(this.autoCols?this.autoCols.treeDepth:-1)==c;if(a&&d)return;o();const[p,f]=this.columnFactory.balanceTreeForAutoCols(r,this.cols.tree);this.autoCols={list:r,tree:p,treeDepth:f,map:{}};const v=b=>{if(!b)return null;const w=b.filter(S=>!Tw(S));return[...r,...w]};this.lastOrder=v(this.lastOrder),this.lastPivotOrder=v(this.lastPivotOrder)}createControlsCols(){var h,d,p;const e=()=>{var f;Ha(this.context,(f=this.controlsCols)==null?void 0:f.tree),this.controlsCols=null};this.controlsColService||e();const t=this.cols.treeDepth,s=(((h=this.controlsCols)==null?void 0:h.treeDepth)??-1)==t,n=((d=this.controlsColService)==null?void 0:d.createControlsCols())??[];if(KT(n,((p=this.controlsCols)==null?void 0:p.list)??[])&&s)return;e();const[r,a]=this.columnFactory.balanceTreeForAutoCols(n,this.cols.tree);this.controlsCols={list:n,tree:r,treeDepth:a,map:{}};const c=f=>{if(!f)return null;const v=f.filter(y=>!op(y));return[...n,...v]};this.lastOrder=c(this.lastOrder),this.lastPivotOrder=c(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),UT(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,i){this.columnApplyStateService.applyColumnState({state:e.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!t}))},i)}setColsPinned(e,t,i){if(!this.cols||gn(e))return;if(gs(this.gos,"print")){ne("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;t===!0||t==="left"?s="left":t==="right"?s="right":s=null;const n=[];e.forEach(o=>{if(!o)return;const r=this.getCol(o);r&&r.getPinned()!==s&&(r.setPinned(s),n.push(r))}),n.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(n,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;Ls(e)?s=e.getId():s=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColGroup(e){var i;let t=null;return jr(null,(i=this.cols)==null?void 0:i.tree,s=>{Ls(s)&&s.getId()===e&&(t=s)}),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const s=this.funcColsService.getRowGroupColumns().findIndex(n=>n.getColId()===e.getColId());return t>s}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,Vt(this.gos)||nr(this.gos)||ne("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map((c,h)=>[c,h]));if(!this.cols.list.some(c=>t.has(c)))return;const s=new Map(this.cols.list.map(c=>[c,!0])),n=e.filter(c=>s.has(c)),o=new Map(n.map(c=>[c,!0])),r=this.cols.list.filter(c=>!o.has(c)),a=n.slice();r.forEach(c=>{let h=c.getOriginalParent();if(!h){a.push(c);return}const d=[];for(;!d.length&&h;)h.getLeafColumns().forEach(y=>{const b=a.indexOf(y)>=0,w=d.indexOf(y)<0;b&&w&&d.push(y)}),h=h.getOriginalParent();if(!d.length){a.push(c);return}const p=d.map(v=>a.indexOf(v)),f=Math.max(...p);tv(a,c,f+1)}),this.cols.list=a}sortColsLikeKeys(e){if(this.cols==null)return;let t=[];const i={};e.forEach(n=>{if(i[n])return;const o=this.cols.map[n];o&&(t.push(o),i[n]=!0)});let s=0;if(this.cols.list.forEach(n=>{const o=n.getColId();if(i[o]!=null)return;o.startsWith(Yv)?tv(t,n,s++):t.push(n)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){ne("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(i=>this.cols.list.indexOf(i)<0).length>0||e.sort((i,s)=>{const n=this.cols.list.indexOf(i),o=this.cols.list.indexOf(s);return n-o})}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){var s;kF((s=this.cols)==null?void 0:s.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=(e=this.cols)==null?void 0:e.list:this.lastOrder=(t=this.cols)==null?void 0:t.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((s,n)=>this.lastOrder.indexOf(s)-this.lastOrder.indexOf(n)):this.lastOrder&&e.sort((s,n)=>this.cols.list.indexOf(s)-this.cols.list.indexOf(n));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){var e;return((e=this.colDefCols)==null?void 0:e.treeDepth)>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(ne("Pivot mode not available with treeData."),!1):!0}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!gn(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e,t,i;Ha(this.context,(e=this.colDefCols)==null?void 0:e.tree),Ha(this.context,(t=this.autoCols)==null?void 0:t.tree),Ha(this.context,(i=this.controlsCols)==null?void 0:i.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){var e;return(e=this.colDefCols)!=null&&e.list?this.colDefCols.list:null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}getAllCols(){var i,s,n;const e=this.pivotResultColsService.getPivotResultCols(),t=e==null?void 0:e.list;return[((i=this.colDefCols)==null?void 0:i.list)??[],((s=this.autoCols)==null?void 0:s.list)??[],((n=this.controlsCols)==null?void 0:n.list)??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;const{map:i,list:s}=t;if(typeof e=="string"&&i[e])return i[e];for(let n=0;n<s.length;n++)if(YT(s[n],e))return s[n];return this.getAutoCol(e)}getAutoCol(e){var t;return((t=this.autoCols)==null?void 0:t.list.find(i=>YT(i,e)))??null}getAutoCols(){var e;return((e=this.autoCols)==null?void 0:e.list)??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(const i of t){if(!i)continue;const s=i.getGroupRowCount()||0;for(let n=0;n<s;n++){const o=i.getGroupRowCtrlAtIndex(n),r=e[n];if(o){const a=this.getColumnGroupHeaderRowHeight(o);(r==null||a>r)&&(e[n]=a)}}}return e}getColumnGroupHeaderRowHeight(e){const t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let i=0;const s=e.getHeaderCtrls();for(const n of s){const o=n.getColumn();if(o.isAutoHeaderHeight()){const r=o.getAutoHeaderHeight();r!=null&&r>i&&(i=r)}}return Math.max(t,i)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),i=this.visibleColsService.getAllCols().filter(s=>s.isAutoHeaderHeight()).map(s=>s.getAutoHeaderHeight()||0);return Math.max(e,...i)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if((e==null?void 0:e.type)!=="fitCellContents")return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){const s=t&&typeof t!="string"?Qu(t):void 0,n=e&&typeof e!="string"?Qu(e):void 0,o=s!==n,r=t&&typeof t!="string"?Jm(t):void 0,a=e&&typeof e!="string"?Jm(e):void 0;(o||r!==a)&&this.refreshAll(i)}};function ic(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function UT(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function YT(e,t){const i=e===t,s=e.getColDef()===t,n=e.getColId()==t;return i||s||n}function KT(e,t){return rl(e,t,(i,s)=>i.getColId()===s.getColId())}var fV=class extends te{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:n,source:o="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;const r=[];let a=-1;const c=i??this.gos.get("skipHeaderOnAutoSize"),h=s??c;for(;a!==0;){a=0;const d=[];t.forEach(p=>{if(!p)return;const f=this.columnModel.getCol(p);if(!f||r.indexOf(f)>=0)return;const v=this.autoWidthCalculator.getPreferredWidthForColumn(f,c);if(v>0){const y=this.normaliseColumnWidth(f,v);f.setActualWidth(y,o),r.push(f),a++}d.push(f)}),d.length&&this.visibleColsService.refresh(o)}h||this.autoSizeColumnGroupsByColumns(t,o,n),this.eventDispatcher.columnResized(r,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;this.columnModel.getColsForKeys(e).forEach(a=>{let c=a.getParent();for(;c&&c!=i;)c.isPadding()||s.add(c),c=c.getParent()});let o;const r=[];for(const a of s){for(const c of this.ctrlsService.getHeaderRowContainerCtrls())if(o=c.getHeaderCtrlForColumn(a),o)break;o&&o.resizeLeafColumnsToFit(t)}return r}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const s=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=s),t}},mV=class extends te{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>Os(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>Os(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>Os(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return gn(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.columnModel.getColDefCol(e);s&&(s.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[s],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(i,s)=>this.setRowGroupActive(i,s,t),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,i=>this.setRowGroupActive(!0,i,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,i=>this.setRowGroupActive(!1,i,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,i=>i.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(i,s)=>{s.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,i=>i.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(i,s)=>this.setValueActive(i,s,t),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const s=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(s)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,i=>this.setValueActive(!0,i,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,i=>this.setValueActive(!1,i,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupCols[e],n=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,s),this.eventDispatcher.rowGroupChanged(n,i)}setColList(e,t,i,s,n,o,r){if(!this.columnModel.getCols())return;const a=new Map;t.forEach((h,d)=>a.set(h,d)),t.length=0,ge(e)&&e.forEach(h=>{const d=this.columnModel.getColDefCol(h);d&&t.push(d)}),t.forEach((h,d)=>{const p=a.get(h);if(p===void 0){a.set(h,0);return}s&&p!==d||a.delete(h)}),(this.columnModel.getColDefCols()||[]).forEach(h=>{const d=t.indexOf(h)>=0;o(d,h)}),n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(r),this.eventDispatcher.columnChanged(i,[...a.keys()],r)}updateColList(e,t,i,s,n,o,r){if(!e||gn(e))return;let a=!1;const c=new Set;e.forEach(h=>{if(!h)return;const d=this.columnModel.getColDefCol(h);if(d){if(c.add(d),i){if(t.indexOf(d)>=0)return;t.push(d)}else{const p=t.indexOf(d);if(p<0)return;for(let f=p+1;f<t.length;f++)c.add(t[f]);Os(t,d)}n(d),a=!0}}),a&&(s&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(r),this.eventDispatcher.genericColumnEvent(o,Array.from(c),r))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(i,s)=>i.setValueActive(s,e),()=>{},()=>{},i=>{const s=i.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueCols.forEach(i=>{const s=i.getColDef();s.aggFunc!=null&&s.aggFunc!=""?i.setAggFunc(s.aggFunc):i.getAggFunc()||i.setAggFunc(s.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(i,s)=>i.setRowGroupActive(s,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(i,s)=>i.setPivotActive(s,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}extractColsCommon(e=[],t=[],i,s,n,o,r){const a=[],c=[];(this.columnModel.getColDefCols()||[]).forEach(f=>{const v=e.indexOf(f)<0,y=f.getColDef(),b=Mw(o(y)),w=Mw(r(y)),S=uc(s(y)),M=uc(n(y));let R;b!==void 0?R=b:S!==void 0?S===null?R=!1:R=S>=0:v?w!==void 0?R=w:M!==void 0?R=M!=null&&M>=0:R=!1:R=t.indexOf(f)>=0,R&&((v?S!=null||M!=null:S!=null)?a.push(f):c.push(f))});const d=f=>{const v=s(f.getColDef()),y=n(f.getColDef());return v??y};a.sort((f,v)=>{const y=d(f),b=d(v);return y===b?0:y<b?-1:1});const p=[].concat(a);return t.forEach(f=>{c.indexOf(f)>=0&&p.push(f)}),c.forEach(f=>{p.indexOf(f)<0&&p.push(f)}),t.forEach(f=>{p.indexOf(f)<0&&i(f,!1)}),p.forEach(f=>{t.indexOf(f)<0&&i(f,!0)}),p}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},s=(n,o,r,a,c,h)=>{const d=this.columnModel.getColDefCols();if(!o.length||!d)return[];const p=Object.keys(n),f=new Set(p),v=new Set(p),y=new Set(o.map(F=>{const P=F.getColId();return v.delete(P),P}).concat(p)),b=[],w={};let S=0;for(let F=0;F<d.length;F++){const P=d[F].getColId();y.has(P)&&(b.push(P),w[P]=S++)}let M=1e3,R=!1,A=0;const T=F=>{const P=w[F];for(let N=A;N<P;N++){const O=b[N];v.has(O)&&(n[O][c]=M++,v.delete(O))}A=P};o.forEach(F=>{const P=F.getColId();if(f.has(P))T(P),n[P][c]=M++;else{const N=F.getColDef();(N[c]===null||N[c]===void 0&&N[h]==null)&&(R||(N[r]||N[r]===void 0&&N[a]?T(P):(v.forEach(V=>{n[V][c]=M+w[V]}),M+=b.length,R=!0)),i[P]||(i[P]={colId:P}),i[P][c]=M++)}})};return s(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},vV=class extends te{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(gn(i))return!1;if(e&&e.state&&!e.state.forEach)return ne("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const s=this.funcColsService.getModifyColumnsNoEventsCallbacks(),n=(a,c,h)=>{const d=this.compareColumnStatesAndDispatchEvents(t),p=c.slice(),f={},v={},y=[],b=[];let w=0;const S=this.funcColsService.getRowGroupColumns().slice(),M=this.funcColsService.getPivotColumns().slice();a.forEach(F=>{const P=F.colId||"";if(P.startsWith(Yv)){y.push(F),b.push(F);return}const O=h(P);O?(this.syncColumnWithStateItem(O,F,e.defaultState,f,v,!1,t,s),Os(p,O)):(b.push(F),w+=1)});const R=F=>this.syncColumnWithStateItem(F,null,e.defaultState,f,v,!1,t,s);p.forEach(R),this.funcColsService.sortRowGroupColumns($T.bind(this,f,S)),this.funcColsService.sortPivotColumns($T.bind(this,v,M)),this.columnModel.refreshCols(!1);const T=(this.columnModel.getAutoCols()||[]).slice();return y.forEach(F=>{const P=this.columnModel.getAutoCol(F.colId);Os(T,P),this.syncColumnWithStateItem(P,F,e.defaultState,null,null,!0,t,s)}),T.forEach(R),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),d(),{unmatchedAndAutoStates:b,unmatchedCount:w}};this.columnAnimationService.start();let{unmatchedAndAutoStates:o,unmatchedCount:r}=n(e.state||[],i,a=>this.columnModel.getColDefCol(a));if(o.length>0||ge(e.defaultState)){const a=this.pivotResultColsService.getPivotResultCols(),c=a==null?void 0:a.list;r=n(o,c||[],h=>this.pivotResultColsService.getPivotResultCol(h)).unmatchedCount}return this.columnAnimationService.finish(),r===0}resetColumnState(e){const t=this.columnModel.getColDefCols();if(gn(t))return;const i=this.columnModel.getColDefColTree(),s=Vx(i),n=[];let o=1e3,r=1e3,a=[];const c=this.columnModel.getAutoCols();c&&(a=a.concat(c)),s&&(a=a.concat(s)),a.forEach(h=>{const d=this.getColumnStateFromColDef(h);st(d.rowGroupIndex)&&d.rowGroup&&(d.rowGroupIndex=o++),st(d.pivotIndex)&&d.pivot&&(d.pivotIndex=r++),n.push(d)}),this.applyColumnState({state:n,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(y,b)=>y??b??null,i=e.getColDef(),s=t(i.sort,i.initialSort),n=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),c=t(i.flex,i.initialFlex);let h=t(i.rowGroupIndex,i.initialRowGroupIndex),d=t(i.rowGroup,i.initialRowGroup);h==null&&(d==null||d==!1)&&(h=null,d=null);let p=t(i.pivotIndex,i.initialPivotIndex),f=t(i.pivot,i.initialPivot);p==null&&(f==null||f==!1)&&(p=null,f=null);const v=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:n,hide:o,pinned:r,width:a,flex:c,rowGroup:d,rowGroupIndex:h,pivot:f,pivotIndex:p,aggFunc:v}}syncColumnWithStateItem(e,t,i,s,n,o,r,a){if(!e)return;const c=(A,T)=>{const F={value1:void 0,value2:void 0};let P=!1;return t&&(t[A]!==void 0&&(F.value1=t[A],P=!0),ge(T)&&t[T]!==void 0&&(F.value2=t[T],P=!0)),!P&&i&&(i[A]!==void 0&&(F.value1=i[A]),ge(T)&&i[T]!==void 0&&(F.value2=i[T])),F},h=c("hide").value1;h!==void 0&&e.setVisible(!h,r);const d=c("pinned").value1;d!==void 0&&e.setPinned(d);const p=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),f=c("flex").value1;if(f!==void 0&&e.setFlex(f),f==null){const A=c("width").value1;A!=null&&p!=null&&A>=p&&e.setActualWidth(A,r)}const v=c("sort").value1;v!==void 0&&(v==="desc"||v==="asc"?e.setSort(v,r):e.setSort(void 0,r));const y=c("sortIndex").value1;if(y!==void 0&&e.setSortIndex(y),o||!e.isPrimary())return;const b=c("aggFunc").value1;b!==void 0&&(typeof b=="string"?(e.setAggFunc(b),e.isValueActive()||(e.setValueActive(!0,r),a.addValueCol(e))):(ge(b)&&ne("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,r),a.removeValueCol(e))));const{value1:w,value2:S}=c("rowGroup","rowGroupIndex");(w!==void 0||S!==void 0)&&(typeof S=="number"||w?(e.isRowGroupActive()||(e.setRowGroupActive(!0,r),a.addGroupCol(e)),s&&typeof S=="number"&&(s[e.getId()]=S)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,r),a.removeGroupCol(e)));const{value1:M,value2:R}=c("pivot","pivotIndex");(M!==void 0||R!==void 0)&&(typeof R=="number"||M?(e.isPivotActive()||(e.setPivotActive(!0,r),a.addPivotCol(e)),n&&typeof R=="number"&&(n[e.getId()]=R)):e.isPivotActive()&&(e.setPivotActive(!1,r),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach(i=>{i.colId!=null&&t.push(i.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),s={};return i.forEach(n=>{s[n.colId]=n}),()=>{const n=this.columnModel.getAllCols(),o=(b,w,S,M)=>{const R=w.map(M),A=S.map(M);if(rl(R,A))return;const F=new Set(w);S.forEach(N=>{F.delete(N)||F.add(N)});const P=[...F];this.eventService.dispatchEvent({type:b,columns:P,column:P.length===1?P[0]:null,source:e})},r=b=>{const w=[];return n.forEach(S=>{const M=s[S.getColId()];M&&b(M,S)&&w.push(S)}),w},a=b=>b.getColId();o("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),o("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);const h=r((b,w)=>{const S=b.aggFunc!=null,M=S!=w.isValueActive(),R=S&&b.aggFunc!=w.getAggFunc();return M||R});h.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",h,e);const d=(b,w)=>b.width!=w.getActualWidth();this.eventDispatcher.columnResized(r(d),!0,e);const p=(b,w)=>b.pinned!=w.getPinned();this.eventDispatcher.columnPinned(r(p),e);const f=(b,w)=>b.hide==w.isVisible();this.eventDispatcher.columnVisible(r(f),e);const y=r((b,w)=>b.sort!=w.getSort()||b.sortIndex!=w.getSortIndex());y.length>0&&this.sortController.dispatchSortChangedEvents(e,y),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),s={};i.forEach(c=>s[c.colId]=c);const n={};e.forEach(c=>{s[c.colId]&&(n[c.colId]=!0)});const o=e.filter(c=>n[c.colId]),r=i.filter(c=>n[c.colId]),a=[];r.forEach((c,h)=>{const d=o&&o[h];if(d&&d.colId!==c.colId){const p=this.columnModel.getCol(d.colId);p&&a.push(p)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},$T=(e,t,i,s)=>{const n=e[i.getId()],o=e[s.getId()],r=n!=null,a=o!=null;if(r&&a)return n-o;if(r)return-1;if(a)return 1;const c=t.indexOf(i),h=t.indexOf(s),d=c>=0,p=h>=0;return d&&p?c-h:d?-1:1},yV=class extends te{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const s=this.columnModel.getCols();if(!s)return;const n=s[e];this.moveColumns([n],t,i)}moveColumns(e,t,i,s=!0){const n=this.columnModel.getCols();if(!n)return;if(t>n.length-e.length){ne("tried to insert columns in invalid location, toIndex = ",t),ne("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();const o=this.columnModel.getColsForKeys(e);this.doesMovePassRules(o,t)&&(this.columnModel.moveInCols(o,t,i),this.eventDispatcher.columnMoved({movedColumns:o,source:i,toIndex:t,finished:s})),this.columnAnimationService.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const s=this.columnModel.getCols().slice();return kF(s,e,t),s}doesMovePassLockedPositions(e){const t=o=>o?o==="left"||o===!0?-1:1:0,i=this.gos.get("enableRtl");let s=i?1:-1,n=!0;return e.forEach(o=>{const r=t(o.getColDef().lockPosition);i?r>s&&(n=!1):r<s&&(n=!1),s=r}),n}doesMovePassMarryChildren(e){let t=!0;const i=this.columnModel.getColTree();return jr(null,i,s=>{if(!Ls(s))return;const n=s,o=n.getColGroupDef();if(!(o&&o.marryChildren))return;const a=[];n.getLeafColumns().forEach(f=>{const v=e.indexOf(f);a.push(v)});const c=Math.max.apply(Math,a),h=Math.min.apply(Math,a),d=c-h,p=n.getLeafColumns().length-1;d>p&&(t=!1)}),t}placeLockedColumns(e){const t=[],i=[],s=[];return e.forEach(o=>{const r=o.getColDef().lockPosition;r==="right"?s.push(o):r==="left"||r===!0?t.push(o):i.push(o)}),this.gos.get("enableRtl")?[...s,...i,...t]:[...t,...i,...s]}},CV=/[&<>"']/g,SV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Wo(e,t){if(e==null)return null;const i=e.toString().toString();return t?i:i.replace(CV,s=>SV[s])}function bV(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}var wV=class extends te{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,n){const o=e.headerValueGetter;if(o){const r=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:n});return typeof o=="function"?o(r):typeof o=="string"?this.expressionService.evaluate(o,r):(ne("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return bV(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn,s=ge(i);let n=null,o;if(s){const r=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&r.length===1,c=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!c)return t;n=i?i.getAggFunc():null,o=!0}else{const r=e.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();r&&a?(n=e.getAggFunc(),o=!0):o=!1}if(o){const r=typeof n=="string"?n:"func";return`${this.localeService.getLocaleTextFunc()(r,r)}(${t})`}return t}},xV=class extends te{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){var e;Ha(this.context,(e=this.pivotResultCols)==null?void 0:e.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;const i=this.columnModel.getColDefCol(t);let s=null;return this.pivotResultCols.list.forEach(n=>{const o=n.getColDef().pivotKeys,r=n.getColDef().pivotValueColumn;rl(o,e)&&r===i&&(s=n)}),s}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){var i,s;if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);const n=this.columnFactory.createColumnTree(e,!1,((i=this.pivotResultCols)==null?void 0:i.tree)||this.previousPivotResultCols||void 0,t);Ha(this.context,(s=this.pivotResultCols)==null?void 0:s.tree,n.columnTree);const o=n.columnTree,r=n.treeDept,a=Vx(o),c={};this.pivotResultCols={tree:o,treeDepth:r,list:a,map:c},this.pivotResultCols.list.forEach(d=>this.pivotResultCols.map[d.getId()]=d);const h=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!h)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=n=>{n.forEach(o=>{if(ge(o.children)){const a=o;i&&i(a),s(a.children)}else t&&t(o)})};e&&s(e)}},MV=class extends te{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,s){const n=[];e.forEach(o=>{const r=this.columnModel.getColDefCol(o.key)||this.columnModel.getCol(o.key);if(!r)return;if(n.push({width:o.newWidth,ratios:[1],columns:[r]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){const c=this.visibleColsService.getColAfter(r);if(!c)return;const h=r.getActualWidth()-o.newWidth,d=c.getActualWidth()+h;n.push({width:d,ratios:[1],columns:[c]})}}),n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:i,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every(d=>this.checkMinAndMaxWidthsForSet(d)))){if(i){const d=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(d,i,s)}return}const o=[],r=[];t.forEach(d=>{const{width:p,columns:f,ratios:v}=d,y={},b={};f.forEach(M=>r.push(M));let w=!0,S=0;for(;w;){if(S++,S>1e3){dt("infinite loop in resizeColumnSets");break}w=!1;const M=[];let R=0,A=p;f.forEach((F,P)=>{if(b[F.getId()])A-=y[F.getId()];else{M.push(F);const O=v[P];R+=O}});const T=1/R;M.forEach((F,P)=>{const N=P===M.length-1;let O;N?O=A:(O=Math.round(v[P]*p*T),A-=O);const B=F.getMinWidth(),V=F.getMaxWidth();O<B?(O=B,b[F.getId()]=!0,w=!0):V>0&&O>V&&(O=V,b[F.getId()]=!0,w=!0),y[F.getId()]=O})}f.forEach(M=>{const R=y[M.getId()];M.getActualWidth()!==R&&(M.setActualWidth(R,s),o.push(M))})});const a=o.length>0;let c=[];a&&(c=this.refreshFlexedColumns({resizingCols:r,skipSetLeft:!0}),this.visibleColsService.setLeftValues(s),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const h=r.concat(c);(a||i)&&this.eventDispatcher.columnResized(h,i,s,c)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,n=0,o=!0;t.forEach(c=>{const h=c.getMinWidth();s+=h||0;const d=c.getMaxWidth();d>0?n+=d:o=!1});const r=i>=s,a=!o||i<=n;return r&&a}refreshFlexedColumns(e={}){const t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let s=-1;if(e.resizingCols){const f=new Set(e.resizingCols);for(let v=i.length-1;v>=0;v--)if(f.has(i[v])){s=v;break}}let n=0,o=[],r=0,a=0;for(let f=0;f<i.length;f++)i[f].getFlex()&&f>s?(o.push(i[f]),a+=i[f].getFlex(),r+=i[f].getMinWidth()):n+=i[f].getActualWidth();if(!o.length)return[];let c=[];n+r>this.flexViewportWidth&&(o.forEach(f=>f.setActualWidth(f.getMinWidth(),t)),c=o,o=[]);const h=[];let d;e:for(;;){d=this.flexViewportWidth-n;const f=d/a;for(let v=0;v<o.length;v++){const y=o[v],b=f*y.getFlex();let w=0;const S=y.getMinWidth(),M=y.getMaxWidth();if(b<S?w=S:b>M&&(w=M),w){y.setActualWidth(w,t),PF(o,y),a-=y.getFlex(),c.push(y),n+=y.getActualWidth();continue e}h[v]=Math.floor(b)}break}let p=d;return o.forEach((f,v)=>{const y=v<o.length-1?Math.min(h[v],p):Math.max(h[v],p);f.setActualWidth(y,t),c.push(f),p-=h[v]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(c,!0,t,o),o}sizeColumnsToFit(e,t="sizeColumnsToFit",i,s){var f;if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,s));return}const n={};s&&((f=s==null?void 0:s.columnLimits)==null||f.forEach(({key:v,...y})=>{n[typeof v=="string"?v:v.getColId()]=y}));const o=this.visibleColsService.getAllCols(),r=e===Lr(o);if(e<=0||!o.length||r)return;const a=[],c=[];o.forEach(v=>{v.getColDef().suppressSizeToFit===!0?c.push(v):a.push(v)});const h=a.slice(0);let d=!1;const p=v=>{Os(a,v),c.push(v)};for(a.forEach(v=>{v.resetActualWidth(t);const y=n==null?void 0:n[v.getId()],b=(y==null?void 0:y.minWidth)??(s==null?void 0:s.defaultMinWidth),w=(y==null?void 0:y.maxWidth)??(s==null?void 0:s.defaultMaxWidth),S=v.getActualWidth();typeof b=="number"&&S<b?v.setActualWidth(b,t,!0):typeof w=="number"&&S>w&&v.setActualWidth(w,t,!0)});!d;){d=!0;const v=e-Lr(c);if(v<=0)a.forEach(y=>{var w;const b=((w=n==null?void 0:n[y.getId()])==null?void 0:w.minWidth)??(s==null?void 0:s.defaultMinWidth);if(typeof b=="number"){y.setActualWidth(b,t,!0);return}y.setMinimum(t)});else{const y=v/Lr(a);let b=v;for(let w=a.length-1;w>=0;w--){const S=a[w],M=n==null?void 0:n[S.getId()],R=(M==null?void 0:M.minWidth)??(s==null?void 0:s.defaultMinWidth),A=(M==null?void 0:M.maxWidth)??(s==null?void 0:s.defaultMaxWidth),T=S.getMinWidth(),F=S.getMaxWidth(),P=typeof R=="number"&&R>T?R:T,N=typeof A=="number"&&A<F?A:F;let O=Math.round(S.getActualWidth()*y);O<P?(O=P,p(S),d=!1):O>N?(O=N,p(S),d=!1):w===0&&(O=b),S.setActualWidth(O,t,!0),b-=O}}}h.forEach(v=>{v.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!i&&this.eventDispatcher.columnResized(h,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:i,defaultMinWidth:s,defaultMaxWidth:n}=e,o=i==null?void 0:i.map(({colId:r,minWidth:a,maxWidth:c})=>({key:r,minWidth:a,maxWidth:c}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:n,columnLimits:o})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function HF(e,t){return e+"_"+t}function bi(e){return e instanceof VF}var VF=class extends te{constructor(e,t,i,s){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=s}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return HF(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{bi(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=it(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Ja(t)?e.push(t):bi(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Ja(t)?e.push(t):bi(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(i=>{if(bi(i)&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},_F=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},DV=class extends te{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Rb(this.treeLeft),this.columnsCenter=Rb(this.treeCenter),this.columnsRight=Rb(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(i=>i.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=Lr(this.columnsCenter),t=Lr(this.columnsLeft),i=Lr(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?it(this.columnsRight):null):(t=this.columnsLeft?it(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)})}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter(o=>o.getPinned()=="left"),i=e.filter(o=>o.getPinned()=="right"),s=e.filter(o=>o.getPinned()!="left"&&o.getPinned()!="right"),n=new _F;this.treeLeft=this.createGroups({columns:t,idCreator:n,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:n,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:s,idCreator:n,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],s=[];for(const n of e){const o=n.getPinned();o?o===!0||o==="left"?t.push(n):s.push(n):i.push(n)}this.ariaOrderColumns=t.concat(i).concat(s)}getAriaColIndex(e){let t;return bi(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{bi(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const i=this.columnModel.getCols().slice(0),s=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(n=>{if(s){let o=Lr(n);n.forEach(r=>{o-=r.getActualWidth(),r.setLeft(o,e)})}else{let o=0;n.forEach(r=>{r.setLeft(o,e),o+=r.getActualWidth()})}eV(i,n)}),i.forEach(n=>{n.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,s){const n=[];let o=null;for(let r=0;r<t.length;r++){const a=t[r],c=t.length-r,h=Math.min(a.getColSpan(e),c),d=[a];if(h>1){const f=h-1;for(let v=1;v<=f;v++)d.push(t[r+v]);r+=f}let p;i?(p=!1,d.forEach(f=>{i(f)&&(p=!0)})):p=!0,p&&(n.length===0&&o&&(s&&s(a))&&n.push(o),n.push(a)),o=a}return n}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),n=t==="After"?it(s):s[0],o=`getCol${t}`;for(;;){const r=this[o](n);if(!r)return null;const a=this.getColGroupAtLevel(r,i);if(a!==e)return a}}getColGroupAtLevel(e,t){let i=e.getParent(),s,n;for(;s=i.getProvidedColumnGroup().getLevel(),n=i.getPaddingLevel(),!(s+n<=t);)i=i.getParent();return i}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};sc(this.treeCenter,!1,e),sc(this.treeLeft,!1,e),sc(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllTrees();sc(e,!1,t=>{bi(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?it(s):s[0]}return null}getColumnGroup(e,t){if(!e)return null;if(bi(e))return e;const i=this.getAllTrees(),s=typeof t=="number";let n=null;return sc(i,!1,o=>{if(bi(o)){const r=o;let a;s?a=e===r.getGroupId()&&t===r.getPartId():a=e===r.getGroupId(),a&&(n=r)}}),n}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return Lr(this.columnsLeft)}getDisplayedColumnsRightWidth(){return Lr(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const s=t==="first";let n;if(bi(e)){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;n=s?o[0]:it(o)}else n=e;return(s?i[0]:it(i))===n}createGroups(e){const{columns:t,idCreator:i,pinned:s,oldDisplayedGroups:n,isStandaloneStructure:o}=e,r=this.mapOldGroupsById(n),a=[];let c=t;for(;c.length;){const h=c;c=[];let d=0;const p=f=>{const v=d;d=f;const y=h[v],w=(bi(y)?y.getProvidedColumnGroup():y).getOriginalParent();if(w==null){for(let M=v;M<f;M++)a.push(h[M]);return}const S=this.createColGroup(w,i,r,s,o);for(let M=v;M<f;M++)S.addChild(h[M]);c.push(S)};for(let f=1;f<h.length;f++){const v=h[f],b=(bi(v)?v.getProvidedColumnGroup():v).getOriginalParent(),w=h[d],M=(bi(w)?w.getProvidedColumnGroup():w).getOriginalParent();b!==M&&p(f)}d<h.length&&p(h.length)}return o||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,i,s,n){const o=e.getGroupId(),r=t.getInstanceIdForKey(o),a=HF(o,r);let c=i[a];return c&&c.getProvidedColumnGroup()!==e&&(c=null),ge(c)?c.reset():(c=new VF(e,o,r,s),n||this.createBean(c)),c}mapOldGroupsById(e){const t={},i=s=>{s.forEach(n=>{if(bi(n)){const o=n;t[n.getUniqueId()]=o,i(o.getChildren())}})};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach(i=>{if(i.setParent(t),bi(i)){const s=i;this.setupParentsIntoCols(s.getChildren(),s)}})}};function sc(e,t,i){if(e)for(let s=0;s<e.length;s++){const n=e[s];if(bi(n)){const o=t?n.getDisplayedChildren():n.getChildren();sc(o,t,i)}i(n)}}function Rb(e){const t=[];return sc(e,!0,i=>{Ja(i)&&t.push(i)}),t}var WF=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],RV=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],AV=[...WF,...RV],EV={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},ys=class{};ys.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];ys.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];ys.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];ys.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];ys.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];ys.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];ys.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];ys.ALL_PROPERTIES=[...ys.ARRAY_PROPERTIES,...ys.OBJECT_PROPERTIES,...ys.STRING_PROPERTIES,...ys.NUMBER_PROPERTIES,...ys.FUNCTION_PROPERTIES,...ys.BOOLEAN_PROPERTIES,...ys.OTHER_PROPERTIES];var Eg=ys,Wn=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};Wn.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Wn.PUBLIC_EVENTS=WF;Wn.EVENT_CALLBACKS=AV.map(e=>Wn.getCallbackForEvent(e));Wn.BOOLEAN_PROPERTIES=Eg.BOOLEAN_PROPERTIES;Wn.ALL_PROPERTIES=Eg.ALL_PROPERTIES;Wn.ALL_PROPERTIES_AND_CALLBACKS=[...Wn.ALL_PROPERTIES,...Wn.EVENT_CALLBACKS];Wn.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Wn.ALL_PROPERTIES_AND_CALLBACKS);var Tg=Wn;function TV(e,t){typeof e!="object"&&(e={});const i={...e};return Tg.ALL_PROPERTIES_AND_CALLBACKS.forEach(n=>{const o=t[n];typeof o<"u"&&o!==Tg.VUE_OMITTED_PROPERTY&&(i[n]=o)}),i}function IV(e,t){if(!e)return;const i={};let s=!1;if(Object.keys(e).filter(r=>Tg.ALL_PROPERTIES_AND_CALLBACKS_SET.has(r)).forEach(r=>{i[r]=e[r],s=!0}),!s)return;const n={type:"gridOptionsChanged",options:i};t.dispatchEvent(n);const o={type:"componentStateChanged"};ao(i,(r,a)=>{o[r]=a}),t.dispatchEvent(o)}var vh=class extends te{};function rp(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var ap=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[e]!==!0&&e.length){const s=this.getGui();s&&s.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[e]!==!1&&e.length){const s=this.getGui();s&&s.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const s=(e||"").split(" ");if(s.length>1){s.forEach(n=>this.addOrRemoveCssClass(n,t));return}}if(this.cssClassStates[e]!==t&&e.length){const s=this.getGui();s&&s.classList.toggle(e,t),this.cssClassStates[e]=t}}};function Zr(e,t,i){i==null||typeof i=="string"&&i==""?jF(e,t):or(e,t,i)}function or(e,t,i){e.setAttribute(UF(t),i.toString())}function jF(e,t){e.removeAttribute(UF(t))}function UF(e){return`aria-${e}`}function Co(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function LV(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function FV(e){return e.getAttribute("aria-label")}function eh(e,t){Zr(e,"label",t)}function Ig(e,t){Zr(e,"labelledby",t)}function YF(e,t){Zr(e,"live",t)}function PV(e,t){Zr(e,"atomic",t)}function kV(e,t){Zr(e,"relevant",t)}function NV(e,t){Zr(e,"disabled",t)}function KF(e,t){Zr(e,"hidden",t)}function iv(e,t){or(e,"expanded",t)}function OV(e,t){or(e,"setsize",t)}function GV(e,t){or(e,"posinset",t)}function BV(e,t){or(e,"rowcount",t)}function zV(e,t){or(e,"rowindex",t)}function HV(e,t){or(e,"colcount",t)}function $F(e,t){or(e,"colindex",t)}function VV(e,t){or(e,"colspan",t)}function _V(e,t){or(e,"sort",t)}function WV(e){jF(e,"sort")}function sv(e,t){Zr(e,"selected",t)}function jV(e,t){Zr(e,"controls",t.id),Ig(t,e.id)}function Ux(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var UV="[tabindex], input, select, button, textarea, [href]",ZF="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Yx(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,s=t.call(e,"input, select, button, textarea"),n=t.call(e,ZF),o=$o(e);return s&&!n&&o}function ei(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||KF(e,!t)}function YV(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||KF(e,!t)}function Lg(e,t){const i="disabled",s=t?n=>n.setAttribute(i,""):n=>n.removeAttribute(i);s(e),JF(e.querySelectorAll("input"),n=>s(n))}function Uu(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++s>i)break}else if(e===i)break}return!1}function Tc(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:n,borderBottomWidth:o,borderLeftWidth:r,paddingTop:a,paddingRight:c,paddingBottom:h,paddingLeft:d,marginTop:p,marginRight:f,marginBottom:v,marginLeft:y,boxSizing:b}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(r||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(c||"0"),paddingBottom:parseFloat(h||"0"),paddingLeft:parseFloat(d||"0"),marginTop:parseFloat(p||"0"),marginRight:parseFloat(f||"0"),marginBottom:parseFloat(v||"0"),marginLeft:parseFloat(y||"0"),boxSizing:b}}function Kx(e){const t=Tc(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function lp(e){const t=Tc(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function qF(e){const{height:t,marginBottom:i,marginTop:s}=Tc(e);return Math.floor(t+i+s)}function nv(e){const{width:t,marginLeft:i,marginRight:s}=Tc(e);return Math.floor(t+i+s)}function XF(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:n,borderBottomWidth:o}=Tc(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(n||0),bottom:t.bottom+(o||0)}}function ov(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i)),i}function rv(e,t,i){i&&(t*=-1),e.scrollLeft=t}function mn(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function wc(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function QF(e){return!!e.offsetParent}function $o(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!QF(e)||window.getComputedStyle(e).visibility!=="visible")}function Fg(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function KV(e){return e.clientWidth<e.scrollWidth}function $V(e){return e.clientHeight<e.scrollHeight}function av(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):go(e,t)}function go(e,t){t=$x(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function hg(e,t){t=$x(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function $x(e){return typeof e=="number"?`${e}px`:e}function Zx(e){return e instanceof Node||e instanceof HTMLElement}function ZV(e){if(e==null)return[];const t=[];return JF(e,i=>t.push(i)),t}function qV(e,t){if(e)for(let i=0;i<e.length;i++){const s=e[i];t(s.name,s.value)}}function jn(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function JF(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}var th=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},Ab,hm,Eb,Tb,Ib,Lb,Pw,kw,Fb;function Ur(){return Ab===void 0&&(Ab=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Ab}function eP(){if(hm===void 0)if(Ur()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(hm=e[1]!=null?parseFloat(e[1]):0)}else hm=0;return hm}function XV(){if(Eb===void 0){const e=window;Eb=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Eb}function qx(){return Tb===void 0&&(Tb=/(firefox)/i.test(navigator.userAgent)),Tb}function tP(){return Ib===void 0&&(Ib=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Ib}function al(){return Lb===void 0&&(Lb=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Lb}function ZT(){return!Ur()||eP()>=15}function Nw(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!qx())?null:t.toString()}function QV(){if(Fb!==void 0)return Fb;if(!document.body)return-1;let e=1e6;const t=qx()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=e*2;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),Fb=e,e}function JV(){var e,t;return((e=document.body)==null?void 0:e.clientWidth)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1)}function e_(){var e,t;return((e=document.body)==null?void 0:e.clientHeight)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1)}function t_(){return kw==null&&iP(),kw}function iP(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(kw=i,Pw=i===0)}function sP(){return Pw==null&&iP(),Pw}var i_=1e3,s_=1e3,qT=100,nP=class Xl extends te{constructor(t,i,s,n){super(),this.parentComp=t,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=n,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){const i=this.gos.get(t);return i<0&&ne(`${t} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!al()&&(Xl.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},qT):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var o;const i=t.relatedTarget,s=this.parentComp.getGui(),n=(o=this.tooltipComp)==null?void 0:o.getGui();this.isInteractingWithTooltip||s.contains(i)||this.interactionEnabled&&(n!=null&&n.contains(i))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||Xl.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),i=Xl.lastTooltipHideTime;return t-i<i_}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t={...this.parentComp.getTooltipParams()};if(!ge(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(i)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Xl.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,i){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(i);return}const n=i.getGui();this.tooltipComp=i,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const o=this.localeService.getLocaleTextFunc(),r=this.popupService.addPopup({eChild:n,ariaLabel:o("ariaLabelTooltip","Tooltip")});if(r&&(this.tooltipPopupDestroyFunc=r.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:a,columnMoved:a})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(gi(this.gos),{keydown:a=>{n.contains(a==null?void 0:a.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var s;const t=(s=this.tooltipComp)==null?void 0:s.getGui(),i=ni(this.gos);return!!t&&t.contains(i)}onTooltipFocusOut(t){const i=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,i.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...t,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...t,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,i=this.tooltipComp,s=this.tooltipTrigger===0?s_:0;window.setTimeout(()=>{t(),this.destroyBean(i)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Xl.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},qT)}unlockService(){Xl.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};nP.isLocked=!1;var n_=nP,yh=class extends te{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,i,s,n;if(this.tooltipManager!=null)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new n_(e,(i=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:i.call(t),(n=(s=this.ctrl).getTooltipHideDelayOverride)==null?void 0:n.call(s),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){var n,o,r,a,c;const e=this.ctrl,t=(n=e.getColumn)==null?void 0:n.call(e),i=(o=e.getColDef)==null?void 0:o.call(e),s=(r=e.getRowNode)==null?void 0:r.call(e);return{location:e.getLocation(),colDef:i,column:t,rowIndex:(a=e.getRowIndex)==null?void 0:a.call(e),node:s,data:s==null?void 0:s.data,value:this.getTooltipText(),valueFormatted:(c=e.getValueFormatted)==null?void 0:c.call(e),hideTooltipCallback:()=>{var h;return(h=this.tooltipManager)==null?void 0:h.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},o_=new th,Te=null,Gt=class oP extends te{constructor(t,i){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=o_.next(),this.cssClassManager=new ap(()=>this.eGui),this.componentSelectors=new Map((i??[]).map(s=>[s.selector,s])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,i){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,i))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:i,showDelayOverride:s,hideDelayOverride:n,location:o,shouldDisplayTooltip:r}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);const a=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new yh({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>o??"UNKNOWN",getColDef:t==null?void 0:t.getColDef,getColumn:t==null?void 0:t.getColumn,getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:n!=null?()=>n:void 0,shouldDisplayTooltip:r})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,i,s,n=null){if(i===void 0&&(i=this.getDataRefAttribute(t)),i){const o=this[i];if(o===Te)this[i]=n??t;else{const r=s&&s[i];!this.suppressDataRefValidation&&!r&&ne(`Issue with data-ref: ${i} on ${this.constructor.name} with ${o}`)}}}createChildComponentsFromTags(t,i){ZV(t.childNodes).forEach(n=>{if(!(n instanceof HTMLElement))return;const o=this.createComponentFromElement(n,r=>{r.getGui()&&this.copyAttributesFromNode(n,r.getGui())},i);if(o){if(o.addItems&&n.children.length){this.createChildComponentsFromTags(n,i);const r=Array.prototype.slice.call(n.children);o.addItems(r)}this.swapComponentForNode(o,t,n)}else n.childNodes&&this.createChildComponentsFromTags(n,i)})}createComponentFromElement(t,i,s){const n=t.nodeName,o=this.getDataRefAttribute(t),r=n.indexOf("AG-")===0,a=r?this.componentSelectors.get(n):null;let c=null;if(a){oP.elementGettingCreated=t;const h=s&&o?s[o]:void 0;c=new a.component(h),c.setParentComponent(this),this.createBean(c,null,i)}else r&&ne(`Missing selector: ${n}`);return this.applyElementsToComponent(t,o,s,c),c}copyAttributesFromNode(t,i){qV(t.attributes,(s,n)=>i.setAttribute(s,n))}swapComponentForNode(t,i,s){const n=t.getGui();i.replaceChild(n,s),i.insertBefore(document.createComment(s.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){const i=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(s=>s.setAttribute("tabindex",i.toString()))}setTemplate(t,i,s){const n=Fg(t);this.setTemplateFromElement(n,i,s)}setTemplateFromElement(t,i,s,n=!1){if(this.eGui=t,this.suppressDataRefValidation=n,i)for(let o=0;o<i.length;o++){const r=i[o];this.componentSelectors.set(r.selector,r)}this.wireTemplate(t,s)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,i){let s=i;return t==null?null:(s||(s=this.eGui),Zx(t)?{element:t,parent:s}:{element:t.getGui(),parent:s})}prependChild(t,i){const{element:s,parent:n}=this.getContainerAndElement(t,i)||{};!s||!n||n.insertAdjacentElement("afterbegin",s)}appendChild(t,i){const{element:s,parent:n}=this.getContainerAndElement(t,i)||{};!s||!n||n.appendChild(s)}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:s}=i;YV(this.eGui,t,{skipAriaHidden:s})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:s}=i;ei(this.eGui,t,{skipAriaHidden:s});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,i,s){this.eGui.addEventListener(t,i,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}},rP={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},r_=(()=>{const e=new Set(Object.values(rP));return e.add("eye"),e})();function a_(e,t,i){const s=hn(e,t,i);if(s){const{className:o}=s;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return s}const n=document.createElement("span");return n.appendChild(s),n}function hn(e,t,i,s){let n=null;const o=i&&i.getColDef().icons;if(o&&(n=o[e]),t&&!n){const r=t.get("icons");r&&(n=r[e])}if(n){let r;if(typeof n=="function")r=n();else if(typeof n=="string")r=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof r=="string")return Fg(r);if(Zx(r))return r;ne("iconRenderer should return back a string or a dom object")}else{const r=document.createElement("span");let a=rP[e]??(r_.has(e)?e:void 0);return a||(ne(`Did not find icon ${e}`),a=""),r.setAttribute("class",`ag-icon ag-icon-${a}`),r.setAttribute("unselectable","on"),Co(r,"presentation"),r}}var l_=class extends Gt{constructor(){super(...arguments),this.dragSource=null,this.eIcon=Te,this.eLabel=Te}postConstruct(){const e=t=>a_(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){var s,n;mn(this.eIcon);let i=null;e||(e=(s=this.dragSource)!=null&&s.getDefaultIconName?(n=this.dragSource)==null?void 0:n.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=Wo(e)}};function aP(e,t,i){if(i===0)return!1;const s=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(s,n)<=i}var Ka=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new fh,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const s={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(s)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!aP(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const i={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function jd(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var c_=`<span class="ag-sort-indicator-container">
        ${jd("Order","order")}
        ${jd("Asc","ascending-icon")}
        ${jd("Desc","descending-icon")}
        ${jd("Mixed","mixed-icon")}
        ${jd("None","none-icon")}
    </span>`,Xx=class extends Gt{constructor(e){super(),this.eSortOrder=Te,this.eSortAsc=Te,this.eSortDesc=Te,this.eSortMixed=Te,this.eSortNone=Te,e||this.setTemplate(c_)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,s,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=n}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),s=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:s,columnRowGroupChanged:s}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;const s=hn(e,this.gos,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";ei(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";ei(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=e==null;ei(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;zo(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";ei(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some(n=>this.sortController.getDisplaySortIndexForColumn(n)??!1),s=t>=0&&i;ei(this.eSortOrder,s,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():mn(this.eSortOrder)}},u_={selector:"AG-SORT-INDICATOR",component:Xx},h_=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,Ow=class extends Gt{constructor(){super(...arguments),this.eFilter=Te,this.eFilterButton=Te,this.eSortIndicator=Te,this.eMenu=Te,this.eLabel=Te,this.eText=Te,this.eSortOrder=Te,this.eSortAsc=Te,this.eSortDesc=Te,this.eSortMixed=Te,this.eSortNone=Te,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??h_;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[u_]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=Wo(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(t==null)return;const s=hn(e,this.gos,i);s&&t.appendChild(s)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new Ka(this.getGui(),!0),i=this.shouldSuppressMenuHide(),s=i&&ge(this.eMenu),n=s?new Ka(this.eMenu,!0):t;if(this.params.enableMenu){const o=s?"tap":"longTap",r=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(n,{[o]:r})}if(this.params.enableSorting){const o=r=>{var c,h;const a=r.touchStart.target;i&&((c=this.eMenu)!=null&&c.contains(a)||(h=this.eFilterButton)!=null&&h.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:o})}if(this.params.enableFilterButton){const o=new Ka(this.eFilterButton,!0);this.addManagedListeners(o,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>t.destroy()),s&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){wc(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new Xx(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{const i=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(i||n)){const a=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}}});const e=()=>{const t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){const i=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),n=!(i==null?void 0:i.every(o=>this.params.column.getSort()==o.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",n)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return wc(t),!1;const s=this.params.column;return this.addInIcon("filter",t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();ei(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},d_=class extends Gt{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=Te,this.agClosed=Te,this.agLabel=Te}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&ne("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=n=>{if(Gr(n))return;const o=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),o,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=n=>{Ju(n)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),s=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:s,expandableChanged:s})}addTouchAndClickListeners(e,t){const i=new Ka(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc(()=>i.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();ei(this.agOpened,t),ei(this.agClosed,!t)}else ei(this.agOpened,!1),ei(this.agClosed,!1)}addInIcon(e,t){const i=hn(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){ei(this.agOpened,!1),ei(this.agClosed,!1);return}}setupLabel(){var i;const{displayName:e,columnGroup:t}=this.params;if(ge(e)){const s=Wo(e,!0);this.agLabel.textContent=s}this.addOrRemoveCssClass("ag-sticky-label",!((i=t.getColGroupDef())!=null&&i.suppressStickyLabel))}},g_="↑",p_="↓",f_=class extends Gt{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),n=ge(s)?s:i,o=t>=0;o?this.eDelta.textContent=g_+n:this.eDelta.textContent=p_+n,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),mn(this.eDelta)}refresh(e,t=!1){var s;const i=e.value;if(i===this.lastValue||(ge(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:ge(e.value)?this.eValue.textContent=i:mn(this.eValue),(s=this.filterManager)!=null&&s.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){const n=i-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},m_=class extends Gt{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var s;let i=e.value;return st(i)&&(i=""),i===this.lastValue||(s=this.filterManager)!=null&&s.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=i,ge(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:ge(e.value)?this.eCurrent.textContent=i:mn(this.eCurrent),!0)}},Z=class{};Z.BACKSPACE="Backspace";Z.TAB="Tab";Z.ENTER="Enter";Z.ESCAPE="Escape";Z.SPACE=" ";Z.LEFT="ArrowLeft";Z.UP="ArrowUp";Z.RIGHT="ArrowRight";Z.DOWN="ArrowDown";Z.DELETE="Delete";Z.F2="F2";Z.PAGE_UP="PageUp";Z.PAGE_DOWN="PageDown";Z.PAGE_HOME="Home";Z.PAGE_END="End";Z.A="KeyA";Z.C="KeyC";Z.D="KeyD";Z.V="KeyV";Z.X="KeyX";Z.Y="KeyY";Z.Z="KeyZ";var v_=class extends Gt{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){mn(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(ei(this.eLabel,!1),Co(this.eLabel,"presentation")):(ei(this.eLabel,!0),Co(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(av(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Lg(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},lP=class extends v_{constructor(e,t,i,s){super(e,t,i),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||FV(e)!==null?Ig(e,""):Ig(e,t??"")}setAriaLabel(e){return eh(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return go(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},rc=class extends lP{constructor(e,t,i="text",s="input"){super(e,(e==null?void 0:e.template)??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} data-ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,[],t),this.inputType=i,this.displayFieldTag=s,this.eLabel=Te,this.eWrapper=Te,this.eInput=Te}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return av(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return jn(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return eh(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Lg(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)jn(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";jn(this.eInput,"autocomplete",t)}return this}},Qx=class extends rc{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const s=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},Jx={selector:"AG-CHECKBOX",component:Qx},y_=class extends Gt{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Jx]),this.eCheckbox=Te}init(e){this.refresh(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),YF(t,"polite"),this.addManagedListeners(t,{click:i=>{if(Ju(i),this.eCheckbox.isDisabled())return;const s=this.eCheckbox.getValue();this.onCheckboxChanged(s)},dblclick:i=>{Ju(i)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:i=>{if(i.key===Z.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===ni(this.gos)&&this.eCheckbox.toggle();const s=this.eCheckbox.getValue();this.onCheckboxChanged(s),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var a;let t,i=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{const c=e.column.getColId();c.startsWith(Yv)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[c]!==void 0?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);const s=e.disabled!=null?e.disabled:!((a=e.column)!=null&&a.isCellEditable(e.node));this.eCheckbox.setDisabled(s);const n=this.localeService.getLocaleTextFunc(),o=Ux(n,t),r=s?o:`${n("ariaToggleCellValue","Press SPACE to toggle cell value")} (${o})`;this.eCheckbox.setInputAriaLabel(r)}onCheckboxChanged(e){const{column:t,node:i,value:s}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s});const n=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:n}),n||this.updateCheckbox(this.params)}},C_=class extends Gt{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=Te,this.eLoadingText=Te}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=hn("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},S_=class extends Gt{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>Ig(e.eParentOfValue)),Ig(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");eh(this.getGui(),t)}setupLoading(e){const i=gi(this.gos).createElement("div");i.classList.add("ag-skeleton-effect");const s=e.node.rowIndex;if(s!=null){const r=75+25*(s%2===0?Math.sin(s):Math.cos(s));i.style.width=`${r}%`}this.getGui().appendChild(i);const o=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");eh(this.getGui(),o)}refresh(e){return!1}destroy(){super.destroy()}},cP=class extends Gt{constructor(){super()}destroy(){super.destroy()}},b_=class extends cP{init(){var t;const e=Or((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("loadingOoo","Loading...")})}}},w_=class extends cP{init(){var t;const e=Or((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("noRowsToShow","No Rows To Show")})}}},Ch=class extends Gt{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},x_=class extends Ch{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=Wo(t,!0)}};function uP(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:s,filterByPercentageOfBestMatch:n,addSequentialWeight:o}=e;let r=i.map((h,d)=>({value:h,relevance:D_(t.toLowerCase(),h.toLocaleLowerCase(),o),idx:d}));if(r.sort((h,d)=>d.relevance-h.relevance),s&&(r=r.filter(h=>h.relevance!==0)),r.length>0&&n&&n>0){const d=r[0].relevance*n;r=r.filter(p=>d-p.relevance<0)}const a=[],c=[];for(const h of r)a.push(h.value),c.push(h.idx);return{values:a,indices:c}}function M_(e){const t=[],i=e.length;for(let s=1;s<=i;s++)for(let n=0;n<=i-s;n++){const o=n+s-1;t.push(e.slice(n,o+1))}return t}function D_(e,t,i=!1){const s=e.replace(/\s/g,""),n=t.replace(/\s/g,""),o=s.length,r=n.length,a=new Array(o+1).fill(null).map(()=>new Array(r+1).fill(0));for(let p=0;p<=o;p+=1)a[p][0]=p;for(let p=0;p<=r;p+=1)a[0][p]=p;for(let p=1;p<=o;p++)for(let f=1;f<=r;f++)s[p-1]===n[f-1]?a[p][f]=a[p-1][f-1]:a[p][f]=1+Math.min(a[p][f-1],Math.min(a[p-1][f],a[p-1][f-1]));const c=a[o][r];let d=Math.max(o,r)-c;if(i){const p=M_(s);for(let f=0;f<p.length;f++){const v=p[f];n.indexOf(v)!==-1&&(d+=1,d*=v.length)}}return d}var R_=class extends te{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:l_,agColumnHeader:Ow,agColumnGroupHeader:d_,agSortIndicator:Xx,agAnimateShowChangeCellRenderer:f_,agAnimateSlideCellRenderer:m_,agLoadingCellRenderer:C_,agSkeletonCellRenderer:S_,agCheckboxCellRenderer:y_,agLoadingOverlay:b_,agNoRowsOverlay:w_,agTooltipComponent:x_},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");e!=null&&ao(e,(t,i)=>this.registerJsComponent(t,i))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(a,c,h)=>({componentFromFramework:c,component:a,params:h}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(s!=null)return i(s,!0);const n=this.jsComps[t];if(n){const a=this.getFrameworkOverrides().isFrameworkComponent(n);return i(n,a)}const o=this.agGridDefaults[t];if(o)return i(o,!1,this.agGridDefaultParams[t]);const r=this.enterpriseAgDefaultCompsModule[t];return r?this.gos.assertModuleRegistered(r,`AG Grid '${e}' component: ${t}`):Gx(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter(n=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(n)),...Object.keys(this.jsComps)],s=uP({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;ne(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),s.length>0&&ne(`         Did you mean: [${s.slice(0,3)}]?`),ne(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},di=class ig{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new ig(i=>{let s=t.length;const n=new Array(s);t.forEach((o,r)=>{o.then(a=>{n[r]=a,s--,s===0&&i(n)})})}):ig.resolve()}static resolve(t=null){return new ig(i=>i(t))}then(t){return new ig(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(s=>i(t(s)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){}},A_={propertyName:"dateComponent",cellRenderer:!1},E_={propertyName:"dragAndDropImageComponent",cellRenderer:!1},T_={propertyName:"headerComponent",cellRenderer:!1},I_={propertyName:"headerGroupComponent",cellRenderer:!1},XT={propertyName:"cellRenderer",cellRenderer:!0},L_={propertyName:"cellRenderer",cellRenderer:!1},F_={propertyName:"loadingCellRenderer",cellRenderer:!0},P_={propertyName:"cellEditor",cellRenderer:!1},QT={propertyName:"innerRenderer",cellRenderer:!0},k_={propertyName:"loadingOverlayComponent",cellRenderer:!1},N_={propertyName:"noRowsOverlayComponent",cellRenderer:!1},O_={propertyName:"tooltipComponent",cellRenderer:!1},eM={propertyName:"filter",cellRenderer:!1},G_={propertyName:"floatingFilterComponent",cellRenderer:!1},B_={propertyName:"toolPanel",cellRenderer:!1},z_={propertyName:"statusPanel",cellRenderer:!1},H_={propertyName:"fullWidthCellRenderer",cellRenderer:!0},V_={propertyName:"loadingCellRenderer",cellRenderer:!0},__={propertyName:"groupRowRenderer",cellRenderer:!0},W_={propertyName:"detailCellRenderer",cellRenderer:!0},j_={propertyName:"menuItem",cellRenderer:!1},hP=class dP extends te{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,E_,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,i){return this.getCompDetails(t,T_,"agColumnHeader",i)}getHeaderGroupCompDetails(t){const i=t.columnGroup.getColGroupDef();return this.getCompDetails(i,I_,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,H_,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,V_,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,__,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,W_,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,i){return this.getCompDetails(t,QT,null,i)}getFullWidthGroupRowInnerCellRenderer(t,i){return this.getCompDetails(t,QT,null,i)}getCellRendererDetails(t,i){return this.getCompDetails(t,XT,null,i)}getEditorRendererDetails(t,i){return this.getCompDetails(t,L_,null,i)}getLoadingCellRendererDetails(t,i){return this.getCompDetails(t,F_,"agSkeletonCellRenderer",i,!0)}getCellEditorDetails(t,i){return this.getCompDetails(t,P_,"agCellEditor",i,!0)}getFilterDetails(t,i,s){return this.getCompDetails(t,eM,s,i,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,A_,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,k_,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,N_,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,O_,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,i){return this.getCompDetails(t,XT,null,i)}getFloatingFilterCompDetails(t,i,s){return this.getCompDetails(t,G_,s,i)}getToolPanelCompDetails(t,i){return this.getCompDetails(t,B_,null,i,!0)}getStatusPanelCompDetails(t,i){return this.getCompDetails(t,z_,null,i,!0)}getMenuItemCompDetails(t,i){return this.getCompDetails(t,j_,"agMenuItem",i,!0)}getCompDetails(t,i,s,n,o=!1){const{propertyName:r,cellRenderer:a}=i;let{compName:c,jsComp:h,fwComp:d,paramsFromSelector:p,popupFromSelector:f,popupPositionFromSelector:v}=dP.getCompKeys(this.frameworkOverrides,t,i,n),y;const b=R=>{const A=this.userComponentRegistry.retrieve(r,R);A&&(h=A.componentFromFramework?void 0:A.component,d=A.componentFromFramework?A.component:void 0,y=A.params)};if(c!=null&&b(c),h==null&&d==null&&s!=null&&b(s),h&&a&&!this.agComponentUtils.doesImplementIComponent(h)&&(h=this.agComponentUtils.adaptFunction(r,h)),!h&&!d){o&&dt(`Could not find component ${c}, did you forget to configure this component?`);return}const w=this.mergeParamsWithApplicationProvidedParams(t,i,n,p,y),S=h==null,M=h||d;return{componentFromFramework:S,componentClass:M,params:w,type:i,popupFromSelector:f,popupPositionFromSelector:v,newAgStackInstance:()=>this.newAgStackInstance(M,S,w,i)}}static getCompKeys(t,i,s,n){const{propertyName:o}=s;let r,a,c,h,d,p;if(i){const f=i,v=f[o+"Selector"],y=v?v(n):null,b=w=>{typeof w=="string"?r=w:w!=null&&w!==!0&&(t.isFrameworkComponent(w)?c=w:a=w)};y?(b(y.component),h=y.params,d=y.popup,p=y.popupPosition):b(f[o])}return{compName:r,jsComp:a,fwComp:c,paramsFromSelector:h,popupFromSelector:d,popupPositionFromSelector:p}}newAgStackInstance(t,i,s,n){const o=n.propertyName,r=!i;let a;if(r)a=new t;else{const h=this.componentMetadataProvider.retrieve(o);a=this.frameworkComponentWrapper.wrap(t,h.mandatoryMethodList,h.optionalMethodList,n)}const c=this.initComponent(a,s);return c==null?di.resolve(a):c.then(()=>a)}mergeParamsWithApplicationProvidedParams(t,i,s,n=null,o){const r=this.gos.getGridCommonParams();Fs(r,s),o&&Fs(r,o);const a=t,c=a&&a[i.propertyName+"Params"];if(typeof c=="function"){const h=c(s);Fs(r,h)}else typeof c=="object"&&Fs(r,c);return Fs(r,n),r}initComponent(t,i){if(this.createBean(t),t.init!=null)return t.init(i)}};function dg(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var Kv=class ht{static register(t){ht.__register(t,!0,void 0)}static registerModules(t){ht.__registerModules(t,!0,void 0)}static __register(t,i,s){ht.runVersionChecks(t),s!==void 0?(ht.areGridScopedModules=!0,ht.gridModulesMap[s]===void 0&&(ht.gridModulesMap[s]={}),ht.gridModulesMap[s][t.moduleName]=t):ht.globalModulesMap[t.moduleName]=t,ht.setModuleBased(i)}static __unRegisterGridModules(t){delete ht.gridModulesMap[t]}static __registerModules(t,i,s){ht.setModuleBased(i),t&&t.forEach(n=>ht.__register(n,i,s))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[n,o]=ht.currentModuleVersion.split(".")||[];return i===n&&s===o}static runVersionChecks(t){ht.currentModuleVersion||(ht.currentModuleVersion=t.version);const i=s=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${s} Please update all modules to the same version.`;if(t.version?ht.isValidModuleVersion(t)||dt(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${ht.currentModuleVersion}.`)):dt(i(`'${t.moduleName}' is incompatible.`)),t.validate){const s=t.validate();s.isValid||dt(`${s.message}`)}}static setModuleBased(t){ht.moduleBased===void 0?ht.moduleBased=t:ht.moduleBased!==t&&(dt("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),dt("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){ht.isBundled=!0}static __assertRegistered(t,i,s){var o;if(this.__isRegistered(t,s))return!0;let n;if(ht.isBundled)n=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(ht.moduleBased||ht.moduleBased===void 0){const r=(o=Object.entries(xF).find(([a,c])=>c===t))==null?void 0:o[0];n=`AG Grid: unable to use ${i} as the ${r} is not registered${ht.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${r} } from '${t}';
    
    ModuleRegistry.registerModules([ ${r} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return dt(n),!1}static __isRegistered(t,i){var s;return!!ht.globalModulesMap[t]||!!((s=ht.gridModulesMap[i])!=null&&s[t])}static __getRegisteredModules(t){return[...km(ht.globalModulesMap),...km(ht.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return km(ht.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!ht.moduleBased}};Kv.globalModulesMap={};Kv.gridModulesMap={};Kv.areGridScopedModules=!1;var Ho=Kv,U_=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;Object.entries(e.providedBeanInstances).forEach(([i,s])=>{this.beans[i]=s}),e.beanClasses.forEach(i=>{const s=new i;s.beanName?this.beans[s.beanName]=s:console.error(`Bean ${i.name} is missing beanName`),this.createdBeans.push(s)}),(t=e.derivedBeans)==null||t.forEach(i=>{const{beanName:s,bean:n}=i(this);this.beans[s]=n,this.createdBeans.push(n)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(i=>{var s,n;(s=i.preWireBeans)==null||s.call(i,this.beans),(n=i.wireBeans)==null||n.call(i,this.beans)}),e.forEach(i=>{var s;return(s=i.preConstruct)==null?void 0:s.call(i)}),t&&e.forEach(t),e.forEach(i=>{var s;return(s=i.postConstruct)==null?void 0:s.call(i)})}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},Y_=class extends U_{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),Ho.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},gP=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(gP||{}),K_=class extends te{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Os(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){var i,s;this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),(s=(i=this.dragSource).onDragStarted)==null||s.call(i),this.createDragAndDropImageComponent()}onDragStop(e){var t,i,s;if((i=(t=this.dragSource)==null?void 0:t.onDragStopped)==null||i.call(t),(s=this.lastDropTarget)!=null&&s.onDragStop){const n=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(n)}this.clearDragAndDropProperties()}onDragCancel(){var e,t,i;(t=(e=this.dragSource)==null?void 0:e.onDragCancelled)==null||t.call(e),(i=this.lastDropTarget)!=null&&i.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){var r,a,c,h;const i=this.getHorizontalDirection(e),s=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const n=this.dropTargets.filter(d=>this.isMouseOnDropTarget(e,d)),o=this.findCurrentDropTarget(e,n);if(o!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,s,t),this.lastDropTarget!==null&&o===null&&((a=(r=this.dragSource)==null?void 0:r.onGridExit)==null||a.call(r,this.dragItem)),this.lastDropTarget===null&&o!==null&&((h=(c=this.dragSource)==null?void 0:c.onGridEnter)==null||h.call(c,this.dragItem)),this.enterDragTargetIfExists(o,e,i,s,t),o&&this.dragAndDropImageComp){const{comp:d,promise:p}=this.dragAndDropImageComp;d?d.setIcon(o.getIconName?o.getIconName():null):p.then(f=>{f&&f.setIcon(o.getIconName?o.getIconName():null)})}this.lastDropTarget=o}else if(o&&o.onDragging){const d=this.createDropTargetEvent(o,e,i,s,t);o.onDragging(d)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const{width:s,height:n,left:o,right:r,top:a,bottom:c}=i.getBoundingClientRect();if(s===0||n===0)return!1;const h=e.clientX>=o&&e.clientX<r,d=e.clientY>=a&&e.clientY<c;if(!h||!d)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const r of i)if(this.allContainersIntersect(e,r)){s=!0;break}const{eElement:n,type:o}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(n)?!1:s&&t.isInterestedIn(o,n)}findCurrentDropTarget(e,t){const i=t.length;if(i===0)return null;if(i===1)return t[0];const n=Ag(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const o of n)for(const r of t)if(iV(this.getAllContainersFromDropTarget(r)).indexOf(o)!==-1)return r;return null}enterDragTargetIfExists(e,t,i,s,n){if(e&&e.onDragEnter){const o=this.createDropTargetEvent(e,t,i,s,n);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,i,s){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const o=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(o)}const n=this.getDragAndDropImageComponent();n&&n.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:s}=e;return i.contains(s)}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,s,n){const o=e.getContainer(),r=o.getBoundingClientRect(),{dragItem:a,dragSource:c}=this,h=t.clientX-r.left,d=t.clientY-r.top;return this.gos.addGridCommonParams({event:t,x:h,y:d,vDirection:s,hDirection:i,dragSource:c,fromNudge:n,dragItem:a,dropZoneTarget:o})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();if(!t)return;const i=t.getGui(),n=i.getBoundingClientRect().height,o=JV()-2,r=e_()-2;if(!i.offsetParent)return;const c=XF(i.offsetParent),{clientY:h,clientX:d}=e;let p=h-c.top-n/2,f=d-c.left-10;const v=gi(this.gos),y=v.defaultView||window,b=y.pageYOffset||v.documentElement.scrollTop,w=y.pageXOffset||v.documentElement.scrollLeft;o>0&&f+i.clientWidth>o+w&&(f=o+w-i.clientWidth),f<0&&(f=0),r>0&&p+i.clientHeight>r+b&&(p=r+b-i.clientHeight),p<0&&(p=0),i.style.left=`${f}px`,i.style.top=`${p}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const i=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(s=>{!s||!this.isAlive()||(this.processDragAndDropImageComponent(s),this.dragAndDropImageComp.comp=s)})}processDragAndDropImageComponent(e){const{dragSource:t,mouseEventService:i,environment:s}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(n),s.applyThemeClasses(n),e.setIcon(null);let{dragItemName:o}=t;Bx(o)&&(o=o()),e.setLabel(o||""),n.style.top="20px",n.style.left="20px";const r=gi(this.gos);let a=null,c=null;try{a=r.fullscreenElement}catch{}finally{a||(a=Ag(this.gos));const h=a.querySelector("body");h?c=h:a instanceof ShadowRoot?c=a:a instanceof Document?c=a==null?void 0:a.documentElement:c=a}this.dragAndDropImageParent=c,c?c.appendChild(n):ne("Could not find document body, it is needed for drag and drop.")}},$_=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<s.left+n,this.tickRight=e.clientX>s.right-n,this.tickUp=e.clientY<s.top+n&&!i,this.tickDown=e.clientY>s.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Z_=class extends te{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){Vt(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{const t=e.gridBodyCtrl;this.autoScrollService=new $_({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var s;return!!(this.funcColsService.getRowGroupColumns().length||((s=this.filterManager)==null?void 0:s.isAnyFilterPresent())||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const s=[...this.selectionService.getSelectedNodes()].sort((n,o)=>n.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(n)-this.getRowIndexNumber(o));if(s.indexOf(t)!==-1)return s}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gos.get("rowDragManaged"),n=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(it(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===1,s=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes;let o=i?1:0;if(this.isFromThisGrid(e))n.forEach(r=>{r.rowTop<s&&(o-=1)}),this.moveRows(n,s,o);else{const r=mh(this.gos);let a=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===0&&a--,this.clientSideRowModel.updateRowData({add:n.filter(c=>!this.clientSideRowModel.getRowNode((r==null?void 0:r({data:c.data,level:0,rowPinned:c.rowPinned}))??c.data.id)).map(c=>c.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){var n;this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),(n=this.rangeService)==null||n.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){ne("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){ne("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=s=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",s))}),e.onDragLeave&&(t.onDragLeave=s=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",s))}),e.onDragging&&(t.onDragging=s=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",s))}),e.onDragStop&&(t.onDragStop=s=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",s))}),e.onDragCancel&&(t.onDragCancel=s=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",s))}));const i={isInterestedIn:s=>s===2,getIconName:()=>"move",external:!0,...t};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),n=this.onDragging.bind(this),o=this.onDragStop.bind(this),r=this.onDragCancel.bind(this);let a;return e?a={getContainer:t,onDragEnter:e.onDragEnter?c=>{i(c),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",c))}:i,onDragLeave:e.onDragLeave?c=>{s(c),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",c))}:s,onDragging:e.onDragging?c=>{n(c),e.onDragging(this.draggingToRowDragEvent("rowDragMove",c))}:n,onDragStop:e.onDragStop?c=>{o(c),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",c))}:o,onDragCancel:e.onDragCancel?c=>{r(c),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",c))}:r,fromGrid:!0}:a={getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:n,onDragStop:o,onDragCancel:r,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y,s=i>this.pageBoundsService.getCurrentPageHeight();let n=-1,o;s||(n=this.rowModel.getRowIndexAtPixel(i),o=this.rowModel.getRow(n));let r;switch(t.vDirection){case 1:r="down";break;case 0:r="up";break;default:r=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:n,overNode:o,y:i,vDirection:r})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},q_=class extends te{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const s=e.touchStartListener;t.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),Os(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:s,stopPropagationForTouch:n}=e;i.addEventListener("mousedown",t);let o=null;const r=this.gos.get("suppressTouch");s&&!r&&(o=a=>{Yx(a.target)||(n&&a.stopPropagation(),this.onTouchStart(e,a))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=c=>this.onTouchMove(c,e.eElement),n=c=>this.onTouchUp(c,e.eElement),o=c=>{c.cancelable&&c.preventDefault()},r=t.target,a=[{target:Ag(this.gos),type:"touchmove",listener:o,options:{passive:!1}},{target:r,type:"touchmove",listener:s,options:{passive:!0}},{target:r,type:"touchend",listener:n,options:{passive:!0}},{target:r,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=h=>this.onMouseMove(h,e.eElement),n=h=>this.onMouseUp(h,e.eElement),o=h=>h.preventDefault(),r=h=>{h.key===Z.ESCAPE&&this.cancelDrag(e.eElement)},a=Ag(this.gos),c=[{target:a,type:"mousemove",listener:s},{target:a,type:"mouseup",listener:n},{target:a,type:"contextmenu",listener:o},{target:a,type:"keydown",listener:r}];this.addTemporaryEvents(c),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:i,type:s,listener:n,options:o}=t;i.addEventListener(s,n,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:i,type:s,listener:n,options:o}=t;i.removeEventListener(s,n,o)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,s=ge(i)?i:4;return aP(e,t,s)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){var s;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}(s=this.currentDragParams)==null||s.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){var i;Ur()&&((i=gi(this.gos).getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i=e.type==="mousemove";return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t==null?void 0:t.tagName.toLocaleLowerCase();return!!(i!=null&&i.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,i;this.eventService.dispatchEvent({type:"dragCancelled",target:e}),(i=(t=this.currentDragParams)==null?void 0:t.onDragCancel)==null||i.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},Gw=class extends Gt{constructor(e,t,i,s,n,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=n,this.suppressVisibilityChange=o,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(hn("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new Q_(this,this.beans,this.rowNode,this.column):new X_(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&ne("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:s=>{s==null||s.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var r;const s=this.getDragItem(),n=((r=s.rowNodes)==null?void 0:r.length)||1,o=this.getRowDragText(this.column);return o?o(s,n):n===1?this.cellValueFn():`${n} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},pP=class extends te{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,s=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),s=Bx(this.column.getColDef().rowDrag)),s?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},X_=class extends pP{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},Q_=class extends pP{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),s=this.gos.get("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),o=i&&!n||s;this.setDisplayedOrVisible(o)}},J_=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),cp=class Oa{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Oa.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){var o;const s=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const n=this.createDataChangedEvent(t,s,i);(o=this.localEventService)==null||o.dispatchEvent(n)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,s){return{type:"dataChanged",node:this,oldData:i,newData:t,update:s}}getRowIndexString(){return this.rowIndex==null?(dt("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?Oa.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?Oa.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new Oa(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){var r;const s=ge(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);const o=this.createDataChangedEvent(t,n,!1);(r=this.localEventService)==null||r.dispatchEvent(o)}checkRowSelectable(){const t=zx(this.beans.gos);this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,i){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),i)return;if(bc(this.beans.gos)){const n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){var s;const i=mh(this.beans.gos);if(i)if(this.data){const n=((s=this.parent)==null?void 0:s.getRoute())??[];this.id=i({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Oa.ID_PREFIX_ROW_GROUP)&&dt(`Row IDs cannot start with ${Oa.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Ns(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){var a;let t=!1,i=!0,s=0;const n=this.__autoHeights;if(n==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(c=>{let h=n[c.getId()];if(h==null)if(this.beans.columnModel.isColSpanActive()){let d=[];switch(c.getPinned()){case"left":d=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":d=this.beans.visibleColsService.getRightColsForRow(this);break;case null:d=this.beans.columnViewportService.getColsWithinViewport(this);break}if(d.includes(c)){t=!0;return}h=-1}else{t=!0;return}else i=!1;h>s&&(s=h)}),t)||((i||s<10)&&(s=Qa(this.beans.gos,this).height),s==this.rowHeight))return;this.setRowHeight(s);const r=this.beans.rowModel;(a=r.onRowHeightChangedDebounced)==null||a.call(r)}setExpanded(t,i,s){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");const n={...this.createGlobalRowEvent("rowGroupOpened"),expanded:t,event:i||null};this.beans.rowNodeEventThrottle.dispatchExpanded(n,s),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,i,s){const o=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),r=this.beans.valueService.getValueForDisplay(o,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:o,colDef:o.getColDef(),data:this.data,node:this,oldValue:r,newValue:i,value:i,source:s}),!1;const a=this.beans.valueService.setValue(this,o,i,s);return this.dispatchCellChangedEvent(o,i,r),this.checkRowSelectable(),a}setGroupValue(t,i){const s=this.beans.columnModel.getCol(t);st(this.groupData)&&(this.groupData={});const n=s.getColId(),o=this.groupData[n];o!==i&&(this.groupData[n]=i,this.dispatchCellChangedEvent(s,i,o))}setAggData(t){const i=this.aggData;if(this.aggData=t,this.localEventService){const s=n=>{const o=this.aggData?this.aggData[n]:void 0,r=i?i[n]:void 0;if(o===r)return;const a=this.beans.columnModel.getCol(n);a&&this.dispatchCellChangedEvent(a,o,r)};for(const n in i)s(n);for(const n in t)(!i||!(n in i))&&s(n)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(nr(this.beans.gos)){const s=this.beans.gos.get("treeData"),n=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(s?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,i,s){var o;const n={type:"cellChanged",node:this,column:t,newValue:i,oldValue:s};(o=this.localEventService)==null||o.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var s;let t=!1,i=!1;if(!((s=this.childrenAfterGroup)!=null&&s.length))return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){const o=this.childrenAfterGroup[n];let r=o.isSelected();if(!o.selectable){const a=o.calculateSelectedFromChildren();if(a===null)continue;r=a}switch(r){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!(t&&i))return t?!0:i?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){var i;(i=this.localEventService)==null||i.dispatchEvent({type:t,node:this})}selectThisNode(t,i,s="api"){const n=!this.selectable&&t,o=this.selected===t;if(n||o)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");const r=this.sibling;return r&&r.footer&&r.localEventService&&r.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:i||null,source:s}),!0}setSelected(t,i=!1,s="api"){if(typeof s=="boolean"){ne("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:s})}setSelectedParams(t){return this.rowPinned?(ne("cannot select pinned rows"),0):this.id===void 0?(ne("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...t,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(t,i){var n;this.localEventService||(this.localEventService=new fh),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new _x(this.beans.frameworkOverrides));const s=((n=this.frameworkEventListenerService)==null?void 0:n.wrap(t,i))??i;this.localEventService.addEventListener(t,s)}removeEventListener(t,i){var n;if(!this.localEventService)return;const s=((n=this.frameworkEventListenerService)==null?void 0:n.unwrap(t,i))??i;this.localEventService.removeEventListener(t,s),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(ne("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const t=[];let i=this;for(;i&&i.key!=null;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new Oa(this.beans);Object.keys(this).forEach(i=>{J_.has(i)||(t[i]=this[i])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.dispatchRowEvent("draggingChanged"))}setHighlighted(t){this.highlighted!==t&&(this.highlighted=t,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}};cp.ID_PREFIX_ROW_GROUP="row-group-";cp.ID_PREFIX_TOP_PINNED="t-";cp.ID_PREFIX_BOTTOM_PINNED="b-";cp.OBJECT_ID_SEQUENCE=0;var Br=cp,eW=class extends te{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvancedFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",i=>this.setAdvancedFilterModel(i.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}(i=this.columnFilterService)==null||i.setFilterModel(e,t)}getFilterModel(){var e;return((e=this.columnFilterService)==null?void 0:e.getFilterModel())??{}}isColumnFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isAggregateFilterPresent())}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t,i;e?(t=this.columnFilterService)!=null&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(i=this.advancedFilterService)!=null&&i.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!((e=this.advancedFilterService)!=null&&e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){var e;(e=this.quickFilterService)==null||e.resetQuickFilterCache()}refreshFiltersForAggregations(){Aw(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):di.resolve()).then(()=>{var o;const n={source:t,type:"filterChanged",columns:s};i&&Fs(n,i),this.eventService.dispatchEvent(n),(o=this.columnFilterService)==null||o.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.columnFilterService)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilterService)!=null&&e.isQuickFilterPresent())}updateAggFiltering(){this.aggFiltering=!!Aw(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){var t;return!!((t=this.columnFilterService)!=null&&t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t;return((t=this.columnFilterService)==null?void 0:t.getOrCreateFilterWrapper(e))??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){var t;return this.isAdvancedFilterEnabled()?!1:!!((t=this.columnFilterService)!=null&&t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var i;return(i=this.columnFilterService)==null?void 0:i.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){var i;(i=this.columnFilterService)==null||i.destroyFilter(e,t)}areFilterCompsDifferent(e,t){var i;return!!((i=this.columnFilterService)!=null&&i.areFilterCompsDifferent(e,t))}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){var t;if(this.isAdvancedFilterEnabled()){if((t=this.dataTypeService)!=null&&t.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvancedFilterEnabled()?!1:!!((e=this.columnFilterService)!=null&&e.hasFloatingFilters())}getFilterInstance(e,t){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return(i=this.columnFilterService)==null?void 0:i.getFilterInstance(e,t)}getColumnFilterInstance(e){var t;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):((t=this.columnFilterService)==null?void 0:t.getColumnFilterInstance(e))??Promise.resolve(void 0)}warnAdvancedFilters(){ne("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var i;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):((i=this.columnFilterService)==null?void 0:i.setColumnFilterModel(e,t))??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){var s;(s=this.columnFilterService)==null||s.setColDefPropertiesForDataType(e,t,i)}},tW=class extends Gt{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e;return((e=this.filterWrapper)==null?void 0:e.filterPromise)??null}afterInit(){var e,t;return((t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null?void 0:t.then(()=>{}))??di.resolve()}afterGuiAttached(e){var t,i;(i=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||i.then(s=>{var n;(n=s==null?void 0:s.afterGuiAttached)==null||n.call(s,e)})}afterGuiDetached(){var e,t;(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||t.then(i=>{var s;(s=i==null?void 0:i.afterGuiDetached)==null||s.call(i)})}createFilter(e){var s,n;const{column:t,source:i}=this;this.filterWrapper=((s=this.filterManager)==null?void 0:s.getOrCreateFilterWrapper(t))??null,(n=this.filterWrapper)!=null&&n.filterPromise&&this.filterWrapper.filterPromise.then(o=>{const r=o.getGui();ge(r)||ne(`getGui method from filter returned ${r}; it should be a DOM element.`),this.appendChild(r),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(mn(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},fP="ag-resizer-wrapper",Fa=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,iW=`<div class="${fP}">
        ${Fa("eTopLeft","topLeft")}
        ${Fa("eTop","top")}
        ${Fa("eTopRight","topRight")}
        ${Fa("eRight","right")}
        ${Fa("eBottomRight","bottomRight")}
        ${Fa("eBottom","bottom")}
        ${Fa("eBottomLeft","bottomLeft")}
        ${Fa("eLeft","left")}
    </div>`,sW=class extends te{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:n,height:o,x:r,y:a}=this.config;this.offsetParent||this.setOffsetParent();let c=0,h=0;const d=$o(this.element);if(d){const p=this.findBoundaryElement(),f=window.getComputedStyle(p);if(f.minWidth!=null){const v=p.offsetWidth-this.element.offsetWidth;h=parseInt(f.minWidth,10)-v}if(f.minHeight!=null){const v=p.offsetHeight-this.element.offsetHeight;c=parseInt(f.minHeight,10)-v}}if(this.minHeight=n||c,this.minWidth=i||h,s&&this.setWidth(s),o&&this.setHeight(o),(!s||!o)&&this.refreshSize(),e)this.center();else if(r||a)this.offsetElement(r,a);else if(d&&t){let p=this.boundaryEl,f=!0;if(p||(p=this.findBoundaryElement(),f=!1),p){const v=parseFloat(p.style.top),y=parseFloat(p.style.left);f?this.offsetElement(isNaN(y)?0:y,isNaN(v)?0:v):this.setPosition(y,v)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const s=!!e[t],n=this.getResizerElement(t),o={dragStartPixels:0,eElement:n,onDragStart:r=>this.onResizeStart(r,t),onDragging:this.onResize.bind(this),onDragStop:r=>this.onResizeEnd(r,t)};(s||!this.isAlive()&&!s)&&(s?(this.dragService.addDragSource(o),this.resizeListeners.push(o),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)hg(i,e),e=qF(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?hg(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:s.top,r=e?0:n.top;let a=0;if(t){const h=this.element.parentElement;if(h){const{bottom:d}=h.getBoundingClientRect();a=d-s.bottom}}return i+r-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)go(t,e),e=nv(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;n&&e+o>n&&(e=n-o)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?go(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:o}=e,r=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,c=this.shouldSkipX(t,!!i,!!n,r)?0:r,h=this.shouldSkipY(t,!!s,o,a)?0:a;return{movementX:c,movementY:h}}shouldSkipX(e,t,i,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left;let c=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=r.right;return c?!0:(t?c=s<0&&e.clientX>a+o.left||s>0&&e.clientX<a+o.left:i?c=s<0&&e.clientX>r.right||s>0&&e.clientX<a+o.left:c=s<0&&e.clientX>r.right||s>0&&e.clientX<r.right,c)}shouldSkipY(e,t,i=0,s){const n=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top;let c=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=r.bottom;return c?!0:(t?c=s<0&&e.clientY>a+o.top+i||s>0&&e.clientY<a+o.top:c=s<0&&e.clientY>r.bottom||s>0&&e.clientY<r.bottom,c)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=new DOMParser().parseFromString(iW,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${fP}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const n=e[s],o=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let r=this.minHeight||0,a=this.minWidth||0;if(o){const c=window.getComputedStyle(n);c.minHeight&&(r=parseInt(c.minHeight,10)),c.minWidth&&(a=parseInt(c.minWidth,10))}else r=n.offsetHeight,a=n.offsetWidth;t+=r,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const n=i[s];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:n,isBottom:o,isLeft:r}=this.currentResizer,a=n||r,c=o||s,{movementX:h,movementY:d}=this.calculateMouseMovement({e,isLeft:r,isTop:s}),p=this.position.x,f=this.position.y;let v=0,y=0;if(a&&h){const b=r?-1:1,w=this.getWidth(),S=w+h*b;let M=!1;r&&(v=w-S,(p+v<=0||S<=this.minWidth)&&(M=!0,v=0)),M||this.setWidth(S)}if(c&&d){const b=s?-1:1,w=this.getHeight(),S=w+d*b;let M=!1;s?(y=w-S,(f+y<=0||S<=this.minHeight)&&(M=!0,y=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&w<S&&this.getMinSizeOfSiblings().height+S>this.element.parentElement.offsetHeight&&(M=!0),M||this.setHeight(S)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&v||y)&&this.offsetElement(p+v,f+y)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:n,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+n,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},mP=class vP extends te{constructor(t,i={}){super(),this.eFocusableElement=t,this.callbacks=i,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const n=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);n&&(n.focus(),s.preventDefault())},...i}}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(vP.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:i=>{if(!(i.defaultPrevented||Gr(i))){if(this.callbacks.shouldStopEventPropagation(i)){Ju(i);return}i.key===Z.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}}})}};mP.FOCUS_MANAGED_CLASS="ag-focus-managed";var Ic=mP,yP={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function tM(e,t){return lv(e)?(e.debounceMs!=null&&ne("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function lv(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var nW=class extends Gt{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Te,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new Ic(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new sW(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=lv(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=lv(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){const{buttons:i,readOnly:s}=t??{},{buttons:n,readOnly:o}=e;if(s===o&&Dg(i,n))return;const r=n&&n.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(mn(this.eButtonsPanel),this.buttonListeners.forEach(h=>h()),this.buttonListeners=[]):r&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!r){this.eButtonsPanel&&wc(this.eButtonsPanel);return}const a=document.createDocumentFragment(),c=h=>{let d,p;switch(h){case"apply":d=this.translate("applyFilter"),p=y=>this.onBtApply(!1,!1,y);break;case"clear":d=this.translate("clearFilter"),p=()=>this.onBtClear();break;case"reset":d=this.translate("resetFilter"),p=()=>this.onBtReset();break;case"cancel":d=this.translate("cancelFilter"),p=y=>{this.onBtCancel(y)};break;default:ne("Unknown button type specified");return}const v=Fg(`<button
                    type="${h==="apply"?"submit":"button"}"
                    data-ref="${h}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${d}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(v,{click:p})),a.append(v)};n.forEach(h=>c(h)),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=tM(this.providedFilterParams,this.getDefaultDebounceMs()),t=Ns(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:s}=this.providedFilterParams;s&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let s;(i==="Enter"||i==="Space")&&(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const i=this.isModelValid(this.getModelFromUi()),s=this.queryForHtmlElement('[data-ref="applyFilterButton"]');s&&Lg(s,!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:i,gos:s}=this;t?(i.restoreLastSize(),i.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,yP[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},oW=class extends Qx{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},rW=class extends Gt{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case Z.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}break;case Z.DOWN:case Z.UP:e.preventDefault(),this.navigate(t);break;case Z.PAGE_DOWN:case Z.PAGE_UP:case Z.PAGE_HOME:case Z.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===Z.DOWN;let i;if(!this.highlightedEl)i=this.itemEls[t?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),i=this.itemEls[n]}this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,s=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/s);let o=-1;e===Z.PAGE_HOME?o=0:e===Z.PAGE_END?o=i:e===Z.PAGE_DOWN?o=Math.min(t+n,i):e===Z.PAGE_UP&&(o=Math.max(t-n,0)),o!==-1&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:i}=e,s=i||t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{wc(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{GV(t,i+1),OV(t,e.length)})}renderOption(e,t){const i=gi(this.gos),s=i.createElement("div");Co(s,"option"),s.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const n=i.createElement("span");s.appendChild(n),n.textContent=t,this.unFocusable||(s.tabIndex=-1),this.itemEls.push(s),this.addManagedListeners(s,{mouseover:()=>this.highlightItem(s),mousedown:o=>{o.preventDefault(),o.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new yh({getTooltipValue:()=>t,getGui:()=>s,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(s)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const i=this.options.findIndex(s=>s.value===e);if(i!==-1){const s=this.options[i];this.value=s.value,this.displayValue=s.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!$o(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),sv(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:s}=t,{offsetTop:n,offsetHeight:o}=e;(n+o>i+s||n<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!$o(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),sv(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},aW=class extends lP{constructor(e){if(super(e,(e==null?void 0:e.template)||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Te,this.eWrapper=Te,this.eDisplayField=Te,this.eIcon=Te,this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:n,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!s,i!=null&&this.setPickerMaxHeight(i),n!=null&&this.setPickerMinWidth(n),o!=null&&this.setPickerMaxWidth(o)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const n=hn(i,this.gos);n&&this.eIcon.appendChild(n)}s!=null&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),iv(e,!1),this.ariaRole&&Co(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case Z.UP:case Z.DOWN:case Z.ENTER:case Z.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Z.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:n=!0}=this.config,o={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const f=AF(this.gos);this.beforeHidePicker(),f&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,s),anchorToElement:this.eWrapper};e.style.position="absolute";const r=this.popupService.addPopup(o),{maxPickerHeight:a,minPickerWidth:c,maxPickerWidth:h,variableWidth:d}=this;d?(c&&(e.style.minWidth=c),e.style.width=$x(nv(this.eWrapper)),h&&(e.style.maxWidth=h)):av(e,h??nv(this.eWrapper));const p=a??`${Kx(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",p),this.alignPickerToComponent(),r.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();iv(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return av(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},iM=class extends aW{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new rW("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),jV(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){var i;const{key:t}=e;switch(t===Z.TAB&&this.hidePicker(),t){case Z.ENTER:case Z.UP:case Z.DOWN:case Z.PAGE_UP:case Z.PAGE_DOWN:case Z.PAGE_HOME:case Z.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case Z.ESCAPE:super.onKeyDown(e);break;case Z.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;if(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},lW={selector:"AG-SELECT",component:iM},CP=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(n=>e[n]!=null)?!0:(ne(`ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(s=>s===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:ne("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else ne("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},SP=class extends nW{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:s}=t;return s??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{i===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let o;if(i){const r=e,a=t;o=this.areSimpleModelsEqual(r,a)}else{const r=e,a=t;o=r.operator===a.operator&&rl(r.conditions,a.conditions,(c,h)=>this.areSimpleModelsEqual(c,h))}return o}shouldRefresh(e){var o;const t=this.getModel(),i=t?t.conditions??[t]:null,s=((o=e.filterOptions)==null?void 0:o.map(r=>typeof r=="string"?r:r.displayKey))??this.getDefaultFilterOptions();return!(!(!i||i.every(r=>s.find(a=>a===r.type)!==void 0))||typeof e.maxNumConditions=="number"&&i&&i.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const i=e;let s=i.conditions;s==null&&(s=[],ne("Filter model is missing 'conditions'"));const n=this.validateAndUpdateConditions(s),o=this.getNumConditions();if(n<o)this.removeConditionsAndOperators(n);else if(n>o)for(let a=o;a<n;a++)this.createJoinOperatorPanel(),this.createOption();const r=i.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!r,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(r,!0)),s.forEach((a,c)=>{this.eTypes[c].setValue(a.type,!0),this.setConditionIntoUi(a,c)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),di.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),ne('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(t==null)return!0;const{operator:i}=t,s=[];if(i){const o=t;s.push(...o.conditions??[])}else s.push(t);return s[i&&i==="OR"?"some":"every"](o=>this.individualConditionPasses(e,o))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new CP,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(ne('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(ne('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(ne('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new iM);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,s=>this.resetInput(s)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,n),this.resetJoinOperatorOr(i,s,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new oW);return e.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(s.getGui()),s}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);const s=e+1,n=i-s;n>0&&this.removeConditionsAndOperators(s,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((s,n)=>{const o=this.isConditionDisabled(n,e);s.setDisabled(o||this.filterListOptions.length<=1),n===1&&(Lg(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((s,n)=>{ei(s,this.isConditionBodyVisible(n))});const i=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(s=>{s.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(s=>{s.setValue(i,!0)}),this.forEachInput((s,n,o,r)=>{this.setElementDisplayed(s,n<r),this.setElementDisabled(s,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach(n=>wc(n))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach(n=>{wc(n.getGui()),this.destroyBean(n)})}removeItems(e,t,i){return i==null?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const t=this.getInputs(0)[0];if(!t)return;t instanceof rc&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,s=!1;const n=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))t===-1&&(t=r,i=r);else{const a=r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1),c=r<t;(a||c)&&(this.removeConditionsAndOperators(r,1),s=!0,c&&i--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(i,n),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(Bx(this.filterPlaceholder)){const s=this.filterPlaceholder,n=this.eTypes[t].getValue(),o=this.translate(n);i=s({filterOptionKey:n,filterOption:o,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,i,s,n)=>{if(!(t instanceof rc))return;const o=i===0&&n>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",r=i===0&&n>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,s)),t.setInputAriaLabel(r)})}setElementValue(e,t,i){e instanceof rc&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Gt&&ei(e.getGui(),t)}setElementDisabled(e,t){e instanceof Gt&&Lg(e.getGui(),t)}attachElementOnChange(e,t){e instanceof rc&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=this.getNumberOfInputs(t),n=this.getInputs(e);for(let o=0;o<n.length;o++){const r=n[o];r!=null&&i(r,o,e,s)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),di.resolve()}resetType(e){const i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(s),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput((s,n,o)=>{o===t&&this.setElementValue(s,i[n]!=null?i[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,s)=>{this.setElementValue(t,i===0&&s===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),s=this.mapValuesFromModel(t),n=this.optionsFactory.getCustomOption(t.type),o=this.evaluateCustomFilter(n,s,i);return o??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e))}evaluateCustomFilter(e,t,i){if(e==null)return;const{predicate:s}=e;if(s!=null&&!t.some(n=>n==null))return s(t,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},bP=class extends SP{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const s=this.comparator(),n=e[0]!=null?s(e[0],t):0;switch(i.type){case"equals":return n===0;case"notEqual":return n!==0;case"greaterThan":return n>0;case"greaterThanOrEqual":return n>=0;case"lessThan":return n<0;case"lessThanOrEqual":return n<=0;case"inRange":{const o=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?n>=0&&o<=0:n>0&&o<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return ne('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},cW=65,uW=67,hW=86,dW=68,gW=90,pW=89;function wP(e){var i;return e.altKey||e.ctrlKey||e.metaKey?!1:((i=e.key)==null?void 0:i.length)===1}function Bw(e,t,i,s,n){const o=s?s.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;const r=e.addGridCommonParams({event:t,editing:n,column:s,node:i,data:i.data,colDef:s.getColDef()});return!!(o&&o(r))}function fW(e,t,i,s){const n=s.getDefinition(),o=n&&n.suppressHeaderKeyboardEvent;if(!ge(o))return!1;const r=e.addGridCommonParams({colDef:n,column:s,headerRowIndex:i,event:t});return!!o(r)}function mW(e){const{keyCode:t}=e;let i;switch(t){case cW:i=Z.A;break;case uW:i=Z.C;break;case hW:i=Z.V;break;case dW:i=Z.D;break;case gW:i=Z.Z;break;case pW:i=Z.Y;break;default:i=e.code}return i}function vW(e,t=!1){return e===Z.DELETE?!0:!t&&e===Z.BACKSPACE?tP():!1}var Lc=class extends rc{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=ge(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{wP(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{var n;const s=(n=i.clipboardData)==null?void 0:n.getData("text");s&&s.split("").some(o=>!e.test(o))&&i.preventDefault()}})}},$v={selector:"AG-INPUT-TEXT-FIELD",component:Lc},sM=class extends Lc{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const n=parseFloat(this.eInput.value),o=isNaN(n)?"":this.normalizeValue(n.toString());this.value!==o&&this.setValue(o)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:s}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(e){ni(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const s=parseFloat(e).toFixed(this.precision);return parseFloat(s).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,jn(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,jn(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,jn(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(ge(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){i=this.adjustPrecision(i);const n=this.normalizeValue(i);s=i!=n}if(s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},yW={selector:"AG-INPUT-NUMBER-FIELD",component:sM},xP=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],nM=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){const s=e,o=(s.conditions??[]).map(a=>this.getModelAsString(a)),r=s.operator==="AND"?"andCondition":"orCondition";return o.join(` ${i(r,yP[r])} `)}else{if(e.type==="blank"||e.type==="notBlank")return i(e.type,e.type);{const s=e,n=this.optionsFactory.getCustomOption(s.type),{displayKey:o,displayName:r,numberOfInputs:a}=n||{};return o&&r&&a===0?(i(o,r),r):this.conditionToString(s,n)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},MP=class extends nM{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function zw(e){const{allowedCharPattern:t}=e??{};return t??null}var CW=class extends bP{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(s))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new MP(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return xP}setElementValue(e,t,i){const s=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,s)}createValueElement(){const e=zw(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Co(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const n=this.createManagedBean(s?new Lc({allowedCharPattern:s}):new sM);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{s<o&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=Or(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},DP=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],RP=class extends nM{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function AP(e){const t=e&&e.trim();return t===""?e:t}var SW=class extends SP{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{const s=t.lastIndexOf(i);return s>=0&&s===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new RP(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(ne("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:s})=>e(t,i,s)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValuesWithSideEffects(e,!0);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,(s,n,o,r)=>{if(n<r){let a=Or(s.getValue());t&&this.textFilterParams.trimInput&&(a=AP(a)??null,s.setValue(a,!0)),i.push(a)}}),i}getDefaultFilterOptions(){return DP}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Co(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new Lc);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,s){const n=e.map(f=>this.formatter(f))||[],o=this.formatter(t),{api:r,colDef:a,column:c,context:h,textFormatter:d}=this.textFilterParams;if(i.type==="blank")return this.isBlank(t);if(i.type==="notBlank")return!this.isBlank(t);const p={api:r,colDef:a,column:c,context:h,node:s.node,data:s.data,filterOption:i.type,value:o,textFormatter:d};return n.some(f=>this.matcher({...p,filterText:f}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function EP(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}function ko(e,t=Number.MAX_VALUE){return i=>{const s=EP(i);if(!(s==null||s<e||s>t))return s}}function gg(e,t){return e.toString().padStart(t,"0")}function bW(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}function wW(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function Un(e,t=!0,i="-"){if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>gg(n,2)).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>gg(n,2)).join(":")),s}var Pb=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function pg(e,t="YYYY-MM-DD"){const i=gg(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>gg(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Pb(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Pb(e.getDate())}`,DD:()=>gg(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>n[e.getDay()],ddd:()=>n[e.getDay()].slice(0,3),dd:()=>n[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Pb(e.getDay())}`,d:()=>`${e.getDay()}`},r=new RegExp(Object.keys(o).join("|"),"g");return t.replace(r,a=>a in o?o[a]():a)}function Xs(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map(p=>parseInt(p,10));if(s.filter(p=>!isNaN(p)).length!==3)return null;const[n,o,r]=s,a=new Date(n,o-1,r);if(a.getFullYear()!==n||a.getMonth()!==o-1||a.getDate()!==r)return null;if(!i||i==="00:00:00")return a;const[c,h,d]=i.split(":").map(p=>parseInt(p,10));return c>=0&&c<24&&a.setHours(c),h>=0&&h<60&&a.setMinutes(h),d>=0&&d<60&&a.setSeconds(d),a}var TP=class{constructor(e,t,i,s,n){this.alive=!0,this.context=e,this.eParent=s,t.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(s.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),n==null||n(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){ei(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var i,s;let t=!1;(i=this.dateComp)!=null&&i.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&((s=this.dateComp)!=null&&s.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&ne("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},IP=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],LP=class extends nM{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},n=i=="inRange"||s===2,o=Xs(e.dateFrom),r=Xs(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){const c=o!==null?pg(o,a):"null",h=r!==null?pg(r,a):"null";return`${c}-${h}`}return o!=null?pg(o,a):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},JT=1e3,eI=1/0,xW=class extends bP{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=JT,this.maxValidYear=eI,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:s}=e||{};return[t&&Xs(t)||null,i&&Xs(i)||null].slice(0,this.getNumberOfInputs(s))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(i,s)=>{if(e[i]!=null)if(isNaN(e[i]))ne(`DateFilter ${i} is not a number`);else return e[i]==null?s:Number(e[i]);return s};this.minValidYear=t("minValidYear",JT),this.maxValidYear=t("maxValidYear",eI),this.minValidYear>this.maxValidYear&&ne("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Xs(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Xs(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&ne("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new LP(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new TP(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return IP}createValueElement(){const t=gi(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,i,s){const o=gi(this.gos).createElement("div");o.classList.add(`ag-filter-${s}`),o.classList.add(`ag-filter-date-${s}`),t.push(o),e.appendChild(o),i.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,s,n,o)=>{n!==e||!t||s>=o||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e);return s.length>0&&(i.dateFrom=Un(s[0])),s.length>1&&(i.dateTo=Un(s[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(s=>{s.setInputPlaceholder(t),s.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,o)=>{s<o&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},oM=class extends te{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?it(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=ge(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!gs(this.beans.gos,"print")||e.getPinned()==="left")return t;const s=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){const n=this.beans.visibleColsService.getBodyContainerWidth();return s+n+t}return s+t}setLeft(e){if(ge(e)&&(this.eCell.style.left=`${e}px`),bi(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&VV(this.ariaEl,t.length)}}},MW="ag-column-first",DW="ag-column-last";function FP(e,t,i,s){return st(e)?[]:AW(e.headerClass,e,t,i,s)}function PP(e,t,i){e.addOrRemoveCssClass(MW,i.isColAtEdge(t,"first")),e.addOrRemoveCssClass(DW,i.isColAtEdge(t,"last"))}function RW(e,t,i,s){return t.addGridCommonParams({colDef:e,column:i,columnGroup:s})}function AW(e,t,i,s,n){if(st(e))return[];let o;if(typeof e=="function"){const r=RW(t,i,s,n);o=e(r)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}var EW=0,kP=class NP extends te{constructor(t,i,s){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=s,this.beans=i,this.instanceId=t.getUniqueId()+"-"+EW++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){const t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){const{headerRowIndex:i,column:s}=this.focusService.getFocusedHeader();return fW(this.gos,t,i,s)}getWrapperHasFocus(){return ni(this.gos)===this.eGui}setGui(t,i){this.eGui=t,this.addDomData(i),i.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),i.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){const{wrapperElement:i,checkMeasuringCallback:s,compBean:n}=t,{animationFrameService:o,resizeObserverService:r,columnModel:a,gos:c}=this.beans,h=b=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:w,paddingBottom:S,borderBottomWidth:M,borderTopWidth:R}=Tc(this.getGui()),A=w+S+M+R,F=i.offsetHeight+A;if(b<5){const P=gi(c),N=!P||!P.contains(i),O=F==0;if(N||O){o.requestAnimationFrame(()=>h(b+1));return}}a.setColHeaderHeight(this.column,F)};let d=!1,p;const f=()=>{const b=this.column.isAutoHeaderHeight();b&&!d&&v(),!b&&d&&y()},v=()=>{d=!0,h(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),p=r.observeResize(i,()=>h(0))},y=()=>{d=!1,p&&p(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),p=void 0};f(),n.addDestroyFunc(()=>y()),n.addManagedListeners(this.column,{widthChanged:()=>d&&h(0)}),n.addManagedEventListeners({sortChanged:()=>{d&&window.setTimeout(()=>h(0))}}),s&&s(f)}onDisplayedColumnsChanged(){const{comp:t,column:i,beans:s,eGui:n}=this;!t||!i||!n||(PP(t,i,s.visibleColsService),$F(n,s.visibleColsService.getAriaColIndex(i)))}addResizeAndMoveKeyboardListeners(t){this.resizeFeature&&t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const t=this.focusService.isHeaderFocusSuppressed();this.eGui&&jn(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){var r;const i=ni(this.gos),s=t.key===Z.LEFT||t.key===Z.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),i!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||s)&&(t.preventDefault(),t.stopImmediatePropagation()),!s))return;const n=t.key===Z.LEFT!==this.gos.get("enableRtl"),o=gP[n?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(a,t.shiftKey),(r=this.resizeFeature)==null||r.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(t){let i=this.getResizeDiff(t);if(this.column.getPinned()){const n=this.pinnedWidthService.getPinnedLeftWidth(),o=this.pinnedWidthService.getPinnedRightWidth(),r=lp(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(n+o+i>r)if(r>n+o)i=r-n-o;else return 0}return i}getResizeDiff(t){let i=t.key===Z.LEFT!==this.gos.get("enableRtl");const s=this.column.getPinned(),n=this.gos.get("enableRtl");return s&&n!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var t;(t=this.resizeFeature)==null||t.toggleColumnResizing(!1)},150))}handleKeyDown(t){const i=this.getWrapperHasFocus();switch(t.key){case Z.PAGE_DOWN:case Z.PAGE_UP:case Z.PAGE_HOME:case Z.PAGE_END:i&&t.preventDefault()}}addDomData(t){const i=NP.DOM_DATA_KEY_HEADER_CTRL;Sc(this.gos,this.eGui,i,this),t.addDestroyFunc(()=>Sc(this.gos,this.eGui,i,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,i,s){const n=t??i;this.gos.get("preventDefaultOnContextMenu")&&n.preventDefault(),this.menuService.isHeaderContextMenuEnabled(s)&&this.menuService.showHeaderContextMenu(s,t,i),this.dispatchColumnMouseEvent("columnHeaderContextMenu",s)}dispatchColumnMouseEvent(t,i){this.eventService.dispatchEvent({type:t,column:i})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};kP.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var Zv=kP,rM=class extends te{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},TW=class extends Zv{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=rp(this,this.beans.context,n),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t,n),this.setupActive(),this.setupWidth(n),this.setupLeft(n),this.setupHover(n),this.setupFocus(n),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(n),this.setupUi(),n.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(n),n.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(n)}),n.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=hn("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Ic(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();eh(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(ni(this.gos)===this.eGui)return;const s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),s.focus();return}const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case Z.UP:case Z.DOWN:t||e.preventDefault();case Z.LEFT:case Z.RIGHT:if(t)return;e.stopPropagation();case Z.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case Z.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),s=!!e.relatedTarget&&Uu(e.relatedTarget,"ag-floating-filter");if(i&&s&&e.target===this.eGui){const o=this.lastFocusEvent,r=!!(o&&o.key===Z.TAB);if(o&&r){const a=o.shiftKey;this.focusService.focusInto(this.eGui,a)}}const n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.column)}setupHover(e){e.createManagedBean(new rM([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){const t=new oM(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.filterManager)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=s=>{if((s==null?void 0:s.source)==="filterDestroyed"&&!this.isAlive())return;const n=this.comp.getFloatingFilterComp();n&&n.then(o=>{if(o){const r=t==null?void 0:t.getCurrentFloatingFilterParentModel(this.column),a=s?{...s,columns:s.columns??[],source:s.source==="api"?"api":"columnFilter"}:null;o.onParentModelChanged(r,a)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t!=null&&t.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){var o;const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const s=this.active?(o=this.beans.filterManager)==null?void 0:o.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!s?this.updateCompDetails(e,s,i):n.then(r=>{var a;!r||(a=this.beans.filterManager)!=null&&a.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,i):this.updateFloatingFilterParams(s)})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){var i;if(!e)return;const t=e.params;(i=this.comp.getFloatingFilterComp())==null||i.then(s=>{let n=!1;s!=null&&s.refresh&&typeof s.refresh=="function"&&s.refresh(t)!==null&&(n=!0),!n&&(s!=null&&s.onParamsUpdated)&&typeof s.onParamsUpdated=="function"&&s.onParamsUpdated(t)!==null&&ne("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};var Pe="32.3.7";function IW(e){var t,i;return!!((t=e.filterManager)!=null&&t.isColumnFilterPresent())||!!((i=e.filterManager)!=null&&i.isAggregateFilterPresent())}function LW(e,t,i){var s;return(s=e.filterManager)==null?void 0:s.getFilterInstance(t,i)}function FW(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterInstance(t))??Promise.resolve(void 0)}function PW(e,t){var s;const i=e.columnModel.getColDefCol(t);if(i)return(s=e.filterManager)==null?void 0:s.destroyFilter(i,"api")}function kW(e,t){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=e.filterManager)==null?void 0:i.setFilterModel(t)})}function NW(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function OW(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterModel(t))??null}function GW(e,t,i){var s;return((s=e.filterManager)==null?void 0:s.setColumnFilterModel(t,i))??Promise.resolve()}function BW(e,t){const i=e.columnModel.getCol(t);if(!i){dt(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function zW(e,t,i){if(t==null)return null;let s=null;const{compName:n,jsComp:o,fwComp:r}=hP.getCompKeys(e,t,eM);return n?s={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:o==null&&r==null&&t.filter===!0&&(s=i()),s}var tI={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},iI=["january","february","march","april","may","june","july","august","september","october","november","december"],HW=class extends te{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((t=(e=this.gos.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)??{}}}setFilterModel(e,t="api"){var n;if((n=this.dataTypeService)!=null&&n.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const i=[],s=this.getFilterModel(!0);if(e){const o=new Set(Object.keys(e));this.allColumnFilters.forEach((r,a)=>{const c=e[a];i.push(this.setModelOnFilterWrapper(r.filterPromise,c)),o.delete(a)}),o.forEach(r=>{const a=this.columnModel.getColDefCol(r)||this.columnModel.getCol(r);if(!a){ne("setFilterModel() - no column found for colId: "+r);return}if(!a.isFilterAllowed()){ne("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+r);return}const c=this.getOrCreateFilterWrapper(a);if(!c){ne("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+r);return}i.push(this.setModelOnFilterWrapper(c.filterPromise,e[r]))})}else this.allColumnFilters.forEach(o=>{i.push(this.setModelOnFilterWrapper(o.filterPromise,null))});di.all(i).then(()=>{var a;const o=this.getFilterModel(!0),r=[];this.allColumnFilters.forEach((c,h)=>{const d=s?s[h]:null,p=o?o[h]:null;Dg(d,p)||r.push(c.column)}),r.length>0&&((a=this.filterManager)==null||a.onFilterChanged({columns:r,source:t}))})}setModelOnFilterWrapper(e,t){return new di(i=>{e.then(s=>{typeof s.setModel!="function"&&(ne("filter missing setModel method, which is needed for setFilterModel"),i()),(s.setModel(t)||di.resolve()).then(()=>i())})})}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:s}=this;return i.forEach((n,o)=>{const r=this.getModelFromFilterWrapper(n);ge(r)&&(t[o]=r)}),e||Object.entries(s).forEach(([n,o])=>{var r;ge(o)&&!i.has(n)&&((r=this.columnModel.getCol(n))!=null&&r.isFilterAllowed())&&(t[n]=o)}),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?typeof t.getModel!="function"?(ne("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=o=>o?o.isFilterActive?o.isFilterActive():(ne("Filter is missing isFilterActive() method"),!1):!1,t=!!Aw(this.gos),i=o=>{if(!o.isPrimary())return!0;const a=!this.columnModel.isPivotActive();return!o.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:t},s=[],n=[];return this.forEachColumnFilter((o,r)=>{e(o)&&(i(r.column)?s.push(o):n.push(o))}).then(()=>{this.activeAggregateFilters=s,this.activeColumnFilters=n})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((i,s)=>s.column.setFilterActive(i.isFilterActive(),e,t))}forEachColumnFilter(e){return di.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(i=>e(i,t))))}doColumnFiltersPass(e,t,i){const{data:s,aggData:n}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?n:s;for(let a=0;a<o.length;a++){const c=o[a];if(!(c==null||c===t)){if(typeof c.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!c.doesFilterPass({node:e,data:r}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>{var i;return(i=this.filterManager)==null?void 0:i.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(s=>{s.filterPromise&&s.filterPromise.then(n=>{n&&n!==t&&n.onAnyFilterChanged&&n.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{const s=i?this.columnModel.getCol(i):e;return s?this.valueService.getValue(s,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){var i;let t;if(Mb(this.gos))t="agSetColumnFilter";else{const s=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);s==="number"?t="agNumberColumnFilter":s==="date"||s==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){var i;let t;if(Mb(this.gos))t="agSetColumnFloatingFilter";else{const s=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);s==="number"?t="agNumberColumnFloatingFilter":s==="date"||s==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),s=e.getColDef();let n;const o={...this.createFilterParams(e,s),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(n,e)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(n,a):!0},r=this.userComponentFactory.getFilterDetails(s,o,i);return r?{filterPromise:()=>{const a=r.newAgStackInstance();return a!=null&&a.then(c=>{n=c,t&&(t.filter=c)}),a},compDetails:r}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:BF(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:s}=this.createFilterInstance(e,t);return t.filterPromise=(i==null?void 0:i())??null,t.compDetails=s,t}onColumnsChanged(){var i;const e=[];this.allColumnFilters.forEach((s,n)=>{let o;s.column.isPrimary()?o=this.columnModel.getColDefCol(n):o=this.columnModel.getCol(n),!(o&&o===s.column)&&(e.push(s.column),this.disposeFilterWrapper(s,"columnChanged"),this.disposeColumnListener(n))});const t=e.every(s=>s.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?(i=this.filterManager)==null||i.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();e==null||e.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:i}=this.allColumnFilters.get(e.getColId())??{};return i&&typeof(i==null?void 0:i.isFilterAllowed)=="function"?i.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){const i=c=>{var d;const h=(d=this.getOrCreateFilterWrapper(e))==null?void 0:d.filterPromise;h!=null&&h.then(p=>{c(dg(p))})},s=e.getColDef(),n={...this.createFilterParams(e,s),filterChangedCallback:()=>i(c=>this.filterChangedCallbackFactory(c,e)())},o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,eM,n);let r=zW(this.frameworkOverrides,s,()=>this.getDefaultFloatingFilter(e));r==null&&(r="agReadOnlyFloatingFilter");const a={column:e,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,a,r)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){var n;const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,t),(n=this.filterManager)==null||n.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const s=(i==null?void 0:i.source)??"columnFilter",n={filter:e,additionalEventAttributes:i,columns:[t],source:s};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s)){this.destroyFilter(i,"paramsUpdated");return}const n=i.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(i,"paramsUpdated");return}t.filterPromise.then(o=>{(o!=null&&o.refresh?o.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(o,i),filterChangedCallback:this.filterChangedCallbackFactory(o,i),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(o,a):!0,...n}):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||(i==null?void 0:i.render)&&(s==null?void 0:s.render)&&i.render===s.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(i=>{const s=dg(i);t(s)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(i=>{t(dg(i))})})}getFilterInstanceImpl(e){var s;const t=this.columnModel.getColDefCol(e);return t?((s=this.getOrCreateFilterWrapper(t))==null?void 0:s.filterPromise)??di.resolve(null):di.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){var o;if((o=this.dataTypeService)!=null&&o.isPendingInference()){let r=()=>{};const a=new Promise(c=>{r=c});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:r}),a}const i=this.columnModel.getColDefCol(e),s=i?this.getOrCreateFilterWrapper(i):null;return s?(r=>new Promise(a=>{r.then(c=>a(c))}))(this.setModelOnFilterWrapper(s.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const s=Mb(this.gos),n=this.localeService.getLocaleTextFunc(),o=r=>{const{filterParams:a}=e;e.filterParams=typeof a=="object"?{...a,...r}:r};switch(t.baseDataType){case"number":{s&&o({comparator:(r,a)=>{const c=r==null?0:parseInt(r),h=a==null?0:parseInt(a);return c===h?0:c>h?1:-1}});break}case"boolean":{o(s?{valueFormatter:r=>ge(r.value)?n(String(r.value),r.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(r,a)=>a,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(r,a)=>a===!1,numberOfInputs:0}]});break}case"date":{s&&o({valueFormatter:r=>{const a=i(r);return ge(a)?a:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(r,a)=>{if(a===1&&r!=null){const c=iI[Number(r)-1];return n(c,tI[c])}return r??n("blanks","(Blanks)")}});break}case"dateString":{const r=t.dateParser;o(s?{valueFormatter:a=>{const c=i(a);return ge(c)?c:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:a=>{const c=r(a??void 0);return c?[String(c.getFullYear()),String(c.getMonth()+1),String(c.getDate())]:null},treeListFormatter:(a,c)=>{if(c===1&&a!=null){const h=iI[Number(a)-1];return n(h,tI[h])}return a??n("blanks","(Blanks)")}}:{comparator:(a,c)=>{const h=r(c);return c==null||h<a?-1:h>a?1:0}});break}case"object":{s?o({valueFormatter:r=>{const a=i(r);return ge(a)?a:n("blanks","(Blanks)")}}):e.filterValueGetter=r=>i({column:r.column,node:r.node,value:this.valueService.getValue(r.column,r.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function VW(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function _W(e,t="api"){var i;(i=e.filterManager)==null||i.onFilterChanged({source:t})}var WW=class extends Gt{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[$v]),this.eFloatingFilterText=Te}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},OP=class extends Gt{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new CP,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}},jW=class extends OP{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[$v]),this.eReadOnlyText=Te,this.eDateWrapper=Te}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return IP}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new LP(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const i=e;this.dateComp.setDate(Xs(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){ei(this.eDateWrapper,e),ei(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=Un(e);this.params.parentFilterInstance(i=>{if(i){const s=Xs(t);i.onFloatingFilterChanged(this.getLastType()||null,s)}})}getDateComponentParams(){const e=tM(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Ns(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new TP(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},UW=class extends Gt{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[$v]),this.eDateInput=Te}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:i=>{i.target===ni(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Ur(),t.type=i?"date":"text";const{minValidYear:s,maxValidYear:n,minValidDate:o,maxValidDate:r}=e.filterParams||{};if(o&&s&&ne("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),r&&n&&ne("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&r){const[a,c]=[o,r].map(h=>h instanceof Date?h:Xs(h));a&&c&&a.getTime()>c.getTime()&&ne("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?o instanceof Date?t.min=pg(o):t.min=o:s&&(t.min=`${s}-01-01`),r?r instanceof Date?t.max=pg(r):t.max=r:n&&(t.max=`${n}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Xs(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Un(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:XV()||qx()||Ur()&&eP()>=14.1}},GP=class extends te{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=Te,this.valueChangedListener=()=>{}}setupGui(e){var s;this.eFloatingFilterTextInput=this.createManagedBean(new Lc((s=this.params)==null?void 0:s.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const i=n=>this.valueChangedListener(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},BP=class extends OP{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Te}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=lv(this.params.filterParams),!this.isReadOnly()){const i=tM(this.params.filterParams,this.getDefaultDebounceMs()),s=Ns(this.syncUpWithParentFilter.bind(this),i);this.floatingFilterInputService.setValueChangedListener(s)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();mn(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===Z.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=AP(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(s=>{s&&s.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},YW=class extends te{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new sM),this.eFloatingFilterTextInput=this.createManagedBean(new Lc),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,s=>this.valueChangedListener(s)),this.setupListeners(i,s=>this.valueChangedListener(s))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},KW=class extends BP{init(e){var t;super.init(e),this.filterModelFormatter=new MP(this.localeService,this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){zw(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return xP}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=zw(e.filterParams),this.allowedCharPattern?this.createManagedBean(new GP({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new YW)}},$W=class extends BP{init(e){super.init(e),this.filterModelFormatter=new RP(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return DP}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new GP)}};function ZW(e){var t;return!!((t=e.filterManager)!=null&&t.isQuickFilterPresent())}function qW(e){return e.gos.get("quickFilterText")}function XW(e){var t;(t=e.filterManager)==null||t.resetQuickFilterCache()}var QW=class extends te{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){var n;const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols();let s=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?(n=this.pivotResultColsService.getPivotResultCols())==null?void 0:n.list:i)??[];t&&(s=s.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?s:s.filter(o=>o.isVisible()||o.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return ge(e)?Vt(this.gos)?e.toUpperCase():(ne("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){ne(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(i=>{const s=this.getQuickFilterTextForColumn(i,e);return ge(s)&&s.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:s,matcher:n}=this;return n(s,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const n=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(n)}return ge(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach(i=>{const s=this.getQuickFilterTextForColumn(i,e);ge(s)&&t.push(s)}),t.join(`
`)}},aM={version:Pe,moduleName:"@ag-grid-community/filter-core",beans:[eW]},JW={version:Pe,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:VW,onFilterChanged:_W},dependantModules:[aM]},lM={version:Pe,moduleName:"@ag-grid-community/column-filter",beans:[HW],dependantModules:[aM]},ej={version:Pe,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:IW,getFilterInstance:LW,getColumnFilterInstance:FW,destroyFilter:PW,setFilterModel:kW,getFilterModel:NW,getColumnFilterModel:OW,setColumnFilterModel:GW,showColumnFilter:BW},dependantModules:[lM,JW]},zP={version:Pe,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:TW}],dependantModules:[lM]},tj={version:Pe,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:WW}],dependantModules:[zP]},ij={version:Pe,moduleName:"@ag-grid-community/simple-filter",dependantModules:[lM],userComponents:[{name:"agTextColumnFilter",classImp:SW},{name:"agNumberColumnFilter",classImp:CW},{name:"agDateColumnFilter",classImp:xW},{name:"agDateInput",classImp:UW}]},sj={version:Pe,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[ij,zP],userComponents:[{name:"agTextColumnFloatingFilter",classImp:$W},{name:"agNumberColumnFloatingFilter",classImp:KW},{name:"agDateColumnFloatingFilter",classImp:jW}]},HP={version:Pe,moduleName:"@ag-grid-community/quick-filter-core",beans:[QW],dependantModules:[aM]},nj={version:Pe,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:ZW,getQuickFilter:qW,resetQuickFilter:XW},dependantModules:[HP]},oj={version:Pe,moduleName:"@ag-grid-community/quick-filter",dependantModules:[HP,nj]},rj={version:Pe,moduleName:"@ag-grid-community/filter",dependantModules:[sj,tj,oj,ej]},Hw=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(Hw||{}),aj=class extends te{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});const e=gi(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){var e;return((e=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:e.getRowCount())??0}getHeaderPositionForColumn(e,t){let i;if(typeof e=="string"?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const s=this.ctrlsService.getHeaderRowContainerCtrl(),n=s==null?void 0:s.getAllCtrls(),o=it(n||[]).getType()==="filter",r=this.getHeaderRowCount()-1;let a=-1,c=i;for(;c;)a++,c=c.getParent();let h=a;return t&&o&&h===r-1&&h++,h===-1?null:{headerRowIndex:h,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s}=t,n=t.column,o=this.getHeaderRowCount(),r=e===0;let{headerRowIndex:a,column:c,headerRowIndexWithoutSpan:h}=r?this.headerPositionUtils.getColumnVisibleParent(n,s):this.headerPositionUtils.getColumnVisibleChild(n,s),d=!1;return a<0&&(a=0,c=n,d=!0),a>=o?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):h!==void 0&&(this.currentHeaderRowWithoutSpan=h),!d&&!c?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:c},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){const s=this.focusService.getFocusedHeader(),n=e===2,o=this.gos.get("enableRtl");let r,a;if(this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,n!==o?(a="Before",r=this.headerPositionUtils.findHeader(s,a)):(a="After",r=this.headerPositionUtils.findHeader(s,a)),r||!t)return this.focusService.focusHeaderPosition({headerPosition:r,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const c=this.gos.getCallback("tabToNextHeader");if(c)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:c,headerPosition:r,direction:a})}return this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(e,t,i){const s=e.headerRowIndex;let n=null,o;if(t==="Before"?s>0&&(o=s-1,this.currentHeaderRowWithoutSpan-=1,n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),n=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),!n)return!1;const{column:r,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(n.column,n==null?void 0:n.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:r,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(bi(e)){const s=e.getDisplayedLeafColumns();i=t==="Before"?it(s):s[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},lj=class extends te{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new Ic(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:s}),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){var o;const{columnModel:e}=this;let t=0;const i=this.columnModel.getGroupRowsHeight().reduce((r,a)=>r+a,0),s=this.columnModel.getColumnHeaderRowHeight();if((o=this.filterManager)!=null&&o.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=s,this.headerHeight===t)return;this.headerHeight=t;const n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.visibleColsService.getAllCols().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,s=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(s,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case Z.LEFT:t=2;case Z.RIGHT:{ge(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case Z.UP:t=0;case Z.DOWN:{ge(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(ni(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){var n;if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=e??t;(s===this.eGui||s===((n=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:n.getViewportElement()))&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!al())return;const t=new Ka(this.eGui),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}},cM=class extends te{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=gs(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),s=this.visibleColsService.getDisplayedColumnsRightWidth();let n;e?n=t+i+s:(n=t,this.addSpacer&&(this.gos.get("enableRtl")?i:s)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.scrollVisibleService.getScrollbarWidth())),this.callback(n)}},cj=class extends te{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function VP(e){const{isFromHeader:t,fromLeft:i,xPosition:s,fromEnter:n,fakeEvent:o,pinned:r,gos:a,columnModel:c,columnMoveService:h,visibleColsService:d}=e;let{allMovingColumns:p}=e;if(t){const T=[];p.forEach(F=>{var O;let P=null,N=F.getParent();for(;N!=null&&N.getDisplayedLeafColumns().length===1;)P=N,N=N.getParent();P!=null?(!!((O=P.getColGroupDef())!=null&&O.marryChildren)?P.getProvidedColumnGroup().getLeafColumns():P.getLeafColumns()).forEach(U=>{T.includes(U)||T.push(U)}):T.includes(F)||T.push(F)}),p=T}const f=p.slice();c.sortColsLikeCols(f);const v=gj({movingCols:f,draggingRight:i,xPosition:s,pinned:r,gos:a,columnModel:c,visibleColsService:d}),y=uj(f,c);if(v.length===0)return;const b=v[0];let w=y!==null&&!n;if(t&&(w=y!==null),w&&!o&&(!i&&b>=y||i&&b<=y))return;const S=d.getAllCols(),M=[];let R=null;for(let T=0;T<v.length;T++){const F=v[T],P=h.getProposedColumnOrder(f,F);if(!h.doesOrderPassRules(P))continue;const N=P.filter(B=>S.includes(B));if(R===null)R=N;else if(!rl(N,R))break;const O=hj(P);M.push({move:F,fragCount:O})}if(M.length===0)return;M.sort((T,F)=>T.fragCount-F.fragCount);const A=M[0].move;if(!(A>c.getCols().length-p.length))return{columns:p,toIndex:A}}function uM(e){const{columns:t,toIndex:i}=VP(e)||{},{finished:s,columnMoveService:n}=e;return!t||i==null?null:(n.moveColumns(t,i,"uiColumnMoved",s),s?null:{columns:t,toIndex:i})}function uj(e,t){const i=t.getCols(),s=J2(e.map(c=>i.indexOf(c))),n=s[0];return it(s)-n!==s.length-1?null:n}function hj(e){function t(s){const n=[];let o=s.getOriginalParent();for(;o!=null;)n.push(o),o=o.getOriginalParent();return n}let i=0;for(let s=0;s<e.length-1;s++){let n=t(e[s]),o=t(e[s+1]);[n,o]=n.length>o.length?[n,o]:[o,n],n.forEach(r=>{o.indexOf(r)===-1&&i++})}return i}function dj(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function gj(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:n,gos:o,columnModel:r,visibleColsService:a}=e;if(o.get("suppressMovableColumns")||t.some(R=>R.getColDef().suppressMovable))return[];const h=dj(a,n),d=r.getCols(),p=h.filter(R=>dc(t,R)),f=h.filter(R=>!dc(t,R)),v=d.filter(R=>!dc(t,R));let y=0,b=s;if(i){let R=0;p.forEach(A=>R+=A.getActualWidth()),b-=R}if(b>0){for(let R=0;R<f.length;R++){const A=f[R];if(b-=A.getActualWidth(),b<0)break;y++}i&&y++}let w;if(y>0){const R=f[y-1];w=v.indexOf(R)+1}else w=v.indexOf(f[0]),w===-1&&(w=0);const S=[w],M=(R,A)=>R-A;if(i){let R=w+1;const A=d.length-1;for(;R<=A;)S.push(R),R++;S.sort(M)}else{let R=w;const A=d.length-1;let T=d[R];for(;R<=A&&h.indexOf(T)<0;)R++,S.push(R),T=d[R];R=w-1;const F=0;for(;R>=F;)S.push(R),R--;S.sort(M).reverse()}return S}function cv(e){var h;const{pinned:t,fromKeyboard:i,gos:s,ctrlsService:n,useHeaderRow:o,skipScrollPadding:r}=e;let a=(h=n.getHeaderRowContainerCtrl(t))==null?void 0:h.getViewportElement(),{x:c}=e;return a?(i&&(c-=a.getBoundingClientRect().left),s.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),c=a.clientWidth-c),t==null&&!r&&(c+=n.get("center").getCenterViewportScrollLeft()),c):0}function Yu(e,t){for(const i of e)i.setMoving(t,"uiColumnMoved")}var sI=7,Vw=100,dm=Vw/2,pj=5,fj=100,mj=class extends te{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!ge(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){var t;const e=((t=this.lastDraggingEvent)==null?void 0:t.dragItem.columns)??[];for(const i of e){const s=i.getPinned();if(i.getColDef().lockPinned){if(s==this.pinned)return"move";continue}if(s===this.pinned||!this.pinned)return"move";if(!s&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const s=e.dragItem.visibleState,n=(t||[]).filter(o=>s[o.getId()]);this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,s=!1){const n=this.gos.get("suppressMoveWhenColumnDragging");if(s&&!n){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!s&&st(e.hDirection))return;const{pinned:o,gos:r,ctrlsService:a}=this,c=cv({x:e.x,pinned:o,gos:r,ctrlsService:a});t||this.checkCenterForScrolling(c),n?this.handleColumnDragWhileSuppressingMovement(e,t,i,c,s):this.handleColumnDragWhileAllowingMovement(e,t,i,c,s)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const s=e.filter(n=>!n.getColDef().lockVisible);this.columnModel.setColsVisible(s,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e,!0);if(n){const r=this.isAttemptingToPin(o);r&&this.attemptToPinColumns(o,void 0,!0);const{fromLeft:a,xPosition:c}=this.getNormalisedXPositionInfo(o,r)||{};if(a==null||c==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:c,fromEnter:t,fakeEvent:i,fromLeft:a})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,s)}}handleColumnDragWhileAllowingMovement(e,t,i,s,n){const o=this.getAllMovingColumns(e),r=this.normaliseDirection(e.hDirection)===1,a=e.dragSource.type===1,c=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:s,fromLeft:r,fromEnter:t,fakeEvent:i}),h=uM({...c,finished:n});h&&(this.lastMovedInfo=h)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let s=null;t?(s=i.columnsInSplit,s||(s=i.columns)):s=i.columns;const n=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return s?s.filter(n):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:s,fromLeft:n,fromEnter:o,fakeEvent:r}=e,{pinned:a,gos:c,columnModel:h,columnMoveService:d,visibleColsService:p}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:n,xPosition:s,pinned:a,fromEnter:o,fakeEvent:r,gos:c,columnModel:h,columnMoveService:d,visibleColsService:p}}findFirstAndLastMovingColumns(e){const t=e.length;let i,s;for(let n=0;n<=t;n++){if(!i){const o=e[n];o.getLeft()!=null&&(i=o)}if(!s){const o=e[t-1-n];o.getLeft()!=null&&(s=o)}if(i&&s)break}return{firstMovingCol:i,lastMovingCol:s}}highlightHoveredColumn(e,t){var d;const{gos:i,columnModel:s}=this,n=i.get("enableRtl"),o=s.getCols().filter(p=>p.isVisible()&&p.getPinned()===this.pinned);let r=null,a=null,c=null;for(const p of o){if(a=p.getActualWidth(),r=this.getNormalisedColumnLeft(p,0,n),r!=null){const f=r+a;if(r<=t&&f>=t){c=p;break}}r=null,a=null}if(c)e.indexOf(c)!==-1&&(c=null);else{for(let p=o.length-1;p>=0;p--){const f=o[p],v=o[p].getParent();if(!v){c=f;break}const y=v==null?void 0:v.getDisplayedLeafColumns();if(y.length){c=it(y);break}}if(!c)return;r=this.getNormalisedColumnLeft(c,0,n),a=c.getActualWidth()}if(((d=this.lastHighlightedColumn)==null?void 0:d.column)!==c&&this.clearHighlighted(),c==null||r==null||a==null)return;let h;t-r<a/2!==n?h=0:h=1,c.setHighlighted(h),this.lastHighlightedColumn={column:c,position:h}}getNormalisedXPositionInfo(e,t){const{gos:i,visibleColsService:s}=this,n=i.get("enableRtl"),{firstMovingCol:o,column:r,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!o||!r||a==null)return;const c=s.getAllCols(),h=c.indexOf(o),d=c.indexOf(r),p=a===0!==n,f=h<d||h===d&&!p;let v=0;if(p?f&&(v-=1):f||(v+=1),d+v===h)return;const y=c[d+v];if(!y)return;const b=this.getNormalisedColumnLeft(y,20,n);return{fromLeft:f,xPosition:b}}getColumnMoveAndTargetInfo(e,t,i){const s=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:o}=this.findFirstAndLastMovingColumns(e);if(!n||!o||s.column||!t)return{firstMovingCol:n,...s};const a=this.getPinDirection()==="left";return{firstMovingCol:n,position:a?1:0,column:a!==i?n:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){const{gos:s,ctrlsService:n}=this,o=e.getLeft();if(o==null)return null;const r=e.getActualWidth();return cv({x:i?o+r-t:o+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:s,ctrlsService:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>sI;return t&&i||e.some(s=>s.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:s,fakeEvent:n,fromLeft:o}=e,r=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:o,fromEnter:s,fakeEvent:n}),{columns:a,toIndex:c}=VP(r)||{};a&&c!=null&&(this.lastMovedInfo={columns:a,toIndex:c}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),s=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+dm,this.needToMoveLeft=e>s-dm):(this.needToMoveLeft=e<i+dm,this.needToMoveRight=e>s-dm),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var e;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),fj),(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var e;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.getIconName()))}moveInterval(){var s,n;let e;this.intervalCount++,e=10+this.intervalCount*pj,e>Vw&&(e=Vw);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=sI+1)return;if((s=this.dragAndDropService.getDragAndDropImageComponent())==null||s.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const o=(n=this.lastDraggingEvent)==null?void 0:n.dragItem.columns;this.attemptToPinColumns(o,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){const s=(e||[]).filter(n=>!n.getColDef().lockPinned);return s.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(s,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),s.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},vj=class extends te{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new mj(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new cj(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},yj=class extends te{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=n}postConstruct(){const e=[];let t,i;const s=()=>{if(ei(this.eResize,t),!t)return;const r=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(r),i){const a=this.gos.get("skipHeaderOnAutoSize"),c=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",c);const h=new Ka(this.eResize);h.addEventListener("doubleTap",c),e.push(()=>{this.eResize.removeEventListener("dblclick",c),h.removeEventListener("doubleTap",c),h.destroy()})}},n=()=>{e.forEach(r=>r()),e.length=0},o=()=>{const r=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(r!==t||a!==i)&&(t=r,i=a,n(),s())};o(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:n}=this,o=this.normaliseResizeAmount(t),r=n+o,a=[{key:i,newWidth:r}];if(this.column.getPinned()){const c=this.pinnedWidthService.getPinnedLeftWidth(),h=this.pinnedWidthService.getPinnedRightWidth(),d=lp(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(c+h+(o-s)>d)return}this.lastResizeAmount=o,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",s=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}},Cj=class extends te{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(ni(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new Qx),this.cbSelectAll.addCssClass("ag-header-select-all"),Co(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),s=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${s} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return FF(this.gos)?!0:(ne(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return Vt(this.gos)||nr(this.gos)?!0:(ne(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":t&&(s="uiSelectAllFiltered");const n={source:s,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}isCheckboxSelection(){const e=this.gos.get("rowSelection"),t=typeof e=="object"&&Jm(e)&&op(this.column),i=this.column.getColDef().headerCheckboxSelection;let s=!1;return t?s=!0:typeof i=="function"?s=i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):s=!!i,s&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},Sj=class extends Zv{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=rp(this,this.beans.context,n),this.setGui(t,n),this.updateState(),this.setupWidth(n),this.setupMovingCss(n),this.setupMenuClass(n),this.setupSortableClass(n),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:s,checkMeasuringCallback:r=>this.setRefreshFunction("measuring",r),compBean:n}),this.addColumnHoverListener(n),this.setupFilterClass(n),this.setupClassesFromColDef(),this.setupTooltip(n),this.addActiveHeaderMouseListeners(n),this.setupSelectAll(n),this.setupUserComp(n),this.refreshAria(),this.resizeFeature=n.createManagedBean(new yj(this.getPinned(),this.column,i,e,this)),n.createManagedBean(new rM([this.column],t)),n.createManagedBean(new oM(this.column,t,this.beans)),n.createManagedBean(new Ic(t,{shouldStopEventPropagation:r=>this.shouldStopEventPropagation(r),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(n),n.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(n)),n.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(n)}),n.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const o=()=>this.checkDisplayName(n);n.addManagedEventListeners({columnValueChanged:o,columnRowGroupChanged:o,columnPivotChanged:o,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),n.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=this.column.getMinWidth(),n=this.column.getMaxWidth(),o=Math.min(Math.max(i+e,s),n);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:o}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,beans:i,column:s,ctrlsService:n}=this,{gos:o,columnModel:r,columnMoveService:a,visibleColsService:c}=i,h=this.getPinned(),d=t.getBoundingClientRect().left,p=s.getActualWidth(),f=o.get("enableRtl"),y=cv({x:e===0!==f?d-20:d+p+20,pinned:h,fromKeyboard:!0,gos:o,ctrlsService:n}),b=this.focusService.getFocusedHeader();uM({allMovingColumns:[s],isFromHeader:!0,fromLeft:e===1,xPosition:y,pinned:h,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:r,columnMoveService:a,visibleColsService:c,finished:!0}),n.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&b&&this.restoreFocus(b)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:i=>{this.menuService.showColumnMenu({column:this.column,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:i=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:i,positionBy:"mouse"})},showFilter:i=>{this.menuService.showFilterMenu({column:this.column,buttonElement:i,containerType:"columnFilter",positionBy:"button"})},progressSort:i=>{this.beans.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,s)=>{this.beans.sortController.setSortForColumn(this.column,i,!!s,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(i,s)=>{this.setupTooltip(e,i,s)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new Cj(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===Z.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===Z.ENTER&&this.onEnterKeyDown(e),e.key===Z.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();!i||!(i instanceof Ow)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.gos.get("tooltipShowMode")==="whenTruncated",n=this.eGui,o=this.column.getColDef();!i&&s&&!o.headerComponent&&(i=()=>{const c=n.querySelector(".ag-header-cell-text");return c?c.scrollWidth>c.clientWidth:!0});const r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>n,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:i},a=e.createManagedBean(new yh(r));this.setRefreshFunction("tooltip",()=>a.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=FP(t,this.gos,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(n=>{s.has(n)?s.delete(n):this.comp.addOrRemoveCssClass(n,!0)}),s.forEach(n=>this.comp.addOrRemoveCssClass(n,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:s,dragAndDropService:n,gos:o}=this,{columnModel:r}=i;let a=!this.gos.get("suppressDragLeaveHidesColumns");const c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:s,onDragStarted:()=>{a=!o.get("suppressDragLeaveHidesColumns"),Yu([t],!0)},onDragStopped:()=>Yu([t],!1),onDragCancelled:()=>Yu([t],!1),onGridEnter:h=>{var d;if(a){const p=((d=h==null?void 0:h.columns)==null?void 0:d.filter(f=>!f.getColDef().lockVisible))||[];r.setColsVisible(p,!0,"uiColumnMoved")}},onGridExit:h=>{var d;if(a){const p=((d=h==null?void 0:h.columns)==null?void 0:d.filter(f=>!f.getColDef().lockVisible))||[];r.setColsVisible(p,!1,"uiColumnMoved")}}};n.addDragSource(c,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){const t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const i=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:s}=this,n=this.beans.columnModel.getGroupRowsHeight(),o=n.reduce((p,f)=>p+=f,0)===0;if(i.addOrRemoveCssClass("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:r,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",r>0);const{columnModel:c}=s,h=c.getColumnHeaderRowHeight();if(r===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${h}px`);return}i.addOrRemoveCssClass("ag-header-span-total",a);let d=0;for(let p=0;p<r;p++)d+=n[n.length-1-p];e.style.setProperty("top",`${-d}px`),e.style.setProperty("height",`${h+d}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(LV(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(ni(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),s=n=>this.handleContextMenuMouseEvent(n,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:s})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof Ow?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},bj=class extends te{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(n=>{n.getColDef().suppressAutoSize||i.push(n.getColId())}),i.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const s=this.normaliseDragChange(t),n=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s=this.getSizeRatiosOfColumns(t,i),n={columnsToResize:t,resizeStartWidth:i,resizeRatios:s};let o=null;if(e&&(o=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),o){const r=o.getDisplayedLeafColumns(),a=n.groupAfterColumns=r.filter(h=>h.isResizable()),c=n.groupAfterStartWidth=this.getInitialSizeOfColumns(a);n.groupAfterRatios=this.getSizeRatiosOfColumns(a,c)}else n.groupAfterColumns=void 0,n.groupAfterStartWidth=void 0,n.groupAfterRatios=void 0;return n}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:n,groupAfterStartWidth:o,groupAfterRatios:r}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=r}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(s,e,t,i)}resizeColumns(e,t,i,s=!0){const{columnsToResize:n,resizeStartWidth:o,resizeRatios:r,groupAfterColumns:a,groupAfterStartWidth:c,groupAfterRatios:h}=e,d=[];if(d.push({columns:n,ratios:r,width:t}),a){const p=t-o;d.push({columns:a,ratios:h,width:c-p})}this.columnSizeService.resizeColumnSets({resizeSets:d,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},wj=class extends te{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},xj=class extends Zv{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const s=this.getGui();this.setDragSource(s)}},this.column=e}setComp(e,t,i,s,n){this.comp=e,n=rp(this,this.beans.context,n),this.setGui(t,n),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(n),this.setupAutoHeight({wrapperElement:s,compBean:n}),this.setupUserComp(n),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const o=this.getParentRowCtrl().getPinned(),r=this.column.getProvidedColumnGroup().getLeafColumns();n.createManagedBean(new rM(r,t)),n.createManagedBean(new oM(this.column,t,this.beans)),n.createManagedBean(new wj(e,this.column)),this.resizeFeature=n.createManagedBean(new bj(e,i,o,this.column)),n.createManagedBean(new Ic(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,r),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,s=it(t)===e;if(!i&&!s)return;const n=e.getHighlighted(),o=!!this.getParentRowCtrl().findHeaderCellCtrl(c=>c.getColumnGroupChild().isMoving());let r=!1,a=!1;if(o){const c=this.beans.gos.get("enableRtl"),h=n===1,d=n===0;i&&(c?a=h:r=d),s&&(c?r=d:a=h)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",r),this.comp.addOrRemoveCssClass("ag-header-highlight-after",a)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:s,ctrlsService:n}=this,{gos:o,columnModel:r,columnMoveService:a,visibleColsService:c}=t,h=o.get("enableRtl"),d=e===0,p=this.getPinned(),f=i.getBoundingClientRect(),v=f.left,y=f.width,b=cv({x:d!==h?v-20:v+y+20,pinned:p,fromKeyboard:!0,gos:o,ctrlsService:n}),w=s.getGroupId(),S=this.focusService.getFocusedHeader();uM({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:b,pinned:p,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:r,columnMoveService:a,visibleColsService:c,finished:!0});const M=s.getDisplayedLeafColumns(),R=d?M[0]:it(M);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(R,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&S&&this.restoreFocus(w,s,S)}restoreFocus(e,t,i){const s=t.getLeafColumns();if(!s.length)return;const n=s[0].getParent();if(!n)return;const o=this.findGroupWidthId(n,e);o&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:o}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:s=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),s,"gridInitializing")},setTooltip:(s,n)=>{this.setupTooltip(e,s,n)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),s=n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:s})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.column.getColGroupDef(),n=this.gos.get("tooltipShowMode")==="whenTruncated",o=this.eGui;!i&&n&&!(s!=null&&s.headerGroupComponent)&&(i=()=>{const a=o.querySelector(".ag-header-group-text");return a?a.scrollWidth>a.clientWidth:!0});const r={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(s&&s.headerTooltip),shouldDisplayTooltip:i};s&&(r.getColDef=()=>s),e.createManagedBean(new yh(r))}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=FP(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e!=null&&e.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(e){const i=this.column.getProvidedColumnGroup().getLeafColumns(),s=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());i.forEach(n=>{e.addManagedListeners(n,{movingChanged:s})}),s()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===Z.ENTER){const i=this.column,s=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:i,displayName:s,gos:n,dragAndDropService:o}=this,{columnModel:r}=t,a=i.getProvidedColumnGroup().getLeafColumns();let c=!n.get("suppressDragLeaveHidesColumns");const h=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>c?"hide":"notAllowed",dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{c=!n.get("suppressDragLeaveHidesColumns"),Yu(a,!0)},onDragStopped:()=>Yu(a,!1),onDragCancelled:()=>Yu(a,!1),onGridEnter:d=>{if(c){const{columns:p=[],visibleState:f}=d??{},v=p.filter(y=>!y.getColDef().lockVisible&&(!f||f[y.getColId()]));r.setColsVisible(v,!0,"uiColumnMoved")}},onGridExit:d=>{var p;if(c){const f=((p=d==null?void 0:d.columns)==null?void 0:p.filter(v=>!v.getColDef().lockVisible))||[];r.setColsVisible(f,!1,"uiColumnMoved")}}};o.addDragSource(h,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(r=>i[r.getId()]=r.isVisible());const s=[];this.beans.visibleColsService.getAllCols().forEach(r=>{t.indexOf(r)>=0&&(s.push(r),Os(t,r))}),t.forEach(r=>s.push(r));const n=[],o=e.getLeafColumns();for(const r of s)o.indexOf(r)!==-1&&n.push(r);return{columns:s,columnsInSplit:n,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},Mj=0,kb=class extends te{constructor(e,t,i){super(),this.instanceId=Mj++,this.rowIndex=e,this.pinned=t,this.type=i;const s=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=gs(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,i=!0){this.comp=e,t=rp(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return km(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=gs(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans,i=[],s=e.getGroupRowsHeight(),n=e.getColumnHeaderRowHeight();i.push(...s),i.push(n),t!=null&&t.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let o=0;for(let a=0;a<this.rowIndex;a++)o+=i[a];const r=i[this.rowIndex];return{topOffset:o,rowHeight:r}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,e);const i=s=>{const{focusService:n,visibleColsService:o}=this.beans;return n.isHeaderWrapperFocused(s)?o.isVisible(s.getColumnGroupChild()):!1};if(e)for(const[s,n]of e)i(n)?this.headerCellCtrls.set(s,n):this.destroyBean(n);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var e;return Array.from(((e=this.headerCellCtrls)==null?void 0:e.values())??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const i=e.getUniqueId();let s;if(t&&(s=t.get(i),t.delete(i)),s&&s.getColumnGroupChild()!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":{s=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":s=this.createBean(new xj(e,this.beans,this));break;default:s=this.createBean(new Sj(e,this.beans,this));break}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach(s=>{const n=i.getHeadersToRender(s,t);e=e.concat(n)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return typeof e=="function"?i=t.find(e):i=t.find(s=>s.getColumnGroupChild()==e),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);return i?i.focus(t):!1}destroy(){var e;(e=this.headerCellCtrls)==null||e.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}},Dj=class extends te{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});const s=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(s,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const t=new th,i=this.focusService.getFocusHeaderToUseAfterRefresh(),s=()=>{const a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let c=0;c<a;c++){const h=this.createBean(new kb(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(h)}},n=()=>{const a=t.next(),c=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(c||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),c&&(this.columnsRowCtrl=this.createBean(new kb(a,this.pinned,"column")))},o=()=>{var h;this.includeFloatingFilter=!!((h=this.filterManager)!=null&&h.hasFloatingFilters())&&!this.hidden;const a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}const c=t.next();if(this.filtersRowCtrl){const d=this.filtersRowCtrl.getRowIndex()!==c;(!e||d)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new kb(c,this.pinned,"filter")))};s(),n(),o();const r=this.getAllCtrls();this.comp.setCtrls(r),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){var t;if(Ja(e))return(t=this.columnsRowCtrl)==null?void 0:t.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const s=this.groupsRowCtrls[i].getHeaderCellCtrl(e);if(s)return s}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,i):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new vj(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){var t;const e=((t=this.filterManager)==null?void 0:t.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new cM(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const i=()=>{const s=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(s==null)return;const n=s==0,o=this.hidden!==n,r=this.gos.get("enableRtl"),a=this.scrollVisibleService.getScrollbarWidth(),h=this.scrollVisibleService.isVerticalScrollShowing()&&(r&&e||!r&&t)?s+a:s;this.comp.setPinnedContainerWidth(`${h}px`),this.comp.setDisplayed(!n),o&&(this.hidden=n,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},hM=class extends te{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(ne(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},Rj=class extends Gt{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=Te,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==Z.TAB||e.defaultPrevented||Gr(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=this.focusService.focusGridView(it(this.visibleColsService.getAllCols()),!0,!1):i=this.focusService.focusNextGridCoreContainer(!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new hM(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,s){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){const n=ni(this.gos);n&&!AF(this.gos)&&(this.elToFocusAfter=n)}e.then(n=>{if(this.activePromise!==e){this.activeOverlay!==n&&(this.destroyBean(n),n=null);return}if(this.activePromise=null,!n)return;if(this.activeOverlay!==n&&(this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,s)){const r=n;this.updateListenerDestroyFunc=this.addManagedPropertyListener(s,({currentValue:a})=>{var c;(c=r.refresh)==null||c.call(r,this.gos.addGridCommonParams({...a??{}}))})}const o=this.focusService;i&&o.isGridFocused()&&o.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var s;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),mn(this.eOverlayWrapper),(s=t==null?void 0:t.focus)==null||s.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},_P=class extends Gt{constructor(e,t){super(),this.direction=t,this.eViewport=Te,this.eContainer=Te,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",tP()||al())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=sP(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){const t=this.getViewportElement();V2(()=>$o(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},Aj=class extends _P{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=Te,this.eRightSpacer=Te}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new cM(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.scrollVisibleService.getScrollbarWidth();i&&(t+=s),go(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let n=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(n+=s),go(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=s)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),s=e&&this.scrollVisibleService.getScrollbarWidth()||0,o=i?0:s===0&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),hg(this.getGui(),o),hg(this.eViewport,o),hg(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return ov(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){$o(this.getViewportElement())||this.attemptSettingScrollPosition(e),rv(this.getViewportElement(),e,this.enableRtl)}},WP=class extends te{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},Ej=class extends _P{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new WP(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,s=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),go(this.getGui(),s),go(this.eViewport,s),go(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,i=e.getGridBodyCtrl().getBodyViewportElement(),s=this.getScrollPosition(),n=i.scrollTop;s!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!$o(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},_w=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(_w||{}),Tj=class extends te{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Ns(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Ns(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(_w)){const t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Ns(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),s=t?Ns(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,s)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Object.values(_w),"Viewport"]){if(this.lastScrollSource[1]===t)continue;const i=this.getViewportForSource(t);rv(i,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const s=ov(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(s),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent({...t,type:"bodyScrollEnd"})},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!al()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=Kx(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const s=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:s:e=Math.min(Math.max(e,0),s)),rv(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let s=-1;for(let n=0;n<i;n++){const o=this.rowModel.getRow(n);if(typeof e=="function"){if(o&&e(o)){s=n;break}}else if(e===o||e===o.data){s=n;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(gs(this.gos,"print"))return;const i=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=i){ne("Invalid row index for ensureIndexVisible: "+e);return}const n=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{var d;n||(d=this.paginationService)==null||d.goToPageWithIndex(e);const o=this.ctrlsService.getGridBodyCtrl(),r=o.getStickyTopHeight(),a=o.getStickyBottomHeight(),c=this.rowModel.getRow(e);let h;do{const p=c.rowTop,f=c.rowHeight,v=this.pageBoundsService.getPixelOffset(),y=c.rowTop-v,b=y+c.rowHeight,w=this.getVScrollPosition(),S=this.heightScaler.getDivStretchOffset(),M=w.top+S,R=w.bottom+S,A=R-M,T=this.heightScaler.getScrollPositionForPixel(y),F=this.heightScaler.getScrollPositionForPixel(b-A),P=Math.min((T+F)/2,y),N=M+r>y,O=R-a<b;let B=null;t==="top"?B=T:t==="bottom"?B=F:t==="middle"?B=P:N?B=T-r:O&&(B=F+a),B!==null&&(this.setVerticalScrollPosition(B),this.rowRenderer.redraw({afterScroll:!0})),h=p!==c.rowTop||f!==c.rowHeight}while(h);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getCol(e);if(!i||i.isPinned()||!this.visibleColsService.isColDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{s!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let a=(r?i:s)||n,c=r?s:i;t!=="auto"&&(a=t==="start",c=t==="end");const h=t==="middle";if(a||c||h){const{colLeft:d,colMiddle:p,colRight:f}=this.getColumnBounds(e);return h?p-o/2:a?r?f:d:r?d-o:f-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:n}=this.getColumnBounds(e),o=this.enableRtl,r=o?t>n:i<n,a=o?i<s:t>s;return{columnBeforeStart:r,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),s=e.getActualWidth(),n=e.getLeft(),o=t?-1:1,r=t?i-n:n,a=r+s*o,c=r+s/2*o;return{colLeft:r,colMiddle:c,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,s=e+t;return{start:i,end:s,width:e}}},Ij=class extends te{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=lp(e);if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50);const s=this.gos.getCallback("processUnpinnedColumns");i.length&&(s&&(i=s({columns:i,viewportWidth:t})),this.columnModel.setColsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),s=t+i;if(s<e)return[];const n=[...this.visibleColsService.getLeftCols()],o=[...this.visibleColsService.getRightCols()];let r=0,a=0;const c=0,h=[];let d=s-c-e;for(;(a<n.length||r<o.length)&&d>0;){if(r<o.length){const p=o[r++];d-=p.getActualWidth(),h.push(p)}if(a<n.length&&d>0){const p=n[a++];d-=p.getActualWidth(),h.push(p)}}return h}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=Kx(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},Lj=class extends te{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Wr(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),Wr(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},Fj=class extends Gt{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Jx]),this.eCheckbox=Te}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=Ux(e,t),[s,n]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=e(s,n);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${o} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:s=>Ju(s),click:s=>{Ju(s);const n=Hx(this.gos)==="filteredDescendants",o=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(o,n)?this.onClicked(!0,n,s||{})===0&&this.onClicked(!1,n,s):o?this.onClicked(!1,n,s):this.onClicked(!0,n,s||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),zx(this.gos)||typeof this.getIsVisible()=="function"){const s=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:s}),this.addManagedListeners(this.rowNode,{dataChanged:s,cellChanged:s}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&Vt(this.gos)}showOrHideSelect(){var n,o,r;let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if(typeof t=="function"){const a=(n=this.overrides)==null?void 0:n.callbackParams;if(!this.column)e=t({...a,node:this.rowNode,data:this.rowNode.data});else{const c=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...a,...c})}}else e=t??!1;const i=this.gos.get("rowSelection");if(i&&typeof i!="string"?!Y2(i):(o=this.column)==null?void 0:o.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if((r=this.overrides)!=null&&r.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){var t,i;if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&typeof e!="string"?Qu(e):(i=(t=this.column)==null?void 0:t.getColDef())==null?void 0:i.checkboxSelection}},Pj=class extends Gt{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(hn("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const s=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",s),e.dataTransfer.setData("text/plain",s)}catch{}};if(t){const s=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(s)}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},kj=class extends te{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,s=>this.cellComp.addOrRemoveCssClass(s,!0),s=>this.cellComp.addOrRemoveCssClass(s,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),s=e.cellStyle;t=s(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},Nj=class extends te{constructor(e,t,i,s,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case Z.ENTER:this.onEnterKeyDown(e);break;case Z.F2:this.onF2KeyDown(e);break;case Z.ESCAPE:this.onEscapeKeyDown(e);break;case Z.TAB:this.onTabKeyDown(e);break;case Z.BACKSPACE:case Z.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case Z.DOWN:case Z.UP:case Z.RIGHT:case Z.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:n}=this,{gos:o,rangeService:r,eventService:a}=s;if(!i.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),vW(e,o.get("enableCellEditingOnBackspace"))){if(r&&Wr(o))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const c=i.getColumn(),h=this.beans.valueService.getDeleteValue(c,n);n.setDataValue(c,h,"cellClear")}}else i.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?Z.UP:Z.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(Z.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(Z.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const s=e.key;s===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(s,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&Xm(t)){const i=this.rowNode.isSelected(),s=!i,n=Hx(t)==="filteredDescendants",o=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});i===void 0&&o===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},Oj=class extends te{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!Gr(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:i,gos:s}=this.beans,n=e.ctrlKey||e.metaKey;i&&n&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const o=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(o);const r=this.column.getColDef();r.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{r.onCellClicked(o)})},0),(s.get("singleClickEdit")||r.singleClickEdit)&&!s.get("suppressClickEdit")&&!(e.shiftKey&&(i==null?void 0:i.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!al()||OF("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:s}=this,{eventService:n,frameworkOverrides:o,gos:r}=i,a=t.getColDef(),c=s.createEvent(e,"cellDoubleClicked");n.dispatchEvent(c),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{a.onCellDoubleClicked(c)})},0),!r.get("singleClickEdit")&&!r.get("suppressClickEdit")&&s.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=e.target,{cellCtrl:o,beans:r}=this,{eventService:a,rangeService:c,focusService:h,gos:d}=r;if(this.isRightClickInExistingRange(e))return;const p=c&&c.getCellRanges().length!=0;if(!s||!p){const v=d.get("enableCellTextSelection")&&e.defaultPrevented,y=(Ur()||v)&&!o.isEditing()&&!Yx(n);o.focusCell(y)}if(s&&p&&!h.isCellFocused(o.getCellPosition())){e.preventDefault();const f=h.getFocusedCell();if(f){const{column:v,rowIndex:y,rowPinned:b}=f,w=r.rowRenderer.getRowByPosition({rowIndex:y,rowPinned:b}),S=w==null?void 0:w.getCellCtrl(v);S!=null&&S.isEditing()&&S.stopEditing(),h.setFocusedCell({column:v,rowIndex:y,rowPinned:b,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(c){const f=this.cellCtrl.getCellPosition();if(s)c.extendLatestRangeToCell(f);else{const v=t||i;c.setRangeToCell(f,v)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(e){return Uu(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){super.destroy()}},Gj=class extends te{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();rl(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let n=0;i&&n<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),!(!i||st(i)||s!==i.getPinned()));n++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=it(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.visibleColsService.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=hc(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},Ud="ag-cell-range-selected",Bj="ag-cell-range-chart",zj="ag-cell-range-single-cell",Hj="ag-cell-range-chart-category",Vj="ag-cell-range-handle",_j="ag-cell-range-top",Wj="ag-cell-range-right",jj="ag-cell-range-bottom",Uj="ag-cell-range-left",Yj=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Ud,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${Ud}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${Ud}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${Ud}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${Ud}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(Bj,this.hasChartRange),sv(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(zj,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,n=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass(_j,i),this.cellComp.addOrRemoveCssClass(Wj,s),this.cellComp.addOrRemoveCssClass(jj,n),this.cellComp.addOrRemoveCssClass(Uj,o)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(i=>dc([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,s=!1,n=!1;const o=this.cellCtrl.getCellPosition().column,r=this.beans.visibleColsService;let a,c;e?(a=r.getColAfter(o),c=r.getColBefore(o)):(a=r.getColBefore(o),c=r.getColAfter(o));const h=this.rangeService.getCellRanges().filter(d=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),d));a||(n=!0),c||(i=!0);for(let d=0;d<h.length&&!(t&&i&&s&&n);d++){const p=h[d],f=this.rangeService.getRangeStartRow(p),v=this.rangeService.getRangeEndRow(p);!t&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(v,this.cellCtrl.getCellPosition())&&(s=!0),!n&&a&&p.columns.indexOf(a)<0&&(n=!0),!i&&c&&p.columns.indexOf(c)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:n}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(Vj,!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const s=it(t),n=this.cellCtrl.getCellPosition(),o=_T(e)&&!this.cellCtrl.isSuppressFillHandle(),r=q2(e);let a=i===1&&!this.cellCtrl.isEditing()&&(o||r);if(this.hasChartRange){const h=t[0].type===1&&this.rangeService.isCellInSpecificRange(n,t[0]);this.cellComp.addOrRemoveCssClass(Hj,h),a=s.type===0}return a&&s.endRow!=null&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,n)}addSelectionHandle(){const e=it(this.rangeService.getCellRanges()).type,i=_T(this.beans.gos)&&st(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},Kj="ag-cell",$j="ag-cell-auto-height",Zj="ag-cell-normal-height",qj="ag-cell-focus",Xj="ag-cell-first-right-pinned",Qj="ag-cell-last-left-pinned",Jj="ag-cell-not-inline-editing",e4="ag-column-hover",t4="ag-cell-wrap-text",i4=0,jP=class Ww extends te{constructor(t,i,s,n){super(),this.column=t,this.rowNode=i,this.beans=s,this.rowCtrl=n,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=t.getId()+"-"+i4++,this.colIdSanitised=Wo(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new Gj(this,this.beans),this.cellCustomStyleFeature=new kj(this,this.beans),this.cellMouseListenerFeature=new Oj(this,this.beans,this.column),this.cellKeyboardListenerFeature=new Nj(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&Wr(this.beans.gos)&&(this.cellRangeFeature=new Yj(this.beans,this))}removeFeatures(){const t=this.beans.context;this.cellPositionFeature=t.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=t.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=t.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=t.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=t.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,i){const s=()=>{const r=this.column.getColDef(),a=this.rowNode.data;if(r.tooltipField&&ge(a))return ug(a,r.tooltipField,this.column.isTooltipFieldContainsDots());const c=r.tooltipValueGetter;return c?c(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},n=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&n&&!this.isCellRenderer()&&(i=()=>{const r=this.getGui(),a=r.children.length===0?r:r.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});const o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:s,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new yh(o,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(t,i,s,n,o,r){var a,c,h,d;this.cellComp=t,this.eGui=i,this.printLayout=n,r??(r=this),this.addDomData(r),this.addFeatures(),r.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s,r),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(a=this.cellPositionFeature)==null||a.setComp(i),(c=this.cellCustomStyleFeature)==null||c.setComp(t),(h=this.tooltipFeature)==null||h.refreshToolTip(),(d=this.cellKeyboardListenerFeature)==null||d.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(p=>p()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t,i){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const s=t.parentElement,n=Qa(this.beans.gos,this.rowNode).height,o=c=>{if(this.editing||!this.isAlive()||!i.isAlive())return;const{paddingTop:h,paddingBottom:d,borderBottomWidth:p,borderTopWidth:f}=Tc(s),v=h+d+p+f,b=t.offsetHeight+v;if(c<5){const S=gi(this.beans.gos),M=!S||!S.contains(t),R=b==0;if(M||R){window.setTimeout(()=>o(c+1),0);return}}const w=Math.max(b,n);this.rowNode.setRowAutoHeight(w,this.column)},r=()=>o(0);r();const a=this.beans.resizeObserverService.observeResize(t,r);i.addDestroyFunc(()=>{a(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){var f;const{beans:i,column:s,rowNode:n,cellRangeFeature:o,cellComp:r}=this,{userComponentFactory:a,animationFrameService:c}=i,h=this.getValueToDisplay();let d;if(n.stub&&((f=n.groupData)==null?void 0:f[this.column.getId()])==null){const v=this.createCellRendererParams();d=a.getLoadingCellRendererDetails(s.getColDef(),v)}else if(this.isCellRenderer()){const v=this.createCellRendererParams();d=a.getCellRendererDetails(s.getColDef(),v)}r.setRenderDetails(d,h,t),c.requestAnimationFrame(()=>o==null?void 0:o.refreshHandle())}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t)),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}isCheckboxSelection(t){const{rowSelection:i}=this.beans.gridOptions;return t.checkboxSelection||op(this.column)&&i&&typeof i!="string"&&Qu(i)}refreshShouldDestroy(){const t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t)),s=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),n=this.includeDndSource!=this.isIncludeControl(t.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return i||s||n||o}startEditing(t=null,i=!1,s=null){const{editService:n}=this.beans;return!this.isCellEditable()||this.editing||!n?!0:this.cellComp?n.startEditing(this,t,i,s):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,s)}),!0)}setEditing(t,i){this.editCompDetails=i,this.editing!==t&&(this.editing=t)}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){this.onCellEditorAttachedFuncs=[];const{editService:i}=this.beans;return!this.editing||!i?!1:i.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,s,n,o)=>this.registerRowDragger(i,s,o),setTooltip:(i,s)=>{var n;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,s),(n=this.tooltipFeature)==null||n.refreshToolTip()}})}setFocusOutOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusOutOnEditor(this))}setFocusInOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusInOnEditor(this))}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.recreateCell(this):this.refreshCell(t)}refreshCell(t){var d,p,f,v,y;if(this.suppressRefreshCell||this.editing)return;const i=this.column.getColDef(),s=t!=null&&!!t.newData,n=t!=null&&!!t.suppressFlash||!!i.suppressCellFlash,o=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,r=t&&t.forceRefresh||o||s,a=!!this.cellComp,c=this.updateAndFormatValue(a),h=r||c;if(a){if(h){this.showValue(s);const b=(d=this.beans.filterManager)==null?void 0:d.isSuppressFlashingCellsBecauseFiltering();!n&&!b&&(this.beans.gos.get("enableCellChangeFlash")||i.enableCellChangeFlash)&&this.flashCell(),(p=this.cellCustomStyleFeature)==null||p.applyUserStyles(),(f=this.cellCustomStyleFeature)==null||f.applyClassesFromColDef()}(v=this.tooltipFeature)==null||v.refreshToolTip(),(y=this.cellCustomStyleFeature)==null||y.applyCellClassRules()}}stopEditingAndFocus(t=!1,i=!1){var s;(s=this.beans.editService)==null||s.stopEditingAndFocus(this,t,i)}flashCell(t){const i=(t==null?void 0:t.flashDuration)??(t==null?void 0:t.flashDelay),s=(t==null?void 0:t.fadeDuration)??(t==null?void 0:t.fadeDelay);this.animateCell("data-changed",i,s)}animateCell(t,i,s){if(!this.cellComp)return;const{gos:n}=this.beans;if(i||(i=n.get("cellFlashDuration")),i===0)return;ge(s)||(s=n.get("cellFadeDuration"));const o=`ag-cell-${t}`,r=`ag-cell-${t}-animation`;this.cellComp.addOrRemoveCssClass(o,!0),this.cellComp.addOrRemoveCssClass(r,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.cellComp.addOrRemoveCssClass(r,!0),this.eGui.style.transition=`background-color ${s}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.eGui.style.transition="")},s))},i)})}onFlashCells(t){if(!this.cellComp)return;const i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const i=this.value,s=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(t,i){const s=this.column.getColDef();return s.equals?s.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){const i=this.getGui();Sc(this.beans.gos,i,Ww.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc(()=>Sc(this.beans.gos,i,Ww.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(t)}onKeyDown(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(t)}onMouseEvent(t,i){var s;(s=this.cellMouseListenerFeature)==null||s.onMouseEvent(t,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;this.cellComp&&((t=this.cellPositionFeature)==null||t.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:i,beans:s}=this;PP(t,i,s.visibleColsService)}refreshAriaColIndex(){const t=this.beans.visibleColsService.getAriaColIndex(this.column);$F(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)==null?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,i)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(t){this.eGui&&jn(this.eGui,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(Xj,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(Qj,t)}onCellFocused(t){if(this.beans.focusService.isCellFocusSuppressed())return;const i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&(t!=null&&t.forceBrowserFocus)&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(qj,i),i&&t&&t.forceBrowserFocus){let n=this.cellComp.getFocusableElement();if(this.editing){const o=this.beans.focusService.findFocusableElements(n,null,!0);o.length&&(n=o[0])}n.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}const s=this.beans.gos.get("editType")==="fullRow";!i&&!s&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Or(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(Kj,!0),this.cellComp.addOrRemoveCssClass(Jj,!0);const t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass($j,t),this.cellComp.addOrRemoveCssClass(Zj,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(e4,t)}onColDefChanged(){var i;if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(i=this.beans.editService)==null||i.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(t4,t)}dispatchCellContextMenuEvent(t){const i=this.column.getColDef(),s=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(s),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(s)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new Fj;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new Pj(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,i);return}const n=this.createRowDragComp(t,i,s);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}))}createRowDragComp(t,i,s){const n=this.beans.gos.get("pagination"),o=this.beans.gos.get("rowDragManaged"),r=Vt(this.beans.gos);if(o){if(!r){ne("managed row dragging is only allowed in the Client Side Row Model");return}if(n){ne("managed row dragging is not possible when doing pagination");return}}const a=new Gw(()=>this.value,this.rowNode,this.column,t,i,s);return this.beans.context.createBean(a),a}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(t){this.onCellEditorAttachedFuncs.push(t)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(t=>t()),this.onCellEditorAttachedFuncs=[]}};jP.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var gc=jP,s4=0,UP=class jw extends te{constructor(t,i,s,n,o){var r;super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=t,this.paginationPage=((r=i.paginationService)==null?void 0:r.getCurrentPage())??0,this.useAnimationFrameForCreate=n,this.printLayout=o,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+s4++,this.rowId=Wo(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Wo(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(t,i){t==="left"?this.leftGui=i:t==="right"?this.rightGui=i:t==="fullWidth"?this.fullWidthGui=i:this.centerGui=i}setComp(t,i,s,n){n=rp(this,this.beans.context,n);const o={rowComp:t,element:i,containerType:s,compBean:n};this.allRowGuis.push(o),this.updateGui(s,o),this.initialiseRowComp(o),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const i=t?"none":"";this.allRowGuis.forEach(s=>s.element.style.display=i)}initialiseRowComp(t){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),Xm(i)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(o=>s.addOrRemoveCssClass(o,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&iv(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),Sc(i,t.element,jw.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc(()=>Sc(i,t.element,jw.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=Wo(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:i}=t;this.slideInAnimation[i]&&(HT(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(HT(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(Wr(this.gos)){ne("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}const i=this.beans.localeService.getLocaleTextFunc(),s=new Gw(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),n=this.createBean(s,this.beans.context);this.rowDragComps.push(n),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(o=>o!==n),this.destroyBean(n,this.beans.context)})}setupFullWidth(t){const i=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const s=this.createFullWidthCompDetails(t.element,i);t.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,i;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var n;return(n=s==null?void 0:s.rowComp)==null?void 0:n.getFullWidthCellRenderer()}):[(i=(t=this.fullWidthGui)==null?void 0:t.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(t){const i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){const t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),i=!!this.centerGui,s=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&i&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){const t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),i=this.isNodeFullWidthCell(),s=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.columnModel.isPivotMode(),r=!!this.rowNode.group&&!this.rowNode.footer&&Uv(this.gos,n);t?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":r?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,i=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,i,s=null){const n={list:[],map:{}},o=(a,c,h)=>{h!=null?n.list.splice(h,0,c):n.list.push(c),n.map[a]=c},r=[];for(const a of i){const c=a.getInstanceId();let h=t.map[c];h||(h=new gc(a,this.rowNode,this.beans,this)),o(c,h)}for(const a of t.list){const c=a.getColumn().getInstanceId();if(n.map[c]!=null)continue;!this.isCellEligibleToBeRemoved(a,s)?r.push([c,a]):a.destroy()}if(r.length)for(const[a,c]of r){const h=n.list.findIndex(p=>p.getColumn().getLeft()>c.getColumn().getLeft()),d=h===-1?void 0:Math.max(h-1,0);o(a,c,d)}return n}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{const s=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(s,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const t=this.beans.columnViewportService,i=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const s=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,s);const n=i.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const o=i.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;const r=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(r||a){const h=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(h)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||gs(this.gos,"print")}listenOnDomOrder(t){const i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],i)}setAnimateFlags(t){if(this.isSticky()||!t)return;const i=ge(this.rowNode.oldRowTop),s=this.beans.visibleColsService.isPinningLeft(),n=this.beans.visibleColsService.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=s,this.slideInAnimation.right=n}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=s,this.fadeInAnimation.right=n}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(a,c)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,c).params):!0,i=t(this.fullWidthGui,null),s=t(this.centerGui,null),n=t(this.leftGui,"left"),o=t(this.rightGui,"right");return i&&s&&n&&o}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(i=>{this.addRowDraggerToRow(i)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(s=>s.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(s=>{this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{const s=t===0,n=t===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",s),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass("ag-row-group",t),s.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),s.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),iv(s.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Or(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(t){return this.allRowGuis.find(i=>i.element.contains(t))}onKeyboardNavigate(t){const i=this.findFullWidthRowGui(t.target);if(!((i?i.element:null)===t.target))return;const o=this.rowNode,r=this.beans.focusService.getFocusedCell(),a={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:(r==null?void 0:r.column)??this.getColumnForFullWidth(i)};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||Gr(t))return;const i=this.allRowGuis.find(c=>c.element.contains(t.target)),s=i?i.element:null,n=s===t.target,o=ni(this.gos);let r=!1;s&&o&&(r=s.contains(o)&&o.classList.contains("ag-cell"));let a=null;!n&&!r&&(a=this.beans.focusService.findNextFocusableElement(s,!1,t.shiftKey)),(this.isFullWidth()&&n||!a)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var i;const t=(i=this.allRowGuis.find(s=>$o(s.element)))==null?void 0:i.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){const i=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(s=>{jn(s.element,"tabindex",i)})}onFullWidthRowFocused(t){var o;const i=this.rowNode,s=t?this.isFullWidth()&&t.rowIndex===i.rowIndex&&t.rowPinned==i.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(o=this.centerGui)==null?void 0:o.element;n&&(n.classList.toggle("ag-full-width-focus",s),s&&(t!=null&&t.forceBrowserFocus)&&n.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,i){const s={list:[],map:{}};return t.list.forEach(n=>{n!==i&&(s.list.push(n),s.map[n.getColumn().getInstanceId()]=n)}),s}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(t,i){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(t,i){const s=this.createRowEvent(t,i);return s.source=this,s}onRowDblClick(t){Gr(t)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}getColumnForFullWidth(t){const{visibleColsService:i}=this.beans;switch(t==null?void 0:t.containerType){case"center":return i.getCenterCols()[0];case"left":return i.getLeftCols()[0];case"right":return i.getRightCols()[0];default:return i.getAllCols()[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=Uu(t.target,"ag-row-drag",3),!this.isFullWidth())return;const i=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const s=this.findFullWidthRowGui(t.target),n=s==null?void 0:s.element,o=t.target;let r=!0;n&&n.contains(o)&&Yx(o)&&(r=!1),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:this.getColumnForFullWidth(s),rowPinned:i.rowPinned,forceBrowserFocus:r})}onRowClick(t){if(Gr(t)||this.lastMouseDownOnDragger)return;const{gos:s}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",t));const n=t.ctrlKey||t.metaKey,o=t.shiftKey,r=this.rowNode.isSelected(),a=bc(s),c=WT(s),h=X2(s);if(a&&this.rowNode.group||this.isRowSelectionBlocked()||!h&&!r||!c&&r)return;const d=Q2(s),p="rowClicked";if(r)d?this.rowNode.setSelectedParams({newValue:!1,event:t,source:p}):n?c&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:p}):h&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!o,rangeSelect:o,event:t,source:p});else{const f=d?!1:!n;this.rowNode.setSelectedParams({newValue:!0,clearSelection:f,rangeSelect:o,event:t,source:p})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!Xm(this.gos)}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const i=()=>{const n=t.clientHeight;if(n!=null&&n>0){const o=()=>{this.rowNode.setRowHeight(n),(Vt(this.gos)||nr(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(o,0)}},s=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(s),i()}createFullWidthCompDetails(t,i){const{gos:s,rowNode:n}=this,o=s.addGridCommonParams({fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,c,h,d)=>this.addFullWidthRowDragging(a,c,h,d),setTooltip:(a,c)=>this.refreshRowTooltip(a,c)}),r=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return r.getFullWidthDetailCellRendererDetails(o);case"FullWidthGroup":return r.getFullWidthGroupCellRendererDetails(o);case"FullWidthLoading":return r.getFullWidthLoadingCellRendererDetails(o);default:return r.getFullWidthCellRendererDetails(o)}}refreshRowTooltip(t,i){if(!this.fullWidthGui)return;const s={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new yh(s,this.beans))}addFullWidthRowDragging(t,i,s="",n){if(!this.isFullWidth())return;const o=new Gw(()=>s,this.rowNode,void 0,t,i,n);this.createBean(o,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(o,this.beans.context)})}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const i="ag-row-level-"+t,s="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass(i,!0),n.rowComp.addOrRemoveCssClass(s,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){var i;this.stoppingRowEdit||(i=this.beans.rowEditService)==null||i.stopEditing(this,t)}setInlineEditingCss(){const t=this.editingRow||this.getAllCellCtrls().some(i=>i.isEditing());this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,i=null,s=null){var n;return this.editingRow?!0:((n=this.beans.rowEditService)==null?void 0:n.startEditing(this,t,i,s))??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){const i=this.getPinnedForContainer(t),s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)}processStylesFromGridOptions(){const t=this.gos.get("rowStyle");if(t&&typeof t=="function"){ne("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const i=this.gos.getCallback("getRowStyle");let s;if(i){const n={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};s=i(n)}return s||t?Object.assign({},t,s):this.emptyStyle}onRowSelected(t){const i=!!this.rowNode.isSelected();this.forEachGui(t,s=>{s.rowComp.addOrRemoveCssClass("ag-row-selected",i),sv(s.element,i),s.element.contains(ni(this.gos))&&(s===this.centerGui||s===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&!WT(this.gos))return;const s=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(s,"rowSelection")}addHoverFunctionality(t){if(!this.active)return;const{element:i,compBean:s}=t,{rowNode:n,beans:o,gos:r}=this;s.addManagedListeners(i,{mouseenter:()=>n.onMouseEnter(),mouseleave:()=>n.onMouseLeave()}),s.addManagedListeners(n,{mouseEnter:()=>{!o.dragService.isDragging()&&!r.get("suppressRowHoverHighlight")&&(i.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{i.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(t){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(i.top,!0)-100,n=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(s,t),n)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const i=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),o=DF(this.gos)?Qa(this.gos,this.rowNode).height:void 0,r=o?`${Math.min(s,o)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${i}px`,r&&a.element.style.setProperty("--ag-line-height",r)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(t=!1){if(this.active=!1,!t&&ju(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){const n=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(n)}else this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=i=>(i.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){var i;const t=((i=this.beans.paginationService)==null?void 0:i.getCurrentPage())??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const s=this.beans.pageBoundsService.getPixelOffset();return t+s*(i?1:-1)}setRowTop(t){if(!this.printLayout&&ge(t)){const i=this.applyPaginationOffset(t),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(o)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";const i=this.rowNode;let s;if(this.isSticky())s=i.stickyRowTop;else{const n=this.slideInAnimation[t]?this.roundRowTopToBounds(i.oldRowTop):i.rowTop,o=this.applyPaginationOffset(n);s=i.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return s+"px"}setRowTopStyle(t){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(t):i.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(s=>{s.getColumn()==t&&(i=s)}),i!=null||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(t)>=0&&(i=s)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){var r;const i=this.rowNode.getRowIndexString();if(i===null)return;const s=this.beans.headerNavigationService.getHeaderRowCount()+(((r=this.beans.filterManager)==null?void 0:r.getHeaderRowCount())??0),n=this.rowNode.rowIndex%2===0,o=s+this.rowNode.rowIndex+1;this.forEachGui(t,a=>{a.rowComp.setRowIndex(i),a.rowComp.addOrRemoveCssClass("ag-row-even",n),a.rowComp.addOrRemoveCssClass("ag-row-odd",!n),zV(a.element,o)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};UP.DOM_DATA_KEY_ROW_CTRL="renderedRow";var pc=UP,n4=class extends te{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",OF("touchstart")?"touchstart":"mousedown"].forEach(i=>{const s=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:s})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||Gr(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!al())return;const e=new Ka(this.element),t=i=>{const s=this.getRowForEvent(i.touchEvent),n=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,s,n)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const i=Rg(this.gos,t,pc.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const n=i?i.getRowNode():null,o=s?s.getColumn():null;let r=null;if(o){const h=e||t;s.dispatchCellContextMenuEvent(h??null),r=this.valueService.getValue(o,n)}const a=this.ctrlsService.getGridBodyCtrl(),c=s?s.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:n,column:o,value:r,anchorToElement:c})}getControlsForEventTarget(e){return{cellCtrl:Ew(this.gos,e,gc.DOM_DATA_KEY_CELL_CTRL),rowCtrl:Ew(this.gos,e,pc.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),n=e.getColumn(),o=e.isEditing();!Bw(this.gos,i,s,n,o)&&t==="keydown"&&(!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),wP(i)&&e.processCharacter(i)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),n=this.focusService.getFocusedCell(),o=n&&n.column;if(!Bw(this.gos,i,s,o,!1)){const a=i.key;if(t==="keydown")switch(a){case Z.PAGE_HOME:case Z.PAGE_END:case Z.PAGE_UP:case Z.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case Z.UP:case Z.DOWN:e.onKeyboardNavigate(i);break;case Z.TAB:e.onTabKeyDown(i);break}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const i=mW(e);if(i===Z.A)return this.onCtrlAndA(e);if(i===Z.C)return this.onCtrlAndC(e);if(i===Z.D)return this.onCtrlAndD(e);if(i===Z.V)return this.onCtrlAndV(e);if(i===Z.X)return this.onCtrlAndX(e);if(i===Z.Y)return this.onCtrlAndY();if(i===Z.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[n,o]=[t.isEmpty("top"),t.isEmpty("bottom")],r=n?null:"top";let a,c;o?(a=null,c=i.getRowCount()-1):(a="bottom",c=t.getPinnedBottomRowCount()-1);const h=this.visibleColsService.getAllCols();if(gn(h))return;s.setCellRange({rowStartIndex:0,rowStartPinned:r,rowEndIndex:c,rowEndPinned:a,columnStart:h[0],columnEnd:it(h)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){var e;(e=this.undoRedoService)==null||e.redo("ui")}},o4=class extends te{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;ei(this.element,t),go(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},r4=class extends te{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;ei(this.element,t),go(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},gm=e=>e.getTopRowCtrls(),pm=e=>e.getStickyTopRowCtrls(),fm=e=>e.getStickyBottomRowCtrls(),mm=e=>e.getBottomRowCtrls(),vm=e=>e.getCentreRowCtrls(),a4={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:vm},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:vm},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:vm},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:vm},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:gm},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:gm},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:gm},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:gm},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:pm},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:pm},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:pm},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:pm},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:fm},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:fm},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:fm},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:fm},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:mm},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:mm},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:mm},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:mm}};function Gu(e){return a4[e]}var l4=["topCenter","topLeft","topRight"],c4=["bottomCenter","bottomLeft","bottomRight"],u4=["center","left","right"],h4=["center","left","right","fullWidth"],d4=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],g4=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],p4=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],YP=["stickyTopCenter","stickyTopLeft","stickyTopRight"],KP=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],f4=[...YP,"stickyTopFullWidth",...KP,"stickyBottomFullWidth"],m4=[...l4,...c4,...u4,...YP,...KP],v4=class extends te{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=Gu(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new Ij(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new n4(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const s=()=>this.onPinnedWidthChanged();this.forContainers(g4,()=>{this.pinnedWidthFeature=this.createManagedBean(new o4(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})}),this.forContainers(p4,()=>{this.pinnedWidthFeature=this.createManagedBean(new r4(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})}),this.forContainers(h4,()=>this.createManagedBean(new WP(this.eContainer,this.name==="center"?i:void 0))),this.forContainers(m4,()=>this.createManagedBean(new Lj(this.eContainer))),this.forContainers(d4,()=>this.createManagedBean(new cM(n=>this.comp.setContainerWidth(`${n}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(f4.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const i=this.gos.get("ensureDomOrder"),s=gs(this.gos,"print");this.comp.setDomOrder(i||s)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return lp(this.eViewport)}getCenterViewportScrollLeft(){return ov(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return QF(this.eViewport)}getViewportScrollLeft(){return ov(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||KV(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){rv(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=gs(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,o=t.filter(r=>{const a=r.isFullWidth();return this.options.fullWidth?!n&&a:n||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},y4="ag-force-vertical-scroll",C4="ag-selectable",S4="ag-column-moving",b4=class extends te{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,n,o,r){var a;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=n,this.eStickyTop=o,this.eStickyBottom=r,this.eCenterColsViewport=i.querySelector(`.${Gu("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${Gu("fullWidth").container}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${Gu("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=r.querySelector(`.${Gu("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",c=>this.setCellTextSelection(c.currentValue)),this.createManagedBean(new hM(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Tj(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,n,o,r]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(a=this.filterManager)==null||a.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:i=>{const{target:s}=i,n=Uu(s,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:i=>{const{target:s,relatedTarget:n}=i,o=t.contains(n),r=Uu(n,"ag-root",t);Uu(s,"ag-root",t)||(!o||r)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(S4,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(C4,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=sP()?16:0,s=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(s)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const s=i.relatedTarget;if(Nw(s)===null){this.rowRenderer.stopEditing();return}let n=t.some(o=>o.contains(s))&&this.mouseEventService.isElementInThisGrid(s);if(!n){const o=this.popupService;n=o.getActivePopups().some(r=>r.contains(s))||o.isElementWithinCustomPopup(s)}n||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(i=>this.addManagedElementListeners(i,{focusout:e}))}updateRowCount(){var s;const e=this.headerNavigationService.getHeaderRowCount()+(((s=this.filterManager)==null?void 0:s.getHeaderRowCount())??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?y4:null,i=gs(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&$V(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const i=e&&ju(this.gos)&&!this.rowContainerHeightService.isStretching(),s=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(s,i)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e;(s||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e,n=s||Math.abs(t)>Math.abs(i),o=e.target;n?(this.eStickyTopFullWidthContainer.contains(o)||this.eStickyBottomFullWidthContainer.contains(o))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:s}=e||t;(s===this.eBodyViewport||s===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!al())return;const t=new Ka(this.eBodyViewport),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Z_(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){var n;const t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(((n=this.filterManager)==null?void 0:n.getHeaderHeight())??0),i=this.pinnedRowModel.getPinnedTopTotalHeight();let s=0;t>0&&(s+=t),i>0&&(s+=i),s>0&&(s+=1),this.comp.setStickyTopTop(`${s}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,s=e+i;this.comp.setStickyBottomBottom(`${s}px`)}sizeColumnsToFit(e,t){const s=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,o=lp(this.eGridBody)-s;if(o>0){this.columnSizeService.sizeColumnsToFit(o,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):ne("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};function Yd(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}`${Yd(["topLeft","topCenter","topRight","topFullWidth"])}${Yd(["left","center","right","fullWidth"])}${Yd(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}${Yd(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}${Yd(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}`;var w4=class extends te{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:t_();i!=null&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},nI="__ag_grid_instance",$P=class ZP extends te{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=ZP.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[nI]=this.gridInstanceId}getRenderedCellForEvent(t){return Ew(this.gos,t.target,gc.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let i=t;for(;i;){const s=i[nI];if(ge(s))return s===this.gridInstanceId;i=i.parentElement}return!1}getCellPositionForEvent(t){const i=this.getRenderedCellForEvent(t);return i?i.getCellPosition():null}getNormalisedPosition(t){const i=gs(this.gos,"normal"),s=t;let n,o;if(s.clientX!=null||s.clientY!=null?(n=s.clientX,o=s.clientY):(n=s.x,o=s.y),i){const r=this.ctrlsService.getGridBodyCtrl(),a=r.getScrollFeature().getVScrollPosition(),c=r.getScrollFeature().getHScrollPosition();n+=c.left,o+=a.top}return{x:n,y:o}}};$P.gridInstanceSequence=new th;var x4=$P,M4=class extends te{constructor(){super(),this.beanName="navigationService",this.onPageDown=VT(this.onPageDown,100),this.onPageUp=VT(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,s=e.altKey,n=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,r=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(i){case Z.PAGE_HOME:case Z.PAGE_END:!n&&!s&&(this.onHomeOrEndKey(i),a=!0);break;case Z.LEFT:case Z.RIGHT:case Z.UP:case Z.DOWN:if(!r)return!1;n&&!s&&!o&&(this.onCtrlUpDownLeftRight(i,r),a=!0);break;case Z.PAGE_DOWN:case Z.PAGE_UP:!n&&!s&&(a=this.handlePageUpDown(i,r,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===Z.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){var r;const{scrollIndex:t,scrollType:i,scrollColumn:s,focusIndex:n,focusColumn:o}=e;ge(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),ge(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:o,rowPinned:null,forceBrowserFocus:!0}),(r=this.rangeService)==null||r.setRangeToCell({rowIndex:n,rowPinned:null,column:o})}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.getViewportHeight(),n=this.pageBoundsService.getPixelOffset(),o=i.top+s,r=this.rowModel.getRowIndexAtPixel(o+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r):this.navigateToNextPage(e,r)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.pageBoundsService.getPixelOffset(),n=i.top,o=this.rowModel.getRowIndexAtPixel(n+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,t,i=!1){const s=this.getViewportHeight(),n=this.pageBoundsService.getFirstRow(),o=this.pageBoundsService.getLastRow(),r=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),c=i?(a==null?void 0:a.rowHeight)-s-r:s-r,h=(a==null?void 0:a.rowTop)+c;let d=this.rowModel.getRowIndexAtPixel(h+r);if(d===e.rowIndex){const f=i?-1:1;t=d=e.rowIndex+f}let p;i?(p="bottom",d<n&&(d=n),t<n&&(t=n)):(p="top",d>o&&(d=o),t>o&&(t=o)),this.isRowTallerThanView(d)&&(t=d,p="top"),this.navigateTo({scrollIndex:t,scrollType:p,scrollColumn:null,focusIndex:d,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,s=this.getViewportHeight(),n=this.pageBoundsService.getLastRow();let o=0,r=e.rowIndex;for(;r>=0&&r<=n;){const a=this.rowModel.getRow(r);if(a){const c=a.rowHeight??0;if(o+c>s)break;o+=c}r+=i}return Math.max(0,Math.min(r,n))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth();let i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s}=i,n=i.column;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onHomeOrEndKey(e){const t=e===Z.PAGE_HOME,i=this.visibleColsService.getAllCols(),s=t?i[0]:it(i),n=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey,s=this.tabToNextCellCommon(e,i,t);if(s!==!1){s?t.preventDefault():s===null&&this.focusService.allowFocusForNextGridCoreContainer(i);return}if(i){const{rowIndex:n,rowPinned:o}=e.getRowPosition();(o?n===0:n===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof gc&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!s&&(s=this.rowRenderer.getRowByPosition(i),!s||!s.isFullWidth())?!1:!!this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s=e.isEditing();if(!s&&e instanceof gc){const r=e.getRowCtrl();r&&(s=r.isEditing())}let n;return s?this.gos.get("editType")==="fullRow"?n=this.moveToNextEditingRow(e,t,i):n=this.moveToNextEditingCell(e,t,i):n=this.moveToNextCellNotEditing(e,t),n===null?n:n||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const n=this.findNextCellToFocusOn(s,t,!0);return n===!1?null:n==null?!1:(n.startEditing(null,!0,i),n.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const s=e.getCellPosition(),n=this.findNextCellToFocusOn(s,t,!0);if(n===!1)return null;if(n==null)return!1;const o=n.getCellPosition(),r=this.isCellEditable(s),a=this.isCellEditable(o),c=o&&s.rowIndex===o.rowIndex&&s.rowPinned===o.rowPinned;return r&&e.setFocusOutOnEditor(),c||(e.getRowCtrl().stopEditing(),n.getRowCtrl().startRowEditing(void 0,void 0,i)),a?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let s;e instanceof pc?s={...e.getRowPosition(),column:t?i[0]:it(i)}:s=e.getCellPosition();const n=this.findNextCellToFocusOn(s,t,!1);if(n===!1)return null;if(n instanceof gc)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return ge(n)}findNextCellToFocusOn(e,t,i){var n;let s=e;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const o=this.gos.getCallback("tabToNextCell");if(ge(o)){const h=o({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(h===!0||h===null)h===null&&ne("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),s=e;else{if(h===!1)return!1;s={rowIndex:h.rowIndex,column:h.column,rowPinned:h.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const c=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c+s.rowIndex,column:s.column},fromCell:!0}),null}const r=this.gos.get("editType")==="fullRow";if(i&&!r&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const a=this.getCellByPosition(s);if(!a){const c=this.rowRenderer.getRowByPosition(s);if(!c||!c.isFullWidth()||i)continue;return c}if(!a.isSuppressNavigable())return(n=this.rangeService)==null||n.setRangeToCell(s),a}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let n=i,o=!1;for(;n&&(n===i||!this.isValidNavigateCell(n));)this.gos.get("enableRtl")?t===Z.LEFT&&(n=this.getLastCellOfColSpan(n)):t===Z.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),o=st(n);if(o&&e&&e.key===Z.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),s){const a=this.gos.getCallback("navigateToNextCell");if(ge(a)){const h=a({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});ge(h)?n={rowPinned:h.rowPinned,rowIndex:h.rowIndex,column:h.column}:n=null}}if(!n)return;if(n.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const r=this.getNormalisedPosition(n);r?this.focusPosition(r):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const i=this.visibleColsService.getAllCols(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const n=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?it(i):i[0])};this.focusPosition(o);const r=t??(n!=null&&this.rowPositionUtils.before(o,n));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,fromBelow:r}),!0}focusPosition(e){var t;this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:it(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=jv(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&(i==null?void 0:i.sticky))&&st(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},D4=class extends te{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},R4=class extends te{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,s=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let s=-1,n="left";const o=this.menuService.isLegacyMenuEnabled();!o&&this.gos.get("enableRtl")&&(s=1,n="right");const r=o?void 0:4*s,a=o?void 0:4;this.showPopup(e,c=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:c,nudgeX:r,nudgeY:a,alignSide:n,keepWithinBounds:!0,position:"under",column:e})},i,t,o)}showPopup(e,t,i,s,n){const o=e?this.createBean(new tW(e,"COLUMN_MENU")):void 0;if(this.activeMenu=o,!(o!=null&&o.hasFilter())||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const r=document.createElement("div");Co(r,"presentation"),r.classList.add("ag-menu"),n||r.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(r,{keydown:y=>this.trapFocusWithin(y,r)}),r.appendChild(o==null?void 0:o.getGui());let a;const c=()=>o==null?void 0:o.afterGuiDetached(),h=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,d=y=>{e.setMenuVisible(!1,"contextMenu");const b=y instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),b&&s&&$o(s)){const w=this.focusService.findTabbableParent(s);w&&w.focus()}c(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},p=this.localeService.getLocaleTextFunc(),f=n&&i!=="columnFilter"?p("ariaLabelColumnMenu","Column Menu"):p("ariaLabelColumnFilter","Column Filter"),v=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:d,positionCallback:()=>t(r),anchorToElement:h,ariaLabel:f});v&&(this.hidePopup=a=v.hideFunc),o.afterInit().then(()=>{t(r),o.afterGuiAttached({container:i,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==Z.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},A4=class extends te{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){const s=RF(this.gos).ResizeObserver,n=s?new s(t):null;return n==null||n.observe(e),()=>n==null?void 0:n.disconnect()}},E4=class extends te{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){var i;const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const s=((i=this.paginationService)==null?void 0:i.getCurrentPage())??0;s!==this.lastPage&&(this.lastPage=s,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&ne(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,s)=>i.index!==s.index?t*(s.index-i.index):s.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,n=s.list,o=this.destroyTasks,r=new Date().getTime();let a=new Date().getTime()-r;const c=e<=0,h=this.ctrlsService.getGridBodyCtrl();for(;c||a<e;){if(!h.getScrollFeature().scrollGridIfNeeded()){let p;if(i.length)this.sortTaskList(t),p=i.pop().task;else if(n.length)this.sortTaskList(s),p=n.pop().task;else if(o.length)p=o.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(p)||p()}a=new Date().getTime()-r}i.length||n.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=RF(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}},T4=class extends te{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=Vt(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,s){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i,s),e.setExpanded(t,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},I4=class extends te{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),s=this.getCellGui(i,t);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const n=s.getBoundingClientRect();return{x:n.x+n.width/2,y:n.y+n.height/2}}showContextMenu(e){var o;const t=e.rowNode,i=e.column;let{anchorToElement:s,value:n}=e;t&&i&&n==null&&(n=this.valueService.getValueForDisplay(i,t)),s==null&&(s=this.getContextMenuAnchorElement(t,i)),(o=this.contextMenuFactory)==null||o.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,n,s)}showColumnChooser(e){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(e)}hidePopupMenu(){var e;(e=this.contextMenuFactory)==null||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;(e=this.columnChooserFactory)==null||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&Ja(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(al()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){var s;const t=e.getColDef(),i=(s=t.floatingFilterComponentParams)==null?void 0:s.suppressFilterButton;return i!=null&&ne("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,i,s){const{positionBy:n}=t,o=t.column;if(n==="button"){const{buttonElement:r}=t;e.showMenuAfterButtonClick(o,r,i,s)}else if(n==="mouse"){const{mouseEvent:r}=t;e.showMenuAfterMouseEvent(o,r,i,s)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame(()=>{var a;const r=(a=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned()))==null?void 0:a.getHeaderCtrlForColumn(o);r&&e.showMenuAfterButtonClick(o,r.getAnchorElementForMenu(s),i,!0)}))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(i==null?void 0:i.getGui())||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(e);if(!s)return i;const n=this.getCellGui(s,t);return n||(s.isFullWidth()?s.getFullWidthElement():i)}},L4=class extends rc{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},F4={selector:"AG-INPUT-TEXT-AREA",component:L4},P4=class extends Ch{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[F4]),this.eTextArea=Te}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),ge(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===Z.LEFT||t===Z.UP||t===Z.RIGHT||t===Z.DOWN||e.shiftKey&&t===Z.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!ge(e)&&!ge(this.params.value)?this.params.value:this.params.parseValue(e)}},k4=class extends Ch{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Sc(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=s=>{Bw(this.gos,s,t.node,t.column,!0)||t.onKeyDown(s)};this.addManagedElementListeners(e,{keydown:i})}},N4=class extends Ch{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[lW]),this.eSelect=Te,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:s}=this,{values:n,value:o,eventKey:r}=e;if(st(n)){ne("no values found for select cellEditor");return}this.startedByEnter=r!=null?r===Z.ENTER:!1;let a=!1;n.forEach(p=>{const f={value:p},v=i.formatValue(e.column,null,p),y=v!=null;f.text=y?v:p,t.addOption(f),a=a||o===p}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:c,valueListMaxWidth:h,valueListMaxHeight:d}=e;c!=null&&t.setPickerGap(c),d!=null&&t.setPickerMaxHeight(d),h!=null&&t.setPickerMaxWidth(h),s.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},qv=class extends Ch{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=Te}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:s}=e,n=this.eInput;this.cellEditorInput.init(n,e);let o,r=!0;t?(this.focusAfterAttached=!0,i===Z.BACKSPACE||i===Z.DELETE?o="":i&&i.length===1?s?r=!1:o=i:(o=this.cellEditorInput.getStartValue(),i!==Z.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=this.cellEditorInput.getStartValue()),r&&o!=null&&n.setStartValue(o),this.addManagedElementListeners(n.getGui(),{keydown:a=>{const{key:c}=a;(c===Z.PAGE_UP||c===Z.PAGE_DOWN)&&a.preventDefault()}})}afterGuiAttached(){var s,n;const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Ur()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():(n=(s=this.cellEditorInput).setCaret)==null||n.call(s)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},O4=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[$v]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!ge(e)&&!ge(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=ge(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},qP=class extends qv{constructor(){super(new O4)}},G4=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[yW]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===Z.UP||e.key===Z.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!ge(e)&&!ge(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){Ur()&&this.eInput.getInputElement().focus({preventScroll:!0})}},B4=class extends qv{constructor(){super(new G4)}},z4=class extends Lc{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Ur();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){ni(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Un(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,jn(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Un(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,jn(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,jn(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Xs(this.getValue())??void 0}setDate(e,t){this.setValue(Un(e??null,!1),t)}},XP={selector:"AG-INPUT-DATE-FIELD",component:z4},H4=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[XP]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!ge(e)&&!ge(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Un(e,!1)}},V4=class extends qv{constructor(){super(new H4)}},_4=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[XP]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!ge(e)&&!ge(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return Un(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Xs(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Un(e??null,!1)??void 0}},W4=class extends qv{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new _4(()=>this.dataTypeService))}},j4=class extends Ch{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[Jx]),this.eCheckbox=Te}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:s=>this.setAriaLabel(s.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=Ux(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}},sg=class{constructor(e){this.cellValueChanges=e}},Nb=class extends sg{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},U4=10,oI=class{constructor(e){this.actionStack=[],this.maxStackSize=e||U4,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},Y4=class extends te{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:r,column:a,oldValue:c,value:h}=e,d={rowPinned:o,rowIndex:r,columnId:a.getColId(),newValue:h,oldValue:c};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new oI(e),this.redoStack=new oI(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:i=>{i.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,s,n){if(!e)return!1;const o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,r=>r[s],n),o instanceof Nb?this.processRange(this.rangeService,o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,i){e.cellValueChanges.forEach(s=>{const{rowIndex:n,rowPinned:o,columnId:r}=s,a={rowIndex:n,rowPinned:o},c=this.rowPositionUtils.getRowNode(a);c.displayed&&c.setDataValue(r,t(s),i)})}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach((s,n)=>{if(!s)return;const o=s.startRow,r=s.endRow;n===t.length-1&&(i={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));const a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:s.startColumn,columns:s.columns};e.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,n={rowIndex:i,rowPinned:s},o=this.rowPositionUtils.getRowNode(n),r={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:n}=e,o=this.gridBodyCtrl.getScrollFeature(),r=this.columnModel.getCol(s);if(!r)return;o.ensureIndexVisible(i),o.ensureColumnVisible(r);const a={rowIndex:i,column:r,rowPinned:n};this.focusService.setFocusedCell({...a,forceBrowserFocus:!0}),t==null||t.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new sg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new sg(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new sg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new Nb(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&Wr(this.gos)?e=new Nb(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new sg(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function K4(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function $4(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function QP(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function JP(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function Z4(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function q4(e){var t;(t=e.undoRedoService)==null||t.undo("api")}function X4(e){var t;(t=e.undoRedoService)==null||t.redo("api")}function Q4(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(dg)}function J4(e){return e.rowRenderer.getEditingCells()}function eU(e,t=!1){e.rowRenderer.stopEditing(t)}function tU(e,t){const i=e.columnModel.getCol(t.colKey);if(!i){ne(`no column found for ${t.colKey}`);return}const s={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};t.rowPinned==null&&JP(e,t.rowIndex),QP(e,t.colKey);const o=e.navigationService.getCellByPosition(s);if(!o)return;const{focusService:r,gos:a}=e,c=()=>{const d=ni(a),p=o.getGui();return d!==p&&!!(p!=null&&p.contains(d))},h=a.get("stopEditingWhenCellsLoseFocus")&&c();(h||!r.isCellFocused(s))&&r.setFocusedCell({...s,forceBrowserFocus:h,preventScrollOnBrowserFocus:!0}),o.startRowOrCellEdit(t.key)}function iU(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentUndoStackSize())??0}function sU(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentRedoStackSize())??0}var nU=class extends te{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,i=!1,s=null){var h;const n=this.createCellEditorParams(e,t,i),o=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(o,n),a=(r==null?void 0:r.popupFromSelector)!=null?r.popupFromSelector:!!o.cellEditorPopup,c=(r==null?void 0:r.popupPositionFromSelector)!=null?r.popupPositionFromSelector:o.cellEditorPopupPosition;return e.setEditing(!0,r),e.getComp().setEditDetails(r,a,c,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(s,"cellEditingStarted")),!((h=r==null?void 0:r.params)!=null&&h.suppressPreventDefault)}stopEditing(e,t){const i=e.getComp(),{newValue:s,newValueExists:n}=this.takeValueFromCellEditor(t,i),o=e.getRowNode(),r=e.getColumn(),a=this.valueService.getValueForDisplay(r,o);let c=!1;return n&&(c=this.saveNewValue(e,a,s,o,r)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:s,valueChanged:c}),c}handleColDefChanged(e){const t=e.getCellEditor();if(t!=null&&t.refresh){const{eventKey:i,cellStartedEdit:s}=e.getEditCompDetails().params,n=this.createCellEditorParams(e,i,s),o=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(o,n);t.refresh(r.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp(),i=t.getCellEditor();i!=null&&i.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>{var s,n;return(n=(s=t.getCellEditor())==null?void 0:s.focusIn)==null?void 0:n.call(s)}))}stopEditingAndFocus(e,t=!1,i=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new k4(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const s=t.getCellEditor();return!s||s.isCancelAfterEnd&&s.isCancelAfterEnd()?i:{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,t,i,s,n){if(i===t)return!1;e.setSuppressRefreshCell(!0);const o=s.setDataValue(n,i,"edit");return e.setSuppressRefreshCell(!1),o}createCellEditorParams(e,t,i){const s=e.getColumn(),n=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(s,n),eventKey:t,column:s,colDef:s.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:n,data:n.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:o=>this.valueService.parseValue(s,n,o,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const s=e?Z.UP:Z.DOWN;this.navigationService.navigateToNextCell(null,s,t,!1)}}},oU=class extends te{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,i=null,s=null){let n=!0;return e.getAllCellCtrls().reduce((r,a)=>{const c=a===i;return c?n=a.startEditing(t,c,s):a.startEditing(null,c,s),r?!0:a.isEditing()},!1)&&this.setEditing(e,!0),n}stopEditing(e,t=!1){const i=e.getAllCellCtrls(),s=e.isEditing();e.setStoppingRowEdit(!0);let n=!1;for(const o of i){const r=o.stopEditing(t);s&&!t&&!n&&r&&(n=!0)}n&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),s&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,s=>s.rowComp.addOrRemoveCssClass("ag-row-editing",t));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}},Fc={version:Pe,moduleName:"@ag-grid-community/edit-core",beans:[nU]},rU={version:Pe,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:q4,redoCellEditing:X4,getCellEditorInstances:Q4,getEditingCells:J4,stopEditing:eU,startEditingCell:tU,getCurrentUndoSize:iU,getCurrentRedoSize:sU},dependantModules:[Fc]},aU={version:Pe,moduleName:"@ag-grid-community/undo-redo-edit",beans:[Y4],dependantModules:[Fc]},lU={version:Pe,moduleName:"@ag-grid-community/full-row-edit",beans:[oU],dependantModules:[Fc]},ek={version:Pe,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:qP}],dependantModules:[Fc]},cU={version:Pe,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:qP},{name:"agNumberCellEditor",classImp:B4,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:V4},{name:"agDateStringCellEditor",classImp:W4},{name:"agCheckboxCellEditor",classImp:j4}],dependantModules:[ek]},uU={version:Pe,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:N4}],dependantModules:[Fc]},hU={version:Pe,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:P4}],dependantModules:[Fc]},dU={version:Pe,moduleName:"@ag-grid-community/all-editors",dependantModules:[ek,cU,uU,hU]},gU={version:Pe,moduleName:"@ag-grid-community/editing",dependantModules:[Fc,aU,lU,dU,rU]},pU=class extends te{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach(o=>this.cloneItemIntoDummy(o,t)),i.appendChild(t);const s=t.offsetWidth;i.removeChild(t);const n=this.getAutoSizePadding();return s+n}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const s=i.getHtmlElementForColumnHeader(e);s!=null&&(t=s)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),n=s.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(n.add("ag-header","ag-header-row"),s.style.position="static"):n.add("ag-row");let r=e.parentElement;for(;r;){if(["ag-header-row","ag-row"].some(c=>r.classList.contains(c))){for(let c=0;c<r.classList.length;c++){const h=r.classList[c];h!="ag-row-position-absolute"&&n.add(h)}break}r=r.parentElement}s.appendChild(i),t.appendChild(s)}},fU=class extends te{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=Vt(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){var t,i;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=(t=e.childStore)==null?void 0:t.getStoreBounds();return e.footer&&(n=(i=e.sibling.childStore)==null?void 0:i.getStoreBounds()),((n==null?void 0:n.heightPx)??0)+((n==null?void 0:n.topPx)??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let s=e.footer?e.sibling:e;for(;s.isExpandable()&&s.expanded;)if(s.master)s=s.detailNode;else if(s.childrenAfterSort){if(s.childrenAfterSort.length===0)break;s=it(s.childrenAfterSort)}return s.rowTop+s.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t=e==="top";let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const s=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,n=new Set,o=h=>{if(n.add(h),t){const d=this.getLastPixelOfGroup(h),p=s+i+h.rowHeight;d<p?h.stickyRowTop=i+(d-p):h.stickyRowTop=i}else{const d=this.getFirstPixelOfGroup(h),p=s-(i+h.rowHeight);d>p?h.stickyRowTop=i-(d-p):h.stickyRowTop=i}i=0,n.forEach(d=>{const p=d.stickyRowTop+d.rowHeight;i<p&&(i=p)})},r=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),c=h=>{if(!h.displayed)return!1;if(h.footer){if(r===!0||r==="grand"&&h.level===-1||r==="group"&&h.level>-1)return!1;const d=h.sibling.rowIndex?h.sibling.rowIndex+1===h.rowIndex:!1;return e==="bottom"&&d?!1:!n.has(h)}return h.isExpandable()?a===!0||e==="bottom"?!1:!n.has(h)&&h.expanded:!1};for(let h=0;h<100;h++){let d=s+i;t||(d=s-i);const p=this.rowModel.getRowIndexAtPixel(d),f=this.rowModel.getRow(p);if(f==null)break;const y=this.getStickyAncestors(f).find(w=>(t?w.rowIndex<p:w.rowIndex>p)&&c(w));if(y){o(y);continue}if((t?f.rowTop<d:f.rowTop+f.rowHeight>d)&&c(f)){o(f);continue}break}return t||n.forEach(h=>{h.stickyRowTop=i-(h.stickyRowTop+h.rowHeight)}),this.refreshNodesAndContainerHeight(e,n,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;const t=!!this.gos.get("groupIncludeFooter")||e==="group",i=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&i?!0:i?"grand":t?"group":!1}canRowsBeSticky(){const e=jv(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const s=this.stickyTopRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const s=this.stickyBottomRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,i){const s=e==="top",n=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,o={},r=[];for(let f=0;f<n.length;f++){const v=n[f].getRowNode();if(!t.has(v)){o[v.id]=n[f],v.sticky=!1;continue}r.push(n[f])}const a=new Set;for(let f=0;f<r.length;f++)a.add(r[f].getRowNode());const c=[];t.forEach(f=>{a.has(f)||(f.sticky=!0,c.push(this.createRowCon(f,!1,!1)))});let h=!!c.length||r.length!==n.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),h=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),h=!0),this.destroyRowCtrls(o,!1);const d=[...r,...c];d.sort((f,v)=>v.getRowNode().rowIndex-f.getRowNode().rowIndex),s||d.reverse(),d.forEach(f=>f.setRowTop(f.getRowNode().stickyRowTop));let p=0;return s?(t.forEach(f=>{f.rowIndex<this.pageBoundsService.getFirstRow()&&(p+=f.rowHeight)}),p>this.topContainerHeight&&(p=this.topContainerHeight),this.setOffsetTop(p)):(t.forEach(f=>{f.rowIndex>this.pageBoundsService.getLastRow()&&(p+=f.rowHeight)}),p>this.bottomContainerHeight&&(p=this.bottomContainerHeight),this.setOffsetBottom(p)),h?(s?this.stickyTopRowCtrls=d:this.stickyBottomRowCtrls=d,!0):!1}ensureRowHeightsValid(){let e=!1;const t=i=>{const s=i.getRowNode();if(s.rowHeightEstimated){const n=Qa(this.gos,s);s.setRowHeight(n.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},mU=class extends te{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(o=>o.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},s=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Wr(this.gos)?i():s()}),Wr(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),jv(this.gos)&&(Vt(this.gos)||nr(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new fU(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=gs(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new vU(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=Lw(this.rowCtrlsByRowIndex),t=Lw(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{const i=c=>{this.getAllCellCtrls().forEach(h=>{h.getColumn()===t&&c(h)})},s=()=>{i(c=>c.onLeftChanged())},n=()=>{i(c=>c.onWidthChanged())},o=()=>{i(c=>c.onFirstRightPinnedChanged())},r=()=>{i(c=>c.onLastLeftPinnedChanged())},a=()=>{i(c=>c.onColDefChanged())};t.addEventListener("leftChanged",s),t.addEventListener("widthChanged",n),t.addEventListener("firstRightPinnedChanged",o),t.addEventListener("lastLeftPinnedChanged",r),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",s),t.removeEventListener("widthChanged",n),t.removeEventListener("firstRightPinnedChanged",o),t.removeEventListener("lastLeftPinnedChanged",r),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){const e=gs(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const s=i.getCellElement(e);s&&t.push(s)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:s,printLayout:n}=this,o=Object.fromEntries(e.map(a=>[a.getRowNode().id,a]));i.forEachPinnedRow(t,(a,c)=>{const h=e[c];h&&i.getPinnedRowById(h.getRowNode().id,t)===void 0&&(h.destroyFirstPass(),h.destroySecondPass()),a.id in o?(e[c]=o[a.id],delete o[a.id]):e[c]=new pc(a,s,!1,!1,n)});const r=t==="top"?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=r}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var i;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const s=n=>{const o=n[e.rowIndex];o&&o.getRowNode()===e&&(o.destroyFirstPass(),o.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":s(this.topRowCtrls);break;case"bottom":s(this.bottomRowCtrls);break;default:s(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const i=ni(this.gos),s=Rg(this.gos,i,gc.DOM_DATA_KEY_CELL_CTRL),n=Rg(this.gos,i,pc.DOM_DATA_KEY_ROW_CTRL);return s||n?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&ju(this.gos),n=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const o=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();o&&this.updateContainerHeights(o)}this.recycleRows(n,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var s;const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),(s=this.stickyRowFeature)==null||s.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,(t=(e=this.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const n=t[s].getAllCellCtrls(),o=n.length;for(let r=0;r<o;r++)e.push(n[r])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const s in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[s]);return i}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&ZT()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){var n;const t=this.getCellCtrls(e.rowNodes,e.columns).map(o=>o.getCellRenderer()).filter(o=>o!=null);if((n=e.columns)!=null&&n.length)return t;const i=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(o=>{if(s&&!this.isRowInMap(o.getRowNode(),s)||!o.isFullWidth())return;const r=o.getFullWidthCellRenderers();for(let a=0;a<r.length;a++){const c=r[a];c!=null&&i.push(c)}}),[...i,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const s=i.getCellEditor();s&&t.push(s)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(i=>{const s=i.id;switch(i.rowPinned){case"top":t.top[s]=i;break;case"bottom":t.bottom[s]=i;break;default:t.normal[s]=i;break}}),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(s=>{const n=s.getRowNode();return this.isRowInMap(n,t)})}getCellCtrls(e,t){let i;ge(t)&&(i={},t.forEach(n=>{const o=this.columnModel.getCol(n);ge(o)&&(i[o.getId()]=!0)}));const s=[];return this.getRowCtrls(e).forEach(n=>{n.getAllCellCtrls().forEach(o=>{const r=o.getColumn().getId();i&&!i[r]||s.push(o)})}),s}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];ao(this.rowCtrlsByRowIndex,(i,s)=>{s.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);const t={};return ao(this.rowCtrlsByRowIndex,(i,s)=>{const n=s.getRowNode();t[n.id]=s}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{const s=this.rowCtrlsByRowIndex[i];s&&(s.destroyFirstPass(t),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;this.stickyRowFeature&&ZT()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(this.stickyRowFeature){o=this.stickyRowFeature.checkStickyRows();const a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}const r=this.firstRenderedRow!==s||this.lastRenderedRow!==n;if(!(t&&!o&&!r)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),i!=null)){const a=this.getCellToRestoreFocusToAfterRefresh();i!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach(o=>i[o]=!0);const n=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!i[o]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){const t=bW(this.firstRenderedRow,this.lastRenderedRow),i=(n,o)=>{const r=o.getRowNode().rowIndex;r!=null&&(r<this.firstRenderedRow||r>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(o)&&t.push(r)};ao(this.rowCtrlsByRowIndex,i),ao(e,i),t.sort((n,o)=>n-o);const s=[];for(let n=0;n<t.length;n++){const o=t[n],r=this.rowModel.getRow(o);r&&!r.sticky&&s.push(o)}return s}recycleRows(e,t=!1,i=!1){const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t),s.forEach(n=>{this.createOrUpdateRowCtrl(n,e,t,i)}),e&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const s=i.getRowNode();return!(t!=null&&!this.isRowInMap(s,t))})}createOrUpdateRowCtrl(e,t,i,s){let n,o=this.rowCtrlsByRowIndex[e];if(o||(n=this.rowModel.getRow(e),ge(n)&&ge(t)&&t[n.id]&&n.alreadyRendered&&(o=t[n.id],t[n.id]=null)),!o)if(n||(n=this.rowModel.getRow(e)),ge(n))o=this.createRowCon(n,i,s);else return;return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const i=[];ao(e,(s,n)=>{if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);return}if(n.destroyFirstPass(!t),t){const o=n.instanceId;this.zombieRowCtrls[o]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[o]})}else n.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),z2(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=hc(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const a=this.getRowBufferInPixels(),c=this.ctrlsService.getGridBodyCtrl(),h=this.gos.get("suppressRowVirtualisation");let d=!1,p,f;do{const S=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:M,pageLastPixel:R}=this.pageBoundsService.getCurrentPagePixelRange(),A=this.rowContainerHeightService.getDivStretchOffset(),T=c.getScrollFeature().getVScrollPosition(),F=T.top,P=T.bottom;h?(p=M+A,f=R+A):(p=Math.max(F+S-a,M)+A,f=Math.min(P+S+a,R)+A),this.firstVisibleVPixel=Math.max(F+S,M)+A,this.lastVisibleVPixel=Math.min(P+S,R)+A,d=this.ensureAllRowsInRangeHaveHeightsCalculated(p,f)}while(d);let v=this.rowModel.getRowIndexAtPixel(p),y=this.rowModel.getRowIndexAtPixel(f);const b=this.pageBoundsService.getFirstRow(),w=this.pageBoundsService.getLastRow();v<b&&(v=b),y>w&&(y=w),e=v,t=y}const i=gs(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>n&&(t=e+n);const o=e!==this.firstRenderedRow,r=t!==this.lastRenderedRow;(o||r)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var o,r;const i=(o=this.pinnedRowModel)==null?void 0:o.ensureRowHeightsValid(),s=(r=this.stickyRowFeature)==null?void 0:r.ensureRowHeightsValid(),n=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(n||s)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),s||n||i?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const s=e.getRowNode(),n=this.focusService.isRowNodeFocused(s),o=e.isEditing(),r=s.detail;return n||o||r?!!this.isRowPresent(s):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const n=this.gos.get("suppressAnimationFrame"),o=i&&!n&&!this.printLayout;return new pc(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const s=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!s}},vU=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Os(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],Os(this.entriesList,e)}getEntries(){return this.entriesList}},yU=class extends te{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new rI,this.pinnedBottomRows=new rI}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const t=i=>{i.setRowHeight(i.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){var s,n;let e=!1,t=0;const i=o=>{if(o.rowHeightEstimated){const r=Qa(this.gos,o);o.setRowTop(t),o.setRowHeight(r.height),t+=r.height,e=!0}};return(s=this.pinnedBottomRows)==null||s.forEach(i),t=0,(n=this.pinnedTopRows)==null||n.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){i.clear();return}const s=mh(this.gos),n=t==="top"?Br.ID_PREFIX_TOP_PINNED:Br.ID_PREFIX_BOTTOM_PINNED,o=i.getIds(),r=[],a=new Set;let c=0,h=-1;for(const d of e){const p=(s==null?void 0:s({data:d,level:0,rowPinned:t}))??n+this.nextId++;if(a.has(p)){ne("Duplicate ID",p,"found for pinned row with data",d,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}h++,a.add(p),r.push(p);const f=i.getById(p);if(f!==void 0)f.data!==d&&f.setData(d),c+=this.setRowTopAndRowIndex(f,c,h),o.delete(p);else{const v=new Br(this.beans);v.id=p,v.data=d,v.rowPinned=t,c+=this.setRowTopAndRowIndex(v,c,h),i.push(v)}}o.forEach(d=>{var p;(p=i.getById(d))==null||p.clearRowTopAndRowIndex()}),i.removeAllById(o),i.setOrder(r)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(Qa(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){const t=e.getSize();if(t===0)return 0;const i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}},rI=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){const t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,i)=>{const s=this.cache[t];s&&e(s,i)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},CU=class extends te{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},SU=class extends te{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Ns(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Os(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&co("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(nr(this.gos))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s}),e}printCacheStatus(){this.gos.get("debug")&&co(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},bU={version:Pe,moduleName:"@ag-grid-community/row-node-block",beans:[SU]},wU=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){var e;return this.root&&((e=this.root)==null?void 0:e.key)===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){var e;return this.end&&((e=this.end)==null?void 0:e.key)===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const i=t[0].id===this.root.id,s=t.findIndex(n=>n.id===e.id);if(s>-1){const n=t.slice(0,s),o=t.slice(s+1);return this.setEndRange(e),i?{keep:n,discard:o}:{keep:o,discard:n}}else return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(i==null){const n=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&n.push(o)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find(n=>{var o;return n.id===((o=this.end)==null?void 0:o.id)}))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const n=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:n}}}},xU=class extends te{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,s){this.processClassRules(void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s,n){if(t==null&&e==null)return;const o={},r={},a=(c,h)=>{c.split(" ").forEach(d=>{d.trim()!=""&&h(d)})};if(t){const c=Object.keys(t);for(let h=0;h<c.length;h++){const d=c[h],p=t[d];let f;typeof p=="string"?f=this.expressionService.evaluate(p,i):typeof p=="function"&&(f=p(i)),a(d,v=>{f?o[v]=!0:r[v]=!0})}}e&&n&&Object.keys(e).forEach(c=>a(c,h=>{o[h]||(r[h]=!0)})),n&&Object.keys(r).forEach(n),Object.keys(o).forEach(s)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;return typeof i=="function"?s=i(t):s=i,typeof s=="string"&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(n=>{i(n)})}},Gm=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(Gm||{}),tk=class extends te{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:r,focusInnerElement:a,onFocusIn:c,onFocusOut:h,shouldStopEventPropagation:d,onTabKeyDown:p,handleKeyDown:f,eFocusableElement:v}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=a,this.eFocusableElement=v,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!r,this.providedFocusIn=c,this.providedFocusOut=h,this.providedShouldStopEventPropagation=d,this.providedOnTabKeyDown=p,this.providedHandleKeyDown=f}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new Ic(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){var c;const t=gi(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let n,o;e?(n=0,o=s):(n=s+1,o=i.length);const r=i.slice(n,o),a=this.gos.get("tabIndex");r.sort((h,d)=>{const p=parseInt(h.getAttribute("tabindex")||"0"),f=parseInt(d.getAttribute("tabindex")||"0");return f===a?1:p===a?-1:p===0?1:f===0?-1:p-f}),(c=r[e?r.length-1:0])==null||c.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},MU=class extends te{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:s}=this,n=[t,i],o={setTabIndex:b=>{n.forEach(w=>b!=null?w.setAttribute("tabindex",b):w.removeAttribute("tabindex"))}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:a,onFocusOut:c,focusInnerElement:h,handleKeyDown:d,onTabKeyDown:p,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:v,isFocusableContainer:y}=e;this.tabGuardCtrl=this.createManagedBean(new tk({comp:o,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:s,onFocusIn:a,onFocusOut:c,focusInnerElement:h,handleKeyDown:d,onTabKeyDown:p,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:v,isFocusableContainer:y}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=gi(this.gos).createElement("div"),i=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),Co(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];mn(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){Zx(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,i)}},DU=class extends Gt{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new MU(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,i){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,i)}},RU=0,AU=200,EU=class extends te{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,s=this.getPopupIndex(i);if(s!==-1){const v=this.popupList[s];v.alignedToElement=t}const n=t.getBoundingClientRect(),o=this.getParentRect(),r=this.keepXYWithinBounds(i,n.top-o.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;const h=o.right-o.left-a;let d;this.gos.get("enableRtl")?(d=f(),d<0&&(d=p(),this.setAlignedStyles(i,"left")),d>h&&(d=0,this.setAlignedStyles(i,"right"))):(d=p(),d>h&&(d=f(),this.setAlignedStyles(i,"right")),d<0&&(d=0,this.setAlignedStyles(i,"left"))),i.style.left=`${d}px`,i.style.top=`${r}px`;function p(){return n.right-o.left-2}function f(){return n.left-o.left-a}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,eventSource:o,alignSide:r="left",position:a="over",column:c,rowNode:h,type:d}=e,p=o.getBoundingClientRect(),f=this.getParentRect(),v=this.getPopupIndex(t);if(v!==-1){const b=this.popupList[v];b.alignedToElement=o}const y=()=>{let b=p.left-f.left;r==="right"&&(b-=t.offsetWidth-p.width);let w;return a==="over"?(w=p.top-f.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,p,f,e.nudgeY||0)==="under"?w=p.top-f.top+p.height:w=p.top-t.offsetHeight-(s||0)*2-f.top),{x:b,y:w}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,updatePosition:y,postProcessCallback:()=>this.callPostProcessPopup(d,t,o,null,c,h)})}shouldRenderUnderOrAbove(e,t,i,s){const n=i.bottom-t.bottom,o=t.top-i.top,r=e.offsetHeight+s;return n>r?"under":o>r||o>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i],{alignedToElement:n}=s;!n||(["right","left","over","above","under"].forEach(r=>{n.classList.remove(`ag-has-popup-positioned-${r}`),e.classList.remove(`ag-popup-positioned-${r}`)}),!t)||(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,s,n,o){const r=this.gos.getCallback("postProcessPopup");r&&r({column:n,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:s})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:s,nudgeY:n,skipObserver:o,updatePosition:r}=e,a={width:0,height:0},c=(h=!1)=>{let{x:d,y:p}=r();h&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,s&&(d+=s),n&&(p+=n),i&&(d=this.keepXYWithinBounds(t,d,1),p=this.keepXYWithinBounds(t,p,0)),t.style.left=`${d}px`,t.style.top=`${p}px`,e.postProcessCallback&&e.postProcessCallback())};if(c(),!o){const h=this.resizeObserverService.observeResize(t,()=>c(!0));setTimeout(()=>h(),AU)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=gi(this.gos);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),XF(t)}keepXYWithinBounds(e,t,i){const s=i===0,n=s?"clientHeight":"clientWidth",o=s?"top":"left",r=s?"height":"width",a=s?"scrollTop":"scrollLeft",c=gi(this.gos),h=c.documentElement,d=this.getPopupParent(),p=e.getBoundingClientRect(),f=d.getBoundingClientRect(),v=c.documentElement.getBoundingClientRect(),y=d===c.body,b=Math.ceil(p[r]);let S=y?(s?qF:nv)(h)+h[a]:d[n];y&&(S-=Math.abs(v[o]-f[o]));const M=S-b;return Math.min(Math.max(t,0),Math.abs(M))}addPopup(e){const t=gi(this.gos),{eChild:i,ariaLabel:s,alwaysOnTop:n,positionCallback:o,anchorToElement:r}=e;if(!t)return ne("could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(i);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(i);const c=this.createPopupWrapper(i,s,!!n),h=this.addEventListenersToPopup({...e,wrapperEl:c});return o&&o(),this.addPopupToPopupList(i,c,h,r),{hideFunc:h}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();ge(e.style.top)||(e.style.top=`${i.top*-1}px`),ge(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){const s=this.getPopupParent(),n=document.createElement("div");return this.environment.applyThemeClasses(n),n.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Co(e,"dialog"),eh(e,t),n.appendChild(e),s.appendChild(n),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){const t=gi(this.gos),i=this.getPopupParent(),{wrapperEl:s,eChild:n,closedCallback:o,afterGuiAttached:r,closeOnEsc:a,modal:c}=e;let h=!1;const d=y=>{if(!s.contains(ni(this.gos)))return;y.key===Z.ESCAPE&&!Gr(y)&&v({keyboardEvent:y})},p=y=>v({mouseEvent:y}),f=y=>v({touchEvent:y}),v=(y={})=>{const{mouseEvent:b,touchEvent:w,keyboardEvent:S,forceHide:M}=y;!M&&(this.isEventFromCurrentPopup({mouseEvent:b,touchEvent:w},n)||h)||(h=!0,i.removeChild(s),t.removeEventListener("keydown",d),t.removeEventListener("mousedown",p),t.removeEventListener("touchstart",f),t.removeEventListener("contextmenu",p),this.eventService.removeEventListener("dragStarted",p),o&&o(b||w||S),this.removePopupFromPopupList(n))};return r&&r({hidePopup:v}),window.setTimeout(()=>{a&&t.addEventListener("keydown",d),c&&(t.addEventListener("mousedown",p),this.eventService.addEventListener("dragStarted",p),t.addEventListener("touchstart",f),t.addEventListener("contextmenu",p))},0),v}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:RU++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(o=>o&&o()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=n,s.isAnchored=!0,n}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:n}=e,o=s.getBoundingClientRect(),r=p=>parseInt(p.substring(0,p.length-1),10),a=(p,f)=>{const v=i[p]-o[p],y=r(n.style[p]);return{initialDiff:v,lastDiff:v,initial:y,last:y,direction:f}},c=a("top",0),h=a("left",1),d=this.getFrameworkOverrides();return new di(p=>{d.wrapIncoming(()=>{d.setInterval(()=>{const f=t.getBoundingClientRect(),v=s.getBoundingClientRect();if(v.top==0&&v.left==0&&v.height==0&&v.width==0){e.hidePopup();return}const b=(w,S)=>{const M=r(n.style[S]);w.last!==M&&(w.initial=M,w.last=M);const R=f[S]-v[S];if(R!=w.lastDiff){const A=this.keepXYWithinBounds(n,w.initial+w.initialDiff-R,w.direction);n.style[S]=`${A}px`,w.last=A}w.lastDiff=R};b(c,"top"),b(h,"left")},200).then(f=>{p(()=>{f!=null&&window.clearInterval(f)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,n=i||s;if(!n)return!1;const o=this.getPopupIndex(t);if(o===-1)return!1;for(let r=o;r<this.popupList.length;r++){const a=this.popupList[r];if(nV(a.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=gi(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,n=this.getWrapper(e);if(!n||s<=1||!t.contains(e))return;const o=[],r=[];for(const f of i)f!==n&&(f.classList.contains("ag-always-on-top")?r.push(f):o.push(f));const a=[],c=r.length,p=n.classList.contains("ag-always-on-top")||!c?[...o,...r,n]:[...o,n,...r];for(let f=0;f<=s;f++){const v=p[f];if(i[f]===p[f]||v===n)continue;v.querySelectorAll("div").forEach(b=>{b.scrollTop!==0&&a.push([b,b.scrollTop])}),f===0?t.insertAdjacentElement("afterbegin",v):p[f-1].insertAdjacentElement("afterend",v)}for(;a.length;){const f=a.pop();f[0].scrollTop=f[1]}}},TU=["touchstart","touchend","touchmove","touchcancel"],ik=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new di(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,s){const n=dc(TU,t);e.addEventListener(t,i,{capture:!!s,passive:n})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},IU=class extends te{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===Z.UP,s=e===Z.DOWN,n=e===Z.LEFT;let o,r;if(i||s)r=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),o=t.column;else{const a=this.visibleColsService.getAllCols(),c=this.gos.get("enableRtl");r=t.rowIndex,o=n!==c?a[0]:it(a)}return{rowIndex:r,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case Z.UP:i=this.getCellAbove(i);break;case Z.DOWN:i=this.getCellBelow(i);break;case Z.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case Z.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,ne("unknown key for navigation ",e);break}i?s=this.isCellGoodToFocusOn(i):s=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let s=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(s=!0);const n=this.rowModel.getRow(e.rowIndex),o=s?void 0:this.getNextStickyPosition(n);return o||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!jv(this.gos)||!e||!e.sticky)return;const i=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex);let s=[];i?s=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,c)=>a.getRowNode().rowIndex-c.getRowNode().rowIndex):s=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,c)=>c.getRowNode().rowIndex-a.getRowNode().rowIndex);const n=t?-1:1,o=s.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),r=s[o+n];if(r)return{rowIndex:r.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=i:this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned,s=i?t===0:t===this.pageBoundsService.getFirstRow();let n=!1;if(s)return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(n=!0);const o=this.rowModel.getRow(e.rowIndex),r=n?void 0:this.getNextStickyPosition(o,!0);return r||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){var o;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColAfter(e.column);if(!n){n=t[0];const r=this.getRowBelow(e);if(st(r)||!r.rowPinned&&!(((o=this.paginationService)==null?void 0:o.isRowInPage(r))??!0))return null;i=r?r.rowIndex:null,s=r?r.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}getNextTabbedCellBackwards(e){var o;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColBefore(e.column);if(!n){n=it(t);const r=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(st(r)||!r.rowPinned&&!(((o=this.paginationService)==null?void 0:o.isRowInPage(r))??!0))return null;i=r?r.rowIndex:null,s=r?r.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}},As=(e,t)=>{for(const i in t)t[i]=e;return t},aI={...As("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...As("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...As("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...As("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...As("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...As("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...As("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...As("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...As("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...As("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...As("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...As("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...As("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...As("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...As("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},Ob={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},LU=(e,t)=>e.eventService.dispatchEvent(t),sk=class{};Reflect.defineProperty(sk,"name",{value:"GridApi"});var FU=class extends te{constructor(){super(),this.beanName="apiFunctionService",this.api=new sk,this.fns={...Ob,dispatchEvent:LU},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const t in aI)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var n;const{fns:i,beans:s}=this;i!==Ob&&(i[e]=((n=s==null?void 0:s.validationService)==null?void 0:n.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:s}}=this;return s?s(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:s}=this;if(!t)ne(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${s}`);else{const n=aI[e];i.assertModuleRegistered(n,`api.${e}`)&&ne(`API function '${e}' not registered to module '${n}'`)}}destroy(){super.destroy(),this.fns=Ob,this.beans=null}};function PU(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var kU=class extends te{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const s=[],n={};return e.forEach(o=>{const r=this.createDefFromColumn(o,t,i);let a=!0,c=r,h=o.getOriginalParent(),d=null;for(;h;){let p=null;if(h.isPadding()){h=h.getOriginalParent();continue}const f=n[h.getGroupId()];if(f){f.children.push(c),a=!1;break}if(p=this.createDefFromGroup(h),p&&(p.children=[c],n[p.groupId]=p,c=p,h=h.getOriginalParent()),h!=null&&d===h){a=!1;break}d=h}a&&s.push(c)}),s}createDefFromGroup(e){const t=Iw(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=Iw(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=e.isVisible()?void 0:!0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,s}},NU=class extends te{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:t,source:i,toIndex:s,finished:n}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:s,finished:n,source:i})}columnPinned(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,n=>n.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:s??null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,n=>n.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:s,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i})}columnResized(e,t,i,s=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:s,finished:t,source:i})}},OU=class extends te{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){const e=this.columnModel.getColDefCols();if(st(e)||!this.columnModel.isAlive())return[];const i=this.columnModel.getAllCols().map(s=>this.createStateItemFromColumn(s));return this.orderColumnStateList(i),i}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),s=e.isRowGroupActive()?t.indexOf(e):null,n=e.isPivotActive()?i.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,r=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,c=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:r,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:n,flex:c}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map((s,n)=>[s.getColId(),n]));e.sort((s,n)=>{const o=i.has(s.colId)?i.get(s.colId):-1,r=i.has(n.colId)?i.get(n.colId):-1;return o-r})}},GU=class extends te{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[],t=this.columnModel.getColTree();return jr(null,t,i=>{Ls(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];jr(null,t,s=>{if(Ls(s)){const n=s.getColGroupDef(),o={groupId:s.getGroupId(),open:n?n.openByDefault:void 0};i.push(o)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const s=[];e.forEach(n=>{const o=n.groupId,r=n.open,a=this.columnModel.getProvidedColGroup(o);a&&a.isExpanded()!==r&&(a.setExpanded(r),s.push(a))}),this.visibleColsService.refresh(t,!0),s.length&&this.eventDispatcher.groupOpened(s),this.columnAnimationService.finish()}},BU=class extends te{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const s=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const o=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=o-this.scrollPosition-this.scrollWidth,this.viewportRight=o-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,n=this.viewportRight+200,o=t<s&&i<s,r=t>n&&i>n;return!o&&!r}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=n=>{const o=n.getLeft();return ge(o)&&o>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),s=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,s,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach(o=>e[o.getId()]=!0);const n=(o,r,a)=>{let c=!1;for(let h=0;h<o.length;h++){const d=o[h];let p=!1;if(Ja(d))p=e[d.getId()]===!0;else{const v=d.getDisplayedChildren();v&&(p=n(v,r,a+1))}p&&(c=!0,r[a]||(r[a]=[]),r[a].push(d))}return c};n(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),n(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),n(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const e=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}},zU=class extends te{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(s){const n=e(s),o=typeof n;if(o==="string"||o==="number"||o==="boolean"){this.eGui=Fg("<span>"+n+"</span>");return}if(n==null){this.eGui=Fg("<span></span>");return}this.eGui=n}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},HU=class extends te{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},VU=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],lI=Object.fromEntries(VU.map((e,t)=>[e,t]));function _U(e,t){const i=(e.beanName?lI[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,s=(t.beanName?lI[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-s}function WU(e,t){return(e==null?void 0:e.beanName)==="gridDestroyService"?-1:0}var jU=class extends te{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){const i=this.registry[e];if(i!=null)return new i(...t)}},UU=class extends te{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){var t,i;this.runReadyCallbacksAsync=((i=(t=e.frameworkOverrides).runWhenReadyAsync)==null?void 0:i.call(t))??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>(e==null?void 0:e.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},YU=class extends te{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${i??"null"}.${s.getId()}`}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&s&&n}},KU=class extends te{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){Vt(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(s=>this.eventService.dispatchEvent(s)),this.events=[]};t?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},$U=class extends te{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):s&&(t="top",e=s-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(ge(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},cI={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},uI={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},hI={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},ZU=class extends te{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(cI),this.getSizeEl(uI),this.getSizeEl(hI)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(cI)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(uI)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(hI)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){var e;return((e=this.gridTheme)==null?void 0:e.getCssClass())||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const t=this.getThemeClasses();for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const i=t.offsetWidth;return i===dI?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${dI}px)`,i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);s==="no-styles"&&ne(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const n=this.resizeObserverService.observeResize(t,()=>{const o=this.measureSizeEl(e);o==="detached"||o==="no-styles"||(this.lastKnownValues.set(e,o),o!==s&&(s=o,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>n()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver(()=>{const i=this.readAncestorThemeClasses();qU(i,this.ancestorThemeClasses)||(this.ancestorThemeClasses=i,this.fireGridStylesChangedEvent("themeChanged"))});let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(;e;){const i=Array.from(e.classList).filter(s=>s.startsWith("ag-theme-"));for(const s of i)t.includes(s)||t.unshift(s);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:t,gridTheme:i}=this,s=e.get("theme")||null;s!==i&&(i==null||i.stopUse(),this.gridTheme=s,s==null||s.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){var e;(e=this.gridTheme)==null||e.stopUse(),this.gridTheme=null}},qU=(e,t)=>e.length===t.length&&e.findIndex((i,s)=>e[s]!==t[s])===-1,dI=15538,XU=class extends te{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new fh}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=Qm(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},dM=class kn extends te{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService,this.overlayService=t.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",kn.toggleKeyboardMode),t.addEventListener("mousedown",kn.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",kn.toggleKeyboardMode),t.removeEventListener("mousedown",kn.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=kn.keyboardModeActive,s=t.type==="keydown";s&&(t.ctrlKey||t.metaKey||t.altKey)||i!==s&&(kn.keyboardModeActive=s)}postConstruct(){const t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,i=>{this.gridCtrl=i.gridCtrl})}registerKeyboardFocusEvents(){const t=gi(this.gos);kn.addKeyboardModeEvents(t),kn.instanceCount++,this.addDestroyFunc(()=>{kn.instanceCount--,kn.removeKeyboardModeEvents(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const t=this.focusedCellPosition.column,i=this.columnModel.getCol(t.getId());t!==i&&this.clearFocusedCell()}isKeyboardMode(){return kn.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(ni(this.gos),pc.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(ni(this.gos),Zv.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,i){let s=t;for(;s;){if(Rg(this.gos,s,i))return!1;s=s.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(t,i){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(t),i())})}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(t){const{rowIndex:i,rowPinned:s,column:n}=t,o={rowIndex:i,rowPinned:s,column:n,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:s});return r&&(o.isFullWidthCell=r.isFullWidth()),o}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const t=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...t})}setFocusedCell(t){const{column:i,rowIndex:s,rowPinned:n,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:r=!1}=t,a=this.columnModel.getCol(i);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:s,rowPinned:Or(n),column:a},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:o,preventScrollOnBrowserFocus:r})}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;const i=t.getColumnGroupChild(),s=t.getRowIndex(),n=t.getPinned(),{column:o,headerRowIndex:r}=this.focusedHeaderPosition;return i===o&&s===r&&n==o.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,i){this.focusedHeaderPosition={headerRowIndex:t,column:i}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(t){var h;if(this.isHeaderFocusSuppressed())return!1;const{direction:i,fromTab:s,allowUserOverride:n,event:o,fromCell:r,rowWithoutSpanValue:a}=t;let{headerPosition:c}=t;if(r&&((h=this.filterManager)!=null&&h.isAdvancedFilterHeaderActive()))return this.focusAdvancedFilter(c);if(n){const d=this.getFocusedHeader(),p=this.headerNavigationService.getHeaderRowCount();if(s){const f=this.gos.getCallback("tabToNextHeader");f&&(c=this.getHeaderPositionFromUserFunc({userFunc:f,direction:i,currentPosition:d,headerPosition:c,headerRowCount:p}))}else{const f=this.gos.getCallback("navigateToNextHeader");if(f&&o){const v={key:o.key,previousHeaderPosition:d,nextHeaderPosition:c,headerRowCount:p,event:o};c=f(v)}}}return c?this.focusProvidedHeaderPosition({headerPosition:c,direction:i,event:o,fromCell:r,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(t){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:i,headerPosition:s,direction:n,event:o}=t,r=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),c=this.getHeaderPositionFromUserFunc({userFunc:i,direction:n,currentPosition:r,headerPosition:s,headerRowCount:a});return!!c&&this.focusProvidedHeaderPosition({headerPosition:c,direction:n,event:o})}getHeaderPositionFromUserFunc(t){const{userFunc:i,direction:s,currentPosition:n,headerPosition:o,headerRowCount:r}=t,c=i({backwards:s==="Before",previousHeaderPosition:n,nextHeaderPosition:o,headerRowCount:r});return c===!0||c===null?(c===null&&ne("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),n):c===!1?null:c}focusProvidedHeaderPosition(t){var p;const{headerPosition:i,direction:s,fromCell:n,rowWithoutSpanValue:o,event:r}=t,{column:a,headerRowIndex:c}=i;if(c===-1)return(p=this.filterManager)!=null&&p.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(i):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,s);const h=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned()),d=(h==null?void 0:h.focusHeader(i.headerRowIndex,a,r))||!1;return d&&(o!=null||n)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(o??-1),d}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));const i=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const i=this.headerNavigationService.getHeaderRowCount()-1,s=it(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:s},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){var i;return(i=this.filterManager)!=null&&i.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,i){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===Or(i)}findFocusableElements(t,i,s=!1){const n=UV;let o=ZF;i&&(o+=", "+i),s&&(o+=', [tabindex="-1"]');const r=Array.prototype.slice.apply(t.querySelectorAll(n)).filter(h=>$o(h)),a=Array.prototype.slice.apply(t.querySelectorAll(o));return a.length?((h,d)=>h.filter(p=>d.indexOf(p)===-1))(r,a):r}focusInto(t,i=!1,s=!1){const n=this.findFocusableElements(t,null,s),o=i?it(n):n[0];return o?(o.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,i){if(!i)return null;const s=this.findFocusableElements(t),n=s.indexOf(i);if(n===-1)return null;let o=-1;for(let r=n-1;r>=0;r--)if(s[r].classList.contains("ag-tab-guard-top")){o=r;break}return o<=0?null:s[o-1]}findNextFocusableElement(t=this.eGridDiv,i,s){const n=this.findFocusableElements(t,i?':not([tabindex="-1"])':null),o=ni(this.gos);let r;i?r=n.findIndex(c=>c.contains(o)):r=n.indexOf(o);const a=r+(s?-1:1);return a<0||a>=n.length?null:n[a]}isTargetUnderManagedComponent(t,i){if(!i)return!1;const s=t.querySelectorAll(`.${Ic.FOCUS_MANAGED_CLASS}`);if(!s.length)return!1;for(let n=0;n<s.length;n++)if(s[n].contains(i))return!0;return!1}findTabbableParent(t,i=5){let s=0;for(;t&&Nw(t)===null&&++s<=i;)t=t.parentElement;return Nw(t)===null?null:t}focusOverlay(t){var s;const i=this.overlayService.isVisible()&&((s=this.overlayService.getOverlayWrapper())==null?void 0:s.getGui());return!!i&&this.focusInto(i,t)}focusGridViewFailed(t,i){return i&&this.focusOverlay(t)||t&&this.focusLastHeader()}focusGridView(t,i=!1,s=!0){var o,r;if(this.overlayService.isExclusive())return s&&this.focusOverlay(i);if(this.isCellFocusSuppressed())return i&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():s&&this.focusOverlay(i)?!0:this.focusNextGridCoreContainer(!1);const n=i?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(n){const{rowIndex:a,rowPinned:c}=n;if(t??(t=(o=this.getFocusedHeader())==null?void 0:o.column),t&&a!==void 0&&a!==null){if(this.navigationService.ensureCellVisible({rowIndex:a,column:t,rowPinned:c}),i){const h=this.rowRenderer.getRowByPosition(n);if(h!=null&&h.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(n,i))return!0}return this.setFocusedCell({rowIndex:a,column:t,rowPinned:Or(c),forceBrowserFocus:!0}),(r=this.rangeService)==null||r.setRangeToCell({rowIndex:a,rowPinned:c,column:t}),!0}}return!!(s&&this.focusOverlay(i)||i&&this.focusLastHeader())}isGridFocused(){const t=ni(this.gos);return!!t&&this.eGridDiv.contains(t)}focusNextGridCoreContainer(t,i=!1){return!i&&this.gridCtrl.focusNextInnerContainer(t)?!0:((i||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var i;return this.advancedFilterFocusColumn=t==null?void 0:t.column,((i=this.advancedFilterService)==null?void 0:i.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(t,i){var n;const s=(i?void 0:this.advancedFilterFocusColumn)??((n=this.visibleColsService.getAllCols())==null?void 0:n[0]);return t?this.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(s)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}allowFocusForNextGridCoreContainer(t){this.gridCtrl.allowFocusForNextCoreContainer(t)}};dM.keyboardModeActive=!1;dM.instanceCount=0;var QU=dM,JU=class extends te{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=gs(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},e3=class extends te{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:s,mouseEventService:n,ctrlsService:o,resizeObserverService:r}=this.beans,a={getContainer:()=>this.eGui,isInterestedIn:h=>h===1||h===0,getIconName:()=>"notAllowed"};s.addDropTarget(a),this.addDestroyFunc(()=>s.removeDropTarget(a)),n.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new hM(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const c=r.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>c()),o.register("gridCtrl",this)}isDetailGrid(){var t;const e=this.focusService.findTabbableParent(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,i,s,n,o;const e=this.beans;return{paginationSelector:(t=e.paginationService)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(i=e.columnDropZonesService)==null?void 0:i.getDropZoneSelector(),sideBarSelector:(s=e.sideBarService)==null?void 0:s.getSideBarSelector(),statusBarSelector:(n=e.statusBarService)==null?void 0:n.getStatusPanelSelector(),watermarkSelector:(o=e.licenseManager)==null?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:s}=this.getNextFocusableIndex(t,e);if(s<0||s>=t.length)return!1;if(s===0){if(i>0){const n=this.visibleColsService.getAllCols(),o=it(n);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),s=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(it(i),!0);const n=it(s);if(this.focusService.focusGridView(n,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(s[0]))return!0;for(let n=1;n<i.length;n++)if(this.focusService.focusInto(i[n].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var o;const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:s}=this.getNextFocusableIndex(t,e);if(s===-1||i<0||i>=t.length)return;const n=t[i];(o=n.setAllowFocus)==null||o.call(n,!0),setTimeout(()=>{var r;(r=n.setAllowFocus)==null||r.call(n,!1)})}getNextFocusableIndex(e,t){const i=ni(this.gos),s=e.findIndex(o=>o.getGui().contains(i)),n=s+(t?-1:1);return{indexWithFocus:s,nextIndex:n}}focusContainer(e,t){var s,n;(s=e.setAllowFocus)==null||s.call(e,!0);const i=this.focusService.focusInto(e.getGui(),t);return(n=e.setAllowFocus)==null||n.call(e,!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},t3=class extends te{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";typeof e=="function"&&(e=e());const i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(n=>{var r;if(!n){dt("alignedGrids contains an undefined option."),t||dt(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),dt(i());return}if(this.isGridApi(n))return n;const o=n;return"current"in o?(r=o.current)==null?void 0:r.api:(o.api||dt(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),o.api)}).filter(n=>!!n&&!n.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(s=>{i.push(t(s))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":ne("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){const{columnModel:t}=this;e.columnGroups.forEach(i=>{let s=null;i&&(s=t.getProvidedColGroup(i.getGroupId())),!(i&&!s)&&t.setColumnGroupOpened(s,i.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){var h;const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const s=this.getMasterColumns(e),{columnApplyStateService:n,columnSizeService:o,ctrlsService:r}=this;switch(e.type){case"columnMoved":{const p=e.api.getColumnState().map(f=>({colId:f.colId}));n.applyColumnState({state:p,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const p=e.api.getColumnState().map(f=>({colId:f.colId,hide:f.hide}));n.applyColumnState({state:p},"alignedGridChanged")}break;case"columnPinned":{const p=e.api.getColumnState().map(f=>({colId:f.colId,pinned:f.pinned}));n.applyColumnState({state:p},"alignedGridChanged")}break;case"columnResized":{const d=e,p={};s.forEach(f=>{p[f.getId()]={key:f.getColId(),newWidth:f.getActualWidth()}}),(h=d.flexColumns)==null||h.forEach(f=>{p[f.getId()]&&delete p[f.getId()]}),o.setColumnWidths(Object.values(p),!1,d.finished,"alignedGridChanged");break}}const c=r.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(d=>{d.setGridOption("alwaysShowVerticalScroll",c)})}},i3={version:Pe,moduleName:"@ag-grid-community/aligned-grid",beans:[t3]};function s3(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null}function n3(e){return e.columnModel.getColumnDefs()}function o3(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function r3(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")}function a3(e,t,i){return e.visibleColsService.getColumnGroup(t,i)}function l3(e,t){return e.columnModel.getProvidedColGroup(t)}function c3(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""}function u3(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""}function h3(e,t){return e.columnModel.getColDefCol(t)}function d3(e){return e.columnModel.getColDefCols()}function g3(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function p3(e){return e.columnGetStateService.getColumnState()}function f3(e){e.columnApplyStateService.resetColumnState("api")}function m3(e){return e.columnGroupStateService.getColumnGroupState()}function v3(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function y3(e){e.columnGroupStateService.resetColumnGroupState("api")}function C3(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function S3(e){return e.visibleColsService.isPinningLeft()}function b3(e){return e.visibleColsService.isPinningRight()}function w3(e,t){return e.visibleColsService.getColAfter(t)}function x3(e,t){return e.visibleColsService.getColBefore(t)}function M3(e,t,i){e.columnModel.setColsVisible([t],i,"api")}function D3(e,t,i){e.columnModel.setColsVisible(t,i,"api")}function R3(e,t,i){e.columnModel.setColsPinned([t],i,"api")}function A3(e,t,i){e.columnModel.setColsPinned(t,i,"api")}function E3(e){return e.columnModel.getCols()}function T3(e){return e.visibleColsService.getLeftCols()}function I3(e){return e.visibleColsService.getCenterCols()}function L3(e){return e.visibleColsService.getRightCols()}function F3(e){return e.visibleColsService.getAllCols()}function P3(e){return e.columnViewportService.getViewportColumns()}function k3(e,t,i){e.columnMoveService.moveColumns([t],i,"api")}function N3(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")}function O3(e,t,i){e.columnMoveService.moveColumns(t,i,"api")}function G3(e,t,i,s=!0,n="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,s,n)}function B3(e,t,i=!0,s="api"){e.columnSizeService.setColumnWidths(t,!1,i,s)}function z3(e){return e.visibleColsService.getTreeLeft()}function H3(e){return e.visibleColsService.getTreeCenter()}function V3(e){return e.visibleColsService.getTreeRight()}function _3(e){return e.visibleColsService.getAllTrees()}function W3(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})}function j3(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})}function U3(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var Y3=class extends te{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(ic(e.source))})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=s=>n=>{const{column:o,node:r,value:a}=n;let c=o.getColDef().valueFormatter;return c===s.groupSafeValueFormatter&&(c=s.valueFormatter),this.valueService.formatValue(o,r,a,c)};Object.entries(e).forEach(([s,n])=>{const o={...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)};this.dataTypeDefinitions[s]=o,this.formatValueFuncs[s]=t(o)});const i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach(([s,n])=>{const o=this.processDataTypeDefinition(n,i,[s],e);o&&(this.dataTypeDefinitions[s]=o,n.dataTypeMatcher&&(this.dataTypeMatchers[s]=n.dataTypeMatcher),this.formatValueFuncs[s]=t(o))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(s=>{const n=this.dataTypeMatchers[s];n&&delete this.dataTypeMatchers[s],this.dataTypeMatchers[s]=n??e[s].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...Om(e.columnTypes),...Om(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let n;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let r=s[o];const a=t[o];if(r&&a&&(r=a),!this.validateDataTypeDefinition(e,r,o))return;n=this.mergeDataTypeDefinitions(r,e)}else{if(i.includes(o)){ne('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const r=t[o];if(!this.validateDataTypeDefinition(e,r,o))return;const a=this.processDataTypeDefinition(r,t,[...i,o],s);if(!a)return;n=this.mergeDataTypeDefinitions(a,e)}return{...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(ne('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(ne(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i,s;if((i=t.node)!=null&&i.group){const n=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!((s=e.dataTypeMatcher)!=null&&s.call(e,t.value)))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:s}=t;const{field:n}=t;if(s===void 0&&(s=e.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(e,t)?this.inferCellDataType(n,i):!1),!s){e.cellDataType=!1;return}const o=this.dataTypeDefinitions[s];if(!o){ne(`Missing data type definition - "${s}"`);return}return e.cellDataType=s,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,o,i),o.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=s=>{t.add(s.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){if(!Vt(this.gos))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const s=t.type===null?e.type:t.type;if(s){const n=this.gos.get("columnTypes")??{};if(Om(s).some(r=>{const a=n[r.trim()];return a&&this.doColDefPropsPreventInference(a,i)}))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,s])=>this.doesColDefPropPreventInference(e,t,i,s))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const n=e[i];return n===null?(t[i]=!1,!1):s===void 0?!!n:n===s}inferCellDataType(e,t){if(!e)return;let i;const s=this.getInitialData();if(s){const o=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=ug(s,e,o)}else this.initWaitForRowData(t);if(i==null)return;const[n]=Object.entries(this.dataTypeMatchers).find(([o,r])=>r(i))??["object"];return n}getInitialData(){const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t!=null&&t.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:s=>{const{firstRowData:n}=s;n&&(i==null||i(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(n,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const s={},n={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([o,r])=>{const a=this.columnModel.getCol(o);if(!a)return;const c=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const h=a.getColDef();if(t&&h.type&&h.type!==c.type){const d=this.getUpdatedColumnState(a,r);d.rowGroup&&d.rowGroupIndex==null&&(s[o]=d),d.pivot&&d.pivotIndex==null&&(n[o]=d),i.push(d)}}),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(s,n)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(s=>{delete i[s],s==="rowGroup"?delete i.rowGroupIndex:s==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var s;if(t==null)return!0;const i=(s=this.getDataTypeDefinition(e))==null?void 0:s.dataTypeMatcher;return i?i(t):!0}validateColDef(e){const t=i=>ne(`Cell data type is "object" but no Value ${i} has been provided. Please either provide an object data type definition with a Value ${i}, or set "colDef.value${i}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,s){var o;const n=this.formatValueFuncs[t];switch(i.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=r=>!!r.colDef.editable&&r.event.key===Z.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=n;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=n;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(r,a)=>{const c=this.columnModel.getColDefCol(s),h=c==null?void 0:c.getColDef();if(!c||!h)return 0;const d=r==null?"":n({column:c,node:null,value:r}),p=a==null?"":n({column:c,node:null,value:a});return d===p?0:d>p?1:-1},e.keyCreator=n;break}}(o=this.filterManager)==null||o.setColDefPropertiesForDataType(e,i,n)}getDefaultDataTypes(){const e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var s,n;return((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:xw(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var s,n;return i.newValue==null?i.newValue:((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Xs(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):Un(i.value,!1)??"",dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>Xs(i)??void 0,dateFormatter:i=>Un(i??null,!1)??void 0,valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>xw(i.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},K3={version:Pe,moduleName:"@ag-grid-community/data-type",beans:[Y3]},$3={version:Pe,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:s3,getColumnDefs:n3,sizeColumnsToFit:o3,setColumnGroupOpened:r3,getColumnGroup:a3,getProvidedColumnGroup:l3,getDisplayNameForColumn:c3,getDisplayNameForColumnGroup:u3,getColumn:h3,getColumns:d3,applyColumnState:g3,getColumnState:p3,resetColumnState:f3,getColumnGroupState:m3,setColumnGroupState:v3,resetColumnGroupState:y3,isPinning:C3,isPinningLeft:S3,isPinningRight:b3,getDisplayedColAfter:w3,getDisplayedColBefore:x3,setColumnVisible:M3,setColumnsVisible:D3,setColumnPinned:R3,setColumnsPinned:A3,getAllGridColumns:E3,getDisplayedLeftColumns:T3,getDisplayedCenterColumns:I3,getDisplayedRightColumns:L3,getAllDisplayedColumns:F3,getAllDisplayedVirtualColumns:P3,moveColumn:k3,moveColumnByIndex:N3,moveColumns:O3,setColumnWidth:G3,setColumnWidths:B3,getLeftDisplayedColumnGroups:z3,getCenterDisplayedColumnGroups:H3,getRightDisplayedColumnGroups:V3,getAllDisplayedColumnGroups:_3,autoSizeColumn:W3,autoSizeColumns:j3,autoSizeAllColumns:U3}};function Z3(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function q3(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)}function X3(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var Q3={version:Pe,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:Z3,removeRowDropZone:q3,getRowDropZoneParams:X3}};function J3(e){return e.pinnedRowModel.getPinnedTopRowCount()}function eY(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function tY(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function iY(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var sY={version:Pe,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:J3,getPinnedBottomRowCount:eY,getPinnedTopRow:tY,getPinnedBottomRow:iY}};function nY(e){e.overlayService.showLoadingOverlay()}function oY(e){e.overlayService.showNoRowsOverlay()}function rY(e){e.overlayService.hideOverlay()}var aY={version:Pe,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:nY,showNoRowsOverlay:oY,hideOverlay:rY}};function lY(e,t,i){if(!t)return;const s=e.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${t}`;i===null?s.removeAttribute(n):s.setAttribute(n,i)}function cY(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function uY(e,t={}){const i=s=>ne(`Since v31.1 api.flashCells parameter '${s}Delay' is deprecated. Please use '${s}Duration' instead.`);ge(t.fadeDelay)&&i("fade"),ge(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function hY(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function dY(e){return e.animationFrameService.isQueueEmpty()}function gY(e){e.animationFrameService.flushAllFrames()}function pY(e){return{rowHeight:hc(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function fY(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(dg)}var mY={version:Pe,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:lY,refreshCells:cY,flashCells:uY,refreshHeader:hY,isAnimationFrameQueueEmpty:dY,flushAllAnimationFrames:gY,getSizesForCurrentTheme:pY,getCellRendererInstances:fY}};function vY(e){e.valueCache.expire()}function yY(e,t,i){return nk(e,{colKey:t,rowNode:i})}function nk(e,t){const{colKey:i,rowNode:s,useFormatter:n}=t,o=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(st(o))return null;const r=e.valueService.getValueForDisplay(o,s);return n?e.valueService.formatValue(o,s,r)??Wo(r,!0):r}function CY(e){return e.context.getGridId()}function SY(e){e.gridDestroyService.destroy()}function bY(e){return e.gridDestroyService.isDestroyCalled()}function wY(e,t){return e.gos.get(t)}function xY(e,t,i){ok(e,{[t]:i})}function ok(e,t){e.gos.updateGridOptions({options:t})}function MY(e,t,i){e.apiEventService.addEventListener(t,i)}function DY(e,t,i){e.apiEventService.removeEventListener(t,i)}function RY(e,t){e.apiEventService.addGlobalListener(t)}function AY(e,t){e.apiEventService.removeGlobalListener(t)}function EY(e){return e.focusService.getFocusedCell()}function TY(e){return e.focusService.clearFocusedCell()}function IY(e,t,i,s){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:s,forceBrowserFocus:!0})}function LY(e,t){return e.navigationService.tabToNextCell(!1,t)}function FY(e,t){return e.navigationService.tabToNextCell(!0,t)}function PY(e,t,i=!1){const s=e.headerNavigationService.getHeaderPositionForColumn(t,i);s&&e.focusService.focusHeaderPosition({headerPosition:s})}function kY(e,t,i){const s=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:s,buttonElement:i,positionBy:"button"})}function NY(e,t,i){let s=e.columnModel.getCol(t);if(s||(s=e.columnModel.getColDefCol(t)),!s){dt(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:s,mouseEvent:i,positionBy:"mouse"})}function OY(e,t){const i=e.columnModel.getCol(t);if(!i){dt(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,positionBy:"auto"})}function GY(e){e.menuService.hidePopupMenu()}function BY(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function zY(e,t,i,s,n){e.expansionService.setRowNodeExpanded(t,i,s,n)}function HY(e,t){return e.rowModel.getRowNode(t)}function VY(e,t,i,s){e.rowRenderer.addRenderedRowListener(t,i,s)}function _Y(e){return e.rowRenderer.getRenderedNodes()}function WY(e,t,i){e.rowModel.forEachNode(t,i)}function jY(e){return rk(e)}function rk(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function UY(e){return ak(e)}function ak(e){return e.rowRenderer.getLastVirtualRenderedRow()}function YY(e,t){return e.rowModel.getRow(t)}function KY(e){return e.rowModel.getRowCount()}function $Y(e){return e.rowModel}function ZY(e,t){if(!t.nodes.every(a=>a.rowPinned?(ne("cannot select pinned rows"),!1):a.id===void 0?(ne("cannot select node until id for node is known"),!1):!0))return;const{nodes:s,source:n,newValue:o}=t,r=s;e.selectionService.setNodesSelected({nodes:r,source:n??"api",newValue:o})}function qY(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function XY(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function QY(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function JY(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function eK(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function tK(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function iK(e){return e.selectionService.getSelectedNodes()}function sK(e){return e.selectionService.getSelectedRows()}function nK(e){e.sortController.onSortChanged("api")}var oK={version:Pe,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:CY,destroy:SY,isDestroyed:bY,getGridOption:wY,setGridOption:xY,updateGridOptions:ok}},rK={version:Pe,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:ZY,selectAll:qY,deselectAll:XY,selectAllFiltered:QY,deselectAllFiltered:JY,selectAllOnCurrentPage:eK,deselectAllOnCurrentPage:tK,getSelectedNodes:iK,getSelectedRows:sK}},aK={version:Pe,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:BY,setRowNodeExpanded:zY,getRowNode:HY,addRenderedRowListener:VY,getRenderedNodes:_Y,forEachNode:WY,getFirstDisplayedRow:jY,getFirstDisplayedRowIndex:rk,getLastDisplayedRow:UY,getLastDisplayedRowIndex:ak,getDisplayedRowAtIndex:YY,getDisplayedRowCount:KY,getModel:$Y}},lK={version:Pe,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:K4,getHorizontalPixelRange:$4,ensureColumnVisible:QP,ensureIndexVisible:JP,ensureNodeVisible:Z4}},cK={version:Pe,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:EY,clearFocusedCell:TY,setFocusedCell:IY,setFocusedHeader:PY,tabToNextCell:LY,tabToPreviousCell:FY}},uK={version:Pe,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:MY,addGlobalListener:RY,removeEventListener:DY,removeGlobalListener:AY}},hK={version:Pe,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:vY,getValue:yY,getCellValue:nk}},dK={version:Pe,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:kY,showColumnMenuAfterMouseClick:NY,showColumnMenu:OY,hidePopupMenu:GY}},gK={version:Pe,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:nK}},pK={version:Pe,moduleName:"@ag-grid-community/api",dependantModules:[oK,sY,rK,$3,aK,Q3,lK,aY,cK,uK,mY,hK,dK,gK]};function fK(e){var t;return((t=e.stateService)==null?void 0:t.getState())??{}}function mK(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=vK(e)}return e}function vK(e){return e.cellSelection=yK(e,"rangeSelection"),e}function yK(e,t){if(e&&typeof e=="object")return e[t]}var CK=class extends te{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Ns(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Ns(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Ns(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=Vt(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",Pe),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:({source:s})=>{s==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t==null||t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{i==null||i(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return mK(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:s}=this.getInitialState(),n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),s&&this.setPaginationState(s),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const o=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:o,columnRowGroupChanged:o,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{o()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:s}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!(s!=null&&s.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const n=this.getRangeSelectionState();this.updateCachedState("rangeSelection",n),this.updateCachedState("cellSelection",n),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:o=>{if(o.finished){const r=this.getRangeSelectionState();this.updateCachedState("rangeSelection",r),this.updateCachedState("cellSelection",r)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],s=[],n=[],o=[],r=[],a=[],c=[],h=[];let d=0;const p=this.columnGetStateService.getColumnState();for(let f=0;f<p.length;f++){const{colId:v,sort:y,sortIndex:b,rowGroup:w,rowGroupIndex:S,aggFunc:M,pivot:R,pivotIndex:A,pinned:T,hide:F,width:P,flex:N}=p[f];h.push(v),y&&(t[b??d++]={colId:v,sort:y}),w&&(i[S??0]=v),typeof M=="string"&&s.push({colId:v,aggFunc:M}),R&&(n[A??0]=v),T&&(T==="right"?r:o).push(v),F&&a.push(v),(N||P)&&c.push({colId:v,flex:N??void 0,width:P})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:n.length||e?{pivotMode:e,pivotColIds:n}:void 0,columnPinning:o.length||r.length?{leftColIds:o,rightColIds:r}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:c.length?{columnSizingModel:c}:void 0,columnOrder:h.length?{orderedColIds:h}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:s,pivot:n,columnPinning:o,columnVisibility:r,columnSizing:a,columnOrder:c,partialColumnState:h}=e,d={},p=w=>{let S=d[w];return S||(S={colId:w},d[w]=S,S)},f=h?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:w,sort:S},M)=>{const R=p(w);R.sort=S,R.sortIndex=M}),f.sort=null,f.sortIndex=null),i&&(i.groupColIds.forEach((w,S)=>{const M=p(w);M.rowGroup=!0,M.rowGroupIndex=S}),f.rowGroup=null,f.rowGroupIndex=null),s&&(s.aggregationModel.forEach(({colId:w,aggFunc:S})=>{p(w).aggFunc=S}),f.aggFunc=null),n&&(n.pivotColIds.forEach((w,S)=>{const M=p(w);M.pivot=!0,M.pivotIndex=S}),this.gos.updateGridOptions({options:{pivotMode:n.pivotMode},source:"gridInitializing"}),f.pivot=null,f.pivotIndex=null),o&&(o.leftColIds.forEach(w=>{p(w).pinned="left"}),o.rightColIds.forEach(w=>{p(w).pinned="right"}),f.pinned=null),r&&(r.hiddenColIds.forEach(w=>{p(w).hide=!0}),f.hide=null),a&&(a.columnSizingModel.forEach(({colId:w,flex:S,width:M})=>{const R=p(w);R.flex=S??null,R.width=M}),f.flex=null);const v=c==null?void 0:c.orderedColIds,y=!!(v!=null&&v.length),b=y?v.map(w=>p(w)):Object.values(d);b.length&&(this.columnStates=b,this.columnApplyStateService.applyColumnState({state:b,applyOrder:y,defaultState:f},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){const s=[];for(const n of t)this.pivotResultColsService.getPivotResultCol(n.colId)&&s.push(n);this.columnApplyStateService.applyColumnState({state:s,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:s})=>{s&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var n;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set((n=e.columnGroup)==null?void 0:n.openColumnGroupIds),s=this.columnGroupStateService.getColumnGroupState().map(({groupId:o})=>{const r=t.has(o);return r&&t.delete(o),{groupId:o,open:r}});t.forEach(o=>{s.push({groupId:o,open:!0})}),s.length&&(this.columnGroupStates=s),this.columnGroupStateService.setColumnGroupState(s,"gridInitializing")}getFilterState(){var i,s;let e=(i=this.filterManager)==null?void 0:i.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const t=((s=this.filterManager)==null?void 0:s.getAdvancedFilterModel())??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){var n,o;const{filterModel:i,advancedFilterModel:s}=e??{advancedFilterModel:t};i&&((n=this.filterManager)==null||n.setFilterModel(i,"columnFilter")),s&&((o=this.filterManager)==null||o.setAdvancedFilterModel(s))}getRangeSelectionState(){var t;const e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(i=>{const{id:s,type:n,startRow:o,endRow:r,columns:a,startColumn:c}=i;return{id:s,type:n,startRow:o,endRow:r,colIds:a.map(h=>h.getColId()),startColId:c.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeService:i,columnModel:s,visibleColsService:n}=this;if(!Wr(t)||!i)return;const o=[];if(e.cellRanges.forEach(r=>{const a=[];if(r.colIds.forEach(h=>{const d=s.getCol(h);d&&a.push(d)}),!a.length)return;let c=s.getCol(r.startColId);if(!c){const h=n.getAllCols(),d=new Set(a);c=h.find(p=>d.has(p))}o.push({...r,columns:a,startColumn:c})}),$2(t)&&Z2(t)&&o.length>1)return ne("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(o)}getScrollState(){var s;if(!this.isClientSideRowModel)return;const e=(s=this.ctrlsService.getGridBodyCtrl())==null?void 0:s.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:i}=(e==null?void 0:e.getVScrollPosition())??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){var s;if(!this.isClientSideRowModel)return;const{top:t,left:i}=e;(s=this.ctrlsService.getGridBodyCtrl())==null||s.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){var e,t;return(t=(e=this.sideBarService)==null?void 0:e.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:s}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){var i;const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((i=e==null?void 0:e.toggledNodes)!=null&&i.length)?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach(([s,n])=>{Dg(n,this.cachedState[s])||(i=!0)}),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),Dg(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},lk={version:Pe,moduleName:"@ag-grid-community/state-core",beans:[CK]},SK={version:Pe,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:fK},dependantModules:[lk]},bK={version:Pe,moduleName:"@ag-grid-community/state",dependantModules:[lk,SK]};function wK(e){return e.rowModel.isLastRowIndexKnown()}function xK(e){var t;return((t=e.paginationService)==null?void 0:t.getPageSize())??100}function MK(e){var t;return((t=e.paginationService)==null?void 0:t.getCurrentPage())??0}function DK(e){var t;return((t=e.paginationService)==null?void 0:t.getTotalPages())??1}function RK(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function AK(e){var t;(t=e.paginationService)==null||t.goToNextPage()}function EK(e){var t;(t=e.paginationService)==null||t.goToPreviousPage()}function TK(e){var t;(t=e.paginationService)==null||t.goToFirstPage()}function IK(e){var t;(t=e.paginationService)==null||t.goToLastPage()}function LK(e,t){var i;(i=e.paginationService)==null||i.goToPage(t)}var FK=class extends te{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const i=Math.max(hc(this.gos),1),s=Math.floor(e/i);this.paginationService.setPageSize(s,"autoCalculated")};this.isBodyRendered?Ns(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function PK(e,t,i){e.addManagedElementListeners(t,{keydown:s=>{if(!s.defaultPrevented&&s.key===Z.TAB){const n=s.shiftKey;i.findNextFocusableElement(t,!1,n)||i.focusNextGridCoreContainer(n)&&s.preventDefault()}}})}var Kd="paginationPageSizeSelector",kK=class extends Gt{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(Kd,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){mn(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Kd)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){const n=this.gos.exists("paginationPageSize"),o=this.gos.get(Kd)!==!0;ne(`'paginationPageSize=${t}'${n?"":" (default value)"}, but ${t} is not included in${o?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),o||ne(`Either set '${Kd}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}const s=String(i?"":t);this.selectPageSizeComp?(rl(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(s,!0)):this.createPageSizeSelectorComp(e,s),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const i=this.localeService.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new iM).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(s).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Kd);return!Array.isArray(t)||gn(t)?e:[...t].sort((i,s)=>i-s)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},NK={selector:"AG-PAGE-SIZE-SELECTOR",component:kK},OK=class extends DU{constructor(){super(),this.btFirst=Te,this.btPrevious=Te,this.btNext=Te,this.btLast=Te,this.lbRecordCount=Te,this.lbFirstRowOnPage=Te,this.lbLastRowOnPage=Te,this.lbCurrent=Te,this.lbTotal=Te,this.pageSizeComp=Te,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[NK]);const{btFirst:t,btPrevious:i,btNext:s,btLast:n}=this;this.activateTabIndex([t,i,s,n]),t.insertAdjacentElement("afterbegin",hn(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",hn(e?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",hn(e?"previous":"next",this.gos)),n.insertAdjacentElement("afterbegin",hn(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):this.focusService.focusGridInnerElement(o)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:s=>{(s.key===Z.ENTER||s.key===Z.SPACE)&&(s.preventDefault(),i())}})}),PK(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),n=i("decimalSeparator",".");return wW(e,s,n)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),n=e("firstPage","First Page"),o=e("previousPage","Previous Page"),r=e("nextPage","Next Page"),a=e("lastPage","Last Page"),c=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${c}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${c}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${c}-to">${i}</span>
                    <span id="ag-${c}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${c}-of">${s}</span>
                    <span id="ag-${c}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${c}-start-page">${t}</span>
                        <span id="ag-${c}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${c}-of-page">${s}</span>
                        <span id="ag-${c}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){NV(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),s=e?i:null;if(s===1){const M=this.rowModel.getRow(0);if(M&&M.group&&!(M.groupData||M.aggData)){this.setTotalLabelsToZero();return}}const n=this.paginationService.getCurrentPage(),o=this.paginationService.getPageSize();let r,a;this.isZeroPagesToDisplay()?r=a=0:(r=o*n+1,a=r+o-1,e&&a>s&&(a=s));const c=r+o-1,h=!e&&i<c,d=this.formatNumber(r);this.lbFirstRowOnPage.textContent=d;let p;const f=this.localeService.getLocaleTextFunc();h?p=f("pageLastRowUnknown","?"):p=this.formatNumber(a),this.lbLastRowOnPage.textContent=p;const y=t>0?n+1:0,b=this.formatNumber(y);this.lbCurrent.textContent=b;let w,S;if(e)w=this.formatNumber(t),S=this.formatNumber(s);else{const M=f("more","more");w=M,S=M}this.lbTotal.textContent=w,this.lbRecordCount.textContent=S,this.announceAriaStatus(d,p,S,b,w)}announceAriaStatus(e,t,i,s,n){const o=this.localeService.getLocaleTextFunc(),r=o("page","Page"),a=o("to","to"),c=o("of","of"),h=`${e} ${a} ${t} ${c} ${i}`,d=`${r} ${s} ${c} ${n}`;h!==this.ariaRowStatus&&(this.ariaRowStatus=h,this.ariaAnnouncementService.announceValue(h,"paginationRow")),d!==this.ariaPageStatus&&(this.ariaPageStatus=d,this.ariaAnnouncementService.announceValue(d,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},GK={selector:"AG-PAGINATION",component:OK},BK=class extends te{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return GK}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return ge(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:ge(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:ge(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:ge(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const s=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=s-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:s=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:s,keepRenderedRows:t})}},ck={version:Pe,moduleName:"@ag-grid-community/pagination-core",beans:[BK,FK]},zK={version:Pe,moduleName:"@ag-grid-community/pagination-api",dependantModules:[ck],apiFunctions:{paginationIsLastPageFound:wK,paginationGetPageSize:xK,paginationGetCurrentPage:MK,paginationGetTotalPages:DK,paginationGetRowCount:RK,paginationGoToNextPage:AK,paginationGoToPreviousPage:EK,paginationGoToFirstPage:TK,paginationGoToLastPage:IK,paginationGoToPage:LK}},HK={version:Pe,moduleName:"@ag-grid-community/pagination",dependantModules:[ck,zK]},Ys="clientSide",Es="serverSide",Eu="infinite",VK={onGroupExpandedOrCollapsed:[Ys],refreshClientSideRowModel:[Ys],isRowDataEmpty:[Ys],forEachLeafNode:[Ys],forEachNodeAfterFilter:[Ys],forEachNodeAfterFilterAndSort:[Ys],resetRowHeights:[Ys],applyTransaction:[Ys],applyTransactionAsync:[Ys],flushAsyncTransactions:[Ys],getBestCostNodeSelection:[Ys],getServerSideSelectionState:[Es],setServerSideSelectionState:[Es],applyServerSideTransaction:[Es],applyServerSideTransactionAsync:[Es],applyServerSideRowData:[Es],retryServerSideLoads:[Es],flushServerSideAsyncTransactions:[Es],refreshServerSide:[Es],getServerSideGroupLevelState:[Es],refreshInfiniteCache:[Eu],purgeInfiniteCache:[Eu],getInfiniteRowCount:[Eu],isLastRowIndexKnown:[Eu,Es],expandAll:[Ys,Es],collapseAll:[Ys,Es],onRowHeightChanged:[Ys,Es],setRowCount:[Eu,Es],getCacheBlockState:[Eu,Es]},_K={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function WK(e,t,i){const s=_K[e];if(s){const{version:o,new:r,old:a,message:c}=s,h=a??e;return(...d)=>{const p=r?`Please use ${r} instead. `:"";return ne(`Since ${o} api.${h} is deprecated. ${p}${c??""}`),t.apply(t,d)}}const n=VK[e];return n?(...o)=>{const r=i.rowModel.getType();if(!n.includes(r)){dt(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return}return t.apply(t,o)}:t}var jK={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},Pa=(e,t)=>{const i=t.rowModelType??"clientSide";return i==="clientSide"||i==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},UK={enableRowGroup:Pa,rowGroup:Pa,rowGroupIndex:Pa,enablePivot:Pa,enableValue:Pa,pivot:Pa,pivotIndex:Pa,aggFunc:Pa,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var i;const t=["columnsMenuTab","generalMenuTab"];return(i=e.menuTabs)!=null&&i.some(s=>t.includes(s))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Pu},YK={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},KK=Object.keys(YK),Pu={objectName:"colDef",allProperties:KK,docsUrl:"column-properties/",deprecations:jK,validations:UK},$K=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),ZK={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},qK=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>Pu,defaultColDef:()=>Pu,defaultColGroupDef:()=>Pu,autoGroupColumnDef:()=>Pu,selectionColumnDef:()=>Pu}),XK=()=>({objectName:"gridOptions",allProperties:[...Eg.ALL_PROPERTIES,...Tg.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:$K(),validations:qK()}),QK=class extends te{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,XK())}validateApiFunction(e,t){return WK(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:s,allProperties:n,propertyExceptions:o,objectName:r,docsUrl:a}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(s)],n,r,a);const c=new Set;Object.keys(e).forEach(d=>{const p=s[d];if(p)if("renamed"in p){const{renamed:R,version:A}=p;c.add(`As of v${A}, ${String(d)} is deprecated. Please use ${String(R)} instead.`),e[R]=e[d]}else{const{message:R,version:A}=p;c.add(`As of v${A}, ${String(d)} is deprecated. ${R??""}`)}const f=e[d];if(f==null||f===!1)return;const v=i[d];let y;if(v)if(typeof v=="function"){const R=v(e,this.gridOptions);if(!R)return;if("objectName"in R){const A=e[d];if(Array.isArray(A)){A.forEach(T=>{this.processOptions(T,R)});return}this.processOptions(e[d],R);return}y=R}else y=v;else return;const{module:b,dependencies:w,validate:S,supportedRowModels:M}=y;if(M){const R=this.gridOptions.rowModelType??"clientSide";if(!M.includes(R)){c.add(`${String(d)} is not supported with the '${R}' row model.`);return}}if(b){const R=Array.isArray(b)?b:[b];let A=!0;if(R.forEach(T=>{this.gos.assertModuleRegistered(T,String(d))||(A=!1,c.add(`${String(d)} is only available when ${T} is loaded.`))}),!A)return}if(w){const R=this.checkForRequiredDependencies(d,w,e);if(R){c.add(R);return}}if(S){const R=S(e,this.gridOptions);if(R){c.add(R);return}}}),c.size>0&&c.forEach(d=>{ne(d)})}checkForRequiredDependencies(e,t,i){const n=Object.entries(t).find(([a,c])=>{const h=i[a];return!c.includes(h)});if(!n)return null;const[o,r]=n;return r.length>1?`'${String(e)}' requires '${o}' to be one of [${r.join(", ")}].`:`'${String(e)}' requires '${o}' to be ${r[0]}.`}checkProperties(e,t,i,s,n){const o=["__ob__","__v_skip","__metadata__"],r=JK(Object.getOwnPropertyNames(e),[...o,...t,...i],i);if(ao(r,(a,c)=>{let h=`invalid ${s} property '${a}' did you mean any of these: ${c.slice(0,8).join(", ")}.`;i.includes("context")&&(h+=`
If you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`),ne(h)}),Object.keys(r).length>0&&n){const a=this.getFrameworkOverrides().getDocLink(n);ne(`to see all the valid ${s} properties please check: ${a}`)}}};function JK(e,t,i){const s={},n=e.filter(o=>!t.some(r=>r===o));return n.length>0&&n.forEach(o=>s[o]=uP({inputValue:o,allSuggestions:i}).values),s}var e5={version:Pe,moduleName:"@ag-grid-community/core"},t5={version:Pe,moduleName:"@ag-grid-community/core-validations",beans:[QK]},uk={version:Pe,moduleName:"@ag-grid-community/core-community-features",dependantModules:[e5,t5,gU,rj,bK,K3,i3,HK,pK]},i5=class extends te{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){var e,t;this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:((e=this.beans.stateService)==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(t=this.beans.ctrlsService.get("gridCtrl"))==null||t.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},Bm=new Set(["gridPreDestroyed","fillStart","pasteStart"]),s5=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",n5=new Map([...Eg.BOOLEAN_PROPERTIES.map(e=>[e,Dw]),...Eg.NUMBER_PROPERTIES.map(e=>[e,EP]),["groupAggFiltering",e=>typeof e=="function"?e:Dw(e)],["pageSize",ko(1)],["autoSizePadding",ko(0)],["keepDetailRowsCount",ko(1)],["rowBuffer",ko(0)],["infiniteInitialRowCount",ko(1)],["cacheOverflowSize",ko(1)],["cacheBlockSize",ko(1)],["serverSideInitialRowCount",ko(1)],["viewportRowModelPageSize",ko(1)],["viewportRowModelBufferSize",ko(0)]]);function hk(e,t){const i=n5.get(e);return i?i(t):t}function o5(e){const t={};return Object.entries(e).forEach(([i,s])=>{const n=hk(i,s);t[i]=n}),t}var dk=class gk extends te{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new fh,this.globalEventHandlerFactory=t=>(i,s)=>{if(!this.isAlive())return;const n=Bm.has(i);if(n&&!t||!n&&t)return;const o=Tg.getCallbackForEvent(i),r=this.gridOptions[o];typeof r=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{r(s)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:i})=>{this.updateGridOptions({options:i,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??ZK[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return ge(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(s=>{const n=s;return n.api=this.api,n.context=this.gridOptionsContext,t(n)})}updateGridOptions({options:t,force:i,source:s="api"}){var r;const n={id:gk.changeSetId++,properties:[]},o=[];Object.entries(t).forEach(([a,c])=>{s==="api"&&EV[a]&&ne(`${a} is an initial property and cannot be updated.`);const h=hk(a,c),d=i||typeof h=="object"&&s==="api",p=this.gridOptions[a];if(d||p!==h){this.gridOptions[a]=h;const f={type:a,currentValue:h,previousValue:p,changeSet:n,source:s};o.push(f)}}),(r=this.validationService)==null||r.processGridOptions(this.gridOptions),n.properties=o.map(a=>a.type),o.forEach(a=>{this.gridOptions.debug&&co(`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propertyEventService.dispatchEvent(a)})}addPropertyEventListener(t,i){this.propertyEventService.addEventListener(t,i)}removePropertyEventListener(t,i){this.propertyEventService.removeEventListener(t,i)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){const i=t;return i.api=this.api,i.context=this.gridOptionsContext,i}assertModuleRegistered(t,i){return Ho.__assertRegistered(t,i,this.gridId)}isModuleRegistered(t){return Ho.__isRegistered(t,this.gridId)}};dk.changeSetId=0;var r5=dk,a5=class extends te{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,s;if(bi(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(s=`getCol${t}`,i=this.visibleColsService[s](e.column)),!i)return;const{headerRowIndex:n}=e;if(this.getHeaderRowType(n)!=="filter"){const a=[i];for(;i.getParent();)i=i.getParent(),a.push(i);i=a[a.length-1-n]}const{column:o,headerRowIndex:r}=this.getHeaderIndexToFocus(i,n);return{column:o,headerRowIndex:r}}getHeaderIndexToFocus(e,t){let i;if(bi(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const s=e;i=s.getLeafColumns()[0];let n=i;for(;n!==s;)t++,n=n.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s=i==="filter",n=i==="column";let o=s?e:e.getParent(),r=t-1,a=r;if(n&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),r--;a=r,r<0&&(o=e,r=t,a=void 0)}return{column:o,headerRowIndex:r,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,i="After"){const s=this.getHeaderRowType(t);let n=e,o=t+1;const r=o;if(s==="group"){const a=e.getDisplayedLeafColumns(),c=i==="After"?a[0]:it(a),h=[];let d=c;for(;d.getParent()!==e;)d=d.getParent(),h.push(d);if(n=c,c.isSpanHeaderHeight())for(let p=h.length-1;p>=0;p--){const f=h[p];if(!f.isPadding()){n=f;break}o++}else n=it(h),n||(n=c)}return{column:n,headerRowIndex:o,headerRowIndexWithoutSpan:r}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),s=i[t==="start"?0:i.length-1];if(!s)return;const n=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()),o=n==null?void 0:n.getRowType(e);if(o=="group"){const r=this.visibleColsService.getColGroupAtLevel(s,e);return{headerRowIndex:e,column:r}}return{headerRowIndex:o==null?-1:e,column:s}}},l5=class extends te{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(i,s,n)=>e({key:i,defaultValue:s,variableValues:n});const t=this.gos.get("localeText");return(i,s,n)=>{let o=t&&t[i];if(o&&n&&n.length){let r=0;for(;!(r>=n.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",n[r++])}return o??s}}},c5=class extends te{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new _x(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(e,t),s=Qm(this.gos)&&!Bm.has(e),n=s?this.asyncEventListeners:this.syncEventListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventService.addEventListener(e,i,s)}removeEventListener(e,t){var o;const i=this.frameworkEventWrappingService.unwrap(e,t),s=this.asyncEventListeners.get(e),n=!!(s!=null&&s.delete(i));n||(o=this.syncEventListeners.get(e))==null||o.delete(i),this.eventService.removeEventListener(e,i,n)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(Qm(this.gos)){const s=(o,r)=>{Bm.has(o)&&t(o,r)},n=(o,r)=>{Bm.has(o)||t(o,r)};this.globalEventListenerPairs.set(e,{syncListener:s,asyncListener:n}),this.eventService.addGlobalListener(s,!1),this.eventService.addGlobalListener(n,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:s,asyncListener:n}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(s,!1),this.eventService.removeGlobalListener(n,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((i,s)=>{i.forEach(n=>this.eventService.removeEventListener(s,n,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},u5=class extends te{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},h5=class extends te{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return st(this.topRowBounds)||st(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=ge(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},d5=class extends te{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=Ns(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=gi(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),YF(t,"polite"),kV(t,"additions text"),PV(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(mn(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},g5=class extends te{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}const i=s=>{for(;s.length;){const n=s.pop();n&&n()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),i(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),i(this.executeLaterFuncs)},200)})}},p5=class extends te{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},f5=class extends te{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=Vt(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){ne("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){var n;const s=e.newAgStackInstance();(n=this.overlayWrapperComp)==null||n.showOverlay(s,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;if(this.state===2){const t=this.ctrlsService.get("gridHeaderCtrl");e=(t==null?void 0:t.getHeaderHeight())||0}else this.wrapperPadding!==0&&(e=0);this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},m5=class extends te{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return ge(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),jT(t,this.processClassesFromGridOptions(e.rowNode)),jT(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=o=>{typeof o=="string"?t.push(o):Array.isArray(o)&&o.forEach(r=>t.push(r))},s=this.gos.get("rowClass");if(s){if(typeof s=="function")return ne("rowClass should not be a function, please use getRowClass instead"),[];i(s)}const n=this.gos.getCallback("getRowClass");if(n){const o={data:e.data,node:e,rowIndex:e.rowIndex},r=n(o);i(r)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,i=>{t.push(i)},()=>{}),t}processRowClassRules(e,t,i){const s=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},v5=class extends te{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=QV(),this.gos.get("debug")&&co("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&co(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},y5=class extends te{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=zo(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=zo(this.gos))}doFullSort(e,t){const i=(n,o)=>({currentPos:o,rowNode:n}),s=e.map(i);return s.sort(this.compareRowNodes.bind(this,t)),s.map(n=>n.rowNode)}compareRowNodes(e,t,i){const s=t.rowNode,n=i.rowNode;for(let o=0,r=e.length;o<r;o++){const a=e[o],c=a.sort==="desc",h=this.getValue(s,a.column),d=this.getValue(n,a.column);let p;const f=this.getComparator(a,s);if(f?p=f(h,d,s,n,c):p=W2(h,d,this.isAccentedSort),!isNaN(p)&&p!==0)return a.sort==="asc"?p:p*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(s!=null)return s;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const o=this.columnModel.getColDefCol(n);if(o)return o.getColDef().comparator}getValue(e,t){var s,n,o;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(Uv(this.gos,this.columnModel.isPivotActive())){const c=(s=e.allLeafChildren)==null?void 0:s[0];return c?this.valueService.getValue(t,c,!1,!1):void 0}const a=(n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCol(t.getId());return a?(o=e.groupData)==null?void 0:o[a.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},Xv=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const n=e.childrenAfterGroup[s];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const s={rowNode:t,children:null};this.mapToItems[t.id]=s,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(s=>this.nodeIdsToColumns[i.id][s.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const n=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(n),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>i[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>!i[n.getId()])}},pk=class extends te{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new wU,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=ev(e),this.groupSelectsChildren=bc(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{const s=bc(e),n=ev(e);(s!==this.groupSelectsChildren||n!==this.rowSelectionMode)&&(this.groupSelectsChildren=s,this.rowSelectionMode=n,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!s5(t))return e;const i=this.selectionCtx.getRoot();return i?i.isSelected()??!1:!0}setNodesSelected(e){var p;const{newValue:t,clearSelection:i,suppressFinishActions:s,rangeSelect:n,nodes:o,event:r,source:a}=e;if(o.length===0)return 0;if(o.length>1&&!this.isMultiSelect())return ne("cannot multi select unless selection mode is 'multiRow'"),0;const c=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,h=o.map(f=>f.footer?f.sibling:f);if(n){if(h.length>1)return ne("cannot range select while selecting multiple rows"),0;const f=h[0],v=this.overrideSelectionValue(t,a);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(f)){const y=this.selectionCtx.truncate(f);return v&&this.selectRange(y.discard,!1,a),this.selectRange(y.keep,v,a)}else if(this.selectionCtx.getRoot()!==f){const w=this.selectionCtx.extend(f,this.groupSelectsChildren);return v&&this.selectRange(w.discard,!1,a),this.selectRange(w.keep,v,a)}}}s||this.selectionCtx.setRoot(h[0]);let d=0;for(let f=0;f<h.length;f++){const v=h[f];c&&v.group||v.selectThisNode(t,r,a)&&d++,this.groupSelectsChildren&&((p=v.childrenAfterGroup)!=null&&p.length)&&(d+=this.selectChildren(v,t,c,a))}return s||(t&&(i||!this.isMultiSelect())&&(d+=this.clearOtherNodes(h[0],a)),d>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),d}selectRange(e,t,i){let s=0;return e.forEach(n=>{if(n.group&&this.groupSelectsChildren)return;n.selectThisNode(t,void 0,i)&&s++}),s>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),s}selectChildren(e,t,i,s){const n=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return st(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:n})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,s)=>{i&&e(i)&&t.set(s,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!Vt(this.gos))return!1;const s=this.rowModel.getRootNode();t||(t=new Xv(!0,s),t.setInactive());let n=!1;return t.forEachChangedNodeDepthFirst(o=>{if(o!==s){const r=o.calculateSelectedFromChildren();n=o.selectThisNode(r===null?!1:r,void 0,e)||n}}),n}clearOtherNodes(e,t){const i=new Map;let s=0;return this.selectedNodes.forEach(n=>{if(n&&n.id!==e.id){const o=this.selectedNodes.get(n.id);s+=o.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&n.parent&&i.set(n.parent.id,n.parent)}}),i.forEach(n=>{const o=n.calculateSelectedFromChildren();n.selectThisNode(o===null?!1:o,void 0,t)}),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(ge(t)&&e.id!==t.id&&t){const s=t.id;this.selectedNodes.get(s)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){var e;(e=this.selectedNodes)==null||e.clear()}getBestCostNodeSelection(){if(!Vt(this.gos))return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const i=[];function s(n){for(let o=0,r=n.length;o<r;o++){const a=n[o];if(a.isSelected())i.push(a);else{const c=a;c.group&&c.children&&s(c.children)}}}return s(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=r=>r.selectThisNode(!1,void 0,s),i=Vt(this.gos),{source:s,justFiltered:n,justCurrentPage:o}=e;if(o||n){if(!i){dt("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(n,o).forEach(t)}else this.selectedNodes.forEach(r=>{r&&t(r)}),this.reset(s);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)}getSelectedCounts(e,t){let i=0,s=0;const n=o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?i++:o.selectable&&s++)};return this.getNodesToSelect(e,t).forEach(n),{selectedCount:i,notSelectedCount:s}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(e,t);return i===0&&s===0?!1:i>0&&s>0?null:i>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();const i=[];if(t)return this.forEachNodeOnPage(n=>{if(!n.group){i.push(n);return}if(!n.expanded){const o=r=>{var a;i.push(r),(a=r.childrenAfterFilter)!=null&&a.length&&r.childrenAfterFilter.forEach(o)};o(n);return}this.groupSelectsChildren||i.push(n)}),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter(n=>{i.push(n)}),i):(s.forEachNode(n=>{i.push(n)}),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let s=t;s<=i;s++){const n=this.rowModel.getRow(s);n&&e(n)}}selectAllRowNodes(e){if(K2(this.gos)&&!FF(this.gos))return ne("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:t,justFiltered:i,justCurrentPage:s}=e,n=this.getNodesToSelect(i,s);n.forEach(o=>o.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(n[0]??null),this.selectionCtx.setEndRange(it(n)??null),Vt(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t!=null&&t.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return dt("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const i=new Set(e),s=[];this.rowModel.forEachNode(n=>{i.has(n.id)&&s.push(n)}),this.setNodesSelected({newValue:!0,nodes:s,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!Vt(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},C5=class extends te{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const{gos:t}=this,i=Xm(t),s=zx(t);if(!i||!s)return;const n=bc(t),o=Vt(t)&&n,r=[],a=c=>{if(e&&!c.group)return;if(o&&c.group){const d=c.childrenAfterGroup.some(p=>p.selectable===!0);c.setRowSelectable(d,!0);return}const h=(s==null?void 0:s(c))??!0;c.setRowSelectable(h,!0),!h&&c.isSelected()&&r.push(c)};if(o){const c=this.rowModel;new Xv(!1,c.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);r.length&&this.selectionService.setNodesSelected({nodes:r,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof pk&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},gI=["asc","desc",null],S5=class extends te{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){t!=="asc"&&t!=="desc"&&(t=null);const n=zo(this.gos);let o=[e];if(n&&e.getColDef().showRowGroup){const c=this.funcColsService.getSourceColumnsForGroupColumn(e),h=c==null?void 0:c.filter(d=>d.isSortable());h&&(o=[e,...h])}o.forEach(c=>c.setSort(t,s));const r=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!r){const c=this.clearSortBarTheseColumns(o,s);a.push(...c)}this.updateSortIndex(e),a.push(...o),this.dispatchSortChangedEvents(s,a)}updateSortIndex(e){var a;const t=zo(this.gos),i=(a=this.showRowGroupColsService)==null?void 0:a.getShowRowGroupCol(e.getId()),s=t&&i||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(c=>c.setSortIndex(null));const o=n.filter(c=>t&&c.getColDef().showRowGroup?!1:c!==s);(s.getSort()?[...o,s]:o).forEach((c,h)=>{c.setSortIndex(h)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getAllCols().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach(s=>{e.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=gI,!Array.isArray(t)||t.length<=0)return ne(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),s=i<0,n=i==t.length-1;let o;return s||n?o=t[0]:o=t[i+1],gI.indexOf(o)<0?(ne("invalid sort type ",o),null):o}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){const o=zo(this.gos);e=e.filter(r=>{var d;const a=!!r.getAggFunc(),c=!r.isPrimary(),h=o?(d=this.showRowGroupColsService)==null?void 0:d.getShowRowGroupCol(r.getId()):r.getColDef().showRowGroup;return a||c||h})}const t=this.funcColsService.getRowGroupColumns().filter(o=>!!o.getSort()),i={};e.forEach((o,r)=>i[o.getId()]=r),e.sort((o,r)=>{const a=o.getSortIndex(),c=r.getSortIndex();if(a!=null&&c!=null)return a-c;if(a==null&&c==null){const h=i[o.getId()],d=i[r.getId()];return h>d?1:-1}else return c==null?-1:1});const s=zo(this.gos)&&!!t.length;s&&(e=[...new Set(e.map(o=>{var r;return((r=this.showRowGroupColsService)==null?void 0:r.getShowRowGroupCol(o.getId()))??o}))]);const n=new Map;return e.forEach((o,r)=>n.set(o,r)),s&&t.forEach(o=>{const r=this.showRowGroupColsService.getShowRowGroupCol(o.getId());n.set(o,n.get(r))}),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,s])=>t-s).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=zo(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const s=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=s[0].getSort();return s.every(r=>r.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},b5=class extends te{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&co(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,ic(e.source))}}},w5="paste",x5=class extends te{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){Vt(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==w5&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const s=this.gos.get("aggregateOnlyChangedColumns"),n=new Xv(s,this.clientSideRowModel.getRootNode());n.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst(o=>{i.push(o)})}this.rowRenderer.refreshCells({rowNodes:i})}},M5=class extends te{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);dt("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return co("Processing of the expression failed"),co("Expression = ",e),co("Params = ",t),co("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},D5=class extends te{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},R5=class extends te{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=nr(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=i=>this.callColumnCellValueChangedHandler(i),t=Qm(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(e,t){const i=t.leafGroup&&this.columnModel.isPivotMode(),s=t.group&&t.expanded&&!t.footer&&!i,n=this.gos.get("groupSuppressBlankHeader");if(!s||n)return this.getValue(e,t);let o=!1;const r=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof r!="function"?o=!!r:o=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});const a=s&&o;return this.getValue(e,t,!1,a)}getValue(e,t,i=!1,s=!1){if(this.initialised||this.init(),!t)return;const n=e.getColDef(),o=n.field,r=e.getColId(),a=t.data;let c;const h=t.groupData&&t.groupData[r]!==void 0,d=!s&&t.aggData&&t.aggData[r]!==void 0,p=this.isSsrm&&s&&!!e.getColDef().aggFunc,f=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&n.filterValueGetter?c=this.executeFilterValueGetter(n.filterValueGetter,a,e,t):this.isTreeData&&d?c=t.aggData[r]:this.isTreeData&&n.valueGetter?c=this.executeValueGetter(n.valueGetter,a,e,t):this.isTreeData&&o&&a?c=ug(a,o,e.isFieldContainsDots()):h?c=t.groupData[r]:d?c=t.aggData[r]:n.valueGetter?c=this.executeValueGetter(n.valueGetter,a,e,t):f?c=ug(a,t.field,e.isFieldContainsDots()):o&&a&&!p&&(c=ug(a,o,e.isFieldContainsDots())),this.cellExpressions&&typeof c=="string"&&c.indexOf("=")===0){const v=c.substring(1);c=this.executeValueGetter(v,a,e,t)}if(c==null){const v=this.getOpenedGroup(t,e);if(v!=null)return v}return c}parseValue(e,t,i,s){const n=e.getColDef(),o=n.valueParser;if(ge(o)){const r=this.gos.addGridCommonParams({node:t,data:t==null?void 0:t.data,oldValue:s,newValue:i,colDef:n,column:e});return typeof o=="function"?o(r):this.expressionService.evaluate(o,r)}return i}getDeleteValue(e,t){return ge(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,s,n=!0){let o=null,r;const a=e.getColDef();if(s?r=s:n&&(r=a.valueFormatter),r){const c=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:a,column:e});typeof r=="function"?o=r(c):o=this.expressionService.evaluate(r,c)}else if(a.refData)return a.refData[i]||"";return o==null&&Array.isArray(i)&&(o=i.join(", ")),o}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const s=t.getColDef().showRowGroup;let n=e.parent;for(;n!=null;){if(n.rowGroupColumn&&(s===!0||s===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,s){const n=this.columnModel.getColDefCol(t);if(!e||!n)return!1;st(e.data)&&(e.data={});const{field:o,valueSetter:r}=n.getColDef();if(st(o)&&st(r))return ne("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(n,i))return ne("Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n});a.newValue=i;let c;if(ge(r)?typeof r=="function"?c=r(a):c=this.expressionService.evaluate(r,a):c=this.setValueUsingField(e.data,o,i,n.isFieldContainsDots()),c===void 0&&(c=!0),!c)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const h=this.getValue(n,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:h,value:h,source:s}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,s){if(!t)return!1;let n=!1;if(!s)n=e[t]===i,n||(e[t]=i);else{const o=t.split(".");let r=e;for(;o.length>0&&r;){const a=o.shift();o.length===0?(n=r[a]===i,n||(r[a]=i)):r=r[a]}}return!n}executeFilterValueGetter(e,t,i,s){const n=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return typeof e=="function"?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,i,s){const n=i.getColId(),o=this.valueCache.getValue(s,n);if(o!==void 0)return o;const r=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let a;return typeof e=="function"?a=e(r):a=this.expressionService.evaluate(e,r),this.valueCache.setValue(s,n,a),a}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let n=i;if(s){const o=this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});n=s(o)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&ne("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),n}},gM=class Ql{static applyGlobalGridOptions(t){if(!Ql.gridOptions)return t;let i={};return Fs(i,Ql.gridOptions,!0,!0),Ql.mergeStrategy==="deep"?Fs(i,t,!0,!0):i={...i,...t},Ql.gridOptions.context&&(i.context=Ql.gridOptions.context),t.context&&(Ql.mergeStrategy==="deep"&&i.context&&Fs(t.context,i.context,!0,!0),i.context=t.context),i}};gM.gridOptions=void 0;gM.mergeStrategy="shallow";var fk=gM;function A5(e){var t;return(t=fk.gridOptions)==null?void 0:t[e]}var E5=1,T5=class{create(e,t,i,s,n){const o=fk.applyGlobalGridOptions(t),r=o5(o),a=r.gridId??String(E5++),c=this.getRegisteredModules(n,a),h=this.createBeansList(r.rowModelType,c,a),d=this.createProvidedBeans(e,r,n);if(!h){dt("Failed to create grid.");return}const p={providedBeanInstances:d,beanClasses:h,gridId:a,beanInitComparator:_U,beanDestroyComparator:WU,derivedBeans:[PU]},f=new Y_(p);return this.registerModuleUserComponents(f,c),this.registerControllers(f,c),this.registerModuleApiFunctions(f,c),i(f),f.getBean("syncService").start(),s&&s(f),f.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach(s=>{s.controllers&&s.controllers.forEach(n=>i.register(n))})}getRegisteredModules(e,t){const i=e?e.modules:null,s=Ho.__getRegisteredModules(t),n=[],o={},r=(a,c,h)=>{(p=>{o[p.moduleName]||(o[p.moduleName]=!0,n.push(p),Ho.__register(p,a,h))})(c),c.dependantModules&&c.dependantModules.forEach(p=>r(a,p,h))};return r(!!(i!=null&&i.length)||!Ho.__isPackageBased(),uk,void 0),i&&i.forEach(a=>r(!0,a,t)),s&&s.forEach(a=>r(!Ho.__isPackageBased(),a,void 0)),n}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,n=>n.userComponents?n.userComponents:[]),s=e.getBean("userComponentRegistry");i.forEach(({name:n,classImp:o,params:r})=>{s.registerDefaultComponent(n,o,r)})}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach(s=>{const n=s.apiFunctions;n&&Object.keys(n).forEach(r=>{i==null||i.addFunction(r,n[r])})})}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;st(s)&&(s=new ik);const n={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(e="clientSide",t,i){const s=t.filter(c=>!c.rowModel||c.rowModel===e),n={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!n[e]){dt("Could not find row model for rowModelType = ",e);return}if(!Ho.__assertRegistered(n[e],`rowModelType = '${e}'`,i))return;const o=[$U,YU,a5,i5,FU,R_,zU,HU,A4,hP,v5,D4,l5,yU,q_,DV,XU,r5,EU,pk,pV,aj,h5,u5,mU,M5,gV,M4,D5,R5,pU,R4,K_,QU,x4,ZU,IU,xU,w4,S5,p5,g5,C5,x5,E4,kU,m5,y5,UU,JU,KU,jU,b5,f5,T4,c5,d5,I4,vV,NU,yV,fV,OU,GU,MV,mV,wV,BU,xV,lV],r=this.extractModuleEntity(s,c=>c.beans?c.beans:[]);o.push(...r);const a=[];return o.forEach(c=>{a.indexOf(c)<0&&a.push(c)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},mk=class extends te{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function I5(e){e.expansionService.expandAll(!0)}function L5(e){e.expansionService.expandAll(!1)}function F5(e){var s,n;const t=(s=e.rowModelHelperService)==null?void 0:s.getClientSideRowModel(),i=(n=e.rowModelHelperService)==null?void 0:n.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}function P5(e,t,i){var o,r;const s=(o=e.rowModelHelperService)==null?void 0:o.getServerSideRowModel();if(s){if(e.funcColsService.isRowGroupEmpty()){s.setRowCount(t,i);return}dt("setRowCount cannot be used while using row grouping.");return}const n=(r=e.rowModelHelperService)==null?void 0:r.getInfiniteRowModel();if(n){n.setRowCount(t,i);return}}function k5(e){var t;return((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function N5(e){return e.rowModel.isLastRowIndexKnown()}var O5={version:Pe,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:I5,collapseAll:L5,onRowHeightChanged:F5}},G5={version:Pe,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:P5,getCacheBlockState:k5,isLastRowIndexKnown:N5}},B5=class{wrap(e,t,i=[],s){const n=this.createWrapper(e,s);return t.forEach(o=>{this.createMethod(n,o,!0)}),i.forEach(o=>{this.createMethod(n,o,!1)}),n}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&ne("Framework component is missing the method "+t+"()"),null)}}},Sh=typeof global>"u"?{}:global;Sh.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Sh.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Sh.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Sh.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Sh.Node=typeof Node>"u"?{}:Node;Sh.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var z5="ROOT_NODE_ID",Gb=0,H5=class{constructor(e,t,i,s,n,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=s,this.beans=o,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=z5,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return BF(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){ne("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((s,n)=>this.createNode(s,this.rootNode,Gb,n)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){const t=this.rootNode.allLeafChildren,i=(t==null?void 0:t.length)??0,s=new Map;let n=-1,o=-1;for(let r=0;r<i;++r){const a=t[r],c=a.data;c!==e[r]&&(o<0&&(n=r),o=r,s.set(c,a))}if(n<0)return!1;for(let r=n;r<=o;++r){const a=s.get(e[r]);a!==void 0&&(t[r]=a,a.sourceRowIndex=r)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}updateSelection(e,t){const i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){const i=e.add;if(gn(i))return;const s=this.rootNode.allLeafChildren;let n=s.length;if(typeof e.addIndex=="number"&&(n=this.sanitizeAddIndex(e.addIndex),n>0&&this.gos.get("treeData")))for(let c=0;c<s.length;c++){const h=s[c];if((h==null?void 0:h.rowIndex)==n-1){n=c+1;break}}const o=i.map((a,c)=>this.createNode(a,this.rootNode,Gb,n+c));if(n<s.length){const a=s.slice(0,n),c=s.slice(n,s.length),h=a.length+o.length;for(let d=0,p=c.length;d<p;++d)c[d].sourceRowIndex=h+d;this.rootNode.allLeafChildren=[...a,...o,...c],t.rowsInserted=!0}else this.rootNode.allLeafChildren=s.concat(o);const r=this.rootNode.sibling;r&&(r.allLeafChildren=s),t.rowNodeTransaction.add=o}sanitizeAddIndex(e){var i;const t=((i=this.rootNode.allLeafChildren)==null?void 0:i.length)??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},i){var r,a;const{remove:s}=e;if(gn(s))return;const n={};s.forEach(c=>{const h=this.lookupRowNode(c);h&&(h.isSelected()&&i.push(h),h.clearRowTopAndRowIndex(),n[h.id]=!0,delete this.allNodesMap[h.id],t.remove.push(h))}),this.rootNode.allLeafChildren=((r=this.rootNode.allLeafChildren)==null?void 0:r.filter(c=>!n[c.id]))??null,(a=this.rootNode.allLeafChildren)==null||a.forEach((c,h)=>{c.sourceRowIndex=h});const o=this.rootNode.sibling;o&&(o.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},i){const{update:s}=e;gn(s)||s.forEach(n=>{const o=this.lookupRowNode(n);o&&(o.updateData(n),!o.selectable&&o.isSelected()&&i.push(o),this.setMasterForRow(o,n,Gb,!1),t.update.push(o))})}lookupRowNode(e){var s;const t=mh(this.gos);let i;if(t){const n=t({data:e,level:0});if(i=this.allNodesMap[n],!i)return dt(`could not find row id=${n}, data item was not found for this id`),null}else if(i=(s=this.rootNode.allLeafChildren)==null?void 0:s.find(n=>n.data===e),!i)return dt("could not find data item as object was not found",e),dt("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,s){const n=new Br(this.beans);return n.sourceRowIndex=s,n.group=!1,this.setMasterForRow(n,e,i,!0),t&&(n.parent=t),n.level=i,n.setDataAndId(e,this.nextId.toString()),this.allNodesMap[n.id]&&ne(`duplicate node id '${n.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[n.id]=n,this.nextId++,n}setMasterForRow(e,t,i,s){if(this.gos.get("treeData"))e.setMaster(!1),s&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const r=this.gos.get("isRowMaster");r?e.setMaster(r(t)):e.setMaster(!0)}else e.setMaster(!1);if(s){const r=this.funcColsService.getRowGroupColumns(),a=r?r.length:0,c=i+a;e.expanded=e.master?this.isExpanded(c):!1}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},V5=class extends te{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=Ns(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new Br(this.beans),this.nodeManager=new H5(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),r=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),c=[...e,...t,...i,...s,...s,...n,...o,...r,...a];this.addManagedPropertyListeners(c,h=>{var f;const d=(f=h.changeSet)==null?void 0:f.properties;if(!d)return;const p=v=>d.some(y=>v.has(y));if(p(e)){this.setRowData(this.rootNode.allLeafChildren.map(v=>v.data));return}if(p(t)){this.refreshModel({step:"group"});return}if(p(i)){this.refreshModel({step:"filter"});return}if(p(s)){this.refreshModel({step:"pivot"});return}if(p(n)){this.refreshModel({step:"aggregate"});return}if(p(o)){this.refreshModel({step:"sort"});return}if(p(r)){this.refreshModel({step:"filter_aggregates"});return}p(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,s){let n,o=!1;do{n=!1;const r=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),c=Math.max(r,i),h=Math.min(a,s);for(let d=c;d<=h;d++){const p=this.getRow(d);if(p.rowHeightEstimated){const f=Qa(this.gos,p);p.setRowHeight(f.height),n=!0,o=!0}}n&&this.setRowTopAndRowIndex()}while(n);return o}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=gs(this.gos,"normal");for(let n=0;n<this.rowsToDisplay.length;n++){const o=this.rowsToDisplay[n];if(o.id!=null&&i.add(o.id),o.rowHeight==null){const r=Qa(this.gos,o,s,e);o.setRowHeight(r.height,r.estimated)}o.setRowTop(t),o.setRowIndex(n),t+=o.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=o=>{o&&o.id!=null&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},n=o=>{if(s(o),s(o.detailNode),s(o.sibling),o.hasChildren()&&o.childrenAfterGroup){const r=o.level==-1;i&&!r&&!o.expanded||o.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const s=this.getRowIndexAtPixel(t),n=this.getRow(s),o=!this.gos.get("suppressAnimationFrame");if(n===e[0])return!1;const r=this.rootNode.allLeafChildren;return e.forEach(a=>{Os(r,a)}),e.forEach((a,c)=>{tv(r,a,Math.max(s+i,0)+c)}),e.forEach((a,c)=>{a.sourceRowIndex=c}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:o,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){const i=t!=null?this.getRowIndexAtPixel(t):null,s=i!=null?this.getRow(i):null;if(!s||!e||t==null){this.clearHighlightedRow();return}const n=this.getHighlightPosition(t,s),o=this.isHighlightingCurrentPosition(e,s,n),r=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==s;(o||r)&&(this.clearHighlightedRow(),o)||(s.setHighlighted(n),this.lastHighlightedRow=s)}getHighlightPosition(e,t){if(!t){const n=this.getRowIndexAtPixel(e);if(t=this.getRow(n||0),!t)return 1}const{rowTop:i,rowHeight:s}=t;return e-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const s=i===0?-1:1;return this.getRow(t.rowIndex+s)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter,i=this.rootNode.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;i-=1}const s=this.rowsToDisplay[this.rowsToDisplay.length-1],n=i>=this.rootNode.childrenAfterSort.length;if(s.footer&&n)return s.rowIndex;let o=this.rootNode.childrenAfterSort[i];if(this.gos.get("groupHideOpenParents"))for(;o.expanded&&o.childrenAfterSort&&o.childrenAfterSort.length>0;)o=o.childrenAfterSort[0];return o.rowIndex}getRowBounds(e){if(st(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=ju(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=ju(this.gos),s=e.columns.length===0||e.columns.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:s,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=ju(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=gn(e),i=new Xv(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(s=>s.add!=null&&s.add.length>0||s.remove!=null&&s.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(ge(e)&&(t=i[e]),st(t)){dt(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}const s=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:s}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=st(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return st(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return ge(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,s=!1;const n=[],o=bc(this.gos);return this.forEachNodeAfterFilterAndSort(r=>{if(s)return;if(i&&(r===t||r===e)&&(s=!0,r.group&&o)){n.push(...r.allLeafChildren);return}if(!i){if(r!==t&&r!==e)return;i=!0}if(!r.group||!o){n.push(r);return}}),n}setDatasource(e){dt("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(it(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let n=-1,o=-1;for(;;){const r=Math.floor((t+i)/2),a=this.rowsToDisplay[r];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=r+1:a.rowTop>e&&(i=r-1),n===t&&o===i))return r;n=t,o=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:s,includeFooterNodes:n}=e;let{index:o}=e;const r=a=>{var v;const c=(v=t[0])==null?void 0:v.parent;if(!c)return;const h=n&&EF(this.gos),d=TF(this.gos),p=n&&d({node:c});if(c===this.rootNode){h===a&&(c.createFooter(),i(c.sibling,o++));return}p===a&&(c.createFooter(),i(c.sibling,o++))};r("top");for(let a=0;a<t.length;a++){const c=t[a];if(i(c,o++),c.hasChildren()&&!c.footer){let h=null;switch(s){case 0:h=c.childrenAfterGroup;break;case 1:h=c.childrenAfterAggFilter;break;case 2:h=c.childrenAfterSort;break;case 3:h=c.leafGroup?null:c.childrenAfterSort;break}h&&(o=this.recursivelyWalkNodesAndCallback({nodes:[...h],callback:i,recursionType:s,index:o,includeFooterNodes:n}))}}return r("bottom"),o}doAggregate(e){var t;(t=this.aggregationStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),s=n=>{n&&n.forEach(o=>{const r=()=>{o.expanded=e,s(o.childrenAfterGroup)};if(t){ge(o.childrenAfterGroup)&&r();return}if(i){!o.leafGroup&&r();return}o.group&&r()})};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:s}),bc(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{const n=this.rootNode,o=n.sibling;n.childrenAfterGroup=n.allLeafChildren,o&&(o.childrenAfterGroup=n.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(Br.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(s=>{s.id===e&&(i=s)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var s;this.valueCache.onDataChanged();const e=[],t=[];let i=!1;(s=this.rowDataTransactionBatch)==null||s.forEach(n=>{const{rowNodeTransaction:o,rowsInserted:r}=this.nodeManager.updateRowData(n.rowDataTransaction);r&&(i=!0),t.push(o),n.callback&&e.push(n.callback.bind(null,o))}),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function _5(e){e.expansionService.onGroupExpandedOrCollapsed()}function W5(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.refreshModel(t)}function j5(e){var t,i;return((i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.isEmpty())??!0}function U5(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachLeafNode(t)}function Y5(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachNodeAfterFilter(t)}function K5(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachNodeAfterFilterAndSort(t)}function $5(e){var t,i;if(e.columnModel.isAutoRowHeightActive()){ne("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null||i.resetRowHeights()}function Z5(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var i,s;return(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null?void 0:s.updateRowData(t)})}function q5(e,t,i){e.frameworkOverrides.wrapIncoming(()=>{var s,n;return(n=(s=e.rowModelHelperService)==null?void 0:s.getClientSideRowModel())==null?void 0:n.batchUpdateRowData(t,i)})}function X5(e){e.frameworkOverrides.wrapIncoming(()=>{var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.flushAsyncTransactions()})}function Q5(e){return e.selectionService.getBestCostNodeSelection()}var J5=class extends te{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var i;const t=!!((i=this.filterManager)!=null&&i.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const i=(s,n)=>{s.hasChildren()&&e&&!n?s.childrenAfterFilter=s.childrenAfterGroup.filter(o=>{const r=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return r||a}):s.childrenAfterFilter=s.childrenAfterGroup,s.sibling&&(s.sibling.childrenAfterFilter=s.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const s=(o,r)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){const c=o.childrenAfterGroup[a],h=r||this.filterManager.doesRowPassFilter({rowNode:c});c.childrenAfterGroup?s(o.childrenAfterGroup[a],h):i(c,h)}i(o,r)},n=o=>s(o,!1);t.executeFromRootNode(n)}else{const s=n=>i(n,!1);t.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},e$=class extends te{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],s=this.columnModel.isPivotMode(),n=s&&t.leafGroup,o=n?[t]:t.childrenAfterSort,r=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(r,o,i,s,0);const a=i.length>0;if(!n&&a&&r.grandTotalRow){t.createFooter();const h=r.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(r,t.sibling,i,0,h)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:IF(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:EF(this.gos),groupTotalRow:TF(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,s,n){if(!gn(t))for(let o=0;o<t.length;o++){const r=t[o],a=r.hasChildren(),c=s&&!a,h=e.groupRemoveSingleChildren&&a&&r.childrenAfterGroup.length===1,d=e.groupRemoveLowestSingleChildren&&a&&r.leafGroup&&r.childrenAfterGroup.length===1,p=s&&r.leafGroup,f=e.hideOpenParents&&r.expanded&&!r.master&&!p;if(!c&&!f&&!h&&!d&&this.addRowNodeToRowsToDisplay(e,r,i,n),!(s&&r.leafGroup)){if(a){const y=h||d;if(r.expanded||y){const b=e.groupTotalRow({node:r});b||r.destroyFooter();const w=y?n:n+1;b==="top"&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,w)),this.recursivelyAddToRowsToDisplay(e,r.childrenAfterSort,i,s,w),b==="bottom"&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,w))}}else if(r.master&&r.expanded){const y=this.createDetailNode(r);this.addRowNodeToRowsToDisplay(e,y,i,n)}}}}addRowNodeToRowsToDisplay(e,t,i,s,n){n?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:s)}createDetailNode(e){if(ge(e.detailNode))return e.detailNode;const t=new Br(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,ge(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},t$=class extends te{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){Vt(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:s,rowsInserted:n}=i.updateRowData(t);let o=!1;this.gos.get("suppressMaintainUnsortedOrder")||(o=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(s,o||n)}createTransactionForRowData(e){if(!Vt(this.gos))return dt("ImmutableService only works with ClientSideRowModel"),null;const t=mh(this.gos);if(t==null)return dt("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),s=[],n=[],o=[];return ge(e)&&e.forEach(r=>{const a=t({data:r,level:0}),c=i[a];c?(c.data!==r&&n.push(r),i[a]=void 0):o.push(r)}),ao(i,(r,a)=>{a&&s.push(a.data)}),{remove:s,update:n,add:o}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},i$=class extends te{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,s,n,o){const r=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(f=>f.isRowGroupActive());let c={};i&&s&&(c=this.calculateDirtyNodes(s));const h=this.columnModel.isPivotMode(),d=this.gos.getCallback("postSortRows"),p=f=>{var b;this.pullDownGroupDataForHideOpenParents(f.childrenAfterAggFilter,!0);const v=h&&f.leafGroup;if(r&&a&&!f.leafGroup&&!o){const w=(b=this.funcColsService.getRowGroupColumns())==null?void 0:b[f.level+1],S=(w==null?void 0:w.getSort())===null,M=f.childrenAfterAggFilter.slice(0);if(f.childrenAfterSort&&!S){const R={};f.childrenAfterSort.forEach((A,T)=>{R[A.id]=T}),M.sort((A,T)=>(R[A.id]??0)-(R[T.id]??0))}f.childrenAfterSort=M}else!t||v?f.childrenAfterSort=f.childrenAfterAggFilter.slice(0):i?f.childrenAfterSort=this.doDeltaSort(f,c,n,e):f.childrenAfterSort=this.rowNodeSorter.doFullSort(f.childrenAfterAggFilter,e);if(f.sibling&&(f.sibling.childrenAfterSort=f.childrenAfterSort),this.updateChildIndexes(f),d){const w={nodes:f.childrenAfterSort};d(w)}};n&&n.forEachChangedNodeDepthFirst(p),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){const t={},i=s=>{s&&s.forEach(n=>t[n.id]=!0)};return e&&e.forEach(s=>{i(s.add),i(s.update),i(s.remove)}),t}doDeltaSort(e,t,i,s){const n=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(n,s);const r={},a=[];n.forEach(p=>{t[p.id]||!i.canSkip(p)?a.push(p):r[p.id]=!0});const c=o.filter(p=>r[p.id]),h=(p,f)=>({currentPos:f,rowNode:p}),d=a.map(h).sort((p,f)=>this.rowNodeSorter.compareRowNodes(s,p,f));return this.mergeSortedArrays(s,d,c.map(h)).map(({rowNode:p})=>p)}mergeSortedArrays(e,t,i){const s=[];let n=0,o=0;for(;n<t.length&&o<i.length;)this.rowNodeSorter.compareRowNodes(e,t[n],i[o])<0?s.push(t[n++]):s.push(i[o++]);for(;n<t.length;)s.push(t[n++]);for(;o<i.length;)s.push(i[o++]);return s}updateChildIndexes(e){if(st(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],n=i===0,o=i===e.childrenAfterSort.length-1;s.setFirstChild(n),s.setLastChild(o),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return ne("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(s=>{s.hasChildren()&&t(s)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||st(e)||e.forEach(i=>{var n;(((n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCols())??[]).forEach(o=>{const r=o.getColDef().showRowGroup;if(typeof r!="string"){dt("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const a=r,c=this.columnModel.getColDefCol(a);if(c!==i.rowGroupColumn)if(t)i.setGroupValue(o.getId(),void 0);else{const d=this.getFirstChildOfFirstChild(i,c);d&&i.setGroupValue(o.getId(),d.key)}})})}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){const s=i.parent;if(s&&i.firstChild){if(s.rowGroupColumn===t)return s}else return null;i=s}return null}},s$=class extends te{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=ge(t)&&t.length>0,s=i&&ge(e.rowNodeTransactions)&&this.gos.get("deltaSort"),n=t.some(o=>zo(this.gos)?o.column.isPrimary()&&o.column.isRowGroupActive():!!o.column.getColDef().showRowGroup);this.sortService.sort(t,i,s,e.rowNodeTransactions,e.changedPath,n)}},pM="32.3.7",vk={version:pM,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[V5,J5,s$,e$,i$,t$]},n$={version:pM,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[mk],apiFunctions:{onGroupExpandedOrCollapsed:_5,refreshClientSideRowModel:W5,isRowDataEmpty:j5,forEachLeafNode:U5,forEachNodeAfterFilter:Y5,forEachNodeAfterFilterAndSort:K5,resetRowHeights:$5,applyTransaction:Z5,applyTransactionAsync:q5,flushAsyncTransactions:X5,getBestCostNodeSelection:Q5},dependantModules:[vk,O5]},o$={version:pM,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[vk,n$]},r$=class extends te{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},a$=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:s,valueService:n,gos:o,processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:c,processRowGroupCallback:h}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=s,this.valueService=n,this.gos=o,this.processCellCallback=r,this.processHeaderCallback=a,this.processGroupHeaderCallback=c,this.processRowGroupCallback=h}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,s,n){const r=(!this.gos.get("groupHideOpenParents")||n.footer)&&this.shouldRenderGroupSummaryCell(n,e,t)?this.createValueForGroupNode(e,n):this.valueService.getValue(e,n);return this.processCell({accumulatedRowIndex:i,rowNode:n,column:e,value:r,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){var r;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){const a=(r=e.groupData)==null?void 0:r[t.getId()],c=this.gos.get("suppressGroupMaintainValueType");if(c&&a!=null||!c&&a!==void 0||nr(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){const h=t.getColDef();return h==null||h.showRowGroup===!0||h.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const o=Uv(this.gos,this.columnModel.isPivotMode());return i===0&&o}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),n=c=>{var d;if(i||s)return c.key;const h=(d=c.groupData)==null?void 0:d[e.getId()];return!h||!c.rowGroupColumn||c.rowGroupColumn.getColDef().useValueFormatterForExport===!1?h:this.valueService.formatValue(c.rowGroupColumn,c,h)??h},o=t.footer,r=[n(t)];if(!IF(this.gos))for(;t.parent;)t=t.parent,r.push(n(t));const a=r.reverse().join(" -> ");return o?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:s,value:n,processCellCallback:o,type:r}=e;return o?{value:o(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:s,node:i,value:n,type:r,parseValue:a=>this.valueService.parseValue(s,i,a,this.valueService.getValue(s,i)),formatValue:a=>this.valueService.formatValue(s,i,a)??a}))??""}:s.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(s,i,n)}:{value:n??""}}},l$=class{static download(e,t){const i=document.defaultView||window;if(!i){ne("There is no `window` associated with the current `document`");return}const s=document.createElement("a"),n=i.URL.createObjectURL(t);s.setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}},pI=`\r
`,c$=class extends a${constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,pI),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);const s=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(s.valueFormatted??s.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(ne("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=pI),this.isFirstLine=!1}},u$=class extends r${constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){ne("Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\uFEFF",i],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;l$.download(this.getFileName(n),s)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:o}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:c,processRowGroupCallback:h,suppressQuotes:d,columnSeparator:p}=e;return new c$({columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:o,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:c||void 0,processRowGroupCallback:h||void 0,suppressQuotes:d||!1,columnSeparator:p||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function h$(e,t){var i;return(i=e.csvCreator)==null?void 0:i.getDataAsCsv(t)}function d$(e,t){var i;(i=e.csvCreator)==null||i.exportDataAsCsv(t)}var g$=class extends te{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){const{allColumns:i,columnKeys:s,skipRowGroups:n}=t,o=this.getColumnsToExport(i,n,s);return _2(this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t))(e).parse()}processRow(e,t,i,s){var S;const n=t.shouldRowBeSkipped||(()=>!1),o=this.gos.get("groupRemoveSingleChildren"),r=this.gos.get("groupRemoveLowestSingleChildren"),c=t.rowPositions!=null||!!t.onlySelected,h=this.gos.get("groupHideOpenParents")&&!c,d=this.columnModel.isPivotMode()?s.leafGroup:!s.group,p=!!s.footer,f=r&&s.leafGroup,v=s.allChildrenCount===1&&((S=s.childrenAfterGroup)==null?void 0:S.length)===1&&(o||f);if(!d&&!p&&(t.skipRowGroups||v||h)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&s.rowPinned==="top"||t.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!d&&!p||n(this.gos.addGridCommonParams({node:s})))return;const w=e.onNewBodyRow(s);if(i.forEach((M,R)=>{w.onColumn(M,R,s)}),t.getCustomContentBelowRow){const M=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));M&&e.addCustomContent(M)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const s=new _F,n=this.visibleColsService.createGroups({columns:t,idCreator:s,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const s=i.onNewHeaderRow();t.forEach((n,o)=>{s.onColumn(n,o,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="top").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedTopRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedRow("top",s),i}}processRows(e,t){return i=>{const s=this.rowModel,n=Vt(this.gos),o=nr(this.gos),r=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:c="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(h=>h.rowPinned==null).sort((h,d)=>h.rowIndex-d.rowIndex).map(h=>s.getRow(h.rowIndex)).forEach(a);else if(this.columnModel.isPivotMode())n?s.forEachPivotNode(a,!0):o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(e.onlySelectedAllPages||r){const h=this.selectionService.getSelectedNodes();this.replicateSortedOrder(h),h.forEach(a)}else c==="all"?s.forEachNode(a):n||o?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(s,n)=>{var o,r;return s.rowIndex!=null&&n.rowIndex!=null?s.rowIndex-n.rowIndex:s.level===n.level?((o=s.parent)==null?void 0:o.id)===((r=n.parent)==null?void 0:r.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:s,currentPos:s.rowIndex??-1},{rowNode:n,currentPos:n.rowIndex??-1}):i(s.parent,n.parent):s.level>n.level?i(s.parent,n):i(s,n.parent)};e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="bottom").sort((n,o)=>n.rowIndex-o.rowIndex).map(n=>this.pinnedRowModel.getPinnedBottomRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedRow("bottom",s),i}}getColumnsToExport(e=!1,t=!1,i){const s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const n=this.gos.get("treeData");let o=[];return e&&!s?o=this.columnModel.getCols():o=this.visibleColsService.getAllCols(),t&&!n&&(o=o.filter(r=>!Tw(r)&&!op(r))),o}recursivelyAddHeaderGroups(e,t,i){const s=[];e.forEach(n=>{const o=n;o.getChildren&&o.getChildren().forEach(r=>s.push(r))}),e.length>0&&bi(e[0])&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let n=0;t.forEach(o=>{const r=o;let a;i?a=i(this.gos.addGridCommonParams({columnGroup:r})):a=this.columnNameService.getDisplayNameForColumnGroup(r,"header");const c=r.getLeafColumns().reduce((h,d,p,f)=>{let v=it(h);return d.getColumnGroupShow()==="open"?(!v||v[1]!=null)&&(v=[p],h.push(v)):v&&v[1]==null&&(v[1]=p-1),p===f.length-1&&v&&v[1]==null&&(v[1]=p),h},[]);s.onColumn(r,a||"",n++,r.getLeafColumns().length-1,c)})}},fM="32.3.7",yk={version:fM,moduleName:"@ag-grid-community/csv-export-core",beans:[u$,g$]},p$={version:fM,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:h$,exportDataAsCsv:d$},dependantModules:[yk]},f$={version:fM,moduleName:"@ag-grid-community/csv-export",dependantModules:[yk,p$]},m$=class extends CU{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){ge(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(st(this.params.datasource.getRows)){ne("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach((s,n)=>{this.startRow+n<i&&e(s,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new Br(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,s)=>{const n=e.rowData?e.rowData[s]:void 0;!i.id&&i.alreadyRendered&&n&&(this.rowNodes[s]=new Br(this.beans),this.rowNodes[s].setRowIndex(i.rowIndex),this.rowNodes[s].setRowTop(i.rowTop),this.rowNodes[s].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[s],n,this.startRow+s)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},v$=2,y$=class extends te{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.createBean(new m$(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&co(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(r=>r!=e),i=(r,a)=>a.getLastAccessed()-r.getLastAccessed();t.sort(i);const s=this.params.maxBlocksInCache>0,n=s?this.params.maxBlocksInCache-1:null,o=v$-1;t.forEach((r,a)=>{const c=r.getState()==="needsLoading"&&a>=o,h=s?a>=n:!1;if(c||h){if(this.isBlockCurrentlyDisplayed(r)||this.isBlockFocused(r))return;this.removeBlockFromCache(r)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const i=e.getStartRow(),s=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const s=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<s&&(this.rowCount=s)}}setRowCount(e,t){this.rowCount=e,ge(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new th;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(i,s)=>i.getId()-s.getId();return Lw(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let s=-1,n=!1;const o=new th;let r=!1;return this.getBlocksInOrder().forEach(c=>{if(!r){if(n&&s+1!==c.getId()){r=!0;return}s=c.getId(),c.forEachNode(h=>{const d=h===e||h===t;(n||d)&&i.push(h),d&&(n=!n)},o,this.rowCount)}}),r||n?[]:i}},C$=class extends te{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=hc(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&ne("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=hc(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!Dg(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;mh(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){var e;this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:((e=this.filterManager)==null?void 0:e.getFilterModel())??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:hc(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new th},this.infiniteCache=this.createBean(new y$(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function S$(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.refreshCache()}function b$(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.purgeCache()}function w$(e){var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null?void 0:i.getRowCount()}var mM="32.3.7",Ck={version:mM,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[C$],dependantModules:[bU]},x$={version:mM,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[mk],apiFunctions:{refreshInfiniteCache:S$,purgeInfiniteCache:b$,getInfiniteRowCount:w$},dependantModules:[Ck,G5]},M$={version:mM,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[Ck,x$]};Ho.__registerModules([uk,o$,M$,f$],!1,void 0);var vM=oF();const D$=nF(vM);var bs=pe.createContext({}),up=(e,t,i,s)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();if(o==null)return;let r,a,c=!1;return o.then(h=>{if(c){t.destroyBean(h);return}r=h,a=r.getGui(),i.appendChild(a),fI(s,r)}),()=>{var h;c=!0,r&&((h=a==null?void 0:a.parentElement)==null||h.removeChild(a),t.destroyBean(r),s&&fI(s,void 0))}},fI=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const i=e;i.current=t}},ro=(...e)=>e.filter(i=>i!=null&&i!=="").join(" "),zn=class Sk{constructor(...t){this.classesMap={},t.forEach(i=>{this.classesMap[i]=!0})}setClass(t,i){if(!!this.classesMap[t]==i)return this;const n=new Sk;return n.classesMap={...this.classesMap},n.classesMap[t]=i,n}toString(){return Object.keys(this.classesMap).filter(i=>this.classesMap[i]).join(" ")}},bh=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,i=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===i()},sF,Uw=(sF=pe.version)==null?void 0:sF.split(".")[0],R$=Uw==="16"||Uw==="17";function A$(){return Uw==="19"}var zm=!1;function E$(e){return zm||setTimeout(()=>zm=!1,0),zm=!0,e()}var yM=(e,t)=>{!R$&&e&&!zm?D$.flushSync(t):t()};function CM(e,t,i){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(i||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const s=[],n=[],o=new Map,r=new Map;for(let a=0;a<t.length;a++){const c=t[a];r.set(c.instanceId,c)}for(let a=0;a<e.length;a++){const c=e[a];o.set(c.instanceId,c),r.has(c.instanceId)&&s.push(c)}for(let a=0;a<t.length;a++){const c=t[a],h=c.instanceId;o.has(h)||n.push(c)}return s.length===e.length&&n.length===0?e:s.length===0&&n.length===t.length?t:s.length===0?n:n.length===0?s:[...s,...n]}var bk=L.forwardRef((e,t)=>{var q;const{ctrlsFactory:i,context:s}=L.useContext(bs),n=L.useRef(null),o=L.useRef(null),r=L.useRef(null),a=L.useRef(null),c=L.useRef(null),h=L.useRef(),[d,p]=L.useState(),[f,v]=L.useState(),[y,b]=L.useState(),[w,S]=L.useState(()=>new zn),[M,R]=L.useState(()=>new zn("ag-hidden")),[A,T]=L.useState(()=>new zn("ag-hidden")),[F,P]=L.useState(()=>new zn("ag-invisible"));L.useImperativeHandle(t,()=>({refresh(){return!1}})),L.useLayoutEffect(()=>up(d,s,o.current),[d]);const N=L.useCallback(ie=>{if(n.current=ie,!ie){h.current=s.destroyBean(h.current);return}const he={setInnerRenderer:(W,Y)=>{p(W),b(Y)},setChildCount:W=>v(W),addOrRemoveCssClass:(W,Y)=>S(X=>X.setClass(W,Y)),setContractedDisplayed:W=>T(Y=>Y.setClass("ag-hidden",!W)),setExpandedDisplayed:W=>R(Y=>Y.setClass("ag-hidden",!W)),setCheckboxVisible:W=>P(Y=>Y.setClass("ag-invisible",!W))},G=i.getInstance("groupCellRendererCtrl");G&&(h.current=s.createBean(G),h.current.init(he,ie,r.current,a.current,c.current,bk,e))},[]),O=L.useMemo(()=>`ag-cell-wrapper ${w.toString()}`,[w]),B=L.useMemo(()=>`ag-group-expanded ${M.toString()}`,[M]),V=L.useMemo(()=>`ag-group-contracted ${A.toString()}`,[A]),U=L.useMemo(()=>`ag-group-checkbox ${F.toString()}`,[F]),se=d&&d.componentFromFramework,Ce=se?d.componentClass:void 0,Se=d==null&&y!=null,H=Wo(y,!0);return pe.createElement("span",{className:O,ref:N,...e.colDef?{}:{role:(q=h.current)==null?void 0:q.getCellAriaRole()}},pe.createElement("span",{className:B,ref:a}),pe.createElement("span",{className:V,ref:c}),pe.createElement("span",{className:U,ref:r}),pe.createElement("span",{className:"ag-group-value",ref:o},Se&&pe.createElement(pe.Fragment,null,H),se&&pe.createElement(Ce,{...d.params})),pe.createElement("span",{className:"ag-group-child-count"},f))}),mI=bk,SM=L.createContext({setMethods:()=>{}}),T$=e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:s,setMethods:n}=e,[{key:o,...r},a]=L.useState(t);return L.useEffect(()=>{i(c=>a(c))},[]),pe.createElement(SM.Provider,{value:{setMethods:n}},pe.createElement(s,{key:o,...r}))},I$=L.memo(T$),L$=0;function vI(){return`agPortalKey_${++L$}`}var wk=class{constructor(e,t,i,s){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=vI(),this.portalKey=vI(),this.instanceCreated=this.isStatelessComponent()?di.resolve(!1):new di(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(ne('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(ne('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(t=>this.eParentElement.classList.add(t))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i){setTimeout(()=>this.callMethod(e,t));return}const s=i[e];if(s)return s.apply(i,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new di(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{var i;this.componentInstance=t,this.addParentContainerStyleAndClasses(),(i=this.resolveInstanceCreated)==null||i.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=vM.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return L.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function bM(e,t,i){e.forEach(s=>{const n=t[s];n&&(i[s]=n)})}var rr=class extends wk{constructor(){super(...arguments),this.awaitUpdateCallback=new di(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=I$}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:i=>this.setMethods(i),addUpdateCallback:i=>{this.updateCallback=()=>(i(this.getProps()),new di(s=>{setTimeout(()=>{s()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,bM(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new di(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},F$=class extends rr{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},P$=class extends rr{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},k$=class extends rr{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:s}=this;return e.label=t,e.icon=i,e.shake=s,e}},N$=class extends rr{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t;this.expectingNewMethods===!1&&this.hasBeenActive&&((t=this.providedMethods)==null?void 0:t.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function xk(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||di.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var O$=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=i=>this.updateModel(i)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){bM(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),xk(this.floatingFilterParams,e)}},G$=class extends rr{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),xk(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},B$=class extends rr{refresh(e){this.sourceParams=e,this.refreshProps()}},z$=class extends rr{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},H$=class extends rr{refresh(e){this.sourceParams=e,this.refreshProps()}},V$=class extends rr{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},_$=class extends rr{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function wM(){ne("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var W$=1e3,j$=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||W$}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,i=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},U$=({ctrl:e})=>{const t=e.isAlive(),{context:i}=L.useContext(bs),s=t?e.getColId():void 0,[n,o]=L.useState(),r=L.useRef(),a=L.useRef(null),c=L.useRef(null),h=L.useRef(null),d=L.useRef(),p=L.useRef();t&&!p.current&&(p.current=new ap(()=>a.current));const f=L.useCallback(w=>{var R;if(a.current=w,r.current=w?i.createBean(new vh):i.destroyBean(r.current),!w||!t)return;const S={setWidth:A=>{a.current&&(a.current.style.width=A)},addOrRemoveCssClass:(A,T)=>p.current.addOrRemoveCssClass(A,T),setAriaSort:A=>{a.current&&(A?_V(a.current,A):WV(a.current))},setUserCompDetails:A=>o(A),getUserCompInstance:()=>d.current||void 0};e.setComp(S,w,c.current,h.current,r.current);const M=e.getSelectAllGui();(R=c.current)==null||R.insertAdjacentElement("afterend",M),r.current.addDestroyFunc(()=>M.remove())},[]);L.useLayoutEffect(()=>up(n,i,h.current,d),[n]),L.useEffect(()=>{e.setDragSource(a.current)},[n]);const v=L.useMemo(()=>!!((n==null?void 0:n.componentFromFramework)&&bh(n.componentClass)),[n]),y=n&&n.componentFromFramework,b=n&&n.componentClass;return pe.createElement("div",{ref:f,className:"ag-header-cell","col-id":s,role:"columnheader"},pe.createElement("div",{ref:c,className:"ag-header-cell-resize",role:"presentation"}),pe.createElement("div",{ref:h,className:"ag-header-cell-comp-wrapper",role:"presentation"},y&&v&&pe.createElement(b,{...n.params}),y&&!v&&pe.createElement(b,{...n.params,ref:d})))},Y$=L.memo(U$),K$=({ctrl:e})=>{const{context:t,gos:i}=L.useContext(bs),[s,n]=L.useState(()=>new zn("ag-header-cell","ag-floating-filter")),[o,r]=L.useState(()=>new zn),[a,c]=L.useState(()=>new zn("ag-floating-filter-button","ag-hidden")),[h,d]=L.useState("false"),[p,f]=L.useState(),[,v]=L.useState(1),y=L.useRef(),b=L.useRef(null),w=L.useRef(null),S=L.useRef(null),M=L.useRef(null),R=L.useRef(),A=L.useRef(),T=H=>{H!=null&&R.current&&R.current(H)},F=L.useCallback(H=>{if(b.current=H,y.current=H?t.createBean(new vh):t.destroyBean(y.current),!H)return;A.current=new di(ie=>{R.current=ie});const q={addOrRemoveCssClass:(ie,he)=>n(G=>G.setClass(ie,he)),addOrRemoveBodyCssClass:(ie,he)=>r(G=>G.setClass(ie,he)),setButtonWrapperDisplayed:ie=>{c(he=>he.setClass("ag-hidden",!ie)),d(ie?"false":"true")},setWidth:ie=>{b.current&&(b.current.style.width=ie)},setCompDetails:ie=>f(ie),getFloatingFilterComp:()=>A.current?A.current:null,setMenuIcon:ie=>{var he;return(he=M.current)==null?void 0:he.appendChild(ie)}};e.setComp(q,H,M.current,w.current,y.current)},[]);L.useLayoutEffect(()=>up(p,t,w.current,T),[p]);const P=L.useMemo(()=>s.toString(),[s]),N=L.useMemo(()=>o.toString(),[o]),O=L.useMemo(()=>a.toString(),[a]),B=L.useMemo(()=>!!(p&&p.componentFromFramework&&bh(p.componentClass)),[p]),V=L.useMemo(()=>i.get("reactiveCustomComponents"),[]),U=L.useMemo(()=>{if(p)if(V){const H=new O$(p.params,()=>v(q=>q+1));return T(H),H}else p.componentFromFramework&&wM()},[p]),se=U==null?void 0:U.getProps(),Ce=p&&p.componentFromFramework,Se=p&&p.componentClass;return pe.createElement("div",{ref:F,className:P,role:"gridcell"},pe.createElement("div",{ref:w,className:N,role:"presentation"},Ce&&!V&&pe.createElement(Se,{...p.params,ref:B?()=>{}:T}),Ce&&V&&pe.createElement(SM.Provider,{value:{setMethods:H=>U.setMethods(H)}},pe.createElement(Se,{...se}))),pe.createElement("div",{ref:S,"aria-hidden":h,className:O,role:"presentation"},pe.createElement("button",{ref:M,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},$$=L.memo(K$),Z$=({ctrl:e})=>{const{context:t}=L.useContext(bs),[i,s]=L.useState(()=>new zn),[n,o]=L.useState(()=>new zn),[r,a]=L.useState("false"),[c,h]=L.useState(),[d,p]=L.useState(),f=L.useMemo(()=>e.getColId(),[]),v=L.useRef(),y=L.useRef(null),b=L.useRef(null),w=L.useRef(null),S=L.useRef(),M=L.useCallback(N=>{if(y.current=N,v.current=N?t.createBean(new vh):t.destroyBean(v.current),!N)return;const O={setWidth:B=>{y.current&&(y.current.style.width=B)},addOrRemoveCssClass:(B,V)=>s(U=>U.setClass(B,V)),setHeaderWrapperHidden:B=>{const V=w.current;V&&(B?V.style.setProperty("display","none"):V.style.removeProperty("display"))},setHeaderWrapperMaxHeight:B=>{const V=w.current;V&&(B!=null?V.style.setProperty("max-height",`${B}px`):V.style.removeProperty("max-height"),V.classList.toggle("ag-header-cell-comp-wrapper-limited-height",B!=null))},setUserCompDetails:B=>p(B),setResizableDisplayed:B=>{o(V=>V.setClass("ag-hidden",!B)),a(B?"false":"true")},setAriaExpanded:B=>h(B),getUserCompInstance:()=>S.current||void 0};e.setComp(O,N,b.current,w.current,v.current)},[]);L.useLayoutEffect(()=>up(d,t,w.current),[d]),L.useEffect(()=>{y.current&&e.setDragSource(y.current)},[d]);const R=L.useMemo(()=>!!((d==null?void 0:d.componentFromFramework)&&bh(d.componentClass)),[d]),A=L.useMemo(()=>"ag-header-group-cell "+i.toString(),[i]),T=L.useMemo(()=>"ag-header-cell-resize "+n.toString(),[n]),F=d&&d.componentFromFramework,P=d&&d.componentClass;return pe.createElement("div",{ref:M,className:A,"col-id":f,role:"columnheader","aria-expanded":c},pe.createElement("div",{ref:w,className:"ag-header-cell-comp-wrapper",role:"presentation"},F&&R&&pe.createElement(P,{...d.params}),F&&!R&&pe.createElement(P,{...d.params,ref:S})),pe.createElement("div",{ref:b,"aria-hidden":r,className:T}))},q$=L.memo(Z$),X$=({ctrl:e})=>{const{context:t}=L.useContext(bs),{topOffset:i,rowHeight:s}=L.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),o=e.getHeaderRowClass(),[r,a]=L.useState(()=>s+"px"),[c,h]=L.useState(()=>i+"px"),d=L.useRef(null),p=L.useRef(null),[f,v]=L.useState(()=>e.getHeaderCtrls()),y=L.useRef(),b=L.useRef(null),w=L.useCallback(R=>{if(b.current=R,y.current=R?t.createBean(new vh):t.destroyBean(y.current),!R)return;const A={setHeight:T=>a(T),setTop:T=>h(T),setHeaderCtrls:(T,F,P)=>{p.current=d.current,d.current=T;const N=CM(p.current,T,F);N!==p.current&&yM(P,()=>v(N))},setWidth:T=>{b.current&&(b.current.style.width=T)}};e.setComp(A,y.current,!1)},[]),S=L.useMemo(()=>({height:r,top:c}),[r,c]),M=L.useCallback(R=>{switch(e.getType()){case Hw.COLUMN_GROUP:return pe.createElement(q$,{ctrl:R,key:R.instanceId});case Hw.FLOATING_FILTER:return pe.createElement($$,{ctrl:R,key:R.instanceId});default:return pe.createElement(Y$,{ctrl:R,key:R.instanceId})}},[]);return pe.createElement("div",{ref:w,className:o,role:"row",style:S,"aria-rowindex":n},f.map(M))},Q$=L.memo(X$),J$=({pinned:e})=>{const[t,i]=L.useState(!0),[s,n]=L.useState([]),{context:o}=L.useContext(bs),r=L.useRef(null),a=L.useRef(null),c=L.useRef(),h=e==="left",d=e==="right",p=!h&&!d,f=L.useCallback(b=>{if(r.current=b,c.current=b?o.createBean(new Dj(e)):o.destroyBean(c.current),!b)return;const w={setDisplayed:i,setCtrls:S=>n(S),setCenterWidth:S=>{a.current&&(a.current.style.width=S)},setViewportScrollLeft:S=>{r.current&&(r.current.scrollLeft=S)},setPinnedContainerWidth:S=>{r.current&&(r.current.style.width=S,r.current.style.minWidth=S,r.current.style.maxWidth=S)}};c.current.setComp(w,r.current)},[]),v=t?"":"ag-hidden",y=()=>s.map(b=>pe.createElement(Q$,{ctrl:b,key:b.instanceId}));return pe.createElement(pe.Fragment,null,h&&pe.createElement("div",{ref:f,className:"ag-pinned-left-header "+v,"aria-hidden":!t,role:"rowgroup"},y()),d&&pe.createElement("div",{ref:f,className:"ag-pinned-right-header "+v,"aria-hidden":!t,role:"rowgroup"},y()),p&&pe.createElement("div",{ref:f,className:"ag-header-viewport "+v,role:"presentation"},pe.createElement("div",{ref:a,className:"ag-header-container",role:"rowgroup"},y())))},Bb=L.memo(J$),e6=()=>{const[e,t]=L.useState(()=>new zn),[i,s]=L.useState(),{context:n}=L.useContext(bs),o=L.useRef(null),r=L.useRef(),a=L.useCallback(d=>{if(o.current=d,r.current=d?n.createBean(new lj):n.destroyBean(r.current),!d)return;const p={addOrRemoveCssClass:(f,v)=>t(y=>y.setClass(f,v)),setHeightAndMinHeight:f=>s(f)};r.current.setComp(p,d,d)},[]),c=L.useMemo(()=>"ag-header "+e.toString(),[e]),h=L.useMemo(()=>({height:i,minHeight:i}),[i]);return pe.createElement("div",{ref:a,className:c,style:h,role:"presentation"},pe.createElement(Bb,{pinned:"left"}),pe.createElement(Bb,{pinned:null}),pe.createElement(Bb,{pinned:"right"}))},t6=L.memo(e6),i6=(e,t)=>{L.useEffect(()=>{const i=t.current;if(i){const s=i.parentElement;if(s){const n=document.createComment(e);return s.insertBefore(n,i),()=>{s.removeChild(n)}}}},[e])},nc=i6,s6=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new di(i=>{this.resolveInstanceCreated=i}),this.onValueChange=i=>this.updateValue(i),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){bM(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,(t=this.resolveInstanceCreated)==null||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},n6=e=>{const t=L.useRef(e),i=L.useRef(),s=L.useRef(!1),n=L.useRef(!1),[,o]=L.useState(0);s.current&&(n.current=!0),L.useEffect(()=>(s.current||(i.current=t.current(),s.current=!0),o(r=>r+1),()=>{var r;n.current&&((r=i.current)==null||r.call(i))}),[])},o6=e=>{const[t,i]=L.useState(),{context:s,popupService:n,localeService:o,gos:r,editService:a}=L.useContext(bs);return n6(()=>{var A,T;const{editDetails:c,cellCtrl:h,eParentCell:d}=e,{compDetails:p}=c,f=r.get("stopEditingWhenCellsLoseFocus"),v=s.createBean(a.createPopupEditorWrapper(p.params)),y=v.getGui();if(e.jsChildComp){const F=e.jsChildComp.getGui();F&&y.appendChild(F)}const b={column:h.getColumn(),rowNode:h.getRowNode(),type:"popupCellEditor",eventSource:d,ePopup:y,position:c.popupPosition,keepWithinBounds:!0},w=n.positionPopupByComponent.bind(n,b),S=o.getLocaleTextFunc(),M=n.addPopup({modal:f,eChild:y,closeOnEsc:!0,closedCallback:()=>{h.onPopupEditorClosed()},anchorToElement:d,positionCallback:w,ariaLabel:S("ariaLabelCellEditor","Cell Editor")}),R=M?M.hideFunc:void 0;return i(v),(T=(A=e.jsChildComp)==null?void 0:A.afterGuiAttached)==null||T.call(A),()=>{R==null||R(),s.destroyBean(v)}}),pe.createElement(pe.Fragment,null,t&&e.wrappedContent&&vM.createPortal(e.wrappedContent,t.getGui()))},yI=L.memo(o6),r6=(e,t,i,s,n,o)=>{const{context:r}=L.useContext(bs),a=L.useCallback(()=>{const c=n.current;if(!c)return;const h=c.getGui();h&&h.parentElement&&h.parentElement.removeChild(h),r.destroyBean(c),n.current=void 0},[]);L.useEffect(()=>{const c=e!=null,h=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,d=t&&i==null;if(!(c&&h&&!d)){a();return}const f=e.compDetails;if(n.current){const y=n.current,w=y.refresh!=null&&e.force==!1?y.refresh(f.params):!1;if(w===!0||w===void 0)return;a()}const v=f.newAgStackInstance();v!=null&&v.then(y=>{if(!y)return;const b=y.getGui();if(!b)return;(t?i:o.current).appendChild(b),n.current=y})},[e,t,s]),L.useEffect(()=>a,[])},a6=r6,l6=(e,t,i)=>{const{compProxy:s}=e;i(s);const n=s.getProps(),o=bh(t);return pe.createElement(SM.Provider,{value:{setMethods:r=>s.setMethods(r)}},o?pe.createElement(t,{...n}):pe.createElement(t,{...n,ref:r=>s.setRef(r)}))},CI=(e,t,i)=>{const s=e.compProxy;return pe.createElement(pe.Fragment,null,s?l6(e,t,i):pe.createElement(t,{...e.compDetails.params,ref:i}))},c6=(e,t,i,s,n)=>{const o=e.compDetails,r=o.componentClass,a=o.componentFromFramework&&!e.popup,c=o.componentFromFramework&&e.popup,h=!o.componentFromFramework&&e.popup;return pe.createElement(pe.Fragment,null,a&&CI(e,r,t),c&&pe.createElement(yI,{editDetails:e,cellCtrl:s,eParentCell:i,wrappedContent:CI(e,r,t)}),h&&n&&pe.createElement(yI,{editDetails:e,cellCtrl:s,eParentCell:i,jsChildComp:n}))},u6=(e,t,i,s,n,o,r)=>{const{compDetails:a,value:c}=e,h=!a,d=a&&a.componentFromFramework,p=a&&a.componentClass,f=c!=null&&c.toString?c.toString():c,v=()=>pe.createElement(pe.Fragment,null,h&&pe.createElement(pe.Fragment,null,f),d&&!o&&pe.createElement(p,{...a.params,key:t,ref:s}),d&&o&&pe.createElement(p,{...a.params,key:t}));return pe.createElement(pe.Fragment,null,n?pe.createElement("span",{role:"presentation",id:`cell-${i}`,className:"ag-cell-value",ref:r},v()):v())},h6=({cellCtrl:e,printLayout:t,editingRow:i})=>{const{context:s}=L.useContext(bs),{colIdSanitised:n,instanceId:o}=e,r=L.useRef(),[a,c]=L.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[h,d]=L.useState(),[p,f]=L.useState(1),[v,y]=L.useState(),[b,w]=L.useState(!1),[S,M]=L.useState(!1),[R,A]=L.useState(!1),[T,F]=L.useState(),P=L.useMemo(()=>e.isForceWrapper(),[e]),N=L.useMemo(()=>e.getCellAriaRole(),[e]),O=L.useRef(null),B=L.useRef(null),V=L.useRef(),U=L.useRef(),se=L.useRef(),Ce=L.useRef([]),Se=L.useRef(),[H,q]=L.useState(0),ie=L.useCallback(ae=>{Se.current=ae,q(we=>we+1)},[]),he=a!=null&&(b||R||S),G=P||he,W=L.useCallback(ae=>{if(U.current=ae,ae){const we=ae.isCancelBeforeStart&&ae.isCancelBeforeStart();setTimeout(()=>{we?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),Y=L.useRef();Y.current||(Y.current=new ap(()=>O.current)),a6(a,G,Se.current,H,V,O);const X=L.useRef();L.useLayoutEffect(()=>{var We;const ae=X.current,we=a;if(X.current=a,ae==null||ae.compDetails==null||we==null||we.compDetails==null)return;const Re=ae.compDetails,Ee=we.compDetails;if(Re.componentClass!=Ee.componentClass||((We=B.current)==null?void 0:We.refresh)==null)return;B.current.refresh(Ee.params)!=!0&&f(Ve=>Ve+1)},[a]),L.useLayoutEffect(()=>{if(!(h&&!h.compDetails.componentFromFramework))return;const we=h.compDetails,Re=h.popup===!0,Ee=we.newAgStackInstance();return Ee.then(_e=>{if(!_e)return;const We=_e.getGui();if(W(_e),!Re){const Ve=(P?se:O).current;Ve==null||Ve.appendChild(We),_e.afterGuiAttached&&_e.afterGuiAttached()}F(_e)}),()=>{Ee.then(_e=>{var Ve;const We=_e.getGui();s.destroyBean(_e),W(void 0),F(void 0),(Ve=We==null?void 0:We.parentElement)==null||Ve.removeChild(We)})}},[h]);const ee=L.useCallback(ae=>{if(se.current=ae,!ae){Ce.current.forEach(Re=>Re()),Ce.current=[];return}const we=Re=>{if(Re){const Ee=Re.getGui();ae.insertAdjacentElement("afterbegin",Ee),Ce.current.push(()=>{s.destroyBean(Re),wc(Ee)})}return Re};if(b){const Re=e.createSelectionCheckbox();we(Re)}R&&we(e.createDndSource()),S&&we(e.createRowDragComp())},[e,s,R,S,b]),fe=L.useCallback(ae=>{if(O.current=ae,r.current=ae?s.createBean(new vh):s.destroyBean(r.current),!ae||!e)return;const we={addOrRemoveCssClass:(Ee,_e)=>Y.current.addOrRemoveCssClass(Ee,_e),setUserStyles:Ee=>y(Ee),getFocusableElement:()=>O.current,setIncludeSelection:Ee=>w(Ee),setIncludeRowDrag:Ee=>M(Ee),setIncludeDndSource:Ee=>A(Ee),getCellEditor:()=>U.current||null,getCellRenderer:()=>B.current??V.current,getParentOfValue:()=>Se.current??se.current??O.current,setRenderDetails:(Ee,_e,We)=>{c(Ve=>(Ve==null?void 0:Ve.compDetails)!==Ee||(Ve==null?void 0:Ve.value)!==_e||(Ve==null?void 0:Ve.force)!==We?{value:_e,compDetails:Ee,force:We}:Ve)},setEditDetails:(Ee,_e,We,Ve)=>{if(Ee){let kt;Ve?kt=new s6(Ee.params,()=>f(ft=>ft+1)):Ee.componentFromFramework&&wM(),d({compDetails:Ee,popup:_e,popupPosition:We,compProxy:kt}),_e||c(void 0)}else d(kt=>{kt!=null&&kt.compProxy&&(U.current=void 0)})}},Re=se.current||void 0;e.setComp(we,ae,Re,t,i,r.current)},[]),le=L.useMemo(()=>{var we;return!!(((we=a==null?void 0:a.compDetails)==null?void 0:we.componentFromFramework)&&bh(a.compDetails.componentClass))},[a]);L.useLayoutEffect(()=>{var ae;O.current&&(Y.current.addOrRemoveCssClass("ag-cell-value",!G),Y.current.addOrRemoveCssClass("ag-cell-inline-editing",!!h&&!h.popup),Y.current.addOrRemoveCssClass("ag-cell-popup-editing",!!h&&!!h.popup),Y.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!h||!!h.popup),(ae=e.getRowCtrl())==null||ae.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.isEditing()&&O.current.focus({preventScroll:!0}))});const be=()=>pe.createElement(pe.Fragment,null,a!=null&&u6(a,p,o,B,G,le,ie),h!=null&&c6(h,W,O.current,e,T)),ue=L.useCallback(()=>e.onFocusOut(),[]);return pe.createElement("div",{ref:fe,style:v,role:N,"col-id":n,onBlur:ue},G?pe.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:ee},be()):be())},d6=L.memo(h6),g6=({rowCtrl:e,containerType:t})=>{const{context:i,gos:s}=L.useContext(bs),n=L.useRef(),o=L.useRef(e.getDomOrder()),r=e.isFullWidth(),a=e.getRowNode().displayed,[c,h]=L.useState(()=>a?e.getRowIndex():null),[d,p]=L.useState(()=>e.getRowId()),[f,v]=L.useState(()=>e.getBusinessKey()),[y,b]=L.useState(()=>e.getRowStyles()),w=L.useRef(null),S=L.useRef(null),[M,R]=L.useState(()=>null),[A,T]=L.useState(),[F,P]=L.useState(()=>a?e.getInitialRowTop(t):void 0),[N,O]=L.useState(()=>a?e.getInitialTransform(t):void 0),B=L.useRef(null),V=L.useRef(),U=L.useRef(!1),[se,Ce]=L.useState(0);L.useEffect(()=>{var fe;if(U.current||!A||se>10)return;const ee=(fe=B.current)==null?void 0:fe.firstChild;ee?(e.setupDetailRowAutoHeight(ee),U.current=!0):Ce(le=>le+1)},[A,se]);const Se=L.useRef();Se.current||(Se.current=new ap(()=>B.current));const H=L.useCallback(ee=>{if(B.current=ee,n.current=ee?i.createBean(new vh):i.destroyBean(n.current),!ee){e.unsetComp(t);return}if(!e.isAlive())return;const fe={setTop:P,setTransform:O,addOrRemoveCssClass:(le,be)=>Se.current.addOrRemoveCssClass(le,be),setDomOrder:le=>o.current=le,setRowIndex:h,setRowId:p,setRowBusinessKey:v,setUserStyles:b,setCellCtrls:(le,be)=>{S.current=w.current,w.current=le;const ue=CM(S.current,le,o.current);ue!==S.current&&yM(be,()=>R(ue))},showFullWidth:le=>T(le),getFullWidthCellRenderer:()=>V.current,refreshFullWidth:le=>W.current?(T(be=>({...be,params:le()})),!0):!V.current||!V.current.refresh?!1:V.current.refresh(le())};e.setComp(fe,ee,t,n.current)},[]);L.useLayoutEffect(()=>up(A,i,B.current,V),[A]);const q=L.useMemo(()=>{const ee={top:F,transform:N};return Object.assign(ee,y),ee},[F,N,y]),ie=r&&(A==null?void 0:A.componentFromFramework),he=!r&&M!=null,G=L.useMemo(()=>!!((A==null?void 0:A.componentFromFramework)&&bh(A.componentClass)),[A]),W=L.useRef(!1);L.useEffect(()=>{W.current=G&&!!A&&!!s.get("reactiveCustomComponents")},[G,A]);const Y=()=>M==null?void 0:M.map(ee=>pe.createElement(d6,{cellCtrl:ee,editingRow:e.isEditing(),printLayout:e.isPrintLayout(),key:ee.instanceId})),X=()=>{const ee=A.componentClass;return pe.createElement(pe.Fragment,null,G?pe.createElement(ee,{...A.params}):pe.createElement(ee,{...A.params,ref:V}))};return pe.createElement("div",{ref:H,role:"row",style:q,"row-index":c,"row-id":d,"row-business-key":f},he&&Y(),ie&&X())},p6=L.memo(g6),f6=({name:e})=>{const{context:t}=L.useContext(bs),i=L.useMemo(()=>Gu(e),[e]),s=L.useRef(null),n=L.useRef(null),o=L.useRef([]),r=L.useRef([]),[a,c]=L.useState(()=>[]),h=L.useRef(!1),d=L.useRef(),p=L.useMemo(()=>ro(i.viewport),[i]),f=L.useMemo(()=>ro(i.container),[i]),v=i.type==="center",y=v?s:n;nc(" AG Row Container "+e+" ",y);const b=L.useCallback(()=>v?s.current!=null&&n.current!=null:n.current!=null,[]),w=L.useCallback(()=>v?s.current==null&&n.current==null:n.current==null,[]),S=L.useCallback(()=>{if(w()&&(d.current=t.destroyBean(d.current)),b()){const T=P=>{const N=CM(r.current,o.current,h.current);N!==r.current&&(r.current=N,yM(P,()=>c(N)))},F={setHorizontalScroll:P=>{s.current&&(s.current.scrollLeft=P)},setViewportHeight:P=>{s.current&&(s.current.style.height=P)},setRowCtrls:({rowCtrls:P,useFlushSync:N})=>{const O=!!N&&o.current.length>0&&P.length>0;o.current=P,T(O)},setDomOrder:P=>{h.current!=P&&(h.current=P,T(!1))},setContainerWidth:P=>{n.current&&(n.current.style.width=P)},setOffsetTop:P=>{n.current&&(n.current.style.transform=`translateY(${P})`)}};d.current=t.createBean(new v4(e)),d.current.setComp(F,n.current,s.current)}},[b,w]),M=L.useCallback(T=>{n.current=T,S()},[S]),R=L.useCallback(T=>{s.current=T,S()},[S]),A=()=>pe.createElement("div",{className:f,ref:M,role:"rowgroup"},a.map(T=>pe.createElement(p6,{rowCtrl:T,containerType:i.type,key:T.instanceId})));return pe.createElement(pe.Fragment,null,v?pe.createElement("div",{className:p,ref:R,role:"presentation"},A()):A())},m6=L.memo(f6),v6=()=>{const{context:e,resizeObserverService:t}=L.useContext(bs),[i,s]=L.useState(""),[n,o]=L.useState(0),[r,a]=L.useState(0),[c,h]=L.useState("0px"),[d,p]=L.useState("0px"),[f,v]=L.useState("100%"),[y,b]=L.useState("0px"),[w,S]=L.useState("0px"),[M,R]=L.useState("100%"),[A,T]=L.useState(""),[F,P]=L.useState(""),[N,O]=L.useState(null),[B,V]=L.useState(""),[U,se]=L.useState(null),[Ce,Se]=L.useState("ag-layout-normal"),H=L.useRef();H.current||(H.current=new ap(()=>q.current));const q=L.useRef(null),ie=L.useRef(null),he=L.useRef(null),G=L.useRef(null),W=L.useRef(null),Y=L.useRef(null),X=L.useRef(null),ee=L.useRef([]),fe=L.useRef([]);nc(" AG Grid Body ",q),nc(" AG Pinned Top ",ie),nc(" AG Sticky Top ",he),nc(" AG Middle ",Y),nc(" AG Pinned Bottom ",X);const le=L.useCallback(Mt=>{if(q.current=Mt,!Mt){ee.current=e.destroyBeans(ee.current),fe.current.forEach(wt=>wt()),fe.current=[];return}if(!e)return;const mt=(wt,Nt)=>{wt.appendChild(Nt),fe.current.push(()=>wt.removeChild(Nt))},Di=wt=>{const Nt=e.createBean(new wt);return ee.current.push(Nt),Nt},li=(wt,Nt,Eo)=>{mt(wt,document.createComment(Eo)),mt(wt,Di(Nt).getGui())};li(Mt,Aj," AG Fake Horizontal Scroll "),li(Mt,Rj," AG Overlay Wrapper "),W.current&&li(W.current,Ej," AG Fake Vertical Scroll ");const Cl={setRowAnimationCssOnBodyViewport:s,setColumnCount:wt=>{q.current&&HV(q.current,wt)},setRowCount:wt=>{q.current&&BV(q.current,wt)},setTopHeight:o,setBottomHeight:a,setStickyTopHeight:h,setStickyTopTop:p,setStickyTopWidth:v,setTopDisplay:T,setBottomDisplay:P,setColumnMovingCss:(wt,Nt)=>H.current.addOrRemoveCssClass(wt,Nt),updateLayoutClasses:Se,setAlwaysVerticalScrollClass:O,setPinnedTopBottomOverflowY:V,setCellSelectableCss:(wt,Nt)=>se(Nt?wt:null),setBodyViewportWidth:wt=>{Y.current&&(Y.current.style.width=wt)},registerBodyViewportResizeListener:wt=>{if(Y.current){const Nt=t.observeResize(Y.current,wt);fe.current.push(()=>Nt())}},setStickyBottomHeight:b,setStickyBottomBottom:S,setStickyBottomWidth:R},dr=e.createBean(new b4);ee.current.push(dr),dr.setComp(Cl,Mt,Y.current,ie.current,X.current,he.current,G.current)},[]),be=L.useMemo(()=>ro("ag-root","ag-unselectable",Ce),[Ce]),ue=L.useMemo(()=>ro("ag-body-viewport",i,Ce,N,U),[i,Ce,N,U]),ae=L.useMemo(()=>ro("ag-body",Ce),[Ce]),we=L.useMemo(()=>ro("ag-floating-top",U),[U]),Re=L.useMemo(()=>ro("ag-sticky-top",U),[U]),Ee=L.useMemo(()=>ro("ag-sticky-bottom",y==="0px"?"ag-hidden":null,U),[U,y]),_e=L.useMemo(()=>ro("ag-floating-bottom",U),[U]),We=L.useMemo(()=>({height:n,minHeight:n,display:A,overflowY:B}),[n,A,B]),Ve=L.useMemo(()=>({height:c,top:d,width:f}),[c,d,f]),kt=L.useMemo(()=>({height:y,bottom:w,width:M}),[y,w,M]),ft=L.useMemo(()=>({height:r,minHeight:r,display:F,overflowY:B}),[r,F,B]),Fi=Mt=>pe.createElement(m6,{name:Mt,key:`${Mt}-container`}),_i=({section:Mt,children:mt,className:Di,style:li})=>pe.createElement("div",{ref:Mt,className:Di,role:"presentation",style:li},mt.map(Fi));return pe.createElement("div",{ref:le,className:be,role:"treegrid"},pe.createElement(t6,null),_i({section:ie,className:we,style:We,children:["topLeft","topCenter","topRight","topFullWidth"]}),pe.createElement("div",{className:ae,ref:W,role:"presentation"},_i({section:Y,className:ue,children:["left","center","right","fullWidth"]})),_i({section:he,className:Re,style:Ve,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),_i({section:G,className:Ee,style:kt,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),_i({section:X,className:_e,style:ft,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},y6=L.memo(v6),C6=(e,t)=>{const{children:i,eFocusableElement:s,onTabKeyDown:n,gridCtrl:o,forceFocusOutWhenTabGuardsAreEmpty:r}=e,{context:a}=L.useContext(bs),c=L.useRef(null),h=L.useRef(null),d=L.useRef(),p=w=>{const S=w==null?void 0:parseInt(w,10).toString();[c,h].forEach(M=>{var R,A;S===void 0?(R=M.current)==null||R.removeAttribute("tabindex"):(A=M.current)==null||A.setAttribute("tabindex",S)})};L.useImperativeHandle(t,()=>({forceFocusOutOfContainer(w){var S;(S=d.current)==null||S.forceFocusOutOfContainer(w)}}));const f=L.useCallback(()=>{const w=c.current,S=h.current;if(!w&&!S){d.current=a.destroyBean(d.current);return}if(w&&S){const M={setTabIndex:p};d.current=a.createBean(new tk({comp:M,eTopGuard:w,eBottomGuard:S,eFocusableElement:s,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:r,focusInnerElement:R=>o.focusInnerElement(R)}))}},[]),v=L.useCallback(w=>{c.current=w,f()},[f]),y=L.useCallback(w=>{h.current=w,f()},[f]),b=w=>{const S=w==="top"?Gm.TAB_GUARD_TOP:Gm.TAB_GUARD_BOTTOM;return pe.createElement("div",{className:`${Gm.TAB_GUARD} ${S}`,role:"presentation",ref:w==="top"?v:y})};return pe.createElement(pe.Fragment,null,b("top"),i,b("bottom"))},S6=L.forwardRef(C6),b6=L.memo(S6),w6=({context:e})=>{const[t,i]=L.useState(""),[s,n]=L.useState(""),[o,r]=L.useState(""),[a,c]=L.useState(null),[h,d]=L.useState(null),[p,f]=L.useState(!1),[v,y]=L.useState(),b=L.useRef(),w=L.useRef(null),S=L.useRef(),[M,R]=L.useState(null),A=L.useRef(()=>{}),T=L.useRef(),F=L.useRef([]),P=L.useCallback(()=>{},[]),N=L.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);nc(" AG Grid ",w);const O=L.useCallback(Ce=>{if(w.current=Ce,b.current=Ce?e.createBean(new e3):e.destroyBean(b.current),!Ce||e.isDestroyed())return;const Se=b.current;A.current=Se.focusInnerElement.bind(Se);const H={destroyGridUi:()=>{},setRtlClass:i,setGridThemeClass:n,forceFocusOutOfContainer:q=>{var ie,he;if(!q&&((ie=T.current)!=null&&ie.isDisplayed())){T.current.forceFocusOutOfContainer(q);return}(he=S.current)==null||he.forceFocusOutOfContainer(q)},updateLayoutClasses:r,getFocusableContainers:()=>{var he;const q=[],ie=(he=w.current)==null?void 0:he.querySelector(".ag-root");return ie&&q.push({getGui:()=>ie}),F.current.forEach(G=>{G.isDisplayed()&&q.push(G)}),q},setCursor:c,setUserSelect:d};Se.setComp(H,Ce,Ce),f(!0)},[]);L.useEffect(()=>{const Ce=b.current,Se=w.current;if(!v||!N||!Ce||!M||!Se)return;const H=[],{watermarkSelector:q,paginationSelector:ie,sideBarSelector:he,statusBarSelector:G,gridHeaderDropZonesSelector:W}=Ce.getOptionalSelectors(),Y=[];if(W){const ee=e.createBean(new W.component),fe=ee.getGui();Se.insertAdjacentElement("afterbegin",fe),Y.push(fe),H.push(ee)}if(he){const ee=e.createBean(new he.component),fe=ee.getGui(),le=M.querySelector(".ag-tab-guard-bottom");le&&(le.insertAdjacentElement("beforebegin",fe),Y.push(fe)),H.push(ee),F.current.push(ee)}const X=ee=>{const fe=e.createBean(new ee),le=fe.getGui();return Se.insertAdjacentElement("beforeend",le),Y.push(le),H.push(fe),fe};if(G&&X(G.component),ie){const ee=X(ie.component);T.current=ee,F.current.push(ee)}return q&&X(q.component),()=>{e.destroyBeans(H),Y.forEach(ee=>{var fe;(fe=ee.parentElement)==null||fe.removeChild(ee)})}},[v,M,N]);const B=L.useMemo(()=>ro("ag-root-wrapper",t,s,o),[t,s,o]),V=L.useMemo(()=>ro("ag-root-wrapper-body","ag-focus-managed",o),[o]),U=L.useMemo(()=>({userSelect:h??"",WebkitUserSelect:h??"",cursor:a??""}),[h,a]),se=L.useCallback(Ce=>{S.current=Ce,y(Ce!==null)},[]);return pe.createElement("div",{ref:O,className:B,style:U,role:"presentation"},pe.createElement("div",{className:V,ref:R,role:"presentation"},p&&M&&N&&pe.createElement(bs.Provider,{value:N},pe.createElement(b6,{ref:se,eFocusableElement:M,onTabKeyDown:P,gridCtrl:b.current,forceFocusOutWhenTabGuardsAreEmpty:!0},pe.createElement(y6,null)))))},x6=L.memo(w6),M6=class extends te{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}},Mk=e=>{var w;const t=L.useRef(),i=L.useRef(null),s=L.useRef(null),n=L.useRef([]),o=L.useRef([]),r=L.useRef(e),a=L.useRef(),c=L.useRef(),h=L.useRef(!1),[d,p]=L.useState(void 0),[,f]=L.useState(0),v=L.useCallback(S=>{if(i.current=S,!S){n.current.forEach(V=>V()),n.current.length=0;return}const M=e.modules||[];s.current||(s.current=new j$(()=>f(V=>V+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var V;(V=s.current)==null||V.destroy(),s.current=null}));const R=TV(e.gridOptions,e),A=()=>{if(h.current){const V=()=>{var se;return(se=a.current)!=null&&se.shouldQueueUpdates()?void 0:o.current.shift()};let U=V();for(;U;)U(),U=V()}},T=new E6(A);a.current=T;const F=new M6,P={providedBeanInstances:{frameworkComponentWrapper:new R6(s.current,R.reactiveCustomComponents??A5("reactiveCustomComponents")??!0),renderStatusService:F},modules:M,frameworkOverrides:T},N=V=>{p(V),V.createBean(F),n.current.push(()=>{V.destroy()}),V.getBean("ctrlsService").whenReady({addDestroyFunc:U=>{n.current.push(U)}},()=>{var se;if(V.isDestroyed())return;const U=t.current;U&&((se=e.setGridApi)==null||se.call(e,U))})},O=V=>{V.getBean("ctrlsService").whenReady({addDestroyFunc:U=>{n.current.push(U)}},()=>{o.current.forEach(U=>U()),o.current.length=0,h.current=!0})},B=new T5;R.gridId??(R.gridId=c.current),t.current=B.create(S,R,N,O,P),n.current.push(()=>{t.current=void 0}),t.current&&(c.current=t.current.getGridId())},[]),y=L.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),b=L.useCallback(S=>{var M;h.current&&!((M=a.current)!=null&&M.shouldQueueUpdates())?S():o.current.push(S)},[]);return L.useEffect(()=>{const S=D6(r.current,e);r.current=e,b(()=>{t.current&&IV(S,t.current)})},[e]),pe.createElement("div",{style:y,className:e.className,ref:v},d&&!d.isDestroyed()?pe.createElement(x6,{context:d}):null,((w=s.current)==null?void 0:w.getPortals())??null)};function D6(e,t){const i={};return Object.keys(t).forEach(s=>{const n=t[s];e[s]!==n&&(i[s]=n)}),i}var R6=class extends B5{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const n=(o=>{switch(o){case"filter":return N$;case"floatingFilterComponent":return G$;case"dateComponent":return P$;case"dragAndDropImageComponent":return k$;case"loadingOverlayComponent":return B$;case"noRowsOverlayComponent":return H$;case"statusPanel":return V$;case"toolPanel":return _$;case"menuItem":return z$;case"cellRenderer":return F$}})(t.propertyName);if(n)return new n(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":wM();break}const i=!t.cellRenderer&&t.propertyName!=="toolPanel";return new wk(e,this.parent,t,i)}},A6=L.forwardRef((e,t)=>{const{ctrlsFactory:i,context:s,gos:n,resizeObserverService:o,rowModel:r}=L.useContext(bs),[a,c]=L.useState(()=>new zn),[h,d]=L.useState(()=>new zn),[p,f]=L.useState(),[v,y]=L.useState(),b=L.useRef(),w=L.useRef(null),S=L.useRef(),M=L.useMemo(()=>Ho.__getGridRegisteredModules(e.api.getGridId()),[e]),R=L.useMemo(()=>a.toString()+" ag-details-row",[a]),A=L.useMemo(()=>h.toString()+" ag-details-grid",[h]);t&&L.useImperativeHandle(t,()=>({refresh(){var P;return((P=b.current)==null?void 0:P.refresh())??!1}})),e.template&&ne("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const T=L.useCallback(P=>{var B;if(w.current=P,!P){b.current=s.destroyBean(b.current),(B=S.current)==null||B.call(S);return}const N={addOrRemoveCssClass:(V,U)=>c(se=>se.setClass(V,U)),addOrRemoveDetailGridCssClass:(V,U)=>d(se=>se.setClass(V,U)),setDetailGrid:V=>f(V),setRowData:V=>y(V),getGui:()=>w.current},O=i.getInstance("detailCellRenderer");if(O&&(s.createBean(O),O.init(N,e),b.current=O,n.get("detailRowAutoHeight"))){const V=()=>{if(w.current==null)return;const U=w.current.clientHeight;U!=null&&U>0&&setTimeout(()=>{e.node.setRowHeight(U),(Vt(n)||nr(n))&&r.onRowHeightChanged()},0)};S.current=o.observeResize(P,V),V()}},[]),F=L.useCallback(P=>{var N;(N=b.current)==null||N.registerDetailWithMaster(P)},[]);return pe.createElement("div",{className:R,ref:T},p&&pe.createElement(Mk,{className:A,...p,modules:M,rowData:v,setGridApi:F}))}),E6=class extends ik{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:mI,agGroupRowRenderer:mI,agDetailCellRenderer:A6},this.wrapIncoming=(t,i)=>i==="ensureVisible"?E$(t):t(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return A$()}},xM=class extends L.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return pe.createElement(Mk,{...this.props,setGridApi:this.setGridApi})}};const hp="http://4.237.58.241:3000",T6=async(e=1,t=100)=>{const s=await(await fetch(`${hp}/movies/search?page=${e}&limit=${t}`)).json();return{data:s.data,totalCount:s.pagination.total}},I6=async e=>await(await fetch(`${hp}/movies/data/${e}`)).json(),L6=async(e,t)=>{const i=await fetch(`${hp}/people/${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!i.ok)throw new Error("Unauthorized");return i.json()},F6=async e=>{const t=await fetch(`${hp}/user/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Registration failed");return await t.json()},P6=async e=>{const t=await fetch(`${hp}/user/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Login failed");return await t.json()};function k6(){const e=ph(),t=L.useRef(null),i=new Date().getFullYear(),s=[],[n,o]=L.useState(""),r=f=>{if(!t.current)return;const v=t.current.api;v.setColumnFilterModel("title",f?{type:"contains",filter:f}:null),v.onFilterChanged()};for(let f=i;f>=1990;f--)s.push(f);const a=f=>{if(!t.current)return;const v=t.current.api;v.setColumnFilterModel("year",f?{type:"equals",filter:parseInt(f)}:null),v.onFilterChanged()},c={getRows:async f=>{const v=f.endRow-f.startRow,y=Math.floor(f.startRow/v)+1;console.log("AG Grid requested page:",y,"with size:",v);try{const b=await T6(y,v);f.successCallback(b.data,b.totalCount)}catch(b){console.log("Loading page",b),f.failCallback()}}},h=L.useMemo(()=>({flex:1,suppressHeaderMenuButton:!0})),[d,p]=L.useState([{headerName:"Title",field:"title",filter:"agTextColumnFilter",suppressHeaderMenuButton:!0,cellRendererFrameworks:f=>ve.jsx(cc,{to:`/movies/${f.data.imdbID}`,children:f.value})},{headerName:"Year",field:"year",filter:!0,suppressHeaderMenuButton:!0},{headerName:"IMDb",field:"imdbRating",valueFormatter:f=>f.value?f.value:"N/A"},{headerName:"Rotten Tomatoes",field:"rottenTomatoesRating",valueFormatter:f=>f.value?f.value:"N/A"},{headerName:"Metacritic",field:"metacriticRating",valueFormatter:f=>f.value?f.value:"N/A"},{headerName:"Cassification",field:"classification",valueFormatter:f=>f.value?f.value:"N/A"}]);return ve.jsxs(ve.Fragment,{children:[ve.jsxs("div",{className:"movies-filters",children:[ve.jsx("input",{className:"form-control",type:"text",placeholder:"Search by title",onChange:f=>r(f.target.value),style:{maxWidth:"300px",color:"#fff"}}),ve.jsxs("select",{className:"form-select",value:n,onChange:f=>{o(f.target.value),a(f.target.value)},style:{maxWidth:"200px"},children:[ve.jsx("option",{value:"",children:"All Years"}),s.map(f=>ve.jsx("option",{value:f,children:f},f))]})]}),ve.jsx("div",{className:"ag-theme-material-dark",style:{height:"800px",width:"100%"},children:ve.jsx(xM,{domLayout:"normal",ref:t,columnDefs:d,defaultColDef:h,datasource:c,cacheBlockSize:100,maxBlocksInCache:5,rowModelType:"infinite",suppressColumnVirtualisation:!1,onRowClicked:f=>{const v=f.data.imdbID;e(`/movies/${v}`)}})})]})}function N6(){const e=ph(),t=localStorage.getItem("token"),i=()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),e("/login")};return ve.jsxs("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark px-4",children:[ve.jsx(cc,{to:"/",className:"navbar-brand",children:"🎬 MovieVerse"}),ve.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav",children:ve.jsx("span",{className:"navbar-toggler-icon"})}),ve.jsxs("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[ve.jsx("ul",{className:"navbar-nav me-auto",children:ve.jsx("li",{className:"nav-item",children:ve.jsx(cc,{to:"/movies",className:"nav-link",children:"Movies"})})}),ve.jsx("ul",{className:"navbar-nav",children:t?ve.jsxs(ve.Fragment,{children:[ve.jsx("li",{className:"nav-item text-light nav-link",children:"Logged in"}),ve.jsx("li",{className:"nav-item",children:ve.jsx("button",{onClick:i,className:"btn btn-outline-light",children:"Logout"})})]}):ve.jsx("li",{className:"nav-item",children:ve.jsx(cc,{to:"/login",className:"btn btn-outline-primary",children:"Login / Register"})})})]})]})}function O6(){const[e,t]=L.useState([]),i=ph(),{id:s}=fF(),[n,o]=L.useState([null]);if(L.useEffect(()=>{(async()=>{try{console.log("Fetching Movies",s);const d=await I6(s);console.log("Movie data received",d),o(d),t(d.principals.map(p=>{var f;return{id:p.id,role:p.category,name:p.name,character:((f=p.characters)==null?void 0:f[0])||"N/A"}}))}catch(d){console.log(d)}})()},[s]),!n)return ve.jsx("div",{children:"Loading..."});const r=L.useMemo(()=>({flex:1})),[a,c]=L.useState([{headerName:"Role",field:"role"},{headerName:"Name",field:"name",cellRendererFrameworks:h=>ve.jsx(cc,{to:`/people/${h.data.id}`,children:h.value})},{headerName:"Character",field:"character"}]);return ve.jsx("div",{className:"container-fluid movie-details-page bg-dark text-light py-4",children:ve.jsxs("div",{className:"row",children:[ve.jsxs("div",{className:"col-md-5 mb-4",children:[ve.jsx("h1",{children:n.title}),ve.jsx("img",{src:n.poster,alt:"poster",width:"300"}),ve.jsxs("p",{children:[ve.jsx("strong",{children:"Year:"})," ",n.year]}),ve.jsxs("p",{children:[ve.jsx("strong",{children:"Run time:"})," ",n.runtime," minutes"]}),ve.jsxs("p",{children:[ve.jsx("strong",{children:"Genres:"})," ",n.genres]}),ve.jsxs("p",{children:[ve.jsx("strong",{children:"Country:"})," ",n.country]}),ve.jsxs("p",{children:[ve.jsx("strong",{children:"Box Office:"})," ",n.boxoffice]}),ve.jsx("p",{children:ve.jsxs("strong",{children:[" ",n.plot]})})]}),ve.jsxs("div",{className:"col-md-7",children:[ve.jsx("h2",{className:"mb-3",children:"Credits"}),ve.jsx("div",{className:"ag-theme-material-dark rounded",style:{height:"550px",width:"100%"},children:ve.jsx(xM,{domLayout:"autoHeight",rowData:e,columnDefs:a,defaultColDef:r,onRowClicked:h=>{const d=h.data.id;i(`/people/${d}`)}})})]})]})})}var G6=Object.defineProperty,Dk=(e,t)=>{for(var i in t)G6(e,i,{get:t[i],enumerable:!0})},de={};Dk(de,{error:()=>Ak,errorOnce:()=>V6,log:()=>B6,logGroup:()=>W6,reset:()=>_6,table:()=>z6,warn:()=>Rk,warnOnce:()=>H6});var Pg=new Set;function B6(...e){console.log(...e)}function Rk(e,...t){console.warn(`AG Charts - ${e}`,...t)}function Ak(e,...t){typeof e=="object"?console.error("AG Charts error",e,...t):console.error(`AG Charts - ${e}`,...t)}function z6(...e){console.table(...e)}function H6(e,...t){const i=`Logger.warn: ${e}`;Pg.has(i)||(Rk(e,...t),Pg.add(i))}function V6(e,...t){const i=`Logger.error: ${e}`;Pg.has(i)||(Ak(e,...t),Pg.add(i))}function _6(){Pg.clear()}function W6(e,t){console.groupCollapsed(e);try{return t()}finally{console.groupEnd()}}var un={};Dk(un,{detectChartDefinition:()=>$6,getAxisModule:()=>q6,getSeriesModule:()=>Z6,hasModule:()=>Y6,listModulesByType:()=>K6,register:()=>Ek,registerMany:()=>j6,reset:()=>U6});var Hm=(e=>(e.Axis="axis",e.Chart="chart",e.Preset="preset",e.Plugin="plugin",e.Series="series",e))(Hm||{}),el=new Map;function Ek(e){const t=el.get(e.name);if(t&&(t.enterprise||!e.enterprise))throw new Error(`AG Charts - Module '${e.name}' already registered`);el.set(e.name,e)}function j6(e){for(const t of e)Ek(t)}function U6(){el.clear()}function Y6(e){return el.has(e)}function*K6(e){for(const t of el.values())t.type===e&&(yield t)}function $6(e){for(const t of el.values())if(X6(t)&&t.detect(e))return t;throw new Error("AG Charts - Unknown chart type; Check options are correctly structured and series types are specified")}function Z6(e){const t=el.get(e);if(J6(t))return t}function q6(e){const t=el.get(e);if(Q6(t))return t}function X6(e){return(e==null?void 0:e.type)==="chart"}function Q6(e){return(e==null?void 0:e.type)==="axis"}function J6(e){return(e==null?void 0:e.type)==="series"}var MM=class{constructor(){this.events=new Map}on(e,t){var i;return this.events.has(e)||this.events.set(e,new Set),(i=this.events.get(e))==null||i.add(t),()=>this.off(e,t)}off(e,t){const i=this.events.get(e);i&&(i.delete(t),i.size===0&&this.events.delete(e))}emit(e,t){var i;(i=this.events.get(e))==null||i.forEach(s=>s(t))}clear(e){e?this.events.delete(e):this.events.clear()}};function Yw(e,t="and",i=String,s=1/0){if(e.length===1)return i(e[0]);e=e.map(i);const n=e.pop();if(e.length>=s){const o=e.length-(s-1);return`${e.slice(0,s-1).join(", ")}, and ${o} more ${t} ${n}`}return`${e.join(", ")} ${t} ${n}`}function Tk(e,t=1/0){if(typeof e=="number"){if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity"}const i=JSON.stringify(e)??typeof e;return i.length>t?`${i.slice(0,t)}... (+${i.length-t} characters)`:i}function e9(e){let t=1;for(let i=0;i<e.length;i++)e.charCodeAt(i)===10&&t++;return t}function t9(e,t){if(e===t)return 0;const[i,s]=e.length<t.length?[e,t]:[t,e],n=i.length,o=s.length;let r=new Array(n+1).fill(0).map((c,h)=>h),a=new Array(n+1);for(let c=1;c<=o;c++){a[0]=c;for(let h=1;h<=n;h++){const d=s[c-1]===i[h-1]?0:1;a[h]=Math.min(r[h]+1,a[h-1]+1,r[h-1]+d)}[r,a]=[a,r]}return r[n]}var Zo={};typeof window<"u"?Zo.window=window:typeof global<"u"&&(Zo.window=global.window);typeof document<"u"?Zo.document=document:typeof global<"u"&&(Zo.document=global.document);function Yr(e){var t;return e?(t=Zo.document)==null?void 0:t[e]:Zo.document}function Et(e){var t;return e?(t=Zo.window)==null?void 0:t[e]:Zo.window}function i9(e){Zo.document=e}function s9(e){Zo.window=e}function $e(e,t,i){const s=Yr().createElement(e);if(typeof t=="object"&&(i=t,t=void 0),t)for(const n of t.split(" "))s.classList.add(n);return i&&Object.assign(s.style,i),s}function Zi(e){return Yr().createElementNS("http://www.w3.org/2000/svg",e)}function n9(e,t){const i=Yr("body"),s=$e("a",{display:"none"});s.href=e,s.download=t,i.appendChild(s),s.click(),setTimeout(()=>i.removeChild(s))}function o9(e){const t=Et("Option"),{style:i}=new t;return i.color=e,i.color||null}function fg(e){return e!=null}function Ue(e){return Array.isArray(e)}function Ik(e){return typeof e=="boolean"}function wh(e){return e instanceof Date}function dp(e){return wh(e)&&!isNaN(Number(e))}function r9(e){return e instanceof RegExp}function ll(e){return typeof e=="function"}function pi(e){return typeof e=="object"&&e!==null&&!Ue(e)}function fi(e){var t;return typeof e=="object"&&e!==null&&((t=e.constructor)==null?void 0:t.name)==="Object"}function qi(e){return typeof e=="string"}function Hn(e){return typeof e=="number"}function nt(e){return Number.isFinite(e)}function a9(e){return typeof window<"u"&&e instanceof HTMLElement}function zb(e,t){return Object.values(e).includes(t)}function l9(e){return typeof e=="symbol"}function Lk(e){return qi(e)&&o9(e)!=null}var xc=Symbol("description"),Fk=Symbol("required"),Hb=class{constructor(e,t,i,s){this.message=e,this.path=t,this.required=i,this.unknown=s}toString(){return this.message}};function lo(e,t,i=""){var c;if(!pi(e)){const h=SI(i,e,"an object",!0);return{valid:null,errors:[new Hb(h,i,!0)]}}const s=[],n=new Set(Object.keys(e)),o=[],r={};function a(h){return Ue(t)?`${i}[${h}]`:i?`${i}.${h}`:h}for(const h of Object.keys(t)){const d=t[h],p=e[h],f=d[Fk];if(n.delete(h),typeof p>"u"&&(s.push(h),!f))continue;const v=a(h);if(ll(d)){const y={options:e,path:v};if(d(p,y))r[h]=((c=y.result)==null?void 0:c.valid)??p;else if(!y.result){const b=SI(v,p,d,f);o.push(new Hb(b,i,f))}y.result&&o.push(...y.result.errors)}else{const y=lo(p,d,v);y.valid!=null&&(r[h]=y.valid),o.push(...y.errors)}}for(const h of n){if(typeof e[h]>"u")continue;const p=c9(h,a(h),s);o.push(new Hb(p,i,void 0,!0))}return{valid:r,errors:o}}function SI(e,t,i,s){const n=qi(i)?i:i[xc],o=n?`; expecting ${n}`:"",r=e?`Option \`${e}\``:"Value";return s&&t==null?`${r} is required and has not been provided${o}, ignoring.`:`${r} cannot be set to \`${Tk(t,50)}\`${o}, ignoring.`}function c9(e,t,i){const s=u9(e,i),n=s?`; Did you mean \`${s}\`? Ignoring.`:", ignoring.";return`Unknown option \`${t}\`${n}`}function u9(e,t,i=2){let s=1/0;const n=e.toLowerCase();return t.reduce((o,r)=>{const a=t9(n,r.toLowerCase());return s>a&&a<=i?(s=a,r):o},null)}function pt(e,t){return Object.assign(ll(e)?(i,s)=>e(i,s):{...e},{[xc]:t})}function Fe(e){return Object.assign(ll(e)?(t,i)=>e(t,i):gp(e),{[Fk]:!0,[xc]:e[xc]})}var gp=(e,t="an object")=>pt((i,s)=>(s.result=lo(i,e,s.path),!s.result.errors.some(n=>n.required&&n.path===s.path)),t),h9=(e,t="an object")=>pt((i,s)=>(s.result=lo(i,e,s.path),s.result.errors=s.result.errors.filter(n=>!n.unknown),!s.result.errors.some(n=>n.required&&n.path===s.path)),t),hs=(...e)=>pt((t,i)=>e.every(s=>{const n=s(t,i);return i.result&&!n&&delete i.result,n}),e.map(t=>t[xc]).filter(Boolean).join(" and ")),ti=(...e)=>pt((t,i)=>e.some(s=>{const n=s(t,i);return i.result&&!n&&delete i.result,n}),e.map(t=>t[xc]).filter(Boolean).join(" or ")),uv=e=>nt(e)||dp(e),d9=e=>wh(e)||(nt(e)||qi(e))&&dp(new Date(e)),qo=pt(Ue,"an array"),ye=pt(Ik,"a boolean"),yt=pt(ll,"a function"),Ye=pt(Lk,"a color string"),Bu=pt(d9,"a date"),dn=pt(fg,"a defined value"),Le=pt(nt,"a number"),kg=pt(pi,"an object"),xe=pt(qi,"a string"),Qv=(e,t=1/0)=>{let i;return t===1/0?i=`an array of at least ${e} items`:e===t?i=`an array of exactly ${e} items`:i=`an array of at least ${e} and no more than ${t} items`,pt(s=>Ue(s)&&s.length>=e&&s.length<=t,i)},Pk=(e,t=!0)=>pt(i=>nt(i)&&(i>e||t&&i===e),`a number greater than ${t?"or equal to ":""}${e}`),g9=(e,t)=>pt(i=>nt(i)&&i>=e&&i<=t,`a number between ${e} and ${t} inclusive`),me=Pk(0),Vm=Pk(0,!1),_t=g9(0,1),Ng=e=>pt((t,{options:i})=>!uv(t)||!uv(i[e])||t<i[e],`the value to be less than \`${e}\``),Kw=e=>pt((t,{options:i})=>!uv(t)||!uv(i[e])||t>i[e],`the value to be greater than \`${e}\``);function je(...e){pi(e[0])&&(e=Object.values(e[0]));const t=Yw(e,"or",i=>`'${i}'`);return pt(i=>e.includes(i),`a keyword such as ${t}`)}var ws=e=>pt(t=>e===t,`the value ${JSON.stringify(e)}`),p9=(e,t)=>pt(i=>i instanceof e,`an instance of ${e.name}`),$t=(e,t)=>pt((i,s)=>Ue(i)&&i.every(n=>{const o=e(n,s);return delete s.result,o}),`${e[xc]} array`),Mc=(e,t="an object array")=>pt((i,s)=>{if(!Ue(i))return!1;const n=[],o=[];for(let r=0;r<i.length;r++){const a=`${s.path}[${r}]`,c=lo(i[r],e,a);o.push(...c.errors),c.errors.some(h=>h.required&&h.path===a)||n.push(c.valid)}return s.result={valid:n,errors:o},!0},t),DM=(e,t="an object")=>{const i=h9({type:Fe(je(...Object.keys(e)))});return pt((s,n)=>{if(i(s,n)){const o=s.type,r={type:Fe(ws(o)),...e[o]},a=gp(r)(s,n);if(n.result)for(const c of n.result.errors)c.message+=` (type="${o}")`;return a}return!1},t)},f9=gp({color:Ye,stop:_t},""),m9=pt(e=>{let t=-1/0;for(const i of e)if((i==null?void 0:i.stop)!=null){if(i.stop<t)return!1;t=i.stop}return!0},"color stops to be defined in ascending order"),RM=hs(Qv(2),hs($t(f9),m9)),AM=je("axis","item","series"),Vb=DM({gradient:{gradient:je("linear","radial","conic"),bounds:AM,colorStops:Fe(RM),rotation:Le,reverse:ye}},"a gradient object with color stops"),Gs={stroke:Ye,strokeWidth:me,strokeOpacity:_t},v9=gp({type:Fe(ws("gradient")),gradient:Fe(je("linear","radial","conic")),bounds:Fe(AM),colorStops:Fe(ti(RM,hs(Qv(2),$t(Ye)))),rotation:Fe(Le),reverse:Fe(ye)}),y9=gp({type:Fe(ws("pattern")),pattern:Fe(je("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses")),width:Fe(me),height:Fe(me),fill:Fe(Ye),fillOpacity:Fe(_t),backgroundFill:Fe(Ye),backgroundFillOpacity:Fe(_t),padding:Fe(me),rotation:Fe(Le),stroke:Fe(Ye),strokeWidth:Fe(me),strokeOpacity:Fe(_t)}),C9={gradient:je("linear","radial","conic"),bounds:AM,reverse:ye},S9={rotation:Le,padding:me},b9=DM({gradient:{...C9,colorStops:RM,rotation:Le},pattern:{...S9,pattern:je("vertical-lines","horizontal-lines","forward-slanted-lines","backward-slanted-lines","circles","squares","triangles","diamonds","stars","hearts","crosses"),width:me,height:me,fill:Ye,fillOpacity:_t,backgroundFill:Ye,backgroundFillOpacity:_t,...Gs}},"a color object"),EM=ti(Ye,b9),Yn={fill:EM,fillOpacity:_t};Yn.fillGradientDefaults=v9;Yn.fillPatternDefaults=y9;var Xo={lineDash:$t(me),lineDashOffset:Le},pn={color:Ye,fontFamily:xe,fontSize:me,fontStyle:je("normal","italic","oblique"),fontWeight:ti(me,je("normal","bold","bolder","lighter"))};function hv(e){return typeof e>"u"?[]:Array.isArray(e)?e:[e]}function w9(e){return Array.from(new Set(e))}function TM(e,t){return e.reduce((i,s)=>{const n=t(s);return i[n]??(i[n]=[]),i[n].push(s),i},{})}function jo(e,t){if(e==null||t==null||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!jo(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function $d(e,t,i=0){if(e.length===0)return[];const s=[];for(let n=0;n<t;n++)s.push(e.at((n+i)%e.length));return s}function x9(e,t){const i=new Map;return t.forEach((s,n)=>{i.set(s,n)}),e.sort((s,n)=>{const o=i.get(s)??1/0,r=i.get(n)??1/0;return o-r})}function kk(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2);i(n)?(s=n,e=n+1):t=n-1}return s}function Nk(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2);i(n)?(s=n,t=n-1):e=n+1}return s}function M9(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2),o=i(n);o==null?e=n+1:(s=o,t=n-1)}return s}function D9(e,t){const i=Math.max(e.length,t.length),s=new Set,n=new Set;for(let o=0;o<i;o++){const r=e[o],a=t[o];r!==a&&(n.has(a)?n.delete(a):a&&s.add(a),s.has(r)?s.delete(r):r&&n.add(r))}return{changed:s.size>0||n.size>0,added:s,removed:n}}function bI(e,t,i){const{leading:s=!0,trailing:n=!0}=i??{};let o,r,a=!1;function c(){n&&r?(o=setTimeout(c,t),e(...r)):a=!1,r=null}function h(...d){a?r=d:(a=!0,o=setTimeout(c,t),s?e(...d):r=d)}return Object.assign(h,{cancel(){clearTimeout(o),a=!1,r=null}})}function*ac(...e){for(const t of e)yield*t}function R9(e){return e!=null&&typeof e=="object"&&Symbol.iterator in e?e:[e]}function Zd(e){for(const t of e)return t;throw new Error("AG Charts - no first() value found")}function*po(e){const t=[void 0,void 0];for(const i of Object.keys(e))t[0]=i,t[1]=e[i],yield t}function Ge(e,t,i){return Math.min(i,Math.max(e,t))}function A9(e,t,i=1e-10){return e>=t[0]-i&&e<=t[1]+i}function Bo(e,t,i=1e-10){return e===t||Math.abs(e-t)<i}function IM(e){return Math.sign(e)===-1||Object.is(e,-0)}function E9(e){return e%1===0}function wI(e,t=2){const i=10**t;return Math.round(e*i)/i}function Ok(e,t){return Math.floor(e%t+(e<0?Math.abs(t):0))}function LM(e){var n;if(Math.floor(e)===e)return 0;let t=String(e),i=0;if(e<1e-6||e>=1e21){let o;[t,o]=t.split("e"),o!=null&&(i=Number(o))}const s=((n=t.split(".")[1])==null?void 0:n.length)??0;return Math.max(s-i,0)}var Gk=/^(?:(.)?([<>=^]))?([+\-( ])?([$€£¥₣₹#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,Bk=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/;function T9(e){if(!qi(e))return!1;const t=Bk.exec(e);return Gk.test(t?t[2]:e)}function zk(e){let t,i;const s=Bk.exec(e);s&&([,t,e,i]=s);const n=Gk.exec(e);if(!n)throw new Error(`The number formatter is invalid: ${e}`);const[,o,r,a,c,h,d,p,f,v,y]=n;return{fill:o,align:r,sign:a,symbol:c,zero:h,width:parseInt(d),comma:p,precision:parseInt(f),trim:!!v,type:y,prefix:t,suffix:i}}function Hk(e){const t=typeof e=="string"?zk(e):e,{fill:i,align:s,sign:n="-",symbol:o,zero:r,width:a,comma:c,type:h,prefix:d="",suffix:p="",precision:f}=t;let{trim:v}=t;const y=f==null||isNaN(f);let b;if(!h)b=Bn.g,v=!0;else if(h in Bn&&h in zu)b=y?zu[h]:Bn[h];else if(h in Bn)b=Bn[h];else if(h in zu)b=zu[h];else throw new Error(`The number formatter type is invalid: ${h}`);let w;return y?w=h?6:12:w=f,S=>{let M=b(S,w);return v&&(M=F9(M)),c&&(M=P9(M,c)),M=N9(S,M,n),o&&o!=="#"&&(M=`${o}${M}`),o==="#"&&h==="x"&&(M=`0x${M}`),h==="s"&&(M=`${M}${k9(S)}`),(h==="%"||h==="p")&&(M=`${M}%`),a!=null&&!isNaN(a)&&(M=O9(M,a,i??r,s)),M=`${d}${M}${p}`,M}}var zu={b:e=>ym(e).toString(2),c:e=>String.fromCharCode(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>ym(e).toString(8),x:e=>ym(e).toString(16),X:e=>zu.x(e).toUpperCase(),n:e=>zu.d(e),"%":e=>`${ym(e*100).toFixed(0)}`},Bn={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>Bn.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>Bn.f(e,t).toUpperCase(),g:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),s=Math.floor(Math.log10(i));return s>=-4&&s<t?i.toFixed(t-1-s):i.toExponential(t-1)},G:(e,t)=>Bn.g(e,t).toUpperCase(),n:(e,t)=>Bn.g(e,t),p:(e,t)=>Bn.r(e*100,t),r:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),n=Math.floor(Math.log10(i))-(t-1);if(n<=0)return i.toFixed(-n);const o=10**n;return(Math.round(i/o)*o).toFixed()},s:(e,t)=>{const i=Wk(e);return Bn.r(e/10**i,t)},"%":(e,t)=>Bn.f(e*100,t)},Vk=-24,_k=24,I9={[Vk]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"µ",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[_k]:"Y"},L9="−";function ym(e){return Math.floor(Math.abs(e))}function F9(e){return e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function P9(e,t){let i=e.indexOf(".");i<0&&(i=e.length);const s=e.substring(0,i).split(""),n=e.substring(i);for(let o=s.length-3;o>0;o-=3)s.splice(o,0,t);return`${s.join("")}${n}`}function k9(e){return I9[Wk(e)]}function Wk(e){return Ge(Vk,e?Math.floor(Math.log10(Math.abs(e))/3)*3:0,_k)}function N9(e,t,i=""){if(i==="(")return e>=0?t:`(${t})`;const s=i==="+"?"+":"";return`${e>=0?s:L9}${t}`}function O9(e,t,i=" ",s=">"){let n=e;if(s===">"||!s)n=n.padStart(t,i);else if(s==="<")n=n.padEnd(t,i);else if(s==="^"){const o=Math.max(0,t-n.length),r=Math.ceil(o/2),a=Math.floor(o/2);n=n.padStart(r+n.length,i),n=n.padEnd(a+n.length,i)}return n}var jk=Object.defineProperty,G9=Object.getOwnPropertyDescriptor,xo=(e,t)=>{for(var i in t)jk(e,i,{get:t[i],enumerable:!0})},D=(e,t,i,s)=>{for(var n=s>1?void 0:s?G9(t,i):t,o=e.length-1,r;o>=0;o--)(r=e[o])&&(n=(s?r(t,i,n):r(n))||n);return s&&n&&jk(t,i,n),n},Jv=class{constructor(){this.destroyFns=[]}destroy(){for(const e of this.destroyFns)e()}},B9=class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...e){for(const t of e){this.registerDependencies(t);const i=this.modules.find(s=>t.type===s.type&&("optionsKey"in t&&"optionsKey"in s?t.optionsKey===s.optionsKey:!0)&&t.identifier===s.identifier);if(i){if(t.packageType==="enterprise"&&i.packageType==="community"){const s=this.modules.indexOf(i);this.modules.splice(s,1,t),"optionsKey"in t&&this.modulesByOptionKey.set(t.optionsKey,t)}}else this.modules.push(t),"optionsKey"in t&&this.modulesByOptionKey.set(t.optionsKey,t)}}hasEnterpriseModules(){return this.modules.some(e=>e.packageType==="enterprise")}*byType(...e){const t=new Set,i=this.modules.filter(o=>e.includes(o.type)),s=o=>{const r=this.dependencies.get(o);return(r==null?void 0:r.flatMap(s).concat(r))??[]},n=[];for(const o of i){const r="optionsKey"in o?o.optionsKey:o.contextKey;if(!t.has(r)){for(const a of s(r)){if(t.has(a))continue;const c=this.modulesByOptionKey.get(a);if(!c){n.push(a);continue}e.includes(c.type)&&(yield c,t.add(a))}yield o,t.add(r)}}if(n.length>0)throw new Error(`Could not resolve module dependencies: ${n}`)}registerDependencies(e){if(e.dependencies==null||e.dependencies.length===0)return;const t="optionsKey"in e?e.optionsKey:e.contextKey;this.dependencies.set(t,e.dependencies)}},Uo=new B9,ey={containsPoint:z9,isEmpty:H9,normalize:V9};function z9(e,t,i){return t>=e.x&&t<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function H9(e){return e==null||e.height===0||e.width===0||isNaN(e.height)||isNaN(e.width)}function V9(e){let{x:t,y:i,width:s,height:n}=e;return(s==null||s>0)&&(n==null||n>0)?e:(t!=null&&s!=null&&s<0&&(s=-s,t=t-s),i!=null&&n!=null&&n<0&&(n=-n,i=i-n),{x:t,y:i,width:s,height:n})}var ty=Symbol("interpolate"),dv=e=>e[ty]!=null;function iy(e,t,i,s=1/0){const n={nearest:void 0,distanceSquared:s};for(const o of i){const r=o.distanceSquared(e,t);if(r===0)return{nearest:o,distanceSquared:0};r<n.distanceSquared&&(n.nearest=o,n.distanceSquared=r)}return n}function _9(e,t,i,s=1/0){var a;const{x:n=e,y:o=t}=((a=i.transformPoint)==null?void 0:a.call(i,e,t))??{},r={nearest:void 0,distanceSquared:s};for(const c of i.children){const{nearest:h,distanceSquared:d}=c.nearestSquared(n,o,r.distanceSquared);if(d===0)return{nearest:h,distanceSquared:d};d<r.distanceSquared&&(r.nearest=h,r.distanceSquared=d)}return r}var Og=class ku{constructor(t,i,s,n){this.x=t,this.y=i,this.width=s,this.height=n}static fromDOMRect({x:t,y:i,width:s,height:n}){return new ku(t,i,s,n)}static merge(t){let i=1/0,s=1/0,n=-1/0,o=-1/0;for(const r of t)r.x<i&&(i=r.x),r.y<s&&(s=r.y),r.x+r.width>n&&(n=r.x+r.width),r.y+r.height>o&&(o=r.y+r.height);return new ku(i,s,n-i,o-s)}static nearestBox(t,i,s){return iy(t,i,s)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON(){return{}}}}clone(){const{x:t,y:i,width:s,height:n}=this;return new ku(t,i,s,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,i){return ey.containsPoint(this,t,i)}intersection(t){if(!this.collidesBBox(t))return;const i=Ge(t.x,this.x,t.x+t.width),s=Ge(t.y,this.y,t.y+t.height),n=Ge(t.x,this.x+this.width,t.x+t.width),o=Ge(t.y,this.y+this.height,t.y+t.height);return new ku(i,s,n-i,o-s)}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(t,i){if(this.containsPoint(t,i))return 0;const s=t-Ge(this.x,t,this.x+this.width),n=i-Ge(this.y,i,this.y+this.height);return s*s+n*n}shrink(t,i){if(typeof t=="number")this.applyMargin(t,i);else for(const s of Object.keys(t)){const n=t[s];typeof n=="number"&&this.applyMargin(n,s)}return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(t,i){if(typeof t=="number")this.applyMargin(-t,i);else for(const s of Object.keys(t)){const n=t[s];typeof n=="number"&&this.applyMargin(-n,s)}return this}applyMargin(t,i){switch(i){case"top":this.y+=t;case"bottom":this.height-=t;break;case"left":this.x+=t;case"right":this.width-=t;break;case"vertical":this.y+=t,this.height-=t*2;break;case"horizontal":this.x+=t,this.width-=t*2;break;case void 0:this.x+=t,this.y+=t,this.width-=t*2,this.height-=t*2;break}}translate(t,i){return this.x+=t,this.y+=i,this}[ty](t,i){return new ku(this.x*(1-i)+t.x*i,this.y*(1-i)+t.y*i,this.width*(1-i)+t.width*i,this.height*(1-i)+t.height*i)}};Og.zero=Object.freeze(new Og(0,0,0,0));Og.NaN=Object.freeze(new Og(NaN,NaN,NaN,NaN));var Me=Og,W9=2e3,xI=Date.now(),j9=()=>{const e=Date.now()-xI;if(e>W9){const t=(Math.floor(e/100)/10).toFixed(1);de.log(`**** ${t}s since last log message ****`)}xI=Date.now()},at={create(...e){return Object.assign((...i)=>{at.check(...e)&&(typeof i[0]=="function"&&(i=hv(i[0]())),j9(),de.log(...i))},{check:()=>at.check(...e),group:(i,s)=>at.check(...e)?de.logGroup(i,s):s()})},check(...e){return e.length===0&&e.push(!0),hv(Et("agChartsDebug")).some(i=>e.includes(i))},inDevelopmentMode(e){if(at.check("dev"))return e()}};function Uk({context:e,pixelRatio:t,width:i,height:s}){e.save(),e.resetTransform(),e.clearRect(0,0,Math.ceil(i*t),Math.ceil(s*t)),e.restore()}function Yk(e){if(at.check("canvas")){const t=e.save.bind(e),i=e.restore.bind(e);let s=0;Object.assign(e,{save(){t(),s++},restore(){if(s===0)throw new Error("AG Charts - Unable to restore() past depth 0");i(),s--},verifyDepthZero(){if(s!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${s}`)}})}}function MI(e,t,i){return[Math.floor(e*i),Math.floor(t*i)]}var FM=class{constructor(e){const{width:t,height:i,pixelRatio:s,willReadFrequently:n=!1}=e;this.width=t,this.height=i,this.pixelRatio=s;const[o,r]=MI(t,i,s);this.canvas=new OffscreenCanvas(o,r),this.context=this.canvas.getContext("2d",{willReadFrequently:n}),this.context.setTransform(s,0,0,s,0,0),Yk(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.canvas,t,i)}transferToImageBitmap(){return this.canvas.transferToImageBitmap()}resize(e,t,i){if(!(e>0&&t>0))return;const{canvas:s,context:n}=this;if(e!==this.width||t!==this.height||i!==this.pixelRatio){const[o,r]=MI(e,t,i);s.width=o,s.height=r}n.setTransform(i,0,0,i,0,0),this.width=e,this.height=t,this.pixelRatio=i}clear(){Uk(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},$w=new Map;function U9(){$w.clear()}function vn(e){const t=e.constructor,i=Object.hasOwn(t,"className")?t.className:t.name;if(!i)throw new Error(`The ${t} is missing the 'className' property.`);const s=($w.get(i)??0)+1;return $w.set(i,s),`${i}-${s}`}function Zw(){var e;return((e=crypto.randomUUID)==null?void 0:e.call(crypto))??Y9()}function Y9(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let t="";for(let i=0;i<e.length;i++)(i===4||i===6||i===8||i===10)&&(t+="-"),t+=e[i].toString(16).padStart(2,"0");return t}function De(e){return function(t,i){const s=`__${i}`;t[i]||K9(t,i,s,e)}}function K9(e,t,i,s){const{type:n="normal",changeCb:o,convertor:r,checkDirtyOnAssignment:a=!1}=s??{},c={changeCb:o,checkDirtyOnAssignment:a,convertor:r};let h;switch(n){case"normal":h=X9(i,c);break;case"transform":h=Q9(i);break;case"path":h=J9(i);break}h=q9(i,Z9($9(h,c),c),c),Object.defineProperty(e,t,{set:h,get:function(){return this[i]},enumerable:!0,configurable:!0})}function $9(e,t){const{convertor:i}=t;return i?function(s){e.call(this,i(s))}:e}var sy=Symbol("no-change");function Z9(e,t){const{changeCb:i}=t;return i?function(s){const n=e.call(this,s);return n!==sy&&i.call(this,this),n}:e}function q9(e,t,i){const{checkDirtyOnAssignment:s}=i;return s?function(n){const o=t.call(this,n);return(n==null?void 0:n._dirty)===!0&&this.markDirty(e),o}:t}function X9(e,t){const{changeCb:i}=t;return function(s){const n=this[e];return s!==n?(this[e]=s,this.markDirty(e),i==null||i(this),s):sy}}function Q9(e){return function(t){const i=this[e];return t!==i?(this[e]=t,this.markDirtyTransform(),t):sy}}function J9(e){return function(t){const i=this[e];return t!==i?(this[e]=t,this._dirtyPath||(this._dirtyPath=!0,this.markDirty(e)),t):sy}}var Kk=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(Kk||{}),pp=class qw{constructor(t){this.serialNumber=qw._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=vn(this),this.pointerEvents=0,this._dirty=!0,this.dirtyZIndex=!1,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.name=t==null?void 0:t.name,this.tag=(t==null?void 0:t.tag)??NaN,this.zIndex=(t==null?void 0:t.zIndex)??0,((t==null?void 0:t.debugDirty)??qw._debugEnabled)&&(this._debugDirtyProperties=new Map([["__first__",[]]]))}static toSVG(t,i,s){var r,a;const n=t==null?void 0:t.toSVG();if(n==null||!n.elements.length&&!((r=n.defs)!=null&&r.length))return;const o=Zi("svg");if(o.setAttribute("width",String(i)),o.setAttribute("height",String(s)),o.setAttribute("viewBox",`0 0 ${i} ${s}`),(a=n.defs)!=null&&a.length){const c=Zi("defs");c.append(...n.defs),o.append(c)}return o.append(...n.elements),o.outerHTML}static*extractBBoxes(t,i){for(const s of t)if(!i||s.visible&&!s.transitionOut){const n=s.getBBox();n&&(yield n)}}get datum(){return this._datum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum,this._datum=t)}get previousDatum(){return this._previousDatum}get layerManager(){return this._layerManager}get dirty(){return this._dirty}closestDatum(){for(const{datum:t}of this.traverseUp(!0))if(t!=null)return t}preRender(t,i=1){this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=i,this.childNodeCounts.thisComplexity=i;for(const s of this.children()){const n=s.preRender(t);this.childNodeCounts.groups+=n.groups,this.childNodeCounts.nonGroups+=n.nonGroups,this.childNodeCounts.complexity+=n.complexity}return this.childNodeCounts}render(t){const{stats:i}=t;if(this._dirty=!1,this.debugDirtyProperties(),t.debugNodeSearch){const s=this.name??this.id;t.debugNodeSearch.some(n=>typeof n=="string"?n===s:n.test(s))&&(t.debugNodes[this.name??this.id]=this)}i&&(i.nodesRendered++,i.opsPerformed+=this.childNodeCounts.thisComplexity)}_setLayerManager(t){this._layerManager=t,this._debug=t==null?void 0:t.debug;for(const i of this.children())i._setLayerManager(t)}sortChildren(t){if(this.dirtyZIndex=!1,!this.childNodes)return;const i=[...this.childNodes].sort(t);this.childNodes.clear();for(const s of i)this.childNodes.add(s)}*traverseUp(t){let i=this;for(t&&(yield i);i=i.parentNode;)yield i}*children(){if(this.childNodes)for(const t of this.childNodes)yield t}*descendants(){for(const t of this.children())yield t,yield*t.descendants()}isLeaf(){var t;return!((t=this.childNodes)!=null&&t.size)}isRoot(){return!this.parentNode}append(t){var i;this.childNodes??(this.childNodes=new Set);for(const s of R9(t))(i=s.parentNode)==null||i.removeChild(s),this.childNodes.add(s),s.parentNode=this,s._setLayerManager(this.layerManager);this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}appendChild(t){return this.append(t),t}removeChild(t){var i;if(!((i=this.childNodes)!=null&&i.delete(t)))throw new Error(`AG Charts - internal error, unknown child node ${t.name??t.id} in $${this.name??this.id}`);delete t.parentNode,t._setLayerManager(),this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}remove(){var t;(t=this.parentNode)==null||t.removeChild(this)}clear(){var t;for(const i of this.children())delete i.parentNode,i._setLayerManager();(t=this.childNodes)==null||t.clear(),this.invalidateCachedBBox()}destroy(){var t;(t=this.parentNode)==null||t.removeChild(this)}setProperties(t,i){if(i)for(const s of i)this[s]=t[s];else Object.assign(this,t);return this}containsPoint(t,i){return!1}pickNode(t,i){if(!(!this.visible||this.pointerEvents===1||!this.containsPoint(t,i))){if(this.childNodes!=null&&this.childNodes.size!==0){const s=[...this.children()];for(let n=s.length-1;n>=0;n--){const o=s[n].pickNode(t,i);if(o)return o}}else if(!this.isContainerNode)return this}}pickNodes(t,i,s=[]){if(!this.visible||this.pointerEvents===1||!this.containsPoint(t,i))return s;this.isContainerNode||s.push(this);for(const n of this.children())n.pickNodes(t,i,s);return s}invalidateCachedBBox(){var t;this.cachedBBox!=null&&(this.cachedBBox=void 0,(t=this.parentNode)==null||t.invalidateCachedBBox())}getBBox(){return this.cachedBBox==null&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}markDirty(t){const{_dirty:i}=this;t!=null&&this._debugDirtyProperties&&this.markDebugProperties(t),!(this.cachedBBox==null&&i)&&(this.invalidateCachedBBox(),this._dirty=!0,this.parentNode&&this.parentNode.markDirty())}markClean(){if(this._dirty){this._dirty=!1,this.debugDirtyProperties();for(const t of this.children())t.markClean()}}markDebugProperties(t){var n,o,r;const i=((n=this._debugDirtyProperties)==null?void 0:n.get(t))??[],s=((o=new Error().stack)==null?void 0:o.split(`
`).filter(a=>a!=="Error"&&!a.includes(".markDebugProperties")&&!a.includes(".markDirty")&&!a.includes("Object.assign ")&&!a.includes(`${this.constructor.name}.`)))??"unknown";i.push(s[0].replace(" at ","").trim()),(r=this._debugDirtyProperties)==null||r.set(t,i)}debugDirtyProperties(){this._debugDirtyProperties!=null&&(this._debugDirtyProperties.has("__first__")||this._debugDirtyProperties.forEach((t,i)=>{t.length>1&&(console.groupCollapsed(`Property changed multiple times before render: ${this.constructor.name}.${i} (${t.length}x)`),t.forEach(s=>console.log(s)),console.groupEnd())}),this._debugDirtyProperties.clear())}onZIndexChange(){const{parentNode:t}=this;t&&(t.dirtyZIndex=!0)}toSVG(){}};pp._nextSerialNumber=0;pp._debugEnabled=!1;D([De()],pp.prototype,"visible",2);D([De({changeCb:e=>e.onZIndexChange()})],pp.prototype,"zIndex",2);var Kr=pp,gv=Symbol("BREAK"),Ku="__decorator_config";function eZ(e,t){PM(e,t).optional=!0}function PM(e,t){Object.getOwnPropertyDescriptor(e,Ku)==null&&Object.defineProperty(e,Ku,{value:{}});const i=e[Ku],s=t.toString();if(typeof i[s]<"u")return i[s];const n=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:n};const o=Object.getOwnPropertyDescriptor(e,t),r=o==null?void 0:o.set,a=o==null?void 0:o.get;return Object.defineProperty(e,t,{set:function(d){const{setters:p,observers:f}=i[s];let v;p.some(y=>y.length>2)&&(v=a?a.call(this):n.get(this));for(const y of p)if(d=y(this,t,d,v),d===gv)return;r?r.call(this,d):n.set(this,d);for(const y of f)y(this,d,v)},get:function(){let d=a?a.call(this):n.get(this);for(const p of i[s].getters)if(d=p(this,t,d),d===gv)return;return d},enumerable:!0,configurable:!1}),i[s]}function tl(e,t,i){return(s,n)=>{const o=PM(s,n);o.setters.push(e),t&&o.getters.unshift(t),i&&Object.assign(o,i)}}function $k(e){return(t,i)=>{PM(t,i).observers.push(e)}}function fp(e){return typeof e<"u"&&Ku in e}function $a(e){const t=new Set;for(;fp(e);)t.add(e==null?void 0:e[Ku]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap(i=>Object.keys(i))}function Zk(e){return $a(e).reduce((t,i)=>(t[i]=e[i]??null,t),{})}function tZ(e,t){const i=t.toString();for(;fp(e);){const s=e[Ku];if(Object.hasOwn(s,i))return s[i];e=Object.getPrototypeOf(e)}}function Qo(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every((i,s)=>Qo(i,t[s])):fi(e)?fi(t)?kM(e,t,Qo):!1:e===t}function kM(e,t,i){for(const s of Object.keys(t))if(!(s in e))return!1;for(const s of Object.keys(e))if(!(s in t)||!i(e[s],t[s]))return!1;return!0}function Qe(...e){const t={};for(const i of e){if(!pi(i))continue;const s=fp(i)?$a(i):Object.keys(i);for(const n of s)fi(t[n])&&fi(i[n])?t[n]=Qe(t[n],i[n]):t[n]??(t[n]=i[n])}return t}function Gg(...e){const t={};for(const i of e){if(!pi(i))continue;const s=fp(i)?$a(i):Object.keys(i);for(const n of s)fi(t[n])&&fi(i[n])?t[n]=Gg(t[n],i[n]):n in t||(t[n]??(t[n]=i[n]))}return t}function pv(e,...t){return t&&Ue(e)?e.map(i=>Qe(i,...t)):e}function qk(e,t){const i={};for(const[s,n]of po(e))i[s]=t(n,s,e);return i}function il(e,t){const i={...e};for(const s of t)delete i[s];return i}function ih(e,t){return(Ue(t)?t:t.split(".")).reduce((s,n)=>s[n],e)}var NM=new Set(["__proto__","constructor","prototype"]);function OM(e,t,i){const s=Ue(t)?t.slice():t.split("."),n=s.pop();if(s.some(r=>NM.has(r)))return;const o=s.reduce((r,a)=>r[a],e);return o[n]=i,o[n]}function Xw(e,t,i){if(i===void 0)return t;for(const s of e){const n=i[s];n!==void 0&&(t[s]=n)}return t}function fc(e){return e==null||typeof e!="object"||!fi(e)||(Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const i=e[t];i!==null&&(typeof i=="object"||typeof i=="function")&&!Object.isFrozen(i)&&fc(i)})),e}var Vn=Math.PI*2,qd=Math.PI/2;function Pt(e){return e%=Vn,e+=Vn,e%=Vn,e}function iZ(e){return e%=Vn,e+=Vn,e!==Vn&&(e%=Vn),e}function Bg(e){return e%=Vn,e<-Math.PI?e+=Vn:e>=Math.PI&&(e-=Vn),e}function Va(e,t,i){const s=Pt(e),n=Pt(t),o=Pt(i);return n<o?n<=s&&s<=o:n>o?n<=s||s<=o:!0}function Wt(e){return e/180*Math.PI}function sZ(e){return e/Math.PI*180}function ny(e,t){return e=Pt(e),t=Pt(t),t-e+(e>t?Vn:0)}function Xk(e){const t=Pt(e);return t<=qd?t/qd:t<=Math.PI?(Math.PI-t)/qd:t<=1.5*Math.PI?(t-Math.PI)/qd:(Vn-t)/qd}var Bl=(e,t,i)=>e*(1-i)+t*i,_b=e=>{const t=e<0?-1:1,i=Math.abs(e);return i<=.04045?e/12.92:t*((i+.055)/1.055)**2.4},Wb=e=>{const t=e<0?-1:1,i=Math.abs(e);return i>.0031308?t*(1.055*i**(1/2.4)-.055):12.92*e},Qk=class lt{constructor(t,i,s,n=1){this.r=Ge(0,t||0,1),this.g=Ge(0,i||0,1),this.b=Ge(0,s||0,1),this.a=Ge(0,n||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!lt.parseHex(t):t.indexOf("rgb")>=0?!!lt.stringToRgba(t):lt.nameToHex.has(t.toLowerCase())}static fromString(t){if(t.indexOf("#")>=0)return lt.fromHexString(t);const i=lt.nameToHex.get(t.toLowerCase());if(i)return lt.fromHexString(i);if(t.indexOf("rgb")>=0)return lt.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static parseHex(t){t=t.replace(/ /g,"").slice(1);let i;switch(t.length){case 6:case 8:i=[];for(let s=0;s<t.length;s+=2)i.push(parseInt(`${t[s]}${t[s+1]}`,16));break;case 3:case 4:i=t.split("").map(s=>parseInt(s,16)).map(s=>s+s*16);break}if((i==null?void 0:i.length)>=3&&i.every(s=>s>=0))return i.length===3&&i.push(255),i}static fromHexString(t){const i=lt.parseHex(t);if(i){const[s,n,o,r]=i;return new lt(s/255,n/255,o/255,r/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let i=-1,s=-1;for(let a=0;a<t.length;a++){const c=t[a];if(i===-1&&c==="(")i=a;else if(c===")"){s=a;break}}if(i===-1||s===-1)return;const o=t.substring(i+1,s).split(","),r=[];for(let a=0;a<o.length;a++){const c=o[a];let h=parseFloat(c);if(!Number.isFinite(h))return;c.indexOf("%")>=0?(h=Ge(0,h,100),h/=100):a===3?h=Ge(0,h,1):(h=Ge(0,h,255),h/=255),r.push(h)}return r}static fromRgbaString(t){const i=lt.stringToRgba(t);if(i){if(i.length===3)return new lt(i[0],i[1],i[2]);if(i.length===4)return new lt(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(t.length===4)return new lt(t[0],t[1],t[2],t[3]);if(t.length===3)return new lt(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,s,n=1){const o=lt.HSBtoRGB(t,i,s);return new lt(o[0],o[1],o[2],n)}static fromHSL(t,i,s,n=1){const o=lt.HSLtoRGB(t,i,s);return new lt(o[0],o[1],o[2],n)}static fromOKLCH(t,i,s,n=1){const o=lt.OKLCHtoRGB(t,i,s);return new lt(o[0],o[1],o[2],n)}static padHex(t){return t.length===1?"0"+t:t}toHexString(){let t="#"+lt.padHex(Math.round(this.r*255).toString(16))+lt.padHex(Math.round(this.g*255).toString(16))+lt.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(t+=lt.padHex(Math.round(this.a*255).toString(16))),t}toRgbaString(t=3){const i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],s=Math.pow(10,t);return this.a!==1?(i.push(Math.round(this.a*s)/s),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return lt.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,i,s){const n=_b(t),o=_b(i),r=_b(s),a=Math.cbrt(.4122214708*n+.5363325363*o+.0514459929*r),c=Math.cbrt(.2119034982*n+.6806995451*o+.1073969566*r),h=Math.cbrt(.0883024619*n+.2817188376*o+.6299787005*r),d=.2104542553*a+.793617785*c-.0040720468*h,p=1.9779984951*a-2.428592205*c+.4505937099*h,f=.0259040371*a+.7827717662*c-.808675766*h,v=Math.atan2(f,p)*180/Math.PI,y=d,b=Math.hypot(p,f),w=v>=0?v:v+360;return[y,b,w]}static OKLCHtoRGB(t,i,s){const n=t,o=i*Math.cos(s*Math.PI/180),r=i*Math.sin(s*Math.PI/180),a=(n+.3963377774*o+.2158037573*r)**3,c=(n-.1055613458*o-.0638541728*r)**3,h=(n-.0894841775*o-1.291485548*r)**3,d=4.0767416621*a-3.3077115913*c+.2309699292*h,p=-1.2684380046*a+2.6097574011*c-.3413193965*h,f=-.0041960863*a-.7034186147*c+1.707614701*h,v=Wb(d),y=Wb(p),b=Wb(f);return[v,y,b]}static RGBtoHSL(t,i,s){const n=Math.min(t,i,s),o=Math.max(t,i,s),r=(o+n)/2;let a,c;if(o===n)a=0,c=0;else{const h=o-n;c=r>.5?h/(2-o-n):h/(o+n),o===t?a=(i-s)/h+(i<s?6:0):o===i?a=(s-t)/h+2:a=(t-i)/h+4,a*=360/6}return[a,c,r]}static HSLtoRGB(t,i,s){if(t=(t%360+360)%360,i===0)return[s,s,s];const n=s<.5?s*(1+i):s+i-s*i,o=2*s-n;function r(d){return d<0&&(d+=1),d>1&&(d-=1),d<1/6?o+(n-o)*6*d:d<1/2?n:d<2/3?o+(n-o)*(2/3-d)*6:o}const a=r(t/360+1/3),c=r(t/360),h=r(t/360-1/3);return[a,c,h]}static RGBtoHSB(t,i,s){const n=Math.min(t,i,s),o=Math.max(t,i,s),r=o===0?0:(o-n)/o;let a=0;if(n!==o){const c=o-n,h=(o-t)/c,d=(o-i)/c,p=(o-s)/c;t===o?a=p-d:i===o?a=2+h-p:a=4+d-h,a/=6,a<0&&(a=a+1)}return[a*360,r,o]}static HSBtoRGB(t,i,s){t=(t%360+360)%360/360;let n=0,o=0,r=0;if(i===0)n=o=r=s;else{const a=(t-Math.floor(t))*6,c=a-Math.floor(a),h=s*(1-i),d=s*(1-i*c),p=s*(1-i*(1-c));switch(a>>0){case 0:n=s,o=p,r=h;break;case 1:n=d,o=s,r=h;break;case 2:n=h,o=s,r=p;break;case 3:n=h,o=d,r=s;break;case 4:n=p,o=h,r=s;break;case 5:n=s,o=h,r=d;break}}return[n,o,r]}static mix(t,i,s){return new lt(Bl(t.r,i.r,s),Bl(t.g,i.g,s),Bl(t.b,i.b,s),Bl(t.a,i.a,s))}static lighten(t,i){const s=lt.RGBtoOKLCH(t.r,t.g,t.b);return lt.fromOKLCH(Ge(0,s[0]+i,1),s[1],s[2])}static darken(t,i){const s=lt.RGBtoOKLCH(t.r,t.g,t.b);return lt.fromOKLCH(Ge(0,s[0]-i,1),s[1],s[2])}static interpolate(t,i){const s=1/(t.length-1),n=t.map(o=>lt.RGBtoOKLCH(o.r,o.g,o.b));return Array.from({length:i},(o,r)=>{const a=r/(i-1),c=t.length<=2?0:Math.min(Math.floor(a*(t.length-1)),t.length-2),h=(a-c*s)/s,d=n[c],p=n[c+1];return lt.fromOKLCH(Bl(d[0],p[0],h),Bl(d[1],p[1],h),Bl(d[2],p[2],h))})}};Qk.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var gt=Qk,oy=class{ticks(e,t,i){}niceDomain(e,t=this.domain){return t}tickFormatter(e){}datumFormatter(e){}get bandwidth(){}get step(){}get inset(){}},xh=(e,t)=>{const i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(s){this[i]!==s&&(this[i]=s,this.invalid=!0)},enumerable:!0,configurable:!1})},DI=e=>{const t=gt.fromString(e),[i,s,n]=gt.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:s,h:n,a:t.a}},jb=1e-6,RI=e=>e.c<jb||e.l<jb||e.l>1-jb,nZ=(e,t,i)=>{i=Ge(0,i,1);let s;if(RI(e))s=t.h;else if(RI(t))s=e.h;else{const a=e.h;let c=t.h;const h=t.h-e.h;h>180?c-=360:h<-180&&(c+=360),s=a*(1-i)+c*i}const n=e.c*(1-i)+t.c*i,o=e.l*(1-i)+t.l*i,r=e.a*(1-i)+t.a*i;return gt.fromOKLCH(o,n,s,r)},Mh=class extends oy{constructor(){super(...arguments),this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(DI)}update(){const{domain:e,range:t}=this;e.length<2&&(de.warnOnce("`colorDomain` should have at least 2 values."),e.length===0?e.push(0,1):e.length===1&&e.push(e[0]+1));for(let i=1;i<e.length;i++){const s=e[i-1],n=e[i];if(s>=n){de.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((o,r)=>o-r);break}}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(DI)}normalizeDomains(...e){return{domain:e.flat(),animatable:!0}}toDomain(){}convert(e){this.refresh();const{domain:t,range:i,parsedRange:s}=this,n=t[0],o=t.at(-1),r=i[0],a=i[i.length-1];if(e<=n)return r;if(e>=o)return a;let c,h;if(t.length===2){const f=(e-n)/(o-n),v=1/(i.length-1);c=i.length<=2?0:Math.min(Math.floor(f*(i.length-1)),i.length-2),h=(f-c*v)/v}else{for(c=0;c<t.length-2&&!(e<t[c+1]);c++);const f=t[c],v=t[c+1];h=(e-f)/(v-f)}const d=s[c],p=s[c+1];return nZ(d,p,h).toRgbaString()}invert(){}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&de.warnOnce("Expected update to not invalidate scale"))}};D([xh],Mh.prototype,"domain",2);D([xh],Mh.prototype,"range",2);var ry=class{constructor(e,t=[],i){this.colorSpace=e,this.stops=t,this.bbox=i,this._cache=void 0}createGradient(e,t,i){const s=this.bbox??t;if(isNaN(s.x)||isNaN(s.y))return;if(this._cache!=null&&this._cache.ctx===e&&this._cache.bbox.equals(s))return this._cache.gradient;const{stops:n,colorSpace:o}=this;if(n.length===0)return;if(n.length===1)return n[0].color;let r=this.createCanvasGradient(e,s,i);if(r==null)return;const a=o==="oklch",c=.05;let h=n[0];r.addColorStop(h.stop,h.color);for(let d=1;d<n.length;d+=1){const p=n[d];if(a){const f=new Mh;f.domain=[h.stop,p.stop],f.range=[h.color,p.color];for(let v=h.stop+c;v<p.stop;v+=c)r.addColorStop(v,f.convert(v))}r.addColorStop(p.stop,p.color),h=p}return"createPattern"in r&&(r=r.createPattern()),this._cache={ctx:e,bbox:s,gradient:r},r}toSvg(e){const t=this.bbox??e,i=this.createSvgGradient(t);return this.stops.forEach(({stop:s,color:n})=>{const o=Zi("stop");o.setAttribute("offset",`${s}`),o.setAttribute("stop-color",`${n}`),i.appendChild(o)}),i}},Jk=class extends ry{constructor(e,t,i=0,s){super(e,t,s),this.angle=i}createCanvasGradient(e,t,i){const{angle:n}=this,o=Pt(Wt(n+-90)),r=(i==null?void 0:i.centerX)??t.x+t.width*.5,a=(i==null?void 0:i.centerY)??t.y+t.height*.5;return e.createConicGradient(o,r,a)}createSvgGradient(e){return Zi("linearGradient")}},eN=class extends ry{constructor(e,t,i=0,s){super(e,t,s),this.angle=i}getGradientPoints(e){const{angle:i}=this,s=Pt(Wt(i+90)),n=Math.cos(s),o=Math.sin(s),r=e.width,a=e.height,c=e.x+r*.5,h=e.y+a*.5,d=Math.sqrt(a*a+r*r)/2,p=Math.atan2(a,r);let f;s<Math.PI/2?f=s:s<Math.PI?f=Math.PI-s:s<1.5*Math.PI?f=s-Math.PI:f=2*Math.PI-s;const v=d*Math.abs(Math.cos(f-p));return{x0:c+n*v,y0:h+o*v,x1:c-n*v,y1:h-o*v}}createCanvasGradient(e,t){const{x0:i,y0:s,x1:n,y1:o}=this.getGradientPoints(t);return e.createLinearGradient(i,s,n,o)}createSvgGradient(e){const{x0:t,y0:i,x1:s,y1:n}=this.getGradientPoints(e),o=Zi("linearGradient");return o.setAttribute("x1",String(t)),o.setAttribute("y1",String(i)),o.setAttribute("x2",String(s)),o.setAttribute("y2",String(n)),o.setAttribute("gradientUnits","userSpaceOnUse"),o}},oZ=class extends ry{constructor(e,t,i){super(e,t,i)}createCanvasGradient(e,t,i){const s=(i==null?void 0:i.centerX)??t.x+t.width*.5,n=(i==null?void 0:i.centerY)??t.y+t.height*.5,o=(i==null?void 0:i.innerRadius)??0,r=(i==null?void 0:i.outerRadius)??Math.hypot(t.width*.5,t.height*.5)/Math.SQRT2;return e.createRadialGradient(s,n,o,s,n,r)}createSvgGradient(e){const t=e.x+e.width*.5,i=e.y+e.height*.5,s=Zi("radialGradient");return s.setAttribute("cx",String(t)),s.setAttribute("cy",String(i)),s.setAttribute("r",String(Math.hypot(e.width*.5,e.height*.5)/Math.SQRT2)),s.setAttribute("gradientUnits","userSpaceOnUse"),s}},Be=class{handleUnknownProperties(e,t){}set(e){const{className:t=this.constructor.name}=this.constructor;if(typeof e!="object")return de.warn(`unable to set ${t} - expecting a properties object`),this;const i=new Set(Object.keys(e));for(const s of $a(this))if(i.has(s)){const n=e[s],o=this;if(Jo(o[s]))if(o[s]instanceof mp){const r=o[s].reset(n);r!=null?o[s]=r:de.warn(`unable to set [${s}] - expecting a properties array`)}else o[s].set(n);else fi(n)?o[s]=Gg(n,o[s]??{}):o[s]=n;i.delete(s)}this.handleUnknownProperties(i,e);for(const s of i)de.warn(`unable to set [${s}] in ${t} - property is unknown`);return this}isValid(e){return $a(this).every(t=>{const i=tZ(this,t);if(i==null)return!0;const s=i.optional===!0||typeof this[t]<"u";return s||de.warnOnce(`${e??""}[${t}] is required.`),s})}toJson(){return $a(this).reduce((e,t)=>{const i=this[t];return e[t]=Jo(i)?i.toJson():i,e},{})}},mp=class tN extends Array{constructor(t,...i){super(i.length);const n=(o=>{var r,a;return!!((a=(r=o==null?void 0:o.prototype)==null?void 0:r.constructor)!=null&&a.name)})(t)?o=>new t().set(o):t;Object.defineProperty(this,"itemFactory",{value:n,enumerable:!1,configurable:!1}),this.set(i)}set(t){if(Ue(t)){this.length=t.length;for(let i=0;i<t.length;i++)this[i]=this.itemFactory(t[i])}return this}reset(t){if(Array.isArray(t))return new tN(this.itemFactory,...t)}toJson(){return this.map(t=>{var i;return((i=t==null?void 0:t.toJson)==null?void 0:i.call(t))??t})}};function Jo(e){return e instanceof Be||e instanceof mp}function rZ(e,t={}){const{optional:i=!1}=t;return tl((s,n,o)=>{const r={...t,target:s,property:n};if(i&&typeof o>"u"||e(o,r))return Jo(s[n])&&!Jo(o)?(s[n].set(o),s[n]):o;const a=Tk(o,50),c=String(n).replace(/^_*/,""),h=s.constructor.className??s.constructor.name.replace(/Properties$/,""),d=e.message?`; expecting ${vp(e,r)}`:"";return de.warn(`Property [${c}] of [${h}] cannot be set to [${a}]${d}, ignoring.`),gv},void 0,{optional:i})}var E=()=>eZ,cl=(...e)=>{const t=[];return St((i,s)=>(t.length=0,e.every(n=>{const o=n(i,s);return o||t.push(vp(n,s)),o})),()=>t.filter(Boolean).join(" AND "))},ps=(...e)=>St((t,i)=>e.some(s=>s(t,i)),t=>e.map(kZ(t)).filter(Boolean).join(" OR ")),iN=uy(St((e,t)=>Jo(e)||pi(e)&&Jo(t.target[t.property]),"a properties object")),aZ=uy(St(e=>pi(e),"an object")),sN=St(Ik,"a boolean"),lZ=St(ll,"a function"),nN=St(qi,"a string"),yn=OZ(St(nt,"a number")),cZ=St(e=>Hn(e)&&!isNaN(e),"a real number"),ay=St(e=>Hn(e)&&isNaN(e),"NaN"),GM=yn.restrict({min:0}),uZ=yn.restrict({min:0,max:1}),BM=ps(yn,ay),zM=NZ(St(Ue,"an array")),zi=(e,t)=>St((i,s)=>Ue(i)&&i.every(n=>e(n,s)),i=>{const s=vp(zM,i)??"";return typeof t=="function"?`${s} of ${t(i)}`:t?`${s} of ${t}`:s}),fv=e=>nt(e)||dp(e),ly=e=>St((t,i)=>!fv(t)||!fv(i.target[e])||t<i.target[e],`to be less than ${e}`),cy=e=>St((t,i)=>!fv(t)||!fv(i.target[e])||t>i.target[e],`to be greater than ${e}`),HM=St(dp,"Date object"),VM=ps(HM,GM),oN="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Cn=St(Lk,`color string. ${oN}`),ar=uy(St(e=>pi(e)&&e.type==="gradient","a color gradient object")),lr=uy(St(e=>pi(e)&&e.type==="pattern","a color pattern object")),_M=St(zi(Cn),`color strings. ${oN}`),hZ=zi(sN,"boolean values"),dZ=zi(yn,"numbers"),gZ=zi(nN,"strings"),pZ=St(zi(HM),"Date objects"),fZ=St(zi(iN),"objects"),mZ=bt(["butt","round","square"],"a line cap"),vZ=bt(["round","bevel","miter"],"a line join"),yZ=bt(["solid","dashed","dotted"],"a line style"),CZ=St(zi(GM),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),SZ=bt(["top","right","bottom","left"],"a position"),bZ=bt(["normal","italic","oblique"],"a font style"),wZ=ps(bt(["normal","bold","bolder","lighter"],"a font weight"),yn.restrict({min:1,max:1e3})),xZ=bt(["never","always","hyphenate","on-space"],"a text wrap strategy"),MZ=bt(["left","center","right"],"a text align"),DZ=bt(["top","middle","bottom"],"a vertical align"),RZ=bt(["ellipsis","hide"],"an overflow strategy"),AZ=bt(["horizontal","vertical"],"a direction"),EZ=bt(["inside","outside"],"a placement"),TZ=ps(bt(["exact","nearest"],"interaction range"),yn),IZ=bt(["top","bottom","left","right"]);function bt(e,t="a"){return St((i,s)=>{const n=e.find(o=>{const r=typeof o=="string"?o:o.value;return i===r});if(n==null)return!1;if(typeof n!="string"&&(n.deprecated===!0||n.deprecatedTo!=null)){const o=[`Property [%s] with value '${n.value}' is deprecated.`];n.deprecatedTo&&o.push(`Use ${n.deprecatedTo} instead.`),de.warnOnce(o.join(" "),s.property)}return!0},`${t} keyword such as ${PZ(e)}`)}var LZ=ps(cl(yn.restrict({min:1}),ly("maxSpacing")),ay),FZ=ps(cl(yn.restrict({min:1}),cy("minSpacing")),ay);function St(e,t){return e.message=t,e}function PZ(e){const t=e.filter(s=>typeof s=="string"||s.undocumented!==!0).map(s=>`'${typeof s=="string"?s:s.value}'`);if(t.length===1)return t[0];const i=t.pop();return`${t.join(", ")} or ${i}`}function vp(e,t){return ll(e.message)?e.message(t):e.message}function kZ(e){return t=>vp(t,e)}function NZ(e){return Object.assign(e,{restrict({length:t,minLength:i}={}){let s="an array";return Hn(i)&&i>0?s="a non-empty array":Hn(t)&&(s=`an array of length ${t}`),St(n=>Ue(n)&&(Hn(t)?n.length===t:!0)&&(Hn(i)?n.length>=i:!0),s)}})}function OZ(e){return Object.assign(e,{restrict({min:t,max:i}={}){const s=["a number"],n=Hn(t),o=Hn(i);return n&&o?s.push(`between ${t} and ${i} inclusive`):n?s.push(`greater than or equal to ${t}`):o&&s.push(`less than or equal to ${i}`),St(r=>nt(r)&&(n?r>=t:!0)&&(o?r<=i:!0),s.join(" "))}})}function uy(e){return Object.assign(e,{restrict(t){return St(i=>i instanceof t,i=>vp(e,i)??`an instance of ${t.name}`)}})}var WM=class extends Be{constructor(){super(...arguments),this.color="black"}};D([E()],WM.prototype,"stop",2);D([E()],WM.prototype,"color",2);function GZ(e){let t;for(const i of e)if((i==null?void 0:i.stop)!=null){if(t!=null&&i.stop<t)return!1;t=i.stop}return!0}function rN(e){return e.flatMap((t,i)=>{var o;const{stop:s}=t,n=(o=e.at(i+1))==null?void 0:o.color;return n!=null?[t,{stop:s,color:n}]:[t]})}function BZ(e,t){const i=t==="discrete"?1:0,s=e.map((n,o,{length:r})=>({stop:(o+i)/(r-1+i),color:n}));return t==="discrete"?rN(s):s}function aN(e,t,i,s="continuous"){var y,b,w,S;const n=e.map(M=>typeof M=="string"?{color:M}:M);if(n.length===0)return BZ(t,s);if(!GZ(n))return de.warnOnce("[fills] must have the stops defined in ascending order"),[];const o=Math.min(...i),r=Math.max(...i),a=s==="discrete",c=new Float64Array(n.length);let h=0,d=-1;for(let M=0;M<n.length;M+=1){const R=n[M];if(M>=d){d=n.length-1;for(let T=M+1;T<n.length;T+=1)if(((y=n[T])==null?void 0:y.stop)!=null){d=T;break}}let A=R==null?void 0:R.stop;if(A==null){const T=(b=n[h])==null?void 0:b.stop,F=(w=n[d])==null?void 0:w.stop,P=T??o,N=F??r,O=a&&T==null?1:0;A=P+(N-P)*(M-h+O)/(d-h+O)}else h=M;c[M]=Math.max(0,Math.min(1,(A-o)/(r-o)))}let p=(S=n.find(M=>M.color!=null))==null?void 0:S.color,f;const v=n.map((M,R)=>{let A=M==null?void 0:M.color;const T=c[R];return A!=null?p=A:p!=null?A=p:(f==null&&(f=new Mh,f.domain=[0,1],f.range=t),A=f.convert(T)),{stop:T,color:A}});return s==="discrete"?rN(v):v}function mg(e,t,i,s){const n=e-i,o=t-s;return n*n+o*o}function vg(e,t,i,s,n,o,r){if(i===n&&s===o)return Math.min(r,mg(e,t,i,s));const a=n-i,c=o-s,h=Math.max(0,Math.min(1,((e-i)*a+(t-s)*c)/(a*a+c*c))),d=i+h*a,p=s+h*c;return Math.min(r,mg(e,t,d,p))}function zZ(e,t,i,s,n,o,r,a,c){a&&([r,o]=[o,r]);const h=Math.atan2(t-s,e-i);if(!Va(h,o,r)){const p=i+Math.cos(o)*n,f=s+Math.sin(o)*n,v=i+Math.cos(o)*n,y=s+Math.sin(o)*n;return Math.min(c,mg(e,t,p,f),mg(e,t,v,y))}const d=n-Math.sqrt(mg(e,t,i,s));return Math.min(c,d*d)}function HZ(e,t){const i=-t/e;return e!==0&&i>=0&&i<=1?[i]:[]}function VZ(e,t,i){if(e===0)return HZ(t,i);const s=t*t-4*e*i,n=[];if(s===0){const o=-t/(2*e);o>=0&&o<=1&&n.push(o)}else if(s>0){const o=Math.sqrt(s),r=(-t-o)/(2*e),a=(-t+o)/(2*e);r>=0&&r<=1&&n.push(r),a>=0&&a<=1&&n.push(a)}return n}function _Z(e,t,i,s){if(e===0)return VZ(t,i,s);const n=t/e,o=i/e,r=s/e,a=(3*o-n*n)/9,c=(9*n*o-27*r-2*n*n*n)/54,h=a*a*a+c*c,d=1/3,p=[];if(h>=0){const f=Math.sqrt(h),v=Math.sign(c+f)*Math.pow(Math.abs(c+f),d),y=Math.sign(c-f)*Math.pow(Math.abs(c-f),d),b=Math.abs(Math.sqrt(3)*(v-y)/2),w=-.3333333333333333*n+(v+y);if(w>=0&&w<=1&&p.push(w),b===0){const S=-.3333333333333333*n-(v+y)/2;S>=0&&S<=1&&p.push(S)}}else{const f=Math.acos(c/Math.sqrt(-a*a*a)),v=d*n,y=2*Math.sqrt(-a),b=y*Math.cos(d*f)-v,w=y*Math.cos(d*(f+2*Math.PI))-v,S=y*Math.cos(d*(f+4*Math.PI))-v;b>=0&&b<=1&&p.push(b),w>=0&&w<=1&&p.push(w),S>=0&&S<=1&&p.push(S)}return p}function Hu(e,t,i,s,n,o,r,a){const c=(i-e)*(a-o)-(s-t)*(r-n);if(c===0)return 0;const h=((r-n)*(t-o)-(e-n)*(a-o))/c,d=((i-e)*(t-o)-(s-t)*(e-n))/c;return h>=0&&h<=1&&d>=0&&d<=1?1:0}function WZ(e,t,i,s,n,o,r,a,c,h,d,p){let f=0;const v=h-p,y=d-c,b=c*(p-h)-h*(d-c),w=AI(e,i,n,r),S=AI(t,s,o,a),M=v*w[0]+y*S[0],R=v*w[1]+y*S[1],A=v*w[2]+y*S[2],T=v*w[3]+y*S[3]+b,F=_Z(M,R,A,T);for(const P of F){const N=P*P,O=P*N,B=w[0]*O+w[1]*N+w[2]*P+w[3],V=S[0]*O+S[1]*N+S[2]*P+S[3];let U;c===d?U=(V-h)/(p-h):U=(B-c)/(d-c),U>=0&&U<=1&&f++}return f}function AI(e,t,i,s){return[-e+3*t-3*i+s,3*e-6*t+3*i,-3*e+3*t,e]}function lN(e,t,i,s,n,o,r,a,c,h){if(isNaN(e)||isNaN(t))return 0;o&&([n,s]=[s,n]);const d=(h-a)/(c-r),p=a-d*r,f=Math.pow(d,2)+1,v=2*(d*(p-t)-e),y=Math.pow(e,2)+Math.pow(p-t,2)-Math.pow(i,2),b=Math.pow(v,2)-4*f*y;if(b<0)return 0;const w=(-v+Math.sqrt(b))/2/f,S=(-v-Math.sqrt(b))/2/f;let M=0;return[w,S].forEach(R=>{if(!(R>=Math.min(r,c)&&R<=Math.max(r,c)))return;const T=d*R+p,F=R-e,P=T-t,N=Math.atan2(P,F);Va(N,s,n)&&M++}),M}function mv(e,t,i,s,n){return(1-n)**3*e+3*(1-n)**2*n*t+3*(1-n)*n**2*i+n**3*s}function vv(e,t,i,s,n){if(n<=Math.min(e,s))return e<s?0:1;if(n>=Math.max(e,s))return e<s?1:0;let o=0,r=1,a=NaN;for(let c=0;c<12;c+=1)a=(o+r)/2,mv(e,t,i,s,a)<n?o=a:r=a;return a}function yv(e,t,i,s,n,o,r,a,c){const h=(1-c)*e+c*i,d=(1-c)*t+c*s,p=(1-c)*i+c*n,f=(1-c)*s+c*o,v=(1-c)*n+c*r,y=(1-c)*o+c*a,b=(1-c)*h+c*p,w=(1-c)*d+c*f,S=(1-c)*p+c*v,M=(1-c)*f+c*y,R=(1-c)*b+c*S,A=(1-c)*w+c*M;return[[{x:e,y:t},{x:h,y:d},{x:b,y:w},{x:R,y:A}],[{x:R,y:A},{x:S,y:M},{x:v,y},{x:r,y:a}]]}function Qw(e,t,i,s){const n=-e+3*t-3*i+s,o=3*e-6*t+3*i,r=-3*e+3*t;if(n===0){if(o!==0){const c=-r/o;if(c>0&&c<1)return[c]}return[]}const a=o*o-4*n*r;if(a>=0){const c=Math.sqrt(a),h=(-o+c)/(2*n),d=(-o-c)/(2*n);return[h,d].filter(p=>p>0&&p<1)}return[]}function cN(e,t,i,s,n,o,r,a){const c=Qw(e,i,n,r),h=Qw(t,s,o,a);return[...c,...h]}var sh=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isEmpty(){return this.commands.length===0}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(e,t){this.openedPath=!0,this.path2d.moveTo(e,t),this.commands.push(0),this.params.push(e,t)}lineTo(e,t){this.openedPath?(this.path2d.lineTo(e,t),this.commands.push(1),this.params.push(e,t)):this.moveTo(e,t)}rect(e,t,i,s){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+s),this.lineTo(e,t+s),this.closePath()}roundRect(e,t,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(e,t+n),this.arc(e+n,t+n,n,Math.PI,1.5*Math.PI),this.lineTo(e+n,t),this.lineTo(e+i-n,t),this.arc(e+i-n,t+n,n,1.5*Math.PI,2*Math.PI),this.lineTo(e+i,t+n),this.lineTo(e+i,t+s-n),this.arc(e+i-n,t+s-n,n,0,Math.PI/2),this.lineTo(e+i-n,t+s),this.lineTo(e+n,t+s),this.arc(e+ +n,t+s-n,n,Math.PI/2,Math.PI),this.lineTo(e,t+s-n),this.closePath()}arc(e,t,i,s,n,o){this.openedPath=!0,this.path2d.arc(e,t,i,s,n,o),this.commands.push(2),this.params.push(e,t,i,s,n,o?1:0)}cubicCurveTo(e,t,i,s,n,o){this.openedPath||this.moveTo(e,t),this.path2d.bezierCurveTo(e,t,i,s,n,o),this.commands.push(3),this.params.push(e,t,i,s,n,o)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(e){e&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(e,t){const i=this.commands,s=this.params,n=i.length,o=-1e4,r=-1e4;let a=NaN,c=NaN,h=0,d=0,p=0;for(let f=0,v=0;f<n;f++)switch(i[f]){case 0:p+=Hu(a,c,h,d,o,r,e,t),h=s[v++],a=h,d=s[v++],c=d;break;case 1:p+=Hu(h,d,s[v++],s[v++],o,r,e,t),h=s[v-2],d=s[v-1];break;case 3:p+=WZ(h,d,s[v++],s[v++],s[v++],s[v++],s[v++],s[v++],o,r,e,t),h=s[v-2],d=s[v-1];break;case 2:{const y=s[v++],b=s[v++],w=s[v++],S=s[v++],M=s[v++],R=!!s[v++];if(p+=lN(y,b,w,S,M,R,o,r,e,t),!isNaN(a)){const A=y+Math.cos(S)*w,T=b+Math.sin(S)*w;p+=Hu(h,d,A,T,o,r,e,t)}h=y+Math.cos(M)*w,d=b+Math.sin(M)*w;break}case 4:p+=Hu(a,c,h,d,o,r,e,t);break}return p%2===1}distanceSquared(e,t){let i=1/0;const s=this.commands,n=this.params,o=s.length;let r=NaN,a=NaN,c=0,h=0;for(let d=0,p=0;d<o;d++)switch(s[d]){case 0:c=r=n[p++],h=a=n[p++];break;case 1:{const f=n[p++],v=n[p++];i=vg(e,t,c,h,f,v,i);break}case 3:de.error("Command.Curve distanceSquare not implemented");break;case 2:{const f=n[p++],v=n[p++],y=n[p++],b=n[p++],w=n[p++],S=f+Math.cos(b)*y,M=v+Math.sin(b)*y,R=!!n[p++];i=vg(e,t,c,h,S,M,i),i=zZ(e,t,f,v,y,b,w,R,i),c=f+Math.cos(w)*y,h=v+Math.sin(w)*y;break}case 4:i=vg(e,t,c,h,r,a,i);break}return i}toSVG(e=(t,i)=>({x:t,y:i})){const t=[],{commands:i,params:s}=this,n=(r,...a)=>{t.push(r);for(let c=0;c<a.length;c+=2){const{x:h,y:d}=e(a[c],a[c+1]);t.push(h,d)}};let o=0;for(const r of i)switch(r){case 0:n("M",s[o++],s[o++]);break;case 1:n("L",s[o++],s[o++]);break;case 3:n("C",s[o++],s[o++],s[o++],s[o++],s[o++],s[o++]);break;case 2:{const a=s[o++],c=s[o++],h=s[o++],d=s[o++],p=s[o++],f=s[o++];let v=f?d-p:p-d;v<0&&(v+=Math.ceil(-v/(2*Math.PI))*2*Math.PI),f&&(v=-v);const y=Math.max(Math.ceil(Math.abs(v)/(Math.PI/2)),1),b=v/y,w=4/3*Math.tan(b/4),S=t.length===0?"M":"L";n(S,a+Math.cos(d)*h,c+Math.sin(d)*h);for(let M=0;M<y;M+=1){const R=d+b*(M+0),A=d+b*(M+1),T=h*Math.sin(R),F=h*Math.cos(R),P=h*Math.sin(A),N=h*Math.cos(A);n("C",a+F-w*T,c+T+w*F,a+N+w*P,c+P-w*N,a+N,c+P)}break}case 4:t.push("Z");break}return t.join(" ")}computeBBox(){const{commands:e,params:t}=this;let[i,s,n,o]=[1/0,1/0,-1/0,-1/0],[r,a]=[NaN,NaN],[c,h]=[NaN,NaN];const d=(f,v,y)=>{i=Math.min(v,i),s=Math.min(f,s),n=Math.max(f,n),o=Math.max(v,o),y&&([r,a]=[f,v])};let p=0;for(const f of e)switch(f){case 0:d(t[p++],t[p++],!0),[c,h]=[r,a];break;case 1:d(t[p++],t[p++],!0);break;case 3:{const v=t[p++],y=t[p++],b=t[p++],w=t[p++],S=t[p++],M=t[p++];d(S,M,!0),cN(r,a,v,y,b,w,S,M).forEach(A=>{const T=mv(r,v,b,S,A),F=mv(a,y,w,M,A);d(T,F)});break}case 2:{const v=t[p++],y=t[p++],b=t[p++];let w=Pt(t[p++]),S=Pt(t[p++]);t[p++]&&([w,S]=[S,w]);const R=(T,F)=>{const P=v+b*Math.cos(T),N=y+b*Math.sin(T);d(P,N,F)};R(w),R(S,!0);const A=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(const T of A)(w<S&&w<=T&&T<=S||w>S&&(w<=T||T<=S))&&R(T);break}case 4:[r,a]=[c,h];break}return new Me(s,i,n-s,o-i)}};function Oi(e,t,i){const s=Math.round(t*e)/e;return i==null?s:i===0?0:i<1?Math.ceil(i*e)/e:Math.round((i+t)*e)/e-s}function EI(e,t){return Math.floor(t*e)/e}function Ub(e,t,i){const{width:s,height:n,padding:o,strokeWidth:r}=t,a=s/2,c=n/2,h=Math.max(1,s-o-r/2),d=Math.max(1,n-o-r/2);let p=!1;for(const[f,v]of i){const y=a+(f-.5)*h,b=c+(v-.5)*d;p?e.lineTo(y,b):e.moveTo(y,b),p=!0}e.closePath()}var jZ={circles(e,{width:t,strokeWidth:i,padding:s}){const n=t/2,o=Math.max(1,n-s-i/2);e.arc(n,n,o,0,Math.PI*2)},squares(e,{width:t,height:i,pixelRatio:s,padding:n,strokeWidth:o}){const r=n+o/2;e.moveTo(Oi(s,r),Oi(s,r)),e.lineTo(Oi(s,t-r),Oi(s,r)),e.lineTo(Oi(s,t-r),Oi(s,i-r)),e.lineTo(Oi(s,r),Oi(s,i-r)),e.closePath()},triangles(e,t){Ub(e,t,[[.5,0],[1,1],[0,1]])},diamonds(e,t){Ub(e,t,[[.5,0],[1,.5],[.5,1],[0,.5]])},stars(e,{width:t,height:i,padding:s}){const o=Math.max(1,(t-s)/2),r=o/2,a=Math.PI/2;for(let c=0;c<5*2;c++){const h=c%2===0?o:r,d=c*Math.PI/5-a,p=t/2+Math.cos(d)*h,f=i/2+Math.sin(d)*h;e.lineTo(p,f)}e.closePath()},hearts(e,{width:t,height:i,padding:s}){const n=Math.max(1,t/4-s/2),o=t/2,r=i/2+n/2;e.arc(o-n,r-n,n,Wt(130),Wt(330)),e.arc(o+n,r-n,n,Wt(220),Wt(50)),e.lineTo(o,r+n),e.closePath()},crosses(e,t){Ub(e,t,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},"vertical-lines"(e,{width:t,height:i,pixelRatio:s,strokeWidth:n}){const o=Oi(s,t/2)-n%2/2;e.moveTo(o,0),e.lineTo(o,i)},"horizontal-lines"(e,{width:t,height:i,pixelRatio:s,strokeWidth:n}){const o=Oi(s,i/2)-n%2/2;e.moveTo(0,o),e.lineTo(t,o)},"forward-slanted-lines"(e,{width:t,height:i,strokeWidth:s}){const n=Math.atan2(i,t),o=s*Math.cos(n),r=s*Math.sin(n);e.moveTo(-o,r),e.lineTo(o,-r),e.moveTo(-o,i+r),e.lineTo(t+o,-r),e.moveTo(t-o,i+r),e.lineTo(t+o,i-r)},"backward-slanted-lines"(e,{width:t,height:i,strokeWidth:s}){const n=Math.atan2(i,t),o=s*Math.cos(n),r=s*Math.sin(n);e.moveTo(t-o,-r),e.lineTo(t+o,r),e.moveTo(-o,-r),e.lineTo(t+o,i+r),e.moveTo(-o,i-r),e.lineTo(o,i+r)}},UZ=class{constructor(e,t=1){this.pixelRatio=t,this._cache=void 0,this.width=Math.max((e==null?void 0:e.width)??10,1),this.height=Math.max((e==null?void 0:e.height)??10,1),this.fill=e.fill??"transparent",this.fillOpacity=e.fillOpacity??1,this.backgroundFill=e.backgroundFill??"transparent",this.backgroundFillOpacity=e.backgroundFillOpacity??1,this.stroke=e.stroke??"black",this.strokeOpacity=e.strokeOpacity??1,this.strokeWidth=e.strokeWidth??1,this.padding=e.padding??1,this.pattern=e.pattern??"forward-slanted-lines",this.rotation=e.rotation??0}getPath(){const{pattern:e,width:t,height:i,padding:s,strokeWidth:n,pixelRatio:o}=this,r=new sh;return jZ[e](r,{width:t,height:i,pixelRatio:o,strokeWidth:n,padding:s}),r}renderStroke(e,t){const{stroke:i,strokeWidth:s,strokeOpacity:n}=this;s&&(t.strokeStyle=i,t.lineWidth=s,t.globalAlpha=n,t.stroke(e))}renderFill(e,t){const{fill:i,fillOpacity:s}=this;t.fillStyle=i,t.globalAlpha=s,t.fill(e)}createCanvasPattern(e){const{width:t,height:i,backgroundFill:s,backgroundFillOpacity:n,pixelRatio:o,rotation:r}=this,a=new FM({width:t,height:i,pixelRatio:o}),c=a.context;c.fillStyle=s,c.globalAlpha=n,c.fillRect(0,0,t,i);const h=this.getPath().getPath2D();this.renderFill(h,c),this.renderStroke(h,c);const d=e.createPattern(a.canvas,"repeat"),p=Pt(Wt(r)),f=1/o,v=Math.cos(p)*f,y=Math.sin(p)*f;return d==null||d.setTransform(new DOMMatrix([v,y,-y,v,0,0])),a.destroy(),d}createPattern(e){if(this._cache!=null&&this._cache.ctx===e)return this._cache.pattern;const t=this.createCanvasPattern(e);if(t!=null)return this._cache={ctx:e,pattern:t},t}toSvg(){const{width:e,height:t,fill:i,fillOpacity:s,backgroundFill:n,backgroundFillOpacity:o,stroke:r,strokeWidth:a,strokeOpacity:c,rotation:h}=this,d=Zi("pattern");d.setAttribute("viewBox",`0 0 ${e} ${t}`),d.setAttribute("width",String(e)),d.setAttribute("height",String(t)),d.setAttribute("patternUnits","userSpaceOnUse");const p=Zi("rect");p.setAttribute("x","0"),p.setAttribute("y","0"),p.setAttribute("width",String(e)),p.setAttribute("height",String(t)),p.setAttribute("fill",n),p.setAttribute("fill-opacity",String(o)),d.appendChild(p);const f=Zi("path");return f.setAttribute("fill",i),f.setAttribute("fill-opacity",String(s)),f.setAttribute("stroke-opacity",String(c)),f.setAttribute("stroke",r),f.setAttribute("stroke-width",String(a)),f.setAttribute("transform",`rotate(${h})`),f.setAttribute("d",this.getPath().toSVG()),d.appendChild(f),d}};function So(e){return pi(e)&&e.type=="gradient"}function uN(e){return Ue(e)&&e.every(t=>typeof t=="string")}function Dc(e){return e!==null&&pi(e)&&e.type=="pattern"}function YZ(e){return So(e)||Dc(e)}var xs=class Oo extends Kr{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=Oo.defaultStyles.fill,this.stroke=Oo.defaultStyles.stroke,this.strokeWidth=Oo.defaultStyles.strokeWidth,this.lineDash=Oo.defaultStyles.lineDash,this.lineDashOffset=Oo.defaultStyles.lineDashOffset,this.lineCap=Oo.defaultStyles.lineCap,this.lineJoin=Oo.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=Oo.defaultStyles.opacity,this.fillShadow=Oo.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:t}=this.constructor;Object.assign(this,t)}getGradient(t){if(So(t))return this.createGradient(t)}createGradient(t){const{colorSpace:i="rgb",gradient:s="linear",colorStops:n,rotation:o=0,reverse:r=!1}=t;if(n==null)return;let a=aN(n,["black"],[0,1]);switch(r&&(a=a.map(c=>({color:c.color,stop:1-c.stop})).reverse()),s){case"linear":return new eN(i,a,o);case"radial":return new oZ(i,a);case"conic":return new Jk(i,a,o)}}getPattern(t){if(Dc(t))return this.createPattern(t)}createPattern(t){var s,n;const i=((n=(s=this.layerManager)==null?void 0:s.canvas)==null?void 0:n.pixelRatio)??1;return new UZ(t,i)}onFillChange(){typeof this.fill=="object"&&Qo(this._cachedFill??{},this.fill)||(this.fillGradient=this.getGradient(this.fill),this.fillPattern=this.getPattern(this.fill),this._cachedFill=this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(t,i){var s,n;return Oi(((n=(s=this.layerManager)==null?void 0:s.canvas)==null?void 0:n.pixelRatio)??1,t,i)}preRender(t,i){return this.dirty&&(this.cachedDefaultGradientFillBBox=void 0),super.preRender(t,i)}fillStroke(t,i){this.renderFill(t,i),this.renderStroke(t,i)}renderFill(t,i){if(this.fill){const{globalAlpha:s}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),this.executeFill(t,i),t.globalAlpha=s}t.shadowColor="rgba(0, 0, 0, 0)"}executeFill(t,i){i?t.fill(i):t.fill()}applyFill(t){var c;const{fill:i,fillGradient:s,fillBBox:n=this.getDefaultGradientFillBBox()??this.getBBox(),fillParams:o}=this,r=n?s==null?void 0:s.createGradient(t,n,o):void 0,a=(c=this.fillPattern)==null?void 0:c.createPattern(t);t.fillStyle=a??r??(typeof i=="string"?i:void 0)??"black"}applyStroke(t){var i;t.strokeStyle=((i=this.strokeGradient)==null?void 0:i.createGradient(t,this.getBBox()))??(typeof this.stroke=="string"?this.stroke:void 0)??"black"}applyFillAlpha(t){t.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(t){var n;const i=((n=this.layerManager)==null?void 0:n.canvas.pixelRatio)??1,s=this.fillShadow;s!=null&&s.enabled&&(t.shadowColor=s.color,t.shadowOffsetX=s.xOffset*i,t.shadowOffsetY=s.yOffset*i,t.shadowBlur=s.blur*i)}renderStroke(t,i){if(this.stroke&&this.strokeWidth){const{globalAlpha:s}=t;this.applyStroke(t),t.globalAlpha*=this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),this.miterLimit!=null&&(t.miterLimit=this.miterLimit),this.executeStroke(t,i),t.globalAlpha=s}}executeStroke(t,i){i?t.stroke(i):t.stroke()}getDefaultGradientFillBBox(){return this.cachedDefaultGradientFillBBox==null&&(this.cachedDefaultGradientFillBBox=Object.freeze(this.computeDefaultGradientFillBBox())),this.cachedDefaultGradientFillBBox}computeDefaultGradientFillBBox(){}containsPoint(t,i){return this.isPointInPath(t,i)}applySvgFillAttributes(t,i){const{fill:s,fillOpacity:n}=this;if(typeof s=="string")t.setAttribute("fill",s);else if(So(s)&&this.fillGradient){i??(i=[]);const o=this.fillGradient.toSvg(this.fillBBox??this.getBBox()),r=Zw();o.setAttribute("id",r),i.push(o),t.setAttribute("fill",`url(#${r})`)}else if(Dc(s)&&this.fillPattern){i??(i=[]);const o=this.fillPattern.toSvg(),r=Zw();o.setAttribute("id",r),i.push(o),t.setAttribute("fill",`url(#${r})`)}else t.setAttribute("fill","none");return t.setAttribute("fill-opacity",String(n)),i}applySvgStrokeAttributes(t){const{stroke:i,strokeOpacity:s,strokeWidth:n,lineDash:o,lineDashOffset:r}=this;if(i!=null&&(t.setAttribute("stroke",typeof i=="string"?i:"none"),t.setAttribute("stroke-opacity",String(s)),t.setAttribute("stroke-width",String(n))),(o==null?void 0:o.some(a=>a!==0))===!0){const a=o.length%2===1?[...o,...o]:o;t.setAttribute("stroke-dasharray",a.join(" ")),t.setAttribute("stroke-dashoffset",String(r))}}};xs.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0};D([De()],xs.prototype,"fillOpacity",2);D([De()],xs.prototype,"strokeOpacity",2);D([De({changeCb:e=>e.onFillChange()})],xs.prototype,"fill",2);D([De({changeCb:e=>e.onStrokeChange()})],xs.prototype,"stroke",2);D([De()],xs.prototype,"strokeWidth",2);D([De()],xs.prototype,"lineDash",2);D([De()],xs.prototype,"lineDashOffset",2);D([De()],xs.prototype,"lineCap",2);D([De()],xs.prototype,"lineJoin",2);D([De()],xs.prototype,"miterLimit",2);D([De({convertor:e=>Ge(0,e,1)})],xs.prototype,"opacity",2);D([De({checkDirtyOnAssignment:!0})],xs.prototype,"fillShadow",2);D([De({changeCb:e=>e.onFillChange()})],xs.prototype,"fillBBox",2);D([De({changeCb:e=>e.onFillChange()})],xs.prototype,"fillParams",2);var $n=xs,hN=[1,0,0,1,0,0],bo=class _m{get e(){return[...this.elements]}constructor(t=hN){this.elements=[...t]}setElements(t){const i=this.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this}get identity(){const t=this.elements;return Bo(t[0],1)&&Bo(t[1],0)&&Bo(t[2],0)&&Bo(t[3],1)&&Bo(t[4],0)&&Bo(t[5],0)}AxB(t,i,s){const n=t[0]*i[0]+t[2]*i[1],o=t[1]*i[0]+t[3]*i[1],r=t[0]*i[2]+t[2]*i[3],a=t[1]*i[2]+t[3]*i[3],c=t[0]*i[4]+t[2]*i[5]+t[4],h=t[1]*i[4]+t[3]*i[5]+t[5];s=s??t,s[0]=n,s[1]=o,s[2]=r,s[3]=a,s[4]=c,s[5]=h}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const i=new Array(6);return t instanceof _m?this.AxB(this.elements,t.elements,i):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],i),new _m(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let i=t[0],s=t[1],n=t[2],o=t[3];const r=t[4],a=t[5],c=1/(i*o-s*n);return i*=c,s*=c,n*=c,o*=c,new _m([o,-s,-n,i,n*a-o*r,s*r-i*a])}invertSelf(){const t=this.elements;let i=t[0],s=t[1],n=t[2],o=t[3];const r=t[4],a=t[5],c=1/(i*o-s*n);return i*=c,s*=c,n*=c,o*=c,t[0]=o,t[1]=-s,t[2]=-n,t[3]=i,t[4]=n*a-o*r,t[5]=s*r-i*a,this}transformPoint(t,i){const s=this.elements;return{x:t*s[0]+i*s[2]+s[4],y:t*s[1]+i*s[3]+s[5]}}transformBBox(t,i){const s=this.elements,n=s[0],o=s[1],r=s[2],a=s[3],c=t.width*.5,h=t.height*.5,d=t.x+c,p=t.y+h,f=Math.abs(c*n)+Math.abs(h*r),v=Math.abs(c*o)+Math.abs(h*a);return i??(i=new Me(0,0,0,0)),i.x=d*n+p*r+s[4]-f,i.y=d*o+p*a+s[5]-v,i.width=f+f,i.height=v+v,i}toContext(t){if(this.identity)return;const i=this.elements;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}static updateTransformMatrix(t,i,s,n,o,r,a){const c=i,h=s;let d,p;c===1&&h===1?(d=0,p=0):(d=(a==null?void 0:a.scalingCenterX)??0,p=(a==null?void 0:a.scalingCenterY)??0);const f=n,v=Math.cos(f),y=Math.sin(f);let b,w;f===0?(b=0,w=0):(b=(a==null?void 0:a.rotationCenterX)??0,w=(a==null?void 0:a.rotationCenterY)??0);const S=o,M=r,R=d*(1-c)-b,A=p*(1-h)-w;return t.setElements([v*c,y*c,-y*h,v*h,v*R-y*A+b+S,y*R+v*A+w+M]),t}};function ka(e){return gN(e.constructor)}var dN=Symbol("isMatrixTransform");function gN(e){return e[dN]===!0}function jM(e){var t,i;const s=e;if(gN(e))return e;const n=Symbol("matrix_combined_transform");class o extends s{constructor(){super(...arguments),this[i]=new bo,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty()}updateMatrix(a){}computeTransformMatrix(){this._dirtyTransform&&(this[n].setElements(hN),this.updateMatrix(this[n]),this._dirtyTransform=!1)}toParent(a){return this.computeTransformMatrix(),this[n].identity?a.clone():this[n].transformBBox(a)}toParentPoint(a,c){return this.computeTransformMatrix(),this[n].identity?{x:a,y:c}:this[n].transformPoint(a,c)}fromParent(a){return this.computeTransformMatrix(),this[n].identity?a.clone():this[n].inverse().transformBBox(a)}fromParentPoint(a,c){return this.computeTransformMatrix(),this[n].identity?{x:a,y:c}:this[n].inverse().transformPoint(a,c)}computeBBox(){const a=super.computeBBox();return a&&this.toParent(a)}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(a,c){return{x:a,y:c}=this.fromParentPoint(a,c),super.pickNode(a,c)}pickNodes(a,c,h){return{x:a,y:c}=this.fromParentPoint(a,c),super.pickNodes(a,c,h)}render(a){this.computeTransformMatrix();const{ctx:c}=a,h=this[n];let d=!1;h.identity||(c.save(),d=!0,h.toContext(c)),super.render(a),d&&c.restore()}toSVG(){this.computeTransformMatrix();const a=super.toSVG(),c=this[n];if(c.identity||a==null)return a;const h=Zi("g");h.append(...a.elements);const[d,p,f,v,y,b]=c.e;return h.setAttribute("transform",`matrix(${d} ${p} ${f} ${v} ${y} ${b})`),{elements:[h],defs:a.defs}}}return t=dN,i=n,o[t]=!0,o}function Dh(e){var t;const i=e,s=Symbol("matrix_rotation");class n extends jM(i){constructor(){super(...arguments),this[t]=new bo,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0}updateMatrix(r){super.updateMatrix(r);const{rotation:a,rotationCenterX:c,rotationCenterY:h}=this;a!==0&&(bo.updateTransformMatrix(this[s],1,1,a,0,0,{rotationCenterX:c,rotationCenterY:h}),r.multiplySelf(this[s]))}}return t=s,D([De({type:"transform"})],n.prototype,"rotationCenterX",2),D([De({type:"transform"})],n.prototype,"rotationCenterY",2),D([De({type:"transform"})],n.prototype,"rotation",2),n}function UM(e){var t;const i=e,s=Symbol("matrix_scale");class n extends jM(i){constructor(){super(...arguments),this[t]=new bo,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null}updateMatrix(r){super.updateMatrix(r);const{scalingX:a,scalingY:c,scalingCenterX:h,scalingCenterY:d}=this;a===1&&c===1||(bo.updateTransformMatrix(this[s],a,c,0,0,0,{scalingCenterX:h,scalingCenterY:d}),r.multiplySelf(this[s]))}}return t=s,D([De({type:"transform"})],n.prototype,"scalingX",2),D([De({type:"transform"})],n.prototype,"scalingY",2),D([De({type:"transform"})],n.prototype,"scalingCenterX",2),D([De({type:"transform"})],n.prototype,"scalingCenterY",2),n}function Pc(e){var t;const i=e,s=Symbol("matrix_translation");class n extends jM(i){constructor(){super(...arguments),this[t]=new bo,this.translationX=0,this.translationY=0}updateMatrix(r){super.updateMatrix(r);const{translationX:a,translationY:c}=this;a===0&&c===0||(bo.updateTransformMatrix(this[s],1,1,0,a,c),r.multiplySelf(this[s]))}}return t=s,D([De({type:"transform"})],n.prototype,"translationX",2),D([De({type:"transform"})],n.prototype,"translationY",2),n}var ri=class{static fromCanvas(e,t){const i=[];for(const s of e.traverseUp())ka(s)&&i.unshift(s);for(const s of i)t=s.fromParent(t);return ka(e)&&(t=e.fromParent(t)),t}static toCanvas(e,t){t==null?t=e.getBBox():ka(e)&&(t=e.toParent(t));for(const i of e.traverseUp())ka(i)&&(t=i.toParent(t));return t}static fromCanvasPoint(e,t,i){const s=[];for(const n of e.traverseUp())ka(n)&&s.unshift(n);for(const n of s)({x:t,y:i}=n.fromParentPoint(t,i));return ka(e)&&({x:t,y:i}=e.fromParentPoint(t,i)),{x:t,y:i}}static toCanvasPoint(e,t,i){ka(e)&&({x:t,y:i}=e.toParentPoint(t,i));for(const s of e.traverseUp())ka(s)&&({x:t,y:i}=s.toParentPoint(t,i));return{x:t,y:i}}},Yb=(e,t)=>Math.sign(e-t);function pN(e,t){if(typeof e=="number"&&typeof t=="number")return Yb(e,t);const i=typeof e=="number"?[e]:e,s=typeof t=="number"?[t]:t,n=Math.min(i.length,s.length);for(let o=0;o<n;o+=1){const r=Yb(i[o],s[o]);if(r!==0)return r}return Yb(i.length,s.length)}var Xd,YM=class ng extends Kr{constructor(t){super(t),this.opacity=1,this.renderToOffscreenCanvas=!1,this.optimizeForInfrequentRedraws=!1,this.layer=void 0,this.image=void 0,this._lastWidth=NaN,this._lastHeight=NaN,this._lastDevicePixelRatio=NaN,this.isContainerNode=!0,this.renderToOffscreenCanvas=(t==null?void 0:t.renderToOffscreenCanvas)===!0}static is(t){return t instanceof ng}static computeChildrenBBox(t,i=!0){return Me.merge(Kr.extractBBoxes(t,i))}static compareChildren(t,i){return pN(t.zIndex,i.zIndex)||t.serialNumber-i.serialNumber}containsPoint(t,i){return!0}computeBBox(){return ng.computeChildrenBBox(this.children())}computeSafeClippingBBox(t){const i=this.computeBBox();if(!i.isFinite())return;let s=0;const n=4;for(const f of this.descendants())f instanceof $n&&(s=Math.max(s,f.strokeWidth));const o=Math.max(1,s/2*n),{x:r,y:a}=ri.toCanvasPoint(this,0,0),c=EI(t,r+i.x-o)-r,h=EI(t,a+i.y-o)-a,d=Math.ceil(i.x+i.width-c+o),p=Math.ceil(i.y+i.height-h+o);return new Me(c,h,d,p)}prepareSharedCanvas(t,i,s){return Xd==null||Xd.pixelRatio!==s?Xd=new FM({width:t,height:i,pixelRatio:s}):Xd.resize(t,i,s),Xd}isDirty(t){const{width:i,height:s,devicePixelRatio:n}=t,{dirty:o,dirtyZIndex:r,layer:a}=this,c=a!=null&&(this._lastWidth!==i||this._lastHeight!==s),h=this._lastDevicePixelRatio!==n;if(this._lastWidth=i,this._lastHeight=s,this._lastDevicePixelRatio=n,o||r||c||h)return!0;for(const d of this.children())if(d.dirty)return!0;return!1}preRender(t){var s,n;const i=super.preRender(t,0);return i.groups+=1,i.nonGroups-=1,this.renderToOffscreenCanvas&&!this.optimizeForInfrequentRedraws&&i.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=(s=this._layerManager)==null?void 0:s.addLayer({name:this.name})):this.layer!=null&&((n=this._layerManager)==null||n.removeLayer(this.layer),this.layer=void 0),i}render(t){const{layer:i,renderToOffscreenCanvas:s}=this,n={...t};if(!s){this.renderInContext(n),super.render(n);return}const{ctx:o,stats:r,devicePixelRatio:a}=t;let{image:c}=this;if(this.isDirty(t)){c==null||c.bitmap.close(),c=void 0;const d=i?void 0:this.computeSafeClippingBBox(a),p=(f,...v)=>{var b;const y=f.context;n.ctx=y,f.clear(),y.save(),y.setTransform(...v),y.globalAlpha=1,this.renderInContext(n),y.restore(),(b=y.verifyDepthZero)==null||b.call(y)};if(i)p(i,o.getTransform());else if(d){const{x:f,y:v,width:y,height:b}=d,w=this.prepareSharedCanvas(y,b,a);p(w,a,0,0,a,-f*a,-v*a),c={bitmap:w.transferToImageBitmap(),x:f,y:v,width:y,height:b}}else this.dirtyZIndex&&this.sortChildren(ng.compareChildren);this.image=c,r&&r.layersRendered++}else this.skipRender(n),r&&r.layersSkipped++;const{globalAlpha:h}=o;if(o.globalAlpha=h*this.opacity,i)o.save(),o.resetTransform(),i.drawImage(o),o.restore();else if(c){const{bitmap:d,x:p,y:f,width:v,height:y}=c;o.drawImage(d,0,0,v*a,y*a,p,f,v,y)}o.globalAlpha=h,super.render(n)}skipRender(t){const{stats:i}=t;for(const s of this.children())s.markClean(),i&&(i.nodesSkipped+=this.childNodeCounts.groups+this.childNodeCounts.nonGroups,i.opsSkipped+=this.childNodeCounts.complexity)}applyClip(t,i){const{x:s,y:n,width:o,height:r}=i;t.beginPath(),t.rect(s,n,o,r),t.clip()}renderInContext(t){const{ctx:i,stats:s}=t;this.dirtyZIndex&&this.sortChildren(ng.compareChildren),i.save(),i.globalAlpha*=this.opacity,this.clipRect!=null&&(this.applyClip(i,this.clipRect),t.clipBBox=ri.toCanvas(this,this.clipRect));for(const n of this.children()){if(!n.visible){n.markClean(),s&&(s.nodesSkipped+=n.childNodeCounts.nonGroups+n.childNodeCounts.groups,s.opsSkipped+=n.childNodeCounts.complexity);continue}i.save(),n.render(t),i.restore()}i.restore()}setClipRect(t){this.clipRect=t?ri.fromCanvas(this,t):void 0}setClipRectCanvasSpace(t){this.clipRect=t}_setLayerManager(t){var i;this.layer&&((i=this._layerManager)==null||i.removeLayer(this.layer),this.layer=void 0),super._setLayerManager(t)}getVisibility(){for(const t of this.traverseUp(!0))if(!t.visible)return!1;return!0}toSVG(){if(!this.visible)return;const t=[],i=[];for(const s of this.children()){const n=s.toSVG();n!=null&&(i.push(...n.elements),n.defs!=null&&t.push(...n.defs))}return{elements:i,defs:t}}};YM.className="Group";D([De({convertor:e=>Ge(0,e,1)})],YM.prototype,"opacity",2);var Ne=YM,KZ=class extends UM(Ne){},$Z=class extends Dh(Ne){},Ps=class extends Pc(Ne){},Qd=class extends Dh(Pc(Ne)){},TI=class{constructor(){this.queue=[]}await(e=50){return new Promise(t=>{const i=()=>{clearTimeout(n),t(!0)},n=setTimeout(()=>{const o=this.queue.indexOf(i);o<0||(this.queue.splice(o,1),t(!1))},e);this.queue.push(i)})}notify(){this.queue.splice(0).forEach(e=>e())}};function ZZ(){return new Promise(e=>{setTimeout(e,0)})}function Cv(e,t){e&&(t=ey.normalize(t),t.width==null?e.style.removeProperty("width"):e.style.width=`${t.width}px`,t.height==null?e.style.removeProperty("height"):e.style.height=`${t.height}px`,t.x==null?e.style.removeProperty("left"):e.style.left=`${t.x}px`,t.y==null?e.style.removeProperty("top"):e.style.top=`${t.y}px`)}function fN(e){const t=parseFloat(e.style.width)||e.offsetWidth,i=parseFloat(e.style.height)||e.offsetHeight,s=parseFloat(e.style.left)||e.offsetLeft,n=parseFloat(e.style.top)||e.offsetTop;return{x:s,y:n,width:t,height:i}}function qZ(e){var s;if(e.focus({preventScroll:!0}),((s=e.lastChild)==null?void 0:s.textContent)==null)return;const t=Yr().createRange();t.setStart(e.lastChild,e.lastChild.textContent.length),t.setEnd(e.lastChild,e.lastChild.textContent.length);const i=Et().getSelection();i==null||i.removeAllRanges(),i==null||i.addRange(t)}var XZ=0;function QZ(e){return`${e??"ag-charts-element"}-${XZ++}`}function mN(){const e=Et("navigator");if("scheduling"in e){const t=e.scheduling;if("isInputPending"in t)return t.isInputPending({includeContinuous:!0})}return!1}function hy(e){return`ag-charts-icon ag-charts-icon-${e}`}var Jw="class-instance";function er(e,t,i){if(Ue(t)){if(!Ue(e)||e.length!==t.length||t.some((s,n)=>er(e[n],s,i)!=null))return t}else if(fi(t)){if(!fi(e))return t;const s={},n=new Set([...Object.keys(e),...Object.keys(t)]);for(const o of n)if(e[o]!==t[o])if(i!=null&&i.has(o))s[o]=t[o];else if(typeof e[o]==typeof t[o]){const r=er(e[o],t[o],i);r!==null&&(s[o]=r)}else s[o]=t[o];return Object.keys(s).length?s:null}else if(e!==t)return t;return null}function vN(e,t){for(const i of Object.keys(e))if(e[i]!==(t==null?void 0:t[i]))return!1;return!0}function zt(e,t){return Ue(e)?e.map(i=>zt(i,t)):fi(e)?JZ(e,t):e instanceof Map?new Map(zt(Array.from(e))):KM(e)}function JZ(e,t){var s,n;const i={};for(const o of Object.keys(e))(s=t==null?void 0:t.assign)!=null&&s.has(o)?i[o]=e[o]:(n=t==null?void 0:t.shallow)!=null&&n.has(o)?i[o]=KM(e[o]):i[o]=zt(e[o],t);return i}function KM(e){return Ue(e)?e.slice(0):fi(e)?{...e}:wh(e)?new Date(e):r9(e)?new RegExp(e.source,e.flags):e}function Pr(e,t,i,s,n,o){if(Ue(e)){o=t(e,s,n,o);let r=0;for(const a of e)o=Pr(a,t,i,s==null?void 0:s[r],n,o),r++}else if(fi(e)){o=t(e,s,n,o);for(const r of Object.keys(e)){if(i!=null&&i.has(r))continue;const a=e[r];o=Pr(a,t,i,s==null?void 0:s[r],n,o)}}return o}function yg(e,t,i={}){const{path:s,matcherPath:n=s==null?void 0:s.replace(/(\[[0-9+]+])/i,"[]"),skip:o=[]}=i;if(e==null)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(t==null)return e;if(Jo(e))return e.set(t);const r=e,a=Kb(e);for(const c of Object.keys(t)){if(NM.has(c))continue;const h=`${n?n+".":""}${c}`;if(o.includes(h))continue;const d=t[c],p=`${s?s+".":""}${c}`,f=r.constructor,v=r[c];try{const y=Kb(v),b=Kb(d);if(a===Jw&&!(c in e||c==="context")){if(d===void 0)continue;de.warn(`unable to set [${p}] in ${f==null?void 0:f.name} - property is unknown`);continue}if(y!=null&&b!=null&&b!==y&&(y!==Jw||b!=="object")){de.warn(`unable to set [${p}] in ${f==null?void 0:f.name} - can't apply type of [${b}], allowed types are: [${y}]`);continue}if(Jo(v))r[c].set(d);else if(b==="object"&&c!=="context"){if(v==null){de.warn(`unable to set [${p}] in ${f==null?void 0:f.name} - property is unknown`);continue}yg(v,d,{...i,path:p,matcherPath:h})}else r[c]=d}catch(y){de.warn(`unable to set [${p}] in [${f==null?void 0:f.name}]; nested error is: ${y.message}`)}}return e}function Kb(e){return e==null?null:a9(e)||wh(e)?"primitive":Ue(e)?"array":pi(e)?fi(e)?"object":Jw:ll(e)?"function":"primitive"}function Sv(e,t,i,s){return tx(e,t,s??e,{matches:new Map},i)}var ex=Symbol("operation-resolved-undefined");function tx(e,t,i,s,n,o=[],r={}){if(Ue(e)){II(e,t,i,s,o,r);let a=0;for(const c of e)tx(c,t,i,s,n,[...o,`${a}`],r),a++}else if(fi(e)){II(e,t,i,s,o,r);for(const a of Object.keys(e)){if(n!=null&&n.has(a))continue;const c=e[a];tx(c,t,i,s,n,[...o,a],r)}}return r}function II(e,t,i,s,n,o){if(Ue(e))for(let r=0;r<e.length;r++)e[r]=LI(e[r],t,i,s,[...n,`${r}`],o),e[r]===ex&&(e[r]=void 0);else{let r=!1;for(const a of Object.keys(e))e[a]=LI(e[a],t,i,s,[...n,a],o),r||(r=fo(a,wv)),e[a]===ex&&delete e[a];if(r&&Object.keys(e).length>1)for(const a of Object.keys(e))fo(a,wv)&&delete e[a]}}function LI(e,t,i,s,n,o){const r=sl(e);if(!r)return e;o[n.join(".")]=e;const a=zg(r.operation,r.values,t,i,n,s);return a===void 0?ex:a}function sl(e){if(!fi(e))return;const[t]=Object.keys(e);if(fo(t,wv))return{operation:t,values:e[t]}}function zg(e,t,i,s,n,o){o.referencedParams??(o.referencedParams=new Set);const r=["$find","$map"];Ue(t)&&!r.includes(e)&&(t=t.map(c=>{const h=sl(c);return h?zg(h.operation,h.values,i,s,n,o):c}));const a=wv[e];return a(t,n,i,s,o)}function fo(e,t){return qi(e)&&(pi(t)||Ue(t))&&e in t}function bv(e){return Hn(e)&&e>=0&&e<=1}function yN(e){return pi(e)&&e.type=="gradient"}function e8(e){return e!==null&&pi(e)&&e.type=="pattern"}function CN(e,t){const i=t.split("/");let s=[...e];t.startsWith("/")&&(s=[],i.shift());let n=!1;for(const o of i){if(o==="..")s.pop(),n||s.pop();else if(o===".")s.pop();else if(o==="$index"){const r=e.findLast(a=>!isNaN(Number(a)));r!=null&&s.push(r)}else if(o==="$prevIndex"){const r=e.findLast(a=>!isNaN(Number(a)));r!=null&&s.push(`${Number(r)-1}`)}else o.length!==0&&s.push(o);n=o===".."}return s}var t8={$ref:SN,$path:l8,$palette:a8},i8={$if:([e,t,i])=>e?t:i,$eq:([e,t])=>e===t,$not:([e])=>!e,$or:e=>Ue(e)&&e.some(Boolean),$and:e=>Ue(e)&&e.every(Boolean),$switch:()=>{},$isOperation:c8},s8={$isEven:u8,$mul:h8,$round:d8},n8={$map:g8,$find:p8,$merge:f8,$omit:m8,$value:v8},o8={$rem:y8},r8={$mix:C8,$foregroundBackgroundMix:S8,$foregroundBackgroundAccentMix:b8,$interpolate:w8,$isGradient:([e])=>yN(e),$isPattern:([e])=>e8(e)},wv={...t8,...i8,...s8,...n8,...o8,...r8};function SN(e,t,i,s,n){var r,a;if(!fo(e,i)){de.warnOnce(`\`$ref\` json operation failed on [${String(e)}] at [${t.join(".")}], expecting one of [${Object.keys(i).join(", ")}].`);return}const o=sl(i[e]);if((o==null?void 0:o.operation)!=="$ref")return i[e];if((r=n.referencedParams)!=null&&r.has(o.values)){de.warnOnce(`\`$ref\` json operation failed on [${String(e)}] at [${t.join(".")}], circular reference detected with [${[...n.referencedParams].join(", ")}].`);return}return(a=n.referencedParams)==null||a.add(o.values),SN(o.values,t,i,s,n)}function a8(e,t,i,s){if(!qi(e))return;const n=i.__palette;if(["fill","fillFallback","stroke","gradient","range2"].includes(e)){const r=t.findLastIndex(p=>!isNaN(Number(p)));let a=Number(t[r]);if(isNaN(a))return;const c=t.slice(0,r),h=["map-shape-background","map-line-background"],d=ih(s,c).slice(0,a).filter(p=>h.includes(p.type)).length;switch(a-=d,e){case"fill":return $d(n.fills,1,a)[0];case"fillFallback":return $d(n.fillsFallback,1,a)[0];case"stroke":return $d(n.strokes,1,a)[0];case"gradient":return $d(n.sequentialColors,1,a)[0];case"range2":return $d(n.fills,2,a)}return}return e==="gradients"?n.sequentialColors:ih(n,e)}function l8(e,t,i,s){let n=!1,o,r=!1,a=s;if(Ue(e))n=!0,o=e[1],r=e.length===3,a=r?e[2]:a,e=e[0];else if(!qi(e)){de.warnOnce(`\`$path\` json operation failed on [${String(e)}] at [${t.join(".")}], expecting a string.`);return}const c=CN(r?[]:t,e);let h=a;for(const d of c){if(!fo(d,h)){if(n)return o;de.warnOnce(`\`$path\` json operation failed on [${String(e)}] at [${t.join(".")}] resolved to [${c.join(".")}], could not find path in object.`);return}h=h[d]}return Object.isFrozen(h)?zt(h):h}function c8(e,t,i,s){const n=qi(e)?CN(t,e):t,o=n.length===0?s:ih(s,n);return sl(o)!=null}function u8([e],t){if(typeof e=="number")return e%2===0;de.warnOnce(`\`$isEven\` json operation failed on [${String(e)}] at [${t.join(".")}], expecting a number.`)}function h8([e,t],i){if(typeof e=="number"&&typeof t=="number")return e*t;de.warnOnce(`\`$mul\` json operation failed on [${String(e)}] and [${String(t)}] at [${i.join(".")}], expecting two numbers.`)}function d8([e],t){if(typeof e=="number")return Math.round(e);de.warnOnce(`\`$round\` json operation failed on [${String(e)}] at [${t.join(".")}], expecting a number.`)}function g8([e,t],i,s,n,o){const r=sl(t);if(r&&(t=zg(r.operation,r.values,s,n,i,o)),!Ue(t))return[];const a=sl(e);return a?(o.matches.set(i.join("."),t),t.map(()=>({[a.operation]:a.values}))):[]}function p8([e,t],i,s,n,o){const r=sl(t);if(r&&(t=zg(r.operation,r.values,s,n,i,o)),!Ue(t))return;const a=sl(e);return a?t.find(c=>zg(a.operation,a.values,s,c,[],o)):e?t[0]:void 0}function f8(e){if(Ue(e)){for(const t of e)if(!fi(t))return;return Qe(...e)}}function m8([e,t]){if(!(!Ue(e)||!fi(t)))return il(t,e)}function v8(e,t,i,s,n){var c;if(e!=="$1"&&e!=="$index")return e;const o=t.findLastIndex(h=>!isNaN(Number(h)));if(o===-1)return e;const r=Number(t[o]);if(e==="$index")return r;const a=t.slice(0,o).join(".");return(c=n.matches.get(a))==null?void 0:c.at(r)}function y8([e],t,i){const s="fontSize";if(fo(s,i)&&typeof i[s]=="number"&&typeof e=="number")return Math.round(e*i[s]);de.warnOnce(`\`$rem\` json operation failed on [${String(e)}] at [${t.join(".")}], expecting a number.`)}function C8([e,t,i],s){const n=`\`$mix\` json operation failed on [${String(e)}, ${String(t)}, ${String(i)}] at [${s.join(".")}], expecting`,o=`${n} two colors and a number between 0 and 1.`;if(typeof t!="string"||!bv(i)){de.warnOnce(o);return}if(typeof e=="string")try{return gt.mix(gt.fromString(e),gt.fromString(t),i).toString()}catch{de.warnOnce(o);return}if(!yN(e)){de.warnOnce(o);return}let r=e.colorStops;try{r=r==null?void 0:r.map(a=>{let c;return typeof a.color=="string"&&(c=gt.mix(gt.fromString(a.color),gt.fromString(t),i).toString()),{...a,color:c}})}catch{de.warnOnce(`${n} a gradient, a color and a number between 0 and 1.`);return}return{...e,colorStops:r}}function S8([e],t,i){const s="foregroundColor",n="backgroundColor";if(fo(s,i)&&fo(n,i)&&typeof i[s]=="string"&&typeof i[n]=="string"&&bv(e))return gt.mix(gt.fromString(i[s]),gt.fromString(i[n]),e).toString();de.warnOnce(`\`$foregroundBackgroundMix\` json operation failed on [${String(e)}}}] at [${t.join(".")}], expecting a number between 0 and 1.`)}function b8([e,t],i,s){const n="foregroundColor",o="backgroundColor",r="accentColor";if(fo(n,s)&&fo(o,s)&&fo(r,s)&&typeof s[n]=="string"&&typeof s[o]=="string"&&typeof s[r]=="string"&&bv(e)&&bv(t))return gt.mix(gt.mix(gt.fromString(s[n]),gt.fromString(s[o]),e),gt.fromString(s[r]),t).toString();de.warnOnce(`\`$foregroundBackgroundAccentMix\` json operation failed on [${String(e)}, ${String(t)}}] at [${i.join(".")}], expecting two numbers between 0 and 1.`)}function w8([e,t]){if(!(!Ue(e)||!Hn(t)))return gt.interpolate(e.map(i=>gt.fromString(i)),t).map(i=>i.toString())}var x8=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise(t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext().catch(i=>de.errorOnce(i))})}async acquireImmediately(e){return this.available?(await this.acquire(e),!0):!1}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){this.available=!1;let[e,t]=this.acquireQueue.shift()??[];for(;e;){try{await e(),t==null||t()}catch(i){de.error("mutex callback error",i),t==null||t()}[e,t]=this.acquireQueue.shift()??[]}this.available=!0}},bN=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if(typeof t!="function")throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){const i=this.eventListeners.get(e);i!=null&&(i.delete(t),i.size===0&&this.eventListeners.delete(e))}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){var t;(t=this.eventListeners.get(e.type))==null||t.forEach(i=>i(e))}},ul=class extends Be{constructor(e=0,t=e,i=e,s=t){super(),this.top=e,this.right=t,this.bottom=i,this.left=s}};D([E()],ul.prototype,"top",2);D([E()],ul.prototype,"right",2);D([E()],ul.prototype,"bottom",2);D([E()],ul.prototype,"left",2);function xt(e,t){const i=Ue(e)?e:e.split(".");if(i.length===1){const[s]=i;return tl((n,o,r)=>n[s]=r,n=>n[s],t)}return tl((s,n,o)=>OM(s,i,o),s=>ih(s,i),t)}function M8(e){return tl((t,i,s)=>t[e]=s)}function Qi(e,t){return tl((i,s,n)=>i[e][t??s]=n)}function Js(e){const{newValue:t,oldValue:i,changeValue:s}=e;return tl((n,o,r,a)=>(r!==a&&(a!==void 0&&(i==null||i.call(n,a)),r!==void 0&&(t==null||t.call(n,r)),s==null||s.call(n,r,a)),r))}function hl(e){return $k(e)}function D8(e){return wN((t,i)=>Et().requestAnimationFrame(t),e)}function R8(e){return wN((t,i=0)=>{i===0?queueMicrotask(t):setTimeout(t,i)},e)}function wN(e,t){let i=0,s=!1,n,o;const r=()=>s,a=()=>{s=!1,o==null||o(),o=void 0,n=void 0,i>0&&e(c)},c=()=>{const h=i;i=0,s=!0;const d=t({count:h});if(!d){a();return}d.then(a,a)};return{schedule(h){i===0&&!r()&&e(c,h),i++},async await(){if(r())for(n==null&&(n=new Promise(h=>{o=h}));r();)await n}}}function zl(e){return e==="true"}function A8(e){return Number(e)}function so(e){return e}var $b={role:so,"aria-checked":zl,"aria-controls":so,"aria-describedby":so,"aria-disabled":zl,"aria-expanded":zl,"aria-haspopup":zl,"aria-hidden":zl,"aria-label":so,"aria-labelledby":so,"aria-live":so,"aria-orientation":so,"aria-selected":zl,"data-preventdefault":zl,class:so,id:so,tabindex:A8,title:so,placeholder:so};function At(e,t,i){i==null||i===""||i===""?e==null||e.removeAttribute(t):e==null||e.setAttribute(t,i.toString())}function Rc(e,t){if(t!=null)for(const[i,s]of po(t))i!=="class"&&At(e,i,s)}function dy(e,t,i){var n;if(!(e instanceof HTMLElement))return;const s=e.getAttribute(t);return s===null?i:((n=$b[t])==null?void 0:n.call($b,s))??void 0}function uo(e,t,i){e!=null&&(i==null?e.style.removeProperty(t):e.style.setProperty(t,i.toString()))}function E8(e,t){for(const[i,s]of po(t))uo(e,i,s)}var $M=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel","touchstart","touchmove","touchend","touchcancel"];function Tu(e,t,i){const{offsetX:s,offsetY:n,clientX:o,clientY:r}=t,{currentX:a,currentY:c}=zr.calcCurrentXY(i,t);return{type:e,offsetX:s,offsetY:n,clientX:o,clientY:r,currentX:a,currentY:c,sourceEvent:t}}function Cm(e,t,i){return{type:e,sourceEvent:t}}var T8={blur:e=>({type:"blur",sourceEvent:e}),change:e=>({type:"change",sourceEvent:e}),contextmenu:(e,t)=>Tu("contextmenu",e,t),focus:e=>({type:"focus",sourceEvent:e}),keydown:e=>({type:"keydown",sourceEvent:e}),keyup:e=>({type:"keyup",sourceEvent:e}),click:(e,t)=>Tu("click",e,t),dblclick:(e,t)=>Tu("dblclick",e,t),mouseenter:(e,t)=>Tu("mouseenter",e,t),mousemove:(e,t)=>Tu("mousemove",e,t),mouseleave:(e,t)=>Tu("mouseleave",e,t),wheel:e=>{const{offsetX:t,offsetY:i,clientX:s,clientY:n}=e,o=e.deltaMode===0?.01:1,r=e.deltaX*o,a=e.deltaY*o;return{type:"wheel",offsetX:t,offsetY:i,clientX:s,clientY:n,deltaX:r,deltaY:a,sourceEvent:e}},touchstart:(e,t)=>Cm("touchstart",e),touchmove:(e,t)=>Cm("touchmove",e),touchend:(e,t)=>Cm("touchend",e),touchcancel:(e,t)=>Cm("touchcancel",e)},zr=class{static alloc(e,t,i){return T8[e](t,i)}static isHTMLEvent(e){return $M.includes(e)}static calcCurrentXY(e,t){const i=e.getBoundingClientRect();return{currentX:t.clientX-i.x,currentY:t.clientY-i.y}}},I8=class{constructor(){this.widgetListeners={},this.sourceListeners={}}initSourceHandler(e,t){this.sourceListeners??(this.sourceListeners={}),this.sourceListeners[e]=t}lazyGetWidgetListeners(e,t){var i;if(!(e in(this.sourceListeners??{}))){const s=o=>{var a;const r=zr.alloc(e,o,t.getElement());for(const c of((a=this.widgetListeners)==null?void 0:a[e])??[])c(r,t)},n={};e.startsWith("touch")&&(n.passive=!1),this.initSourceHandler(e,s),t.getElement().addEventListener(e,s,n)}return this.widgetListeners??(this.widgetListeners={}),(i=this.widgetListeners)[e]??(i[e]=[]),this.widgetListeners[e]}add(e,t,i){this.lazyGetWidgetListeners(e,t).push(i)}remove(e,t,i){const s=this.lazyGetWidgetListeners(e,t),n=s.indexOf(i);n>-1&&s.splice(n,1)}destroy(e){for(const[t,i]of po(this.sourceListeners??{}))e.getElement().removeEventListener(t,i);this.widgetListeners=void 0,this.sourceListeners=void 0}},L8=class{constructor(e,t,i,s){this.glob=e,this.self=t,this.window=Et(),this.mousegeneral=c=>{c.stopPropagation(),c.stopImmediatePropagation()},this.mousemove=c=>{var h;c.stopPropagation(),c.stopImmediatePropagation(),(h=this.glob.globalMouseDragCallbacks)==null||h.mousemove(c)},this.mouseup=c=>{var h;c.button===0&&(c.stopPropagation(),c.stopImmediatePropagation(),(h=this.glob.globalMouseDragCallbacks)==null||h.mouseup(c),this.destroy())};const{window:n,mousegeneral:o,mousemove:r,mouseup:a}=this;n.addEventListener("mousedown",o,{capture:!0}),n.addEventListener("mouseenter",o,{capture:!0}),n.addEventListener("mouseleave",o,{capture:!0}),n.addEventListener("mouseout",o,{capture:!0}),n.addEventListener("mouseover",o,{capture:!0}),n.addEventListener("mousemove",r,{capture:!0}),n.addEventListener("mouseup",a,{capture:!0}),t.mouseDragger=this,e.globalMouseDragCallbacks=i,e.globalMouseDragCallbacks.mousedown(s)}destroy(){const{window:e,mousegeneral:t,mousemove:i,mouseup:s}=this;e.removeEventListener("mousedown",t,{capture:!0}),e.removeEventListener("mouseenter",t,{capture:!0}),e.removeEventListener("mouseleave",t,{capture:!0}),e.removeEventListener("mouseout",t,{capture:!0}),e.removeEventListener("mouseover",t,{capture:!0}),e.removeEventListener("mousemove",i,{capture:!0}),e.removeEventListener("mouseup",s,{capture:!0}),this.glob.globalMouseDragCallbacks=void 0,this.self.mouseDragger=void 0}};function F8(e,t,i,s){if(e.globalMouseDragCallbacks==null)return new L8(e,t,i,s)}var P8=500,k8=100;function N8(e,t){const i=e.clientX-t.clientX,s=e.clientY-t.clientY;return i*i+s*s}var ix=!1,O8=class{constructor(e,t,i,s,n){this.glob=e,this.self=t,this.initialTouch=s,this.target=n,this.longTapInterrupted=!1,this.longtap=()=>{const{target:a,initialTouch:c}=this;if(!this.longTapInterrupted){a.dispatchEvent(new TouchEvent("touchcancel",{touches:[c],bubbles:!0})),ix=!0;const h=y=>{y.preventDefault()},d=y=>{ix=!1,y.preventDefault(),a.removeEventListener("touchmove",h),a.removeEventListener("touchend",d),a.removeEventListener("touchcancel",d)};a.addEventListener("touchmove",h,{passive:!1}),a.addEventListener("touchend",d,{passive:!1}),a.addEventListener("touchcancel",d,{passive:!1});const{clientX:p,clientY:f}=c,v=new PointerEvent("contextmenu",{bubbles:!0,cancelable:!0,view:Et(),clientX:p,clientY:f,pointerType:"touch"});a.dispatchEvent(v)}},this.touchmove=a=>{var f;const{glob:c,self:h,initialTouch:d}=this,p=this.findInitialFinger(a.targetTouches);p!=null&&(this.longTapInterrupted=this.longTapInterrupted||N8(d,p)>k8,h.dragTouchEnabled&&p!=null&&((f=c.globalTouchDragCallbacks)==null||f.touchmove(a,p)))},this.touchend=a=>{var h;this.longTapInterrupted=!0;const c=this.findInitialFinger(a.changedTouches,a.touches);c!=null&&((h=this.glob.globalTouchDragCallbacks)==null||h.touchend(a,c)),this.destroy()},this.longtapTimer=setTimeout(this.longtap,P8);const{touchmove:o,touchend:r}=this;n.addEventListener("touchmove",o,{passive:!1}),n.addEventListener("touchstart",r,{passive:!1}),n.addEventListener("touchend",r,{passive:!1}),n.addEventListener("touchcancel",r,{passive:!1}),t.touchDragger=this,e.globalTouchDragCallbacks=i}destroy(){const{longtapTimer:e,touchmove:t,touchend:i}=this;clearTimeout(e),this.target.removeEventListener("touchstart",i),this.target.removeEventListener("touchmove",t),this.target.removeEventListener("touchend",i),this.target.removeEventListener("touchcancel",i),this.glob.globalTouchDragCallbacks=void 0,this.self.touchDragger=void 0}findInitialFinger(...e){const t=e.map(i=>Array.from(i)).flat();return Array.from(t).find(i=>i.identifier===this.initialTouch.identifier)}};function G8(e,t,i,s,n){if(!(e.globalTouchDragCallbacks!=null||ix))return new O8(e,t,i,s,n)}function Zb(e,t,i,s){const{currentX:n,currentY:o}=zr.calcCurrentXY(e.getElement(),s),r=s.pageX-i.pageX,a=s.pageY-i.pageY;return{type:t,device:"mouse",offsetX:i.offsetX+r,offsetY:i.offsetY+a,clientX:s.clientX,clientY:s.clientY,currentX:n,currentY:o,originDeltaX:r,originDeltaY:a,sourceEvent:s}}function B8(e,{pageX:t,pageY:i}){const{x:s,y:n}=e.getElement().getBoundingClientRect();return{offsetX:t-s,offsetY:i-n}}function qb(e,t,i,s,n){const{currentX:o,currentY:r}=zr.calcCurrentXY(e.getElement(),n),a=n.pageX-i.pageX,c=n.pageY-i.pageY;return{type:t,device:"touch",offsetX:i.offsetX+a,offsetY:i.offsetY+c,clientX:n.clientX,clientY:n.clientY,currentX:o,currentY:r,originDeltaX:a,originDeltaY:c,sourceEvent:s}}var FI={},PI=class{constructor(e){this.dispatchCallback=e,this.dragTouchEnabled=!0}destroy(){var e,t,i;(e=this.dragTriggerRemover)==null||e.call(this),this.dragTriggerRemover=void 0,this.dragStartListeners=void 0,this.dragMoveListeners=void 0,this.dragEndListeners=void 0,(t=this.mouseDragger)==null||t.destroy(),(i=this.touchDragger)==null||i.destroy()}add(e,t,i){switch(e){case"drag-start":{this.dragStartListeners??(this.dragStartListeners=[]),this.dragStartListeners.push(i),this.registerDragTrigger(t);break}case"drag-move":{this.dragMoveListeners??(this.dragMoveListeners=[]),this.dragMoveListeners.push(i),this.registerDragTrigger(t);break}case"drag-end":{this.dragEndListeners??(this.dragEndListeners=[]),this.dragEndListeners.push(i),this.registerDragTrigger(t);break}}}remove(e,t,i){switch(e){case"drag-start":return this.removeHandler(this.dragStartListeners,i);case"drag-move":return this.removeHandler(this.dragMoveListeners,i);case"drag-end":return this.removeHandler(this.dragEndListeners,i)}}removeHandler(e,t){const i=e==null?void 0:e.indexOf(t);i!==void 0&&(e==null||e.splice(i,1))}registerDragTrigger(e){if(this.dragTriggerRemover==null){const t=s=>this.triggerMouseDrag(e,s),i=s=>this.triggerTouchDrag(e,s);e.getElement().addEventListener("mousedown",t),e.getElement().addEventListener("touchstart",i,{passive:!1}),this.dragTriggerRemover=()=>{e.getElement().removeEventListener("mousedown",t),e.getElement().removeEventListener("touchstart",i)}}}triggerMouseDrag(e,t){t.button===0&&this.startMouseDrag(e,t)}startMouseDrag(e,t){const i={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};Xw(["pageX","pageY","offsetX","offsetY"],i,t);const s={mousedown:n=>{const o=Zb(e,"drag-start",i,n);this.dispatch("drag-start",e,o)},mousemove:n=>{const o=Zb(e,"drag-move",i,n);this.dispatch("drag-move",e,o)},mouseup:n=>{const o=Zb(e,"drag-end",i,n);this.dispatch("drag-end",e,o),this.endDrag(e,o)}};this.mouseDragger=F8(FI,this,s,t)}endDrag(e,{sourceEvent:t,clientX:i,clientY:s}){var r;const n=e.getElement(),o=n.getBoundingClientRect();ey.containsPoint(o,i,s)||(n.dispatchEvent(new MouseEvent("mouseleave",t)),(r=t.target)==null||r.dispatchEvent(new MouseEvent("mouseenter",t)))}triggerTouchDrag(e,t){const i=t.targetTouches[0];t.targetTouches.length===1&&i!=null&&this.startOneFingerTouch(e,t,i)}startOneFingerTouch(e,t,i){const s={pageX:NaN,pageY:NaN,...B8(e,i)};Xw(["pageX","pageY"],s,i);const n={touchmove:(a,c)=>{const h=qb(e,"drag-move",s,a,c);this.dispatch("drag-move",e,h)},touchend:(a,c)=>{const h=qb(e,"drag-end",s,a,c);this.dispatch("drag-end",e,h)}},o=e.getElement();this.touchDragger=G8(FI,this,n,i,o);const r=qb(e,"drag-start",s,t,i);this.dispatch("drag-start",e,r)}dispatch(e,t,i){var s,n,o;switch(e){case"drag-start":(s=this.dragStartListeners)==null||s.forEach(r=>r(i,t));break;case"drag-move":(n=this.dragMoveListeners)==null||n.forEach(r=>r(i,t));break;case"drag-end":(o=this.dragEndListeners)==null||o.forEach(r=>r(i,t));break}this.dispatchCallback(e,i)}},z8=class{constructor(e){this.elem=e}setBounds(e){Cv(this.elemContainer??this.elem,e)}getBounds(){return fN(this.elemContainer??this.elem)}static setElementContainer(e,t){const i=e.getBounds();Cv(t,i),E8(e.elem,{width:"100%",height:"100%"}),e.elem.remove(),e.elemContainer=t,e.elemContainer.replaceChildren(e.elem)}},cr=class extends z8{constructor(e){super(e),this.elem=e,this.index=NaN,this.children=[]}getElement(){return this.elem}getBoundingClientRect(){return this.elem.getBoundingClientRect()}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){var e,t,i,s;(e=this.parent)==null||e.removeChild(this),this.children.forEach(n=>{n.parent=void 0,n.destroy()}),this.children.length=0,this.destructor(),this.elem.remove(),(t=this.elemContainer)==null||t.remove(),(i=this.internalListener)==null||i.destroy(),(s=this.htmlListener)==null||s.destroy(this)}setHidden(e){uo(this.elem,"display",e?"none":void 0)}isHidden(){var e,t;return((t=(e=Et())==null?void 0:e.getComputedStyle)==null?void 0:t.call(e,this.elem).display)==="none"}setCursor(e){uo(this.elem,"cursor",e)}setTextContent(e){this.elem.textContent=e??null}setAriaDescribedBy(e){At(this.elem,"aria-describedby",e)}setAriaHidden(e){At(this.elem,"aria-hidden",e)}setAriaLabel(e){At(this.elem,"aria-label",e)}setInnerHTML(e){this.elem.innerHTML=e}isDisabled(){return dy(this.elem,"aria-disabled",!1)}parseFloat(e){return e===""?0:parseFloat(e)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}cssWidth(){return this.parseFloat(this.elem.style.width)}cssHeight(){return this.parseFloat(this.elem.style.height)}focus(){this.elem.focus()}setPreventsDefault(e){At(this.elem,"data-preventdefault",e)}setTabIndex(e){At(this.elem,"tabindex",e)}addChild(e){this.addChildToDOM(e,this.getBefore(e)),this.children.push(e),e.index=this.children.length-1,e.parent=this,this.onChildAdded(e)}removeChild(e){const t=this.children.findIndex(i=>i===e);this.children.splice(t,1),this.removeChildFromDOM(e),this.onChildRemoved(e)}moveChild(e,t){e.domIndex!==t&&(e.domIndex=t,this.removeChildFromDOM(e),this.addChildToDOM(e,this.getBefore(e)))}addClass(...e){this.elem.classList.add(...e)}removeClass(...e){this.elem.classList.remove(...e)}toggleClass(e,t){this.elem.classList.toggle(e,t)}appendOrInsert(e,t){t?t.getElement().insertAdjacentElement("beforebegin",e):this.elem.appendChild(e)}addChildToDOM(e,t){this.appendOrInsert(e.getElement(),t)}removeChildFromDOM(e){this.elem.removeChild(e.getElement())}onChildAdded(e){}onChildRemoved(e){}getBefore({domIndex:e}){if(e!==void 0)return this.children.filter(t=>t.domIndex!==void 0&&t.domIndex>e).reduce((t,i)=>!t||i.domIndex<t.domIndex?i:t,void 0)}addListener(e,t){return zr.isHTMLEvent(e)?(this.htmlListener??(this.htmlListener=new I8),this.htmlListener.add(e,this,t)):(this.internalListener??(this.internalListener=new PI(this.onDispatch.bind(this))),this.internalListener.add(e,this,t)),()=>this.removeListener(e,t)}removeListener(e,t){var i,s;zr.isHTMLEvent(e)?(i=this.htmlListener)==null||i.remove(e,this,t):this.htmlListener!=null&&((s=this.internalListener)==null||s.remove(e,this,t))}setDragTouchEnabled(e){this.internalListener??(this.internalListener=new PI(this.onDispatch.bind(this))),this.internalListener.dragTouchEnabled=e}onDispatch(e,t){if(!t.sourceEvent.bubbles)return;let{parent:i}=this;for(;i!=null;){const{internalListener:s}=i;if(s!=null){const n={...t,...zr.calcCurrentXY(i.getElement(),t)};s.dispatch(e,i,n)}i=i.parent}}static addWindowEvent(e,t){const i=s=>{s.persisted||t()};return Et().addEventListener("pagehide",i),()=>Et().removeEventListener("pagehide",i)}};function H8(e=0,t=0){return new OffscreenCanvas(e,t).getContext("2d")}var ZM=class{constructor(e=5){this.maxCacheSize=e,this.store=new Map}get(e){if(!this.store.has(e))return;const t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){if(this.store.set(e,t),this.store.size>this.maxCacheSize){const i=this.store.keys();let s=this.store.size-this.maxCacheSize;for(;s>0;){const n=i.next();n.done||this.store.delete(n.value),s--}}return t}clear(){this.store.clear()}},qr=class{static measureText(e,t){return this.getMeasurer(t).measureText(e)}static measureLines(e,t){return this.getMeasurer(t).measureLines(e)}static getMeasurer(e){const t=typeof e.font=="string"?e.font:Ht.toFontString(e.font),i=`${t}-${e.textAlign??"start"}-${e.textBaseline??"alphabetic"}`;return this.instanceMap.get(i)??this.createFontMeasurer(t,e,i)}static createFontMeasurer(e,t,i){const s=H8();s.font=e,s.textAlign=t.textAlign??"start",s.textBaseline=t.textBaseline??"alphabetic";const n=new xN(s,t);return this.instanceMap.set(i,n),n}};qr.instanceMap=new ZM(10);var xN=class{constructor(e,t){this.ctx=e,this.measureMap=new ZM(100),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline),e.font=typeof t.font=="string"?t.font:Ht.toFontString(t.font),this.textMeasurer=new qM(i=>this.cachedCtxMeasureText(i),t.textBaseline??"alphabetic")}textWidth(e,t){return this.textMeasurer.textWidth(e,t)}measureText(e){return this.textMeasurer.measureText(e)}measureLines(e){return this.textMeasurer.measureLines(e)}cachedCtxMeasureText(e){if(!this.measureMap.has(e)){const t=this.ctx.measureText(e);this.measureMap.set(e,{actualBoundingBoxAscent:t.actualBoundingBoxAscent,emHeightAscent:t.emHeightAscent,emHeightDescent:t.emHeightDescent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,actualBoundingBoxLeft:t.actualBoundingBoxLeft,actualBoundingBoxRight:t.actualBoundingBoxRight,alphabeticBaseline:t.alphabeticBaseline,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent,hangingBaseline:t.hangingBaseline,ideographicBaseline:t.ideographicBaseline,width:t.width})}return this.measureMap.get(e)}},Ht=class{static toFontString({fontSize:e=10,fontStyle:t,fontWeight:i,fontFamily:s,lineHeight:n}){let o="";return t&&(o+=`${t} `),i&&(o+=`${i} `),o+=`${e}px`,n&&(o+=`/${n}px`),o+=` ${s}`,o.trim()}static getLineHeight(e){return Math.ceil(e*this.defaultLineHeight)}static getVerticalModifier(e){switch(e){case"hanging":case"top":return 0;case"middle":return .5;case"alphabetic":case"bottom":case"ideographic":default:return 1}}};Ht.EllipsisChar="…";Ht.defaultLineHeight=1.15;Ht.lineSplitter=/\r?\n/g;var qM=class{constructor(e,t="alphabetic"){this.measureTextFn=e,this.textBaseline=t,this.charMap=new Map}getMetrics(e){const t=this.measureTextFn(e);return t.fontBoundingBoxAscent??(t.fontBoundingBoxAscent=t.emHeightAscent),t.fontBoundingBoxDescent??(t.fontBoundingBoxDescent=t.emHeightDescent),{width:t.width,height:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,lineHeight:t.fontBoundingBoxAscent+t.fontBoundingBoxDescent,offsetTop:t.actualBoundingBoxAscent,offsetLeft:t.actualBoundingBoxLeft}}getMultilineMetrics(e){let t=0,i=0,s=0,n=0,o=0;const r=Ht.getVerticalModifier(this.textBaseline),a=[];let c=0;const h=e.length;for(const d of e){const p=this.measureTextFn(d);p.fontBoundingBoxAscent??(p.fontBoundingBoxAscent=p.emHeightAscent),p.fontBoundingBoxDescent??(p.fontBoundingBoxDescent=p.emHeightDescent),t<p.width&&(t=p.width),n<p.actualBoundingBoxLeft&&(n=p.actualBoundingBoxLeft),c===0?(i+=p.actualBoundingBoxAscent,s+=p.actualBoundingBoxAscent):o+=p.fontBoundingBoxAscent,c===h-1?i+=p.actualBoundingBoxDescent:o+=p.fontBoundingBoxDescent,a.push({text:d,width:p.width,height:p.actualBoundingBoxAscent+p.actualBoundingBoxDescent,lineHeight:p.fontBoundingBoxAscent+p.fontBoundingBoxDescent,offsetTop:p.actualBoundingBoxAscent,offsetLeft:p.actualBoundingBoxLeft}),c++}return i+=o,s+=o*r,{width:t,height:i,offsetTop:s,offsetLeft:n,lineMetrics:a}}textWidth(e,t){if(t){let i=0;for(let s=0;s<e.length;s++)i+=this.textWidth(e.charAt(s));return i}return e.length>1?this.measureTextFn(e).width:this.charMap.get(e)??this.charWidth(e)}measureText(e){return this.getMetrics(e)}measureLines(e){const t=typeof e=="string"?e.split(Ht.lineSplitter):e;return this.getMultilineMetrics(t)}charWidth(e){const{width:t}=this.measureTextFn(e);return this.charMap.set(e,t),t}},Sn=class Wm extends $n{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=Wm.defaultStyles.textAlign,this.textBaseline=Wm.defaultStyles.textBaseline}onTextChange(){var t;this.lines=((t=this.text)==null?void 0:t.split(`
`).map(i=>i.trim()))??[]}static computeBBox(t,i,s,n){const{offsetTop:o,offsetLeft:r,width:a,height:c}=qr.measureLines(t,n);return new Me(i-r,s-o,a,c)}computeBBox(){const{x:t,y:i,lines:s,textBaseline:n,textAlign:o}=this;return Wm.computeBBox(s,t,i,{font:this,textBaseline:n,textAlign:o})}isPointInPath(t,i){const s=this.getBBox();return s?s.containsPoint(t,i):!1}render(t){const{ctx:i,stats:s}=t;if(!this.lines.length||!this.layerManager)return s&&(s.nodesSkipped+=1),super.render(t);const{fill:n,stroke:o,strokeWidth:r}=this,{pixelRatio:a}=this.layerManager.canvas;if(!n&&!(o!=null&&r>0))return super.render(t);const c=Ht.toFontString(this);if(i.font!==c&&(i.font=c),i.textAlign=this.textAlign,i.textBaseline=this.textBaseline,n){this.applyFill(i),i.globalAlpha*=this.opacity*this.fillOpacity;const{fillShadow:h}=this;h!=null&&h.enabled&&(i.shadowColor=h.color,i.shadowOffsetX=h.xOffset*a,i.shadowOffsetY=h.yOffset*a,i.shadowBlur=h.blur*a),this.renderLines((d,p,f)=>i.fillText(d,p,f))}if(o&&r){this.applyStroke(i),i.lineWidth=r,i.globalAlpha*=this.opacity*this.strokeOpacity;const{lineDash:h,lineDashOffset:d,lineCap:p,lineJoin:f}=this;h&&i.setLineDash(h),d&&(i.lineDashOffset=d),p&&(i.lineCap=p),f&&(i.lineJoin=f),this.renderLines((v,y,b)=>i.strokeText(v,y,b))}super.render(t)}renderLines(t){const{lines:i,x:s,y:n}=this,o=this.lineHeight??Ht.getLineHeight(this.fontSize);let r=(o-o*i.length)*Ht.getVerticalModifier(this.textBaseline);for(const a of i)t(a,s,n+r),r+=o}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}toSVG(){var i;if(!this.visible||!this.text)return;const t=Zi("text");return this.applySvgFillAttributes(t),t.setAttribute("font-family",((i=this.fontFamily)==null?void 0:i.split(",")[0])??""),t.setAttribute("font-size",String(this.fontSize)),t.setAttribute("font-style",this.fontStyle??""),t.setAttribute("font-weight",String(this.fontWeight??"")),t.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),t.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[this.textBaseline??"alphabetic"]),t.setAttribute("x",String(this.x)),t.setAttribute("y",String(this.y)),t.textContent=this.text??"",{elements:[t]}}};Sn.className="Text";Sn.defaultStyles={...$n.defaultStyles,textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"};D([De()],Sn.prototype,"x",2);D([De()],Sn.prototype,"y",2);D([De({changeCb:e=>e.onTextChange()})],Sn.prototype,"text",2);D([De()],Sn.prototype,"fontStyle",2);D([De()],Sn.prototype,"fontWeight",2);D([De()],Sn.prototype,"fontSize",2);D([De()],Sn.prototype,"fontFamily",2);D([De()],Sn.prototype,"textAlign",2);D([De()],Sn.prototype,"textBaseline",2);D([De()],Sn.prototype,"lineHeight",2);var Gi=Sn,MN=class extends Dh(Gi){},nh=class extends Dh(Pc(Gi)){},XM=class{static wrapText(e,t){return this.wrapLines(e,t).join(`
`)}static wrapLines(e,t){const i=this.textWrap(e,t);return t.overflow==="hide"&&i.some(s=>s.endsWith(Ht.EllipsisChar))?[]:i}static appendEllipsis(e){return e.replace(/[.,]{1,5}$/,"")+Ht.EllipsisChar}static truncateLine(e,t,i,s){const n=t.textWidth(Ht.EllipsisChar);let o=0,r=0;for(;r<e.length;r++){const a=t.textWidth(e.charAt(r));if(o+a>i)break;o+=a}if(e.length===r&&(!s||o+n<=i))return s?e+Ht.EllipsisChar:e;for(e=e.slice(0,r).trimEnd();e.length&&t.textWidth(e)+n>i;)e=e.slice(0,-1).trimEnd();return e+Ht.EllipsisChar}static textWrap(e,t){const i=e.split(Ht.lineSplitter),s=qr.getMeasurer(t);if(t.textWrap==="never")return i.map(a=>this.truncateLine(a.trimEnd(),s,t.maxWidth));const n=[],o=t.textWrap==="hyphenate",r=t.textWrap==null||t.textWrap==="on-space";for(const a of i){let c=a.trimEnd();if(c===""){n.push(c);continue}let h=0,d=0,p=0;for(;h<c.length;){const f=c.charAt(h);if(d+=s.textWidth(f),f===" "&&(p=h),d>t.maxWidth){if(h===0)break;const v=s.textWidth(c.slice(0,h+1));if(v<=t.maxWidth){d=v,h++;continue}if(p){const w=this.getWordAt(c,p+1),S=s.textWidth(w);if(S<=t.maxWidth){n.push(c.slice(0,p).trimEnd()),c=c.slice(p).trimStart(),h=0,d=0,p=0;continue}else r&&S>t.maxWidth&&n.push(c.slice(0,p).trimEnd(),this.truncateLine(c.slice(p).trimStart(),s,t.maxWidth,!0))}else r&&n.push(this.truncateLine(c,s,t.maxWidth,!0));if(r){c="";break}const y=o?"-":"";let b=c.slice(0,h).trim();for(;b.length&&s.textWidth(b+y)>t.maxWidth;)b=b.slice(0,-1).trimEnd();if(n.push(b+y),!b.length){c="";break}c=c.slice(b.length).trimStart(),h=-1,d=0,p=0}h++}c&&n.push(c)}return this.avoidOrphans(n,s,t),this.clipLines(n,s,t)}static getWordAt(e,t){const i=e.indexOf(" ",t);return i===-1?e.slice(t):e.slice(t,i)}static clipLines(e,t,i){if(!i.maxHeight)return e;const{height:s,lineMetrics:n}=t.measureLines(e);if(s<=i.maxHeight)return e;for(let o=0,r=0;o<n.length;o++){const{lineHeight:a}=n[o];if(r+=a,r>i.maxHeight){if(i.overflow==="hide")return[];const c=e.slice(0,o||1),h=c.pop();return c.concat(this.truncateLine(h,t,i.maxWidth,!0))}}return e}static avoidOrphans(e,t,i){if(i.avoidOrphans===!1||e.length<2)return;const{length:s}=e,n=e[s-1],o=e[s-2];if(o.length<n.length)return;const r=o.lastIndexOf(" ");if(r===-1||r===o.indexOf(" ")||n.includes(" "))return;const a=o.slice(r+1);t.textWidth(n+a)<=i.maxWidth&&(e[s-2]=o.slice(0,r),e[s-1]=a+" "+n)}},jt=class extends Be{constructor(){super(...arguments),this.id=vn(this),this.node=new MN({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(e,t){return e.layoutManager.addListener("layout:complete",()=>this.updateA11yText(e,t))}computeTextWrap(e,t){const{text:i,padding:s,wrapping:n}=this,o=Math.min(this.maxWidth??1/0,e)-s*2,r=this.maxHeight??t-s*2;if(!isFinite(o)&&!isFinite(r)){this.node.text=i;return}const a=XM.wrapText(i??"",{maxWidth:o,maxHeight:r,font:this,textWrap:n});this.node.text=a,this.truncated=a.includes(Ht.EllipsisChar)}updateA11yText(e,t){var s;const{proxyInteractionService:i}=e;if(this.enabled&&this.text){const n=ri.toCanvas(this.node);if(n){const{id:o}=this;this.proxyText??(this.proxyText=i.createProxyElement({type:"text",domManagerId:o,where:t})),this.proxyText.textContent=this.text,this.proxyText.setBounds(n),this.proxyText.addListener("mousemove",r=>this.handleMouseMove(e,r)),this.proxyText.addListener("mouseleave",r=>this.handleMouseLeave(e,r))}}else(s=this.proxyText)==null||s.destroy(),this.proxyText=void 0}handleMouseMove(e,t){if(t!=null&&this.enabled&&this.node.visible&&this.truncated){const{x:i,y:s}=ri.toCanvas(this.node),n=t.sourceEvent.offsetX+i,o=t.sourceEvent.offsetY+s;e.tooltipManager.updateTooltip(this.id,{canvasX:n,canvasY:o,showArrow:!1},[{type:"structured",title:this.text}])}}handleMouseLeave(e,t){e.tooltipManager.removeTooltip(this.id)}};jt.SMALL_PADDING=10;D([E(),Qi("node","visible")],jt.prototype,"enabled",2);D([E(),Qi("node")],jt.prototype,"text",2);D([E(),Qi("node")],jt.prototype,"textAlign",2);D([E(),Qi("node")],jt.prototype,"fontStyle",2);D([E(),Qi("node")],jt.prototype,"fontWeight",2);D([E(),Qi("node")],jt.prototype,"fontSize",2);D([E(),Qi("node")],jt.prototype,"fontFamily",2);D([E(),Qi("node","fill")],jt.prototype,"color",2);D([E()],jt.prototype,"spacing",2);D([E()],jt.prototype,"maxWidth",2);D([E()],jt.prototype,"maxHeight",2);D([E()],jt.prototype,"wrapping",2);D([E()],jt.prototype,"padding",2);D([E()],jt.prototype,"layoutStyle",2);var QM=(e=>(e.X="x",e.Y="y",e))(QM||{}),JM=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.ToolbarLeft=2]="ToolbarLeft",e[e.ToolbarBottom=3]="ToolbarBottom",e[e.Navigator=4]="Navigator",e[e.Overlay=5]="Overlay",e))(JM||{}),DN=class{constructor(){this.events=new MM,this.elements=new Map}addListener(e,t){return this.events.on(e,t)}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>{var i;return(i=this.elements.get(e))==null?void 0:i.delete(t)}}createContext(e,t){var s;const i=new V8(e,t);for(const n of Object.values(JM))typeof n=="number"&&((s=this.elements.get(n))==null||s.forEach(o=>o(i)));return i}emitLayoutComplete(e,t){const i="layout:complete",{width:s,height:n}=e;this.events.emit(i,{type:i,axes:t.axes??[],chart:{width:s,height:n},clipSeries:t.clipSeries??!1,series:t.series})}},V8=class{constructor(e,t){this.width=e,this.height=t,this.layoutBox=new Me(0,0,e,t)}},gy=class{constructor(){this.title=new jt,this.subtitle=new jt,this.footnote=new jt}positionCaptions(e){const{title:t,subtitle:i,footnote:s}=this,n=e.layoutBox.height/10;if(t.enabled){const{spacing:o}=t;this.positionCaption("top",t,e.layoutBox,n),this.shrinkLayoutByCaption("top",t,e.layoutBox,o)}i.enabled&&(this.positionCaption("top",i,e.layoutBox,n),this.shrinkLayoutByCaption("top",i,e.layoutBox,i.spacing)),s.enabled&&(this.positionCaption("bottom",s,e.layoutBox,n),this.shrinkLayoutByCaption("bottom",s,e.layoutBox,s.spacing))}positionAbsoluteCaptions(e){const{title:t,subtitle:i,footnote:s}=this,{rect:n}=e.series;for(const o of[t,i,s])if(o.layoutStyle==="overlay"){if(o.textAlign==="left")o.node.x=n.x+o.padding;else if(o.textAlign==="right"){const r=o.node.getBBox();o.node.x=n.x+n.width-r.width-o.padding}}}computeX(e,t){return e==="left"?t.x:e==="right"?t.x+t.width:t.x+t.width/2}positionCaption(e,t,i,s){const n=Math.max(Ht.getLineHeight(t.fontSize),s);t.node.x=this.computeX(t.textAlign,i)+t.padding,t.node.y=i.y+(e==="top"?0:i.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(i.width,n)}shrinkLayoutByCaption(e,t,i,s=0){if(t.layoutStyle==="block"){const n=t.node.getBBox();i.shrink(Math.ceil(e==="top"?n.y-i.y+n.height+s:i.y+i.height-n.y+s),e)}}};D([E()],gy.prototype,"title",2);D([E()],gy.prototype,"subtitle",2);D([E()],gy.prototype,"footnote",2);var _8=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],W8=class{constructor(e){this.chartService=e,this.mementoOriginatorKey="chartType"}createMemento(){var t,i;let e=(i=(t=this.chartService.publicApi)==null?void 0:t.getOptions())==null?void 0:i.chartType;return e==null&&(e="candlestick"),e}guardMemento(e){return e==null||_8.includes(e)}restoreMemento(e,t,i){var n;if(i==null)return;const s={chartType:i};(n=this.chartService.publicApi)==null||n.updateDelta(s).catch(o=>de.error("error restoring state",o))}},RN=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0}setFns(e){this.destroy(),this.destroyFns=e}push(...e){this.destroyFns.push(...e)}},xv="11.2.4",kI=Symbol("previous-memento-not-found"),j8=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=at.create(!0,"history"),this.destroyFns=new RN,this.destroyFns.setFns([e.addListener("series-undo",this.undo.bind(this)),e.addListener("series-redo",this.redo.bind(this))])}destroy(){this.destroyFns.destroy()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[e,t]of this.originators.entries())this.clearState.set(e,t.createMemento())}record(e,...t){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const i=new Map;for(const s of t){if(!this.originators.has(s.mementoOriginatorKey))throw new Error(`Originator [${s.mementoOriginatorKey}] has not been added to the HistoryManager.`);i.set(s.mementoOriginatorKey,s.createMemento())}this.history.push({label:e,mementos:i}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${e}]`)}undo(){const e=this.history[this.historyIndex];if(e){for(const t of e.mementos.keys()){const i=this.findPreviousMemento(t);if(i===kI)throw new Error(`Could not find previous memento for [${t}].`);this.restoreMemento(t,i)}this.historyIndex-=1,this.debugEvent(`History undo: [${e.label}]`)}}redo(){const e=this.history[this.historyIndex+1];if(e){for(const[t,i]of e.mementos.entries())this.restoreMemento(t,i);this.historyIndex+=1,this.debugEvent(`History redo: [${e.label}]`)}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):kI}restoreMemento(e,t){var i;(i=this.originators.get(e))==null||i.restoreMemento(xv,xv,t)}debugEvent(...e){this.debug(...e,this.history.map((t,i)=>i===this.historyIndex?`** ${t.label} **`:t.label))}},AN=class sx{constructor(t){this.version=t.split("-")[0]}save(...t){const i={version:this.version};for(const s of Object.values(t))i[s.mementoOriginatorKey]=this.encode(s,s.createMemento());return i}restore(t,...i){if(typeof t!="object"){de.warnOnce(`Could not restore data of type [${typeof t}], expecting an object, ignoring.`);return}if(t==null){de.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in t)||typeof t.version!="string"){de.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(const s of i){const n=this.decode(s,t[s.mementoOriginatorKey]),o=[];if(!s.guardMemento(n,o)){const r=o.length>0?`

${o.join(`

`)}

`:"";de.warnOnce(`Could not restore [${s.mementoOriginatorKey}] data, value was invalid, ignoring.${r}`,n);return}s.restoreMemento(this.version,t.version,n)}}encode(t,i){try{return JSON.parse(JSON.stringify(i,sx.encodeTypes))}catch(s){throw new Error(`Failed to encode [${t.mementoOriginatorKey}] value [${s}].`,{cause:s})}}decode(t,i){if(i==null)return i;try{return JSON.parse(JSON.stringify(i),sx.decodeTypes)}catch(s){throw new Error(`Failed to decode [${t.mementoOriginatorKey}] value [${s}].`,{cause:s})}}static encodeTypes(t,i){return wh(this[t])?{__type:"date",value:this[t].toISOString()}:i}static decodeTypes(t,i){return pi(this[t])&&"__type"in this[t]&&this[t].__type==="date"?new Date(this[t].value):i}},U8=class{constructor(){this.caretaker=new AN(xv),this.state=new Map}setState(e,t){Qo(this.state.get(e.mementoOriginatorKey),t)||this.setStateAndRestore(e,t)}setStateAndRestore(e,t){this.state.set(e.mementoOriginatorKey,t),this.restoreState(e)}restoreState(e){const{caretaker:t,state:i}=this;if(!i.has(e.mementoOriginatorKey))return;const s=i.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:s},e)}},Y8=`.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{--align-items: center;--justify-content: center;position:relative;user-select:none;-webkit-user-select:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.ag-charts-wrapper--safe-horizontal{--justify-content: flex-start}.ag-charts-wrapper--safe-vertical{--align-items: flex-start}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--align-items);justify-content:var(--justify-content)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none;-webkit-user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{pointer-events:none}.ag-charts-canvas canvas{display:block}.ag-charts-series-area{outline:none;pointer-events:auto;position:absolute}.ag-charts-swapchain{top:0;left:0;outline:none;opacity:0;pointer-events:none;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none;-webkit-user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-accent-color: #2196f3;--ag-charts-background-color: #fff;--ag-charts-border-color: #dddddd;--ag-charts-foreground-color: #464646;--ag-charts-font-family: Verdana, sans-serif;--ag-charts-font-size: 12px;--ag-charts-font-weight: 400;--ag-charts-padding: 20px;--ag-charts-shadow-color: #00000080;--ag-charts-subtle-text-color: #8c8c8c;--ag-charts-text-color: #464646;--ag-charts-chrome-background-color: #fafafa;--ag-charts-chrome-font-family: Verdana, sans-serif;--ag-charts-chrome-font-size: 12px;--ag-charts-chrome-font-weight: 400;--ag-charts-chrome-subtle-text-color: #8c8c8c;--ag-charts-chrome-text-color: #181d1f;--ag-charts-input-background-color: #fff;--ag-charts-input-text-color: #464646;--ag-charts-crosshair-label-background-color: #fff;--ag-charts-crosshair-label-text-color: #464646;--ag-charts-spacing: 4px;--ag-charts-border-radius: 4px;--ag-charts-shadow: 0 2px 8px 0 color-mix(in srgb, black 8%, transparent);--ag-charts-focus-shadow: 0 0 0 3px var(--ag-charts-accent-color);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 12%);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-radius: var(--ag-charts-border-radius);--ag-charts-input-focus-border-color: var(--ag-charts-accent-color);--ag-charts-input-focus-text-color: var(--ag-charts-accent-color);--ag-charts-input-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-input-disabled-border-color: var(--ag-charts-border-color);--ag-charts-input-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-input-text-color) 50% );--ag-charts-input-placeholder-text-color: color-mix( in srgb, var(--ag-charts-input-background-color), var(--ag-charts-input-text-color) 60% );--ag-charts-button-background-color: var(--ag-charts-background-color);--ag-charts-button-border-color: var(--ag-charts-border-color);--ag-charts-button-border-radius: var(--ag-charts-border-radius);--ag-charts-button-text-color: var(--ag-charts-text-color);--ag-charts-button-focus-background-color: color-mix( in srgb, var(--ag-charts-button-background-color), var(--ag-charts-accent-color) 12% );--ag-charts-button-focus-border-color: var(--ag-charts-accent-color);--ag-charts-button-focus-text-color: var(--ag-charts-accent-color);--ag-charts-button-disabled-background-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-foreground-color) 6% );--ag-charts-button-disabled-border-color: var(--ag-charts-border-color);--ag-charts-button-disabled-text-color: color-mix( in srgb, var(--ag-charts-chrome-background-color), var(--ag-charts-chrome-text-color) 50% );--ag-charts-checkbox-background-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 35% );--ag-charts-checkbox-checked-background-color: var(--ag-charts-accent-color);--ag-charts-chrome-font-size-small: var(--ag-charts-chrome-font-size);--ag-charts-chrome-font-size-medium: calc(var(--ag-charts-chrome-font-size) * (13 / 12));--ag-charts-chrome-font-size-large: calc(var(--ag-charts-chrome-font-size) * (14 / 12));--ag-charts-border: solid 1px var(--ag-charts-border-color);--ag-charts-focus-border: solid 1px var(--ag-charts-accent-color);--ag-charts-focus-border-shadow: 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%);--ag-charts-layer-menu: 6;--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1}.ag-charts-theme-default-dark{--ag-charts-shadow: 0 2px 12px 0 color-mix(in srgb, black 33.3%, transparent);--ag-charts-focus-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-accent-color) 22%)}.ag-chart-canvas-wrapper .ag-charts-theme-default{--ag-charts-border-radius: var(--ag-border-radius, 4px);--ag-charts-border: var(--ag-borders-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-focus-shadow: var(--ag-focus-shadow, 0 0 0 3px var(--ag-charts-accent-color));--ag-charts-focus-border-shadow: var( --ag-focus-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-accent-color) 20%) )}.ag-charts-icon{display:block;width:20px;height:20px;speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-trend-based-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJtNC45OTYgMTIuNjc0IDMuMjkxLTUuNzQzLjg2OC40OTctMy4yOTEgNS43NDN6Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4zNTEiIGN5PSIxNC41IiByPSIxLjc1IiBzdHJva2U9IiMwMDAiLz48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTggNmgtN1Y1aDd6bTAgNC41aC03di0xaDd6bTAgNC41SDZ2LTFoMTJ6Ii8+PC9zdmc+)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;--input-padding: calc(var(--ag-charts-spacing) * 2);--input-padding-large: calc(var(--ag-charts-spacing) * 2.5);color:var(--ag-charts-input-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);transition-duration:.25s;transition-property:none;transition-timing-function:ease-out}.ag-charts-input:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-button-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-button-border-radius);color:var(--ag-charts-button-text-color);cursor:pointer;padding:var(--input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-focus-color)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{--checkbox-transition-duration: .1s;appearance:none;background:var(--ag-charts-checkbox-background-color);border-radius:calc(var(--ag-charts-border-radius) * 9);cursor:pointer;height:18px;margin:0;transition-duration:var(--checkbox-transition-duration);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:calc(var(--ag-charts-border-radius) * 7);content:" ";height:14px;margin:2px;transition-duration:var(--checkbox-transition-duration);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-checkbox-checked-background-color)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--textarea-line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--textarea-line-height);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-large);padding:var(--input-padding-large) var(--input-padding)}.ag-charts-textarea::placeholder{color:var(--ag-charts-input-placeholder-text-color)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;-webkit-user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:solid 1px var(--ag-charts-chrome-background-color);box-shadow:var(--ag-charts-focus-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;overflow:visible}.ag-charts-focus-svg-outer-path{stroke:var(--ag-charts-chrome-background-color);stroke-width:4px}.ag-charts-focus-svg-inner-path{stroke:var(--ag-charts-accent-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{--tooltip-arrow-size: 8px;--tooltip-row-spacing: 8px;--tooltip-column-spacing: 16px;position:fixed;inset:unset;margin:0;padding:0;overflow:visible;top:var(--top, 0px);left:var(--left, 0px);width:max-content;max-width:100%;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);color:var(--ag-charts-chrome-text-color);background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);box-shadow:var(--ag-charts-shadow)}.ag-charts-tooltip--compact .ag-charts-tooltip-content{--tooltip-row-spacing: 2px;--tooltip-column-spacing: 8px;padding:3px 6px}.ag-charts-tooltip--arrow-top:before,.ag-charts-tooltip--arrow-right:before,.ag-charts-tooltip--arrow-bottom:before,.ag-charts-tooltip--arrow-left:before{content:"";position:absolute;display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;border-bottom-color:transparent;border-right-color:transparent;background:inherit;clip-path:polygon(0 0,100% 0,100% 1px,1px 100%,0 100%)}.ag-charts-tooltip--arrow-top:before{bottom:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * .5)) rotate(45deg)}.ag-charts-tooltip--arrow-bottom:before{top:100%;left:50%;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(225deg)}.ag-charts-tooltip--arrow-left:before{right:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * .5)) rotate(315deg)}.ag-charts-tooltip--arrow-right:before{left:100%;top:50%;transform:translateY(-50%) translate(calc(var(--tooltip-arrow-size) * -.5)) rotate(135deg)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none;-webkit-user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:8px 12px;gap:var(--tooltip-row-spacing)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;place-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:var(--tooltip-column-spacing);align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-tooltip-footer{grid-column:1 / -1;color:var(--ag-charts-chrome-subtle-text-color);text-align:center}.ag-charts-popover{position:absolute;border:var(--ag-charts-border);border-radius:var(--ag-charts-border-radius);background:var(--ag-charts-chrome-background-color);color:var(--ag-charts-chrome-text-color);font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size);font-weight:var(--ag-charts-chrome-font-weight);box-shadow:var(--ag-charts-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-chrome-text-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-chrome-font-size)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-focus-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:var(--ag-charts-layer-menu)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-accent-color);background:var(--ag-charts-focus-color);color:var(--ag-charts-accent-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{--toolbar-gap: calc(var(--ag-charts-spacing) * 2);--toolbar-size: 34px;--toolbar-button-padding: 6px;align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);color:var(--ag-charts-chrome-text-color);cursor:pointer;display:flex;font-family:var(--ag-charts-chrome-font-family);font-size:var(--ag-charts-chrome-font-size-medium);font-weight:var(--ag-charts-chrome-font-weight);justify-content:center;min-height:var(--toolbar-size);min-width:var(--toolbar-size);padding:var(--toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-focus-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-focus-color);border-color:var(--ag-charts-accent-color);color:var(--ag-charts-accent-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-button-disabled-background-color);color:var(--ag-charts-button-disabled-text-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-border-radius);border-top-right-radius:var(--ag-charts-border-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-border-radius);border-bottom-right-radius:var(--ag-charts-border-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-chrome-background-color);border:var(--ag-charts-border);border-bottom-left-radius:var(--ag-charts-border-radius);border-top-left-radius:var(--ag-charts-border-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}
`,Xr=class{constructor(){this.registeredListeners=new Map}addListener(e,t){const i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(const[t,i]of this.registeredListeners.entries()){const s=i.findIndex(n=>n.symbol===e);if(s>=0){i.splice(s,1),i.length===0&&this.registeredListeners.delete(t);break}}}dispatch(e,...t){for(const i of this.getListenersByType(e))try{i.handler(...t)}catch(s){de.errorOnce(String(s))}}getListenersByType(e){return this.registeredListeners.get(e)??[]}destroy(){this.registeredListeners.clear()}},dl=class{constructor(){this.listeners=new Xr,this.destroyFns=[],this.destroyed=!1}addListener(e,t){return this.listeners.addListener(e,t)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(e=>e()),this.destroyed=!0}},K8=class jm{constructor(t,i,s){this.element=t,this.topTabGuard=i,this.bottomTabGuard=s,this.destroyFns=[],this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,n=>this.onTab(n,!1)),this.initTabGuard(this.bottomTabGuard,n=>this.onTab(n,!0)),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",n=>this.onBlur(n),{capture:!0})}set tabIndex(t){this.guardTabIndex=t,this.guardTabIndex===0?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){for(const t of this.destroyFns)t();this.destroyFns.length=0}initTabGuard(t,i){const s=()=>i(t);t.addEventListener("focus",s),this.destroyFns.push(()=>t.removeEventListener("focus",s))}setGuardIndices(t){const i=t;At(this.topTabGuard,"tabindex",i),At(this.bottomTabGuard,"tabindex",i)}onFocus(){this.hasFocus=!0,this.guardTabIndex!==0&&this.setGuardIndices(0)}onBlur({relatedTarget:t}){const{topTabGuard:i,bottomTabGuard:s}=this;this.hasFocus=!1,this.guardTabIndex!==0&&t!==i&&t!==s&&this.setGuardIndices(this.guardTabIndex)}onTab(t,i){if(this.guardTabIndex!==0){let s;t.tabIndex===0?(s=this.findExitTarget(!i),this.setGuardIndices(this.guardTabIndex)):s=this.findEnterTarget(i),s==null||s.focus()}}static queryFocusable(t,i){const s=Et();return Array.from(t.querySelectorAll(i)).filter(n=>{if(n instanceof HTMLElement){const o=s.getComputedStyle(n);return o.display!=="none"&&o.visibility!=="none"}return!1})}findEnterTarget(t){const i=jm.queryFocusable(this.element,'[tabindex="0"]'),s=t?i.length-1:0;return i[s]}findExitTarget(t){const i=jm.queryFocusable(Yr(),"[tabindex]").filter(o=>o.tabIndex>0).sort((o,r)=>o.tabIndex-r.tabIndex),{before:s,after:n}=jm.findBeforeAndAfter(i,this.guardTabIndex);return t?s:n}static findBeforeAndAfter(t,i){let s=0,n=t.length-1,o,r;for(;s<=n;){const a=Math.floor((s+n)/2),c=t[a].tabIndex;if(c===i){o=t[a-1]||void 0,r=t[a+1]||void 0;break}else c<i?(o=t[a],s=a+1):(r=t[a],n=a-1)}return{before:o,after:r}}};function mo(e,t,i,s,n){t.addEventListener(i,s);const o=()=>t.removeEventListener(i,s,n);return e.push(o),o}function EN(e,t,i){mo(e,t,"keydown",s=>{s.key==="Escape"&&i(s)})}function $8(e,t,i){const s=mo(e,window,"mousedown",n=>{[0,2].includes(n.button)&&!TN(t,n)&&(i(),s())});return s}function Z8(e,t,i){const s=mo(e,window,"touchstart",n=>{Array.from(n.targetTouches).some(r=>!TN(t,r))&&(i(),s())});return s}function TN(e,t){if(t.target instanceof Element){const{x:i,y:s,width:n,height:o}=e.getBoundingClientRect(),{clientX:r,clientY:a}=t;return r>=i&&a>=s&&r<=i+n&&a<=s+o}return!1}function py(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function e0(e,t,...i){return py(e)&&(e.key===t||i.some(s=>e.key===s))}function NI(e,t,i,s){i&&mo(e,t,"keydown",n=>{e0(n,s)&&i.focus()})}function q8(e,t,i,s,n,o){NI(e,t,n,o),NI(e,t,i,s),mo(e,t,"keydown",r=>{e0(r,s,o)&&r.preventDefault()})}var $u={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function IN(e){const{orientation:t,buttons:i,wrapAround:s=!1,onEscape:n,onFocus:o,onBlur:r}=e,{nextKey:a,prevKey:c}=$u[t],h=v=>{v.target&&"tabIndex"in v.target&&(i.forEach(y=>y.tabIndex=-1),v.target.tabIndex=0)},[d,p]=s?[i.length,i.length]:[0,1/0],f=[];for(let v=0;v<i.length;v++){const y=i[(d+v-1)%p],b=i[v],w=i[(d+v+1)%p];mo(f,b,"focus",h),o&&mo(f,b,"focus",o),r&&mo(f,b,"blur",r),n&&EN(f,b,n),q8(f,b,w,a,y,c),b.tabIndex=v===0?0:-1}return f}var X8=class{constructor(e,t,i){this.lastFocus=t,this.closeCallback=i,this.destroyFns=[],this.destroyFns.push($8(this.destroyFns,e,()=>this.close(!0))),this.destroyFns.push(Z8(this.destroyFns,e,()=>this.close(!0)))}close(e){this.destroyFns.forEach(t=>t()),this.destroyFns.length=0,this.closeCallback(),this.finishClosing(e)}finishClosing(e){var t;this.destroyFns.forEach(i=>i()),this.destroyFns.length=0,At(this.lastFocus,"aria-expanded",!1),e||(t=this.lastFocus)==null||t.focus({preventScroll:!0}),this.lastFocus=void 0}};function LN(e){var y;const{sourceEvent:t,orientation:i,menu:s,buttons:n,closeCallback:o,overrideFocusVisible:r,autoCloseOnBlur:a=!1}=e,{nextKey:c,prevKey:h}=$u[i],d=i0(t);At(d,"aria-expanded",!0);const p=new X8(s,d,o),f=()=>p.close(),{destroyFns:v}=p;if(s.role="menu",s.ariaOrientation=i,v.push(...IN({orientation:i,buttons:n,onEscape:f,wrapAround:!0})),s.tabIndex=-1,EN(v,s,f),mo(v,s,"keydown",b=>{var w;b.target===s&&(b.key===c||b.key===h)&&(b.preventDefault(),(w=n[0])==null||w.focus())}),a){const b=w=>{!n.includes(w.relatedTarget)&&f()};for(const w of n)mo(v,w,"blur",b)}return(y=n[0])==null||y.focus({preventScroll:!0}),r!==void 0&&(n.forEach(w=>w.setAttribute("data-focus-visible-override",r.toString())),mo(v,s,"keydown",()=>{n.forEach(w=>w.setAttribute("data-focus-visible-override","true"))},{once:!0})),p}function Q8(e,t){return i=>{if(e.ariaDisabled==="true")return i.preventDefault();t(i)}}function t0(e){return"button"in e?e.button===0:py(e)&&(e.code==="Space"||e.key==="Enter")}function i0(e){if((e==null?void 0:e.target)instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function FN(e){const t=i=>{if(i.defaultPrevented)return;dy(i.target,"data-preventdefault",!0)&&e0(i,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&i.preventDefault()};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}var J8=class{constructor(e){this.callback=e,this.devicePixelRatio=Et("devicePixelRatio")??1,this.devicePixelRatioMediaQuery=void 0,this.devicePixelRatioListener=t=>{t.matches||(this.devicePixelRatio=Et("devicePixelRatio")??1,this.unregisterDevicePixelRatioListener(),this.registerDevicePixelRatioListener(),this.callback(this.pixelRatio))}}get pixelRatio(){return this.devicePixelRatio}observe(){this.registerDevicePixelRatioListener()}disconnect(){this.unregisterDevicePixelRatioListener()}unregisterDevicePixelRatioListener(){var e;(e=this.devicePixelRatioMediaQuery)==null||e.removeEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=void 0}registerDevicePixelRatioListener(){var t;const e=(t=Et("matchMedia"))==null?void 0:t(`(resolution: ${this.pixelRatio}dppx)`);e==null||e.addEventListener("change",this.devicePixelRatioListener),this.devicePixelRatioMediaQuery=e}},PN=class{constructor(){var t;this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([i,s])=>this.observe(i,s)),this.queuedObserveRequests=[],this.observeWindow()},typeof ResizeObserver<"u"&&(this.resizeObserver=new ResizeObserver(i=>{for(const{target:s,contentRect:{width:n,height:o}}of i){const r=this.elements.get(s);this.checkSize(r,s,n,o)}}));let e;this.pixelRatioObserver=new J8(()=>{clearTimeout(e),e=setTimeout(()=>this.checkPixelRatio(),0)}),this.documentReady=Yr("readyState")==="complete",this.documentReady?this.observeWindow():(t=Et())==null||t.addEventListener("load",this.onLoad)}destroy(){var e,t,i;(e=Et())==null||e.removeEventListener("load",this.onLoad),(t=this.resizeObserver)==null||t.disconnect(),this.resizeObserver=void 0,(i=this.pixelRatioObserver)==null||i.disconnect(),this.pixelRatioObserver=void 0}observeWindow(){var e;(e=this.pixelRatioObserver)==null||e.observe()}checkPixelRatio(){var t;const e=((t=this.pixelRatioObserver)==null?void 0:t.pixelRatio)??1;for(const[i,s]of this.elements)if(s.size!=null&&s.size.pixelRatio!==e){const{width:n,height:o}=s.size;s.size={width:n,height:o,pixelRatio:e},s.cb(s.size,i)}}checkSize(e,t,i,s){var n,o,r;if(e&&(i!==((n=e.size)==null?void 0:n.width)||s!==((o=e.size)==null?void 0:o.height))){const a=((r=this.pixelRatioObserver)==null?void 0:r.pixelRatio)??1;e.size={width:i,height:s,pixelRatio:a},e.cb(e.size,t)}}observe(e,t){var s;if(!this.documentReady){this.queuedObserveRequests.push([e,t]);return}this.elements.has(e)?this.removeFromQueue(e):(s=this.resizeObserver)==null||s.observe(e);const i={cb:t};this.elements.set(e,i)}unobserve(e){var t;(t=this.resizeObserver)==null||t.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter(([t])=>t!==e)}},oh=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),typeof t<"u"&&super.set(e,t),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}},eq='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay ag-charts-tooltip-container"></div></div></div></div>',tq=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area","tooltip-container"],OI={safeHorizontal:"ag-charts-wrapper--safe-horizontal",safeVertical:"ag-charts-wrapper--safe-vertical"},iq=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}],["tooltip-container",{childElementType:"div"}]]);function sq(e,t){if(typeof IntersectionObserver>"u")return;const i=new IntersectionObserver(s=>{for(const n of s)n.target===e&&t(n.intersectionRatio)},{root:e});return i.observe(e),i}var kN={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON(){return kN}};function GI(e,t){const i=$e("div");return i.className="ag-charts-tab-guard",e.insertAdjacentElement(t,i),i}var s0=class Jl extends dl{constructor(t,i,s="normal"){super(),this.styleContainer=i,this.mode=s,this.anchorName=`--${vn(this)}`,this.styles=new Map,this.pendingContainer=void 0,this.container=void 0,this.documentRoot=void 0,this.initiallyConnected=void 0,this.containerSize=void 0,this.sizeMonitor=new PN,this.cursorState=new oh("default"),this.minWidth=0,this.minHeight=0,this.element=this.initDOM(),this.rootElements=this.initRootElements(),this.rootElements.canvas.element.style.setProperty("anchor-name",this.anchorName);let n=!1;if(this.observer=sq(this.element,o=>{o===0&&!n&&this.listeners.dispatch("hidden",{type:"hidden"}),n=o===0}),this.setSizeOptions(),this.updateContainerSize(),this.addStyles("ag-charts-community",Y8),this.setContainer(t),this.destroyFns.push(FN(this.element)),this.mode==="normal"){const o=this.rootElements["canvas-center"].element;if(o==null)throw new Error("Error initializing tab guards");const r=GI(o,"beforebegin"),a=GI(o,"afterend");this.tabGuards=new K8(o,r,a)}}initDOM(){if(this.mode==="normal"){const s=$e("div");return s.innerHTML=eq,s.firstChild}const t=$e("div");t.role="presentation",t.classList.add("ag-charts-canvas-container","ag-charts-canvas","ag-charts-tooltip-container");const i=$e("div");return t.appendChild(i),i.role="presentation",i.classList.add("ag-charts-series-area"),t}initRootElements(){return tq.reduce((t,i)=>{const s=`ag-charts-${i}`;let n=this.element.classList.contains(s)?this.element:this.element.querySelector(`.${s}`);if(!n&&this.mode==="normal")throw new Error(`AG Charts - unable to find DOM element ${s}`);return n??(n=$e("div")),t[i]={element:n,children:new Map,listeners:[]},t},{})}destroy(){var t;super.destroy(),(t=this.observer)==null||t.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),this.pendingContainer=void 0,Object.values(this.rootElements).forEach(i=>{i.children.forEach(s=>s.remove()),i.element.remove()}),this.element.remove()}postRenderUpdate(){this.mode!=="minimal"&&(this.pendingContainer==null||this.pendingContainer===this.container||(Jl.batchedUpdateContainer.length===0&&Et().setTimeout(this.applyBatchedUpdateContainer.bind(this),0),Jl.batchedUpdateContainer.push(this)))}applyBatchedUpdateContainer(){for(const t of Jl.batchedUpdateContainer)t.destroyed||t.updateContainer();Jl.batchedUpdateContainer.splice(0)}setSizeOptions(t=300,i=300,s,n){const{style:o}=this.element;o.width=`${s??t}px`,o.height=`${n??i}px`,this.minWidth=s??t,this.minHeight=n??i,this.updateContainerClassName()}updateContainerSize(){const{style:t}=this.rootElements["canvas-center"].element;t.visibility=this.containerSize==null?"hidden":"",this.containerSize?(t.width=`${this.containerSize.width??0}px`,t.height=`${this.containerSize.height??0}px`):(t.width="",t.height=""),this.updateContainerClassName()}setTabGuardIndex(t){this.tabGuards&&(this.tabGuards.tabIndex=t)}setContainer(t){t!==this.container&&(this.pendingContainer=t,(this.mode==="minimal"||this.container==null)&&this.updateContainer())}updateContainer(){const{pendingContainer:t}=this;if(!(t==null||t===this.container)){if(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),this.documentRoot!=null)for(const i of this.rootElements.styles.children.keys())this.removeChild("styles",i);this.container=t,this.pendingContainer=void 0,this.documentRoot=this.getShadowDocumentRoot(t),this.initiallyConnected=this.mode==="minimal"||t.isConnected;for(const[i,s]of this.styles)this.addStyles(i,s);t.appendChild(this.element),this.sizeMonitor.observe(t,i=>{this.containerSize=i,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})}),this.listeners.dispatch("container-changed",{type:"container-changed"})}}setThemeClass(t){const i="ag-charts-theme-";this.element.classList.forEach(s=>{s.startsWith(i)&&s!==t&&this.element.classList.remove(s)}),this.element.classList.add(t)}setThemeParameters(t){const i={accentColor:"accent-color",axisColor:"axis-color",backgroundColor:"background-color",borderColor:"border-color",foregroundColor:"foreground-color",fontFamily:"font-family",fontSize:"font-size",fontWeight:"font-weight",gridLineColor:"grid-line-color",padding:"padding",subtleTextColor:"subtle-text-color",textColor:"text-color",chromeBackgroundColor:"chrome-background-color",chromeFontFamily:"chrome-font-family",chromeFontSize:"chrome-font-size",chromeFontWeight:"chrome-font-weight",chromeSubtleTextColor:"chrome-subtle-text-color",chromeTextColor:"chrome-text-color",inputBackgroundColor:"input-background-color",inputTextColor:"input-text-color",crosshairLabelBackgroundColor:"crosshair-label-background-color",crosshairLabelTextColor:"crosshair-label-text-color"},s=["fontSize","chromeFontSize"];for(const[n,o]of po(t)){let r=`${o}`;s.includes(n)&&(r=`${o}px`),this.element.style.setProperty(`--ag-charts-${i[n]}`,r)}}updateCanvasLabel(t){At(this.rootElements["canvas-proxy"].element,"aria-label",t)}getEventElement(t,i){return["focus","blur","keydown","keyup"].includes(i)?this.rootElements["series-area"].element:t}addEventListener(t,i,s){this.getEventElement(this.element,t).addEventListener(t,i,s)}removeEventListener(t,i,s){this.getEventElement(this.element,t).removeEventListener(t,i,s)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){var n;const t=Et(),i=new Me(0,0,t.innerWidth,t.innerHeight),s=this.getRawOverlayClientRect();return((n=i.intersection(s))==null?void 0:n.toDOMRect())??kN}getRawOverlayClientRect(){var o,r,a;let t=this.element;const i=(o=this.element.getRootNode())==null?void 0:o.fullscreenElement;for(;t!=null;){let c;if(i!=null&&t===i)c=!0;else{const h=(r=t.computedStyleMap)==null?void 0:r.call(t),d=(a=h==null?void 0:h.get("overflow-y"))==null?void 0:a.toString();c=d==="auto"||d==="scroll"}if(c)return Me.fromDOMRect(t.getBoundingClientRect());t=t.parentElement}if(this.documentRoot!=null)return Me.fromDOMRect(this.documentRoot.getBoundingClientRect());const{innerWidth:s,innerHeight:n}=Et();return new Me(0,0,s,n)}getShadowDocumentRoot(t=this.container){var s;const i=((s=t==null?void 0:t.ownerDocument)==null?void 0:s.body)??Yr("body");for(;t!=null;){if(t===i)return;if(t.parentNode instanceof DocumentFragment)return t;t=t.parentNode}}getParent(t){return this.rootElements[t].element}getChildBoundingClientRect(t){const{children:i}=this.rootElements[t],s=[];for(const n of i.values())s.push(Me.fromDOMRect(n.getBoundingClientRect()));return Me.merge(s)}isManagedChildDOMElement(t,i,s){const{children:n}=this.rootElements[i],o=n==null?void 0:n.get(s);return o!=null&&t.contains(o)}contains(t,i){return i==null?this.element.contains(t):this.rootElements[i].element.contains(t)}addStyles(t,i){const s="data-ag-charts";if(this.styles.set(t,i),this.container==null)return;const n=a=>a.getAttribute(s)===t,o=a=>{const c=new Set(["TITLE","META"]);let h=!0,d;for(const f of a.children){if(h&&c.has(f.tagName)){d=f;continue}if(h=!1,n(f))return;f.hasAttribute(s)&&(d=f)}const p=$e("style");return d==null?a.prepend(p):a.insertBefore(p,d.nextSibling),p};let r;this.styleContainer?r=o(this.styleContainer):this.initiallyConnected===!1?r=this.addChild("styles",t):this.documentRoot==null&&!Jl.headStyles.has(t)?(r=o(Yr("head")),Jl.headStyles.add(t)):this.documentRoot!=null&&(r=this.addChild("styles",t)),!(r==null||n(r))&&(r.setAttribute(s,t),r.innerHTML=i)}removeStyles(t){this.removeChild("styles",t)}updateCursor(t,i){this.cursorState.set(t,i),this.element.style.cursor=this.cursorState.stateValue()}getCursor(){return this.element.style.cursor}addChild(t,i,s,n){const{element:o,children:r,listeners:a}=this.rootElements[t];if(!r)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(r.has(i))return r.get(i);const{childElementType:c="div"}=iq.get(t)??{};if(s&&s.tagName.toLowerCase()!==c.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const h=s??$e(c);for(const[d,p,f]of a)h.addEventListener(d,p,f);if(r.set(i,h),n){const d=o.querySelector(n.query);if(d==null)throw new Error(`AG Charts - addChild query failed ${n.query}`);d.insertAdjacentElement(n.where,h)}else o==null||o.appendChild(h);return h}removeChild(t,i){var n;const{children:s}=this.rootElements[t];s&&((n=s.get(i))==null||n.remove(),s.delete(i))}incrementDataCounter(t){const{dataset:i}=this.element;i[t]??(i[t]="0"),i[t]=String(Number(i[t])+1)}setDataBoolean(t,i){this.element.dataset[t]=String(i)}updateContainerClassName(){const{element:t,containerSize:i,minWidth:s,minHeight:n}=this;t.classList.toggle(OI.safeHorizontal,s>=((i==null?void 0:i.width)??1/0)),t.classList.toggle(OI.safeVertical,n>=((i==null?void 0:i.height)??1/0))}};s0.batchedUpdateContainer=[];s0.headStyles=new Set;var NN=s0,nq=class extends cr{constructor(){super($e("div")),this.textElement=Zi("text"),this.textElement.role="presentation",this.svgElement=Zi("svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(e){var s;this.textElement.textContent=e;const t=this.textElement,i=(s=t.getBBox)==null?void 0:s.call(t);i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}destructor(){}},yp=class extends cr{constructor(){super($e("button")),this.setEnabled(!0)}destructor(){}setEnabled(e){At(this.elem,"aria-disabled",!e),uo(this.elem,"pointer-events",e?void 0:"none")}addListener(e,t){return super.addListener(e,(i,s)=>{(e==="click"||e==="dblclick")&&this.isDisabled()||t(i,s)})}},oq=class extends cr{constructor(){super($e("div")),At(this.elem,"role","group")}destructor(){}},ON=class extends cr{constructor(e,t){super($e("div")),this.focusedChildIndex=0,this.onChildFocus=(i,s)=>{const n=this.children[this.focusedChildIndex];this.focusedChildIndex=s.index,n==null||n.setTabIndex(-1),s.setTabIndex(0)},this.onChildKeyDown=(i,s)=>{var c;const n=this.orientation,[o,r]=n==="both"?[$u.horizontal,$u.vertical]:[$u[n],void 0];let a=-1;if(py(i.sourceEvent)){const h=i.sourceEvent.key;h===o.nextKey||h===(r==null?void 0:r.nextKey)?a=s.index+1:(h===o.prevKey||h===(r==null?void 0:r.prevKey))&&(a=s.index-1)}(c=this.children[a])==null||c.focus()},this.orientation=e,At(this.elem,"role",t)}get orientation(){return dy(this.elem,"aria-orientation")??"both"}set orientation(e){At(this.elem,"aria-orientation",e!=="both"?e:void 0)}focus(){var e;(e=this.children[this.focusedChildIndex])==null||e.focus()}onChildAdded(e){e.addListener("focus",this.onChildFocus),e.addListener("keydown",this.onChildKeyDown),e.setTabIndex(this.children.length===1?0:-1)}onChildRemoved(e){e.removeListener("focus",this.onChildFocus),e.removeListener("keydown",this.onChildKeyDown);const{focusedChildIndex:t,children:i}=this,s=t===e.index;for(let n=0;n<i.length;n++){const o=i[n];o.index===t&&(this.focusedChildIndex=n),o.index=n}if(s){const n=i[t]??i[t-1];n?(this.focusedChildIndex=n.index,n.setTabIndex(0)):this.focusedChildIndex=0}}},rq=class extends ON{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach(e=>e.getElement().parentElement.remove())}addChildToDOM(e,t){const i=$e("div");At(i,"role","listitem"),uo(i,"position","absolute"),cr.setElementContainer(e,i),this.appendOrInsert(i,t),this.setHidden(!1)}removeChildFromDOM(e){e.getElement().parentElement.remove(),this.setHidden(this.children.length===0)}setHidden(e){this.children.length===0&&(e=!0),super.setHidden(e)}},rh=class extends cr{constructor(e){super(e)}destructor(){}},aq=new Intl.NumberFormat("en-US",{style:"percent"});function $r(e,t=2){return typeof e=="number"?BN(e,t):typeof e=="string"?e:String(e??"")}function GN(e){return aq.format(e)}var BI=new Map().set(2,new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}));function BN(e,t){let i=BI.get(t);return i||(i=new Intl.NumberFormat("en-US",{maximumFractionDigits:t,useGrouping:!1}),BI.set(t,i)),i.format(e)}var n0=class og extends cr{constructor(){super($e("input")),this._step=og.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(t){this._step=t,this.getElement().step=t.attributeValue}get keyboardStep(){var t;return((t=this._keyboardStep)==null?void 0:t.step)??this._step}set keyboardStep(t){var i;if(t!==((i=this._keyboardStep)==null?void 0:i.step)&&(this._keyboardStep!==void 0&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),t!==void 0)){const s=()=>this.getElement().step=t.attributeValue,n=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:t,onKeyDown:s,onKeyUp:n,onBlur:n},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return dy(this.elem,"aria-orientation")??"both"}set orientation(t){At(this.elem,"aria-orientation",t!=="both"?t:void 0),og.registerDefaultPreventers(this,t)}destructor(){}clampValueRatio(t,i){const s=this.getValueRatio(),n=Ge(t,s,i);return n!==s&&this.setValueRatio(n),n}setValueRatio(t,i){const{divider:s}=this.step,n=Math.round(t*1e4)/s,{ariaValueText:o=GN(n/s)}=i??{},r=this.getElement();r.value=`${n}`,r.ariaValueText=o}getValueRatio(){return parseFloat(this.getElement().value)/this.step.divider}static registerDefaultPreventers(t,i){i==="both"?t.removeListener("keydown",og.onKeyDown):t.addListener("keydown",og.onKeyDown)}static onKeyDown(t,i){let s=[];const{orientation:n}=i;n==="horizontal"?s=["ArrowUp","ArrowDown"]:n==="vertical"&&(s=["ArrowLeft","ArrowRight"]),s.includes(t.sourceEvent.code)&&t.sourceEvent.preventDefault()}};n0.STEP_ONE={attributeValue:"1",divider:1};n0.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var o0=n0,lq=class extends yp{constructor(){super(),At(this.elem,"role","switch"),this.setChecked(!1)}setChecked(e){At(this.elem,"aria-checked",e)}},fy=class extends ON{constructor(e="horizontal"){super(e,"toolbar")}destructor(){}};function Iu(e,t){var i;return((i=t.params)==null?void 0:i.type)===e}function cq(e){if(e==="button")return new yp;if(e==="slider")return new o0;if(e==="toolbar")return new fy;if(e==="group")return new oq;if(e==="list")return new rq;if(e==="region")return new rh($e("div"));if(e==="text")return new nq;if(e==="listswitch")return new lq;throw Error("AG Charts - error allocating meta")}function zI(e){const t={params:e,result:void 0};return t.result=cq(t.params.type),t}var zN=class{constructor(e,t){this.localeManager=e,this.domManager=t,this.destroyFns=[]}destroy(){this.destroyFns.forEach(e=>e())}addLocalisation(e){e(),this.destroyFns.push(this.localeManager.addListener("locale-changed",e))}createProxyContainer(e){const t=zI(e),{params:i,result:s}=t,n=s.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,n),n.classList.add(...i.classList,"ag-charts-proxy-container"),n.role=i.type,"ariaOrientation"in i&&(n.ariaOrientation=i.ariaOrientation),Iu("toolbar",t)&&(t.result.orientation=t.params.orientation),this.addLocalisation(()=>{n.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),s}createProxyElement(e){const t=zI(e);if(Iu("button",t)){const{params:i,result:s}=t,n=s.getElement();if(this.initInteract(i,s),typeof i.textContent=="string")n.textContent=i.textContent;else{const{textContent:o}=i;this.addLocalisation(()=>{n.textContent=this.localeManager.t(o.id,o.params)})}this.setParent(t.params,t.result)}if(Iu("slider",t)){const{params:i,result:s}=t,n=s.getElement();this.initInteract(i,s),n.type="range",n.role="presentation",n.style.margin="0px",this.addLocalisation(()=>{n.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),this.setParent(t.params,t.result)}if(Iu("text",t)){const{params:i,result:s}=t;this.initElement(i,s),this.setParent(t.params,t.result)}if(Iu("listswitch",t)){const{params:i,result:s}=t;this.initInteract(i,s),s.setTextContent(i.textContent),s.setChecked(i.ariaChecked),s.setAriaDescribedBy(i.ariaDescribedBy),this.setParent(t.params,t.result)}if(Iu("region",t)){const{params:i,result:s}=t,n=s.getElement();this.initInteract(i,s),n.role="region",this.setParent(t.params,t.result)}return t.result}initElement(e,t){const i=t.getElement();return At(i,"id",e.id),uo(i,"cursor",e.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(e,t){const{tabIndex:i,domIndex:s}=e,n=this.initElement(e,t);i!==void 0&&(n.tabIndex=i),s!==void 0&&(t.domIndex=s)}setParent(e,t){var i;if("parent"in e)(i=e.parent)==null||i.addChild(t);else{const s={where:e.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",e.domManagerId,t.getElement(),s)}}},uq={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent0to2dp] to ${max}[percent0to2dp]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsFibonacciRetracementTrendBased:"Fib Trend Based",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}",tooltipPaginationStatus:"${index}[number] of ${count}[number]"},hq=/\$\{(\w+)}(?:\[(\w+)])?/gi,Xb={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),percent0to2dp:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},dq=({defaultValue:e,variables:t})=>e==null?void 0:e.replaceAll(hq,(i,s,n)=>{const o=t[s],r=n!=null?Xb[n]:null;return n!=null&&r==null&&de.warnOnce(`Format style [${n}] is not supported`),r!=null?r.format(o):typeof o=="number"?Xb.number.format(o):o instanceof Date?Xb.datetime.format(o):String(o)}),gq=class extends Xr{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.dispatch("locale-changed"))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.dispatch("locale-changed"))}t(e,t={}){const{localeText:i=uq,getLocaleText:s}=this,n=i[e];return(s==null?void 0:s({key:e,defaultValue:n,variables:t}))??dq({defaultValue:n,variables:t})??e}},r0=class{constructor(e){this.enabled=!0,this.width=600,this.height=300;const{width:t,height:i,canvasElement:s,willReadFrequently:n=!1}=e;this.pixelRatio=e.pixelRatio??Et("devicePixelRatio")??1,this.element=s??$e("canvas"),this.element.style.display="block",this.element.style.width=(t??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((t??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:n}),this.onEnabledChange(),this.resize(t??0,i??0,this.pixelRatio),Yk(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.context.canvas,t,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t,i){if(!(e>0&&t>0))return;const{element:s,context:n}=this;s.width=Math.round(e*i),s.height=Math.round(t*i),n.setTransform(i,0,0,i,0,0),s.style.width=e+"px",s.style.height=t+"px",this.width=e,this.height=t,this.pixelRatio=i}clear(){Uk(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};D([hl(e=>e.onEnabledChange())],r0.prototype,"enabled",2);var pq=class{constructor(e){this.canvas=e,this.debug=at.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(e,t,i){this.canvas.resize(e,t,i),this.layersMap.forEach(({canvas:s})=>s.resize(e,t,i))}addLayer(e){const{width:t,height:i,pixelRatio:s}=this.canvas,{name:n}=e,o=new FM({width:t,height:i,pixelRatio:s});return this.layersMap.set(o,{id:this.nextLayerId++,name:n,canvas:o}),this.debug("Scene.addLayer() - layers",this.layersMap),o}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const e of this.layersMap.values())e.canvas.destroy();this.layersMap.clear()}};function fq(e){for(const t of["B","KB","MB","GB"]){if(e<1536)return`${e.toFixed(1)}${t}`;e/=1024}return`${e.toFixed(1)}TB}`}function mq(){if(!("memory"in performance))return;const{totalJSHeapSize:e,usedJSHeapSize:t,jsHeapSizeLimit:i}=performance.memory,s=[];for(const n of[t,e,i])typeof n=="number"&&s.push(fq(n));return`Heap ${s.join(" / ")}`}function HI(e,t,i,s,n={},o=Me.zero){if(!at.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:r=0,layersSkipped:a=0,nodesRendered:c=0,nodesSkipped:h=0,opsPerformed:d=0,opsSkipped:p=0}=s??{},f=performance.now(),{start:v,...y}=t,b=Object.entries(y).map(([B,V])=>VI(B,V)).filter(B=>B!=null).join(" + "),w=Object.entries(n).map(([B,V])=>`${B}: ${JSON.stringify(V)}`).join(" ; "),S=at.check("scene:stats:verbose"),M=mq(),R=[`${VI("⏱️",v,f)} (${b})`,`${w}`,`Layers: ${S?Qb(r,a):e.size}`,S?`Nodes: ${Qb(c,h)}`:null,S?`Ops: ${Qb(d,p)}`:null,S&&M?M:null].filter(qi),A=new qM(B=>i.measureText(B)),T=new Map(R.map(B=>[B,A.measureLines(B)])),F=Math.max(...Array.from(T.values(),B=>B.width)),P=wq(T.values(),B=>B.height),N=2+o.x;i.save(),i.fillStyle="white",i.fillRect(N,0,F,P),i.fillStyle="black";let O=0;for(const[B,V]of T.entries())O+=V.height,i.fillText(B,N,O);i.restore()}function vq(e){const t=hv(Et("agChartsSceneDebug")),i=[];for(const s of t)s==="layout"?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(s);e.debugNodeSearch=i}function yq(e,t){e.save();for(const[i,s]of Object.entries(t)){const n=ri.toCanvas(s);if(!n){de.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(n.x,n.y,n.width,n.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(i,n.x,n.y,n.width),e.fillText(i,n.x,n.y,n.width)}e.restore()}var Cq=new Set,Sq=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function bq(e){const{...t}=e;for(const i of Object.keys(t))Sq.has(i)||typeof t[i]!="number"&&typeof t[i]!="string"&&typeof t[i]!="boolean"&&(Cq.add(i),delete t[i]);return t}function Um(e,t){if(!at.check(!0,"scene"))return{};let i=0;return{node:t==="json"?bq(e):e,name:e.name??e.id,dirty:e.dirty,...Array.from(e.children(),s=>Um(s,t)).reduce((s,n)=>{let{name:o}=n;const{node:{visible:r,opacity:a,zIndex:c,translationX:h,translationY:d,rotation:p,scalingX:f,scalingY:v},node:y}=n;(!r||a<=0)&&(o=`(${o})`),Ne.is(y)&&y.renderToOffscreenCanvas&&(o=`*${o}*`);const b=Array.isArray(c)?`(${c.join(", ")})`:c,w=[`${(i++).toString().padStart(3,"0")}|`,`${o??"<unknown>"}`,`z: ${b}`,h&&`x: ${h}`,d&&`y: ${d}`,p&&`r: ${p}`,f!=null&&f!==1&&`sx: ${f}`,v!=null&&v!==1&&`sy: ${v}`].filter(R=>!!R).join(" ");let S=w,M=1;for(;s[S]!=null&&M<100;)S=`${w} (${M++})`;return s[S]=n,s},{})}}function HN(e){if(!e.dirty)return{dirtyTree:{},paths:[]};const t=Array.from(e.children(),n=>HN(n)).filter(n=>n.paths.length>0),i=Ne.is(e)?e.name??e.id:e.id,s=t.length?t.flatMap(n=>n.paths).map(n=>`${i}.${n}`):[i];return{dirtyTree:{name:i,node:e,dirty:e.dirty,...t.map(n=>n.dirtyTree).filter(n=>n.dirty!=null).reduce((n,o)=>(n[o.name??"<unknown>"]=o,n),{})},paths:s}}function Qb(e,t){const i=e+t;return`${e} / ${i} (${Math.round(100*e/i)}%)`}function VI(e,t,i){const s=i!=null?i-t:t;return`${e}: ${Math.round(s*100)/100}ms`}function wq(e,t){let i=0;for(const s of e)i+=t(s);return i}var my=class{constructor(e){this.debug=at.create(!0,"scene"),this.id=vn(this),this.root=null,this.pendingSize=null,this.isDirty=!1,this.updateDebugFlags(),this.canvas=new r0(e),this.layersManager=new pq(this.canvas)}get width(){var e;return((e=this.pendingSize)==null?void 0:e[0])??this.canvas.width}get height(){var e;return((e=this.pendingSize)==null?void 0:e[1])??this.canvas.height}get pixelRatio(){var e;return((e=this.pendingSize)==null?void 0:e[2])??this.canvas.pixelRatio}setContainer(e){var i;const{element:t}=this.canvas;return(i=t.parentElement)==null||i.removeChild(t),e.appendChild(t),this}setRoot(e){var t;return this.root===e?this:(this.isDirty=!0,(t=this.root)==null||t._setLayerManager(),this.root=e,e&&(e.visible=!0,e._setLayerManager(this.layersManager)),this)}updateDebugFlags(){at.inDevelopmentMode(()=>Kr._debugEnabled=!0)}clear(){this.canvas.clear()}attachNode(e){return this.appendChild(e),()=>this.removeChild(e)}appendChild(e){var t;return(t=this.root)==null||t.appendChild(e),this}removeChild(e){var t;return(t=this.root)==null||t.removeChild(e),this}download(e,t){n9(this.canvas.toDataURL(t),(e==null?void 0:e.trim())??"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t,i){return e=Math.round(e),t=Math.round(t),i??(i=this.pixelRatio),e>0&&t>0&&(e!==this.width||t!==this.height||i!==this.pixelRatio)?(this.pendingSize=[e,t,i],this.isDirty=!0,!0):!1}render(e){var b;const{debugSplitTimes:t={start:performance.now()},extraDebugStats:i,seriesRect:s}=e??{},{canvas:n,canvas:{context:o}={},root:r,pendingSize:a,width:c,height:h,pixelRatio:d}=this;if(!o)return;const p=performance.now();let f=!1;if(a&&(f=!0,this.layersManager.resize(...a),this.pendingSize=null),r&&!r.visible){this.isDirty=!1;return}if((r==null?void 0:r.dirty)===!1&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{tree:Um(r,"console")}),HI(this.layersManager,t,o,void 0,i,s);return}const v={ctx:o,width:c,height:h,devicePixelRatio:d,debugNodes:{}};at.check("scene:stats:verbose")&&(v.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),vq(v);let y=!1;if(((r==null?void 0:r.dirty)!==!1||f)&&(y=!0,n.clear()),r&&at.check("scene:dirtyTree")){const{dirtyTree:w,paths:S}=HN(r);at.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:w,paths:S})}if(r&&y){if(r.visible&&r.preRender(v),this.debug.check()){const w=Um(r,"console");this.debug("Scene.render() - before",{canvasCleared:y,tree:w})}r.visible&&(o.save(),r.render(v),o.restore())}t["✍️"]=performance.now()-p,(b=o.verifyDepthZero)==null||b.call(o),this.isDirty=!1,HI(this.layersManager,t,o,v.stats,i,s),yq(o,v.debugNodes),r&&this.debug.check()&&this.debug("Scene.render() - after",{tree:Um(r,"console"),canvasCleared:y})}toSVG(){const{root:e,width:t,height:i}=this;if(e!=null)return Kr.toSVG(e,t,i)}strip(){const{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};my.className="Scene";function xq(e,t){return"context"in e}function a0(e,t,i){return xq(e)&&i[0]!=null&&typeof i[0]=="object"&&(i[0].context=e.context),t(...i)}var Mq=class{constructor(){this.cache=new WeakMap}call(e,t,...i){let s,n=this.cache.get(t);try{s=JSON.stringify(i)}catch{return this.invoke(e,t,i,n)}return n==null&&(n=new Map,this.cache.set(t,n)),n.has(s)?n.get(s):this.invoke(e,t,i,n,s)}invoke(e,t,i,s,n){try{const o=a0(e,t,i);return s&&n!=null&&s.set(n,o),o}catch(o){de.warnOnce("User callback errored, ignoring",o);return}}invalidateCache(){this.cache=new WeakMap}},Dq=class extends dl{constructor(e,t){super(),this.annotationRoot=e,this.fireChartEvent=t,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return e==null||Ue(e)}restoreMemento(e,t,i){this.annotations=this.cleanData(i??[]).map(s=>{const n=this.getAnnotationTypeStyles(s.type);return Qe(s,n)}),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(e??[])}fireChangedEvent(){this.fireChartEvent({type:"annotations",annotations:zt([...this.annotations])})}attachNode(e){return this.annotationRoot.append(e),()=>{var t;return(t=this.annotationRoot)==null||t.removeChild(e),this}}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){var t;return(t=this.styles)==null?void 0:t[e]}cleanData(e){for(const t of e)"textAlign"in t&&delete t.textAlign;return e}},VN=(e=>(e[e.CHART_BACKGROUND=0]="CHART_BACKGROUND",e[e.AXIS_GRID=1]="AXIS_GRID",e[e.AXIS=2]="AXIS",e[e.ZOOM_SELECTION=3]="ZOOM_SELECTION",e[e.SERIES_CROSSLINE_RANGE=4]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=5]="SERIES_LAYER",e[e.AXIS_FOREGROUND=6]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=7]="SERIES_CROSSHAIR",e[e.SERIES_CROSSLINE_LINE=8]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=9]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=10]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=11]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=12]="STATUS_BAR",e[e.SERIES_LABEL=13]="SERIES_LABEL",e[e.LEGEND=14]="LEGEND",e[e.NAVIGATOR=15]="NAVIGATOR",e[e.FOREGROUND=16]="FOREGROUND",e))(VN||{}),Rq=class{constructor(e){this.sceneRoot=e,this.axes=new Map,this.axisGridGroup=new Ne({name:"Axes-Grids",zIndex:1}),this.axisGroup=new Ne({name:"Axes",zIndex:2}),this.axisLabelGroup=new Ne({name:"Axes-Labels",zIndex:13}),this.axisCrosslineRangeGroup=new Ne({name:"Axes-Crosslines-Range",zIndex:4}),this.axisCrosslineLineGroup=new Ne({name:"Axes-Crosslines-Line",zIndex:8}),this.axisCrosslineLabelGroup=new Ne({name:"Axes-Crosslines-Label",zIndex:13}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(e,t){var s;const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const n of e)t.includes(n)||(n.detachAxis(i),n.destroy());for(const n of t)e!=null&&e.includes(n)||n.attachAxis(i);this.axes.clear();for(const n of t){const o=n.createAxisContext();this.axes.has(o.direction)?(s=this.axes.get(o.direction))==null||s.push(o):this.axes.set(o.direction,[o])}}getAxisContext(e){return this.axes.get(e)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},vy=class extends Xr{constructor(e){super(),this.animationManager=e,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=at.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){typeof e=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(e){this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(e){return bI(t=>this.fetch(t).catch(i=>de.error("callback failed",i)),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return bI((t,i)=>{this.debug(`DataService - dispatching 'data-load' | ${t}`),this.dispatch("data-load",{type:"data-load",data:i})},e,{leading:!0,trailing:!0})}async fetch(e){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const t=performance.now(),i=this.requestCounter++;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);let s;try{s=await this.dataSourceCallback(e),this.debug(`DataService - response | ${performance.now()-t}ms | ${i}`)}catch(o){this.debug(`DataService - request failed | ${i}`),de.errorOnce(`DataService - request failed | [${o}]`)}this.isLoadingInitialData=!1;const n=this.freshRequests.findIndex(o=>o===i);if(n===-1||this.dispatchOnlyLatest&&n!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${i}`);return}this.freshRequests=this.freshRequests.slice(n+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error")}};D([Js({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],vy.prototype,"dispatchThrottle",2);D([Js({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],vy.prototype,"requestThrottle",2);function Aq(e,t){return i=>Number(e)*(1-i)+Number(t)*i}function _N(e,t){if(typeof e=="string")try{e=gt.fromString(e)}catch{e=gt.fromArray([0,0,0])}if(typeof t=="string")try{t=gt.fromString(t)}catch{t=gt.fromArray([0,0,0])}return i=>gt.mix(e,t,i).toRgbaString()}var nx={};xo(nx,{easeIn:()=>Eq,easeInOut:()=>Tq,easeInOutQuad:()=>Fq,easeInQuad:()=>Iq,easeOut:()=>Hg,easeOutQuad:()=>Lq,inverseEaseOut:()=>jN,linear:()=>WN});var WN=e=>e,Eq=e=>1-Math.cos(e*Math.PI/2),Hg=e=>Math.sin(e*Math.PI/2),Tq=e=>-(Math.cos(e*Math.PI)-1)/2,Iq=e=>e*e,Lq=e=>1-(1-e)**2,Fq=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,jN=e=>2*Math.asin(e)/Math.PI,Mv=.2,Nu=["initial","remove","update","add","trailing","end","none"],Vg={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:Mv,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+Mv,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},UN=(e=>(e.Loop="loop",e.Reverse="reverse",e))(UN||{});function Pq(e){return e.every(t=>t instanceof Kr)}function yy(e){return Pq(e)?{nodes:e,selections:[]}:{nodes:[],selections:e}}function ox(e,t){return e===t?!0:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((i,s)=>ox(i,t[s])):dv(e)&&dv(t)?e.equals(t):fi(e)&&fi(t)?kM(e,t,ox):!1}var YN=class{constructor(e){var i,s,n;this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=e.autoplay??!0,this.ease=e.ease??WN,this.phase=e.phase;const t=e.duration??Vg[this.phase].animationDuration;this.duration=t*e.defaultDuration,this.delay=(e.delay??0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),this.from=e.from,e.skip===!0&&((i=this.onUpdate)==null||i.call(this,e.to,!1,this),(s=this.onStop)==null||s.call(this,this),(n=this.onComplete)==null||n.call(this,this),this.isComplete=!0),e.collapsable!==!1&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){return ox(e.from,e.to)?0:t}play(e=!1){var t,i;this.isPlaying||this.isComplete||(this.isPlaying=!0,(t=this.onPlay)==null||t.call(this,this),this.autoplay&&(this.autoplay=!1,e&&((i=this.onUpdate)==null||i.call(this,this.from,!0,this))))}stop(){var e;this.isPlaying=!1,this.isComplete||(this.isComplete=!0,(e=this.onStop)==null||e.call(this,this))}update(e){var n,o;if(this.isComplete)return e;!this.isPlaying&&this.autoplay&&this.play(!0);const t=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;const i=this.interpolate(this.isReverse?1-this.delta:this.delta);(n=this.onUpdate)==null||n.call(this,i,!1,this);const s=this.delay+this.duration;return this.elapsed>=s?(this.stop(),this.isComplete=!0,(o=this.onComplete)==null||o.call(this,this),e-(s-t)):0}get delta(){return this.ease(Ge(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if(typeof t!="object"||dv(t))return this.interpolateValue(e,t);const i=[];for(const s of Object.keys(t)){const n=this.interpolateValue(e[s],t[s]);n!=null&&i.push([s,n])}return s=>{const n={};for(const[o,r]of i)n[o]=r(s);return n}}interpolateValue(e,t){if(!(e==null||t==null)){if(dv(e))return i=>e[ty](t,i);try{switch(typeof e){case"number":return Aq(e,t);case"string":return _N(e,t);case"boolean":if(e===t)return()=>e;break;case"object":return()=>e}}catch{}throw new Error(`Unable to interpolate values: ${e}, ${t}`)}}},_I=class{constructor(e){this.maxAnimationTime=e,this.debug=at.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(Nu.map(t=>[t,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(Nu[this.currentPhase])??[]}checkOverlappingId(e){e!=null&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${e}`),this.skip())}addAnimation(e){var i;if(e.isComplete)return;if(Nu.indexOf(e.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",e.id),e.stop();return}this.controllers.set(e.id,e),(i=this.phases.get(e.phase))==null||i.push(e)}removeAnimation(e){this.controllers.delete(e.id);const t=this.phases.get(e.phase),i=t==null?void 0:t.indexOf(e);i!=null&&i>=0&&(t==null||t.splice(i,1))}progress(e){if(!this.isReady)return;let t=e===0?.01:e;const i=()=>{const h=Nu[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:h,phaseMeta:Vg[h]}};let{phase:s,phaseControllers:n,phaseMeta:o}=i();const r=()=>Nu[this.currentPhase]==null,a=()=>{for({phase:s,phaseControllers:n,phaseMeta:o}=i();!r()&&n.length===0;)this.currentPhase++,{phase:s,phaseControllers:n,phaseMeta:o}=i(),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:t},n)},c=this.controllers.size;this.debug(`AnimationBatch - ${e}ms; phase ${s} with ${n==null?void 0:n.length} of ${c}`);do{const h=t,d=o.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0;let p=0;for(const f of n)d?f.stop():t=Math.min(f.update(h),t),f.isComplete&&(p++,this.removeAnimation(f));this.animationTimeConsumed+=h-t,this.debug(`AnimationBatch - updated ${n.length} controllers; ${p} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(t>0&&!r());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let e=!0;for(const[,t]of this.controllers)if(t.duration>0&&Vg[t.phase].skipIfNoEarlierAnimations!==!0){e=!1;break}if(!e)for(const[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(e=!0){if(this.skipAnimations===!1&&e===!0){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(const e of this.controllers.values())e.play()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(t){de.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(e){if(e!=null&&this.controllers.has(e)){const t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(const t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){this.stoppedCbs.forEach(e=>e()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}},KN=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.Clickable=41]="Clickable",e[e.Focusable=34]="Focusable",e[e.Keyable=43]="Keyable",e[e.ContextMenuable=36]="ContextMenuable",e[e.AnnotationsMoveable=9]="AnnotationsMoveable",e[e.AnnotationsDraggable=57]="AnnotationsDraggable",e[e.ZoomDraggable=50]="ZoomDraggable",e[e.ZoomClickable=34]="ZoomClickable",e[e.ZoomWheelable=59]="ZoomWheelable",e[e.All=63]="All",e))(KN||{}),$N=class{constructor(){this.stateQueue=34}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}isState(e){return!!(this.stateQueue&-this.stateQueue&e)}};function WI(e){return e==null?!0:!isNaN(e)&&e>=0&&e<=2}var ZN=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.batch=new _I(this.defaultDuration*1.5),this.debug=at.create(!0,"animation"),this.events=new MM,this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(e,t){return this.events.on(e,t)}animate(e){const t=this.batch;try{t.checkOverlappingId(e.id)}catch(a){this.failsafeOnError(a);return}let{id:i}=e;i==null&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const s=this.isSkipped()||e.phase==="none";s&&this.debug("AnimationManager - skipping animation");const{delay:n,duration:o}=e;if(!WI(n))throw new Error(`Animation delay of ${n} is unsupported (${i})`);if(!WI(o))throw new Error(`Animation duration of ${o} is unsupported (${i})`);const r=new YN({...e,id:i,skip:s,autoplay:this.isPlaying?e.autoplay:!1,phase:e.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(r,this.defaultDuration))return this.batch.addAnimation(r),r}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(e=!0){this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=Et().requestAnimationFrame(t=>{e(t).catch(i=>de.error(i))})}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let e;const t=async i=>{const s=()=>{const n=i-(e??i);e=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:n}),this.interactionManager.pushState(2);try{this.batch.progress(n)}catch(o){this.failsafeOnError(o)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:n})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(s):await this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(e,t=!0){de.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.destroy(),this.batch=new _I(this.defaultDuration*1.5),e===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},qN=class extends dl{seriesEvent(e){this.listeners.dispatch(e,{type:e})}seriesKeyNavZoom(e,t){const i={type:"series-keynav-zoom",delta:e,widgetEvent:t};this.listeners.dispatch("series-keynav-zoom",i)}legendItemClick(e,t,i,s,n){const o={type:"legend-item-click",legendType:e,series:t,itemId:i,enabled:s,legendItemName:n};this.listeners.dispatch("legend-item-click",o)}legendItemDoubleClick(e,t,i,s,n,o){const r={type:"legend-item-double-click",legendType:e,series:t,itemId:i,enabled:s,legendItemName:o,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",r)}},XN=class{constructor(){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new Xr}static check(e,t){return t.type===e}static checkCallback(e,t,i){return e===t}dispatchContext(e,t,i,s){const{sourceEvent:n}=t;if(n.defaultPrevented)return;const o=(s==null?void 0:s.x)??t.canvasX,r=(s==null?void 0:s.y)??t.canvasY,a={type:e,x:o,y:r,context:i,sourceEvent:n};this.listeners.dispatch("",a)}addListener(e){return this.listeners.addListener("",e)}filterActions(e){return this.defaultActions.filter(t=>t.id!=null&&!this.hiddenActions.has(t.id)&&["all",e].includes(t.type))}registerDefaultAction(e){const t=e.id!=null&&!this.defaultActions.some(({id:i})=>i===e.id);return t&&this.defaultActions.push(e),()=>{const i=t?this.defaultActions.findIndex(({id:s})=>s===e.id):-1;i!==-1&&this.defaultActions.splice(i,1)}}enableAction(e){this.disabledActions.delete(e)}disableAction(e){this.disabledActions.add(e)}showAction(e){this.hiddenActions.add(e)}hideAction(e){this.hiddenActions.delete(e)}isDisabled(e){return this.disabledActions.has(e)}},QN=class extends dl{constructor(){super(...arguments),this.highlightStates=new oh}updateHighlight(e,t){const{activeHighlight:i}=this;this.highlightStates.set(e,t),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i,callerId:e})}getActiveHighlight(){return this.activeHighlight}isEqual(e,t){return e===t||e!=null&&t!=null&&(e==null?void 0:e.series)===(t==null?void 0:t.series)&&(e==null?void 0:e.itemId)===(t==null?void 0:t.itemId)&&(e==null?void 0:e.datum)===(t==null?void 0:t.datum)}};function jI(e,t){if(e==null||t.length===0)return[!1,!1];const i=e.valueOf(),s=t[0],n=t[t.length-1];if(typeof s=="string")return[i===s,i===n];let o=s.valueOf(),r=n.valueOf();return o>r&&([o,r]=[r,o]),[i===o,i===r]}function Za(e,t,i,s,n){const{xValue:o,yValue:r}=e,[a,c]=jI(r,n),[h,d]=jI(o,s);return{xKey:t,yKey:i,xValue:o,yValue:r,first:h,last:d,min:a,max:c}}function JN(e,[t,i],s){const n=Nk(0,e-1,r=>{var c;const a=((c=s(r))==null?void 0:c[1])??NaN;return!Number.isFinite(a)||a>t})??0;let o=kk(0,e-1,r=>{var c;const a=((c=s(r))==null?void 0:c[0])??NaN;return!Number.isFinite(a)||a<i})??e-1;return o=Math.min(o+1,e),[n,o]}function l0(e,t,i){var n,o;if(i){const{x:r,y:a,width:c,height:h}=i;return{canvasX:r+c/2,canvasY:a+h/2}}const s=((n=t.yBar)==null?void 0:n.upperPoint)??t.midPoint??((o=e.datumMidPoint)==null?void 0:o.call(e,t));if(s){const{x:r,y:a}=ri.toCanvasPoint(e.contentGroup,s.x,s.y);return{canvasX:Math.round(r),canvasY:Math.round(a)}}}function eO(e,t,i,s,n){let o=-1,r=0,a=0,c=!1;for(;r<s&&o<=t-e;){o+=1;const h=i+a;if(c||(a*=-1),a>=0&&(a+=1),c&&a<0&&(a-=1),h<e||h>t){c=!0;continue}n(h)&&(r+=1)}return r}var Dv=class{constructor(e,t,i){this.domManager=t,this.tooltip=i,this.stateTracker=new oh,this.suppressState=new oh(!1),this.appliedState=null,this.destroyFns=[],this.destroyFns.push(i.setup(e,t),t.addListener("hidden",()=>this.tooltip.hide()))}destroy(){this.destroyFns.forEach(e=>e())}updateTooltip(e,t,i,s){var n;i??(i=(n=this.stateTracker.get(e))==null?void 0:n.content),this.stateTracker.set(e,{meta:t,content:i,pagination:s}),this.applyStates()}removeTooltip(e){this.stateTracker.delete(e),this.applyStates()}suppressTooltip(e){this.suppressState.set(e,!0)}unsuppressTooltip(e){this.suppressState.delete(e)}applyStates(){var n;const e=this.stateTracker.stateId(),t=e?this.stateTracker.get(e):void 0;if(this.suppressState.stateValue()||(t==null?void 0:t.meta)==null||(t==null?void 0:t.content)==null){this.appliedState=null,this.tooltip.hide();return}const i=this.domManager.getBoundingClientRect(),s=this.tooltip.bounds==="extended"?this.domManager.getOverlayClientRect():i;if(((n=this.appliedState)==null?void 0:n.content)===(t==null?void 0:t.content)){const o=this.tooltip.isVisible();this.tooltip.show(s,i,t==null?void 0:t.meta,null,void 0,o)}else this.tooltip.show(s,i,t==null?void 0:t.meta,t==null?void 0:t.content,t==null?void 0:t.pagination);this.appliedState=t}static makeTooltipMeta(e,t,i,s){var b;const{canvasX:n,canvasY:o}=e,r=t.properties.tooltip,{placement:a,defaultPlacement:c,anchorTo:h,defaultAnchorTo:d,xOffset:p,yOffset:f}=r.position,v=l0(t,i,s);return{canvasX:n,canvasY:o,nodeCanvasX:(v==null?void 0:v.canvasX)??n,nodeCanvasY:(v==null?void 0:v.canvasY)??o,enableInteraction:((b=r.interaction)==null?void 0:b.enabled)??!1,showArrow:r.showArrow,position:{placement:a,defaultPlacement:c,anchorTo:h,defaultAnchorTo:d,xOffset:p,yOffset:f}}}isEnteringInteractiveTooltip(e){const{tooltip:t}=this,i=e.relatedTarget;return t.interactive&&t.enabled&&t.isVisible()&&t.contains(i)}},UI=3,kq=505,YI=30;function Jb(e,t,i){const{offsetX:s,offsetY:n,clientX:o,clientY:r,currentX:a,currentY:c,sourceEvent:h}=i;return{type:t,device:e,offsetX:s,offsetY:n,clientX:o,clientY:r,currentX:a,currentY:c,sourceEvent:h}}function KI(e,t){const i=e*e+t*t,s=UI*UI;return i>=s}function Nq(e,t){const i=e.clientX-t.clientX,s=e.clientY-t.clientY,n=i*i+s*s,o=YI*YI;return n<o}var tO=class{constructor(e){this.destroyFns=[],this.listeners=new Xr,this.isDragging=!1,this.touch={distanceTravelledX:0,distanceTravelledY:0,clientX:0,clientY:0},this.destroyFns.push(e.addListener("touchstart",this.onTouchStart.bind(this)),e.addListener("touchmove",this.onTouchMove.bind(this)),e.addListener("touchend",this.onTouchEnd.bind(this)),e.addListener("mousemove",this.onMouseMove.bind(this)),e.addListener("dblclick",this.onDblClick.bind(this)),e.addListener("drag-start",this.onDragStart.bind(this)),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",this.onDragEnd.bind(this)))}destroy(){this.destroyFns.forEach(e=>e()),this.listeners.destroy()}addListener(e,t){return this.listeners.addListener(e,t)}dispatch(e){this.listeners.dispatch(e.type,e)}onTouchStart(e){const{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX=0,this.touch.distanceTravelledY=0,this.touch.clientX=t,this.touch.clientY=i}onTouchMove(e){const{clientX:t,clientY:i}=e.sourceEvent.targetTouches[0]??{clientX:1/0,clientY:1/0};this.touch.distanceTravelledX+=Math.abs(this.touch.clientX-t),this.touch.distanceTravelledY+=Math.abs(this.touch.clientY-i),this.touch.clientX=t,this.touch.clientY=i}onTouchEnd(e){e.sourceEvent.preventDefault()}onMouseMove(e){this.dispatch(e)}onDblClick(e){this.dispatch({device:"mouse",...e})}onDragStart(e){this.dragStartEvent=e}onDragMove(e){this.dragStartEvent!=null&&KI(e.originDeltaX,e.originDeltaY)&&(this.dispatch(this.dragStartEvent),this.dispatch({...this.dragStartEvent,type:"drag-move"}),this.dragStartEvent=void 0,this.isDragging=!0),this.isDragging&&this.dispatch(e)}onDragEnd(e){if(this.isDragging){this.dispatch(e),this.isDragging=!1;return}if(e.device==="mouse"){const t=Jb("mouse","click",e);this.dispatch(t)}else if(e.sourceEvent.type==="touchend"){if(KI(this.touch.distanceTravelledX,this.touch.distanceTravelledY))return;const t=Jb("touch","click",e);this.dispatch(t);const i=Date.now();if(this.lastClick!==void 0&&i-this.lastClick.time<=kq&&Nq(this.lastClick,e)){const s=Jb(e.device,"dblclick",e);this.dispatch(s),this.lastClick=void 0}else this.lastClick={time:i,clientX:e.clientX,clientY:e.clientY}}}},ew=class extends rh{constructor(e){super(e)}addChildToDOM(){}removeChildFromDOM(){}},Oq=class{constructor(e){this.seriesWidget=new ew(e.getParent("series-area")),this.chartWidget=new ew(e.getParent("canvas-proxy")),this.containerWidget=new ew(e.getParent("canvas-container")),this.containerWidget.addChild(this.chartWidget),this.chartWidget.addChild(this.seriesWidget),this.seriesDragInterpreter=new tO(this.seriesWidget)}destroy(){this.seriesDragInterpreter.destroy(),this.seriesWidget.destroy(),this.chartWidget.destroy(),this.containerWidget.destroy()}};function rx(e,t){const[i,s]=xi(t);return Ge(i,e,s)}function xi(e){if(e.length===0)return[];const t=[1/0,-1/0];for(const i of e)i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i);return t}function ah(e){const[t,i]=xi(e);return i-t}var iO=class sO extends oy{constructor(t=[],i=[]){super(),this.domain=t,this.range=i,this.defaultClamp=!1}static is(t){return t instanceof sO}normalizeDomains(...t){let i,s=1/0,n,o=-1/0;for(const r of t)for(const a of r){const c=a.valueOf();c<s&&(s=c,i=a),c>o&&(o=c,n=a)}return i!=null&&n!=null?{domain:[i,n],animatable:!0}:{domain:[],animatable:!1}}transform(t){return t}transformInvert(t){return t}calcBandwidth(t=1){const{domain:i}=this,s=this.getPixelRange();if(i.length===0)return s;const n=Math.abs(i[1].valueOf()-i[0].valueOf())/t+1,o=Math.floor(s),r=Math.min(n,o);return s/Math.max(1,r)}convert(t,i=this.defaultClamp){const{domain:s}=this;if(!s||s.length<2)return NaN;const n=Number(this.transform(s[0])),o=Number(this.transform(s[1])),r=Number(this.transform(t)),{range:a}=this,[c,h]=a;if(i){const[d,p]=xi([n,o]);if(r<d)return c;if(r>p)return h}return n===o?(c+h)/2:r===n?c:r===o?h:c+(r-n)/(o-n)*(h-c)}invert(t,i){const s=this.domain.map(d=>this.transform(d)),[n,o]=s,{range:r}=this,[a,c]=r;let h;return a===c?h=this.toDomain((Number(n)+Number(o))/2):h=this.toDomain(Number(n)+(t-a)/(c-a)*(Number(o)-Number(n))),this.transformInvert(h)}getPixelRange(){const[t,i]=this.range;return Math.abs(i-t)}};iO.defaultTickCount=5;var Ct=iO;function nO(e,t){return e.valueOf()-t.valueOf()}function Gq(e){let t=NaN;const i=[];for(const s of e){const n=s.valueOf();t!==n&&i.push(s),t=n}return i}function ax(e){const t=e.slice().sort(nO);return c0(t)==null?Gq(t):t}function c0(e){if(e.length===0)return 1;const t=Number(e[e.length-1])>Number(e[0])?1:-1;let i=-1/0*t;for(const s of e){const n=s.valueOf();if(Math.sign(n-i)!==t)return;i=n}return t}var Sm={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function u0(e,t=new Date(e.getFullYear(),0,1)){const i=e.getTimezoneOffset()-t.getTimezoneOffset(),s=e.getTime()-t.getTime()+i*6e4,n=36e5*24;return Math.floor(s/n)}function $I(e,t){const s=new Date(e.getFullYear(),0,1).getDay(),n=(t-s+7)%7,o=new Date(e.getFullYear(),0,n+1);return o<=e?Math.floor(u0(e,o)/7)+1:0}var Bq=0,oO=1,ZI=4;function rO(e,t=e.getFullYear()){const s=new Date(t,0,1).getDay(),n=(ZI-s+7)%7,o=new Date(t,0,n-(ZI-oO)+1);return o<=e?Math.floor(u0(e,o)/7)+1:rO(e,t-1)}function zq(e){const t=e.getTimezoneOffset(),i=Math.abs(t);return`${t>0?"-":"+"}${us(Math.floor(i/60),2,"0")}${us(Math.floor(i%60),2,"0")}`}var Hq={a:e=>Sm.shortDays[e.getDay()],A:e=>Sm.days[e.getDay()],b:e=>Sm.shortMonths[e.getMonth()],B:e=>Sm.months[e.getMonth()],c:"%x, %X",d:(e,t)=>us(e.getDate(),2,t??"0"),e:"%_d",f:(e,t)=>us(e.getMilliseconds()*1e3,6,t??"0"),H:(e,t)=>us(e.getHours(),2,t??"0"),I:(e,t)=>{const i=e.getHours()%12;return i===0?"12":us(i,2,t??"0")},j:(e,t)=>us(u0(e)+1,3,t??"0"),m:(e,t)=>us(e.getMonth()+1,2,t??"0"),M:(e,t)=>us(e.getMinutes(),2,t??"0"),L:(e,t)=>us(e.getMilliseconds(),3,t??"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>us(e.getSeconds(),2,t??"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>us($I(e,Bq),2,t??"0"),V:(e,t)=>us(rO(e),2,t??"0"),w:(e,t)=>us(e.getDay(),2,t??"0"),W:(e,t)=>us($I(e,oO),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>us(e.getFullYear()%100,2,t??"0"),Y:(e,t)=>us(e.getFullYear(),4,t??"0"),Z:e=>zq(e),"%":()=>"%"},Vq={_:" ",0:"0","-":""};function us(e,t,i){const s=String(Math.floor(e));return s.length>=t?s:`${i.repeat(t-s.length)}${s}`}function Cp(e){const t=[];for(;e.length>0;){let i=e.indexOf("%");if(i!==0){const a=i>0?e.substring(0,i):e;t.push(a)}if(i<0)break;const s=e[i+1],n=Vq[s];n!=null&&i++;const o=e[i+1],r=Hq[o];if(typeof r=="function")t.push([r,n]);else if(typeof r=="string"){const a=Cp(r);t.push([a,n])}else t.push(`${n??""}${o}`);e=e.substring(i+2)}return i=>{const s=typeof i=="number"?new Date(i):i;return t.map(n=>typeof n=="string"?n:n[0](s,n[1])).join("")}}var _q={};xo(_q,{TimeInterval:()=>Ac,day:()=>Rv,friday:()=>sX,hour:()=>Wu,millisecond:()=>aO,minute:()=>_u,monday:()=>Jq,month:()=>oc,saturday:()=>nX,second:()=>Vu,sunday:()=>Cg,thursday:()=>iX,tuesday:()=>eX,utcDay:()=>vX,utcHour:()=>pX,utcMinute:()=>hX,utcMonth:()=>SX,utcYear:()=>xX,wednesday:()=>tX,year:()=>Cy});var Ac=class{constructor(e,t,i){this._encode=e,this._decode=t,this._rangeCallback=i}floor(e){const t=new Date(e),i=this._encode(t);return this._decode(i)}ceil(e){const t=new Date(Number(e)-1),i=this._encode(t);return this._decode(i+1)}range(e,t,{extend:i=!1,visibleRange:s=[0,1]}={}){var f;let n=!1;e.getTime()>t.getTime()&&([e,t]=[t,e],n=!0);const o=(f=this._rangeCallback)==null?void 0:f.call(this,e,t),r=this._encode(i?this.floor(e):this.ceil(e)),a=this._encode(i?this.ceil(t):this.floor(t));if(a<r)return[];const c=a-r;let h,d;n?(h=Math.ceil(r+(1-s[1])*c),d=Math.floor(r+(1-s[0])*c)):(h=Math.floor(r+s[0]*c),d=Math.ceil(r+s[1]*c));const p=[];for(let v=h;v<=d;v+=1){const y=this._decode(v);p.push(y)}return o==null||o(),p}},bn=class extends Ac{getOffset(e,t){return Math.floor(this._encode(new Date(e)))%t}every(e,t){let i=0,s;const n=e;e=Math.max(1,Math.round(e)),n!==e&&de.warnOnce(`interval step of [${n}] rounded to [${e}].`);const{snapTo:o="start"}=t??{};if(typeof o=="string"){const c=i;s=(h,d)=>{const p=o==="start"?h:d;return i=this.getOffset(p,e),()=>i=c}}else typeof o=="number"?i=this.getOffset(new Date(o),e):o instanceof Date&&(i=this.getOffset(o,e));const r=c=>Math.floor((this._encode(c)-i)/e),a=c=>this._decode(c*e+i);return new Ac(r,a,s)}};function Wq(e){return e.getTime()}function jq(e){return new Date(e)}var aO=new bn(Wq,jq),_a=1e3,ds=_a*60,ks=ds*60,Kn=ks*24,kr=Kn*7,Jd=Kn*30,lh=Kn*365,lO=new Date().getTimezoneOffset()*ds;function Uq(e){return Math.floor((e.getTime()-lO)/_a)}function Yq(e){return new Date(lO+e*_a)}var Vu=new bn(Uq,Yq),cO=new Date().getTimezoneOffset()*ds;function Kq(e){return Math.floor((e.getTime()-cO)/ds)}function $q(e){return new Date(cO+e*ds)}var _u=new bn(Kq,$q),uO=new Date().getTimezoneOffset()*ds;function Zq(e){return Math.floor((e.getTime()-uO)/ks)}function qq(e){return new Date(uO+e*ks)}var Wu=new bn(Zq,qq);function Xq(e){const t=e.getTimezoneOffset()*ds;return Math.floor((e.getTime()-t)/Kn)}function Qq(e){const t=new Date(1970,0,1);return t.setDate(t.getDate()+e),t}var Rv=new bn(Xq,Qq);function kc(e){const i=(7+e-4)%7;function s(o){const r=o.getTimezoneOffset()*ds;return Math.floor((o.getTime()-r)/kr-i/7)}function n(o){const r=new Date(1970,0,1);return r.setDate(r.getDate()+o*7+i),r}return new bn(s,n)}var Cg=kc(0),Jq=kc(1),eX=kc(2),tX=kc(3),iX=kc(4),sX=kc(5),nX=kc(6);function oX(e){return e.getFullYear()*12+e.getMonth()}function rX(e){const t=Math.floor(e/12),i=e-t*12;return new Date(t,i,1)}var oc=new bn(oX,rX);function aX(e){return e.getFullYear()}function lX(e){const t=new Date;return t.setFullYear(e),t.setMonth(0,1),t.setHours(0,0,0,0),t}var Cy=new bn(aX,lX);function cX(e){return Math.floor(e.getTime()/ds)}function uX(e){return new Date(e*ds)}var hX=new bn(cX,uX);function dX(e){return Math.floor(e.getTime()/ks)}function gX(e){return new Date(e*ks)}var pX=new bn(dX,gX);function fX(e){return Math.floor(e.getTime()/Kn)}function mX(e){const t=new Date(0);return t.setUTCDate(t.getUTCDate()+e),t.setUTCHours(0,0,0,0),t}var vX=new bn(fX,mX);function yX(e){return e.getUTCFullYear()*12+e.getUTCMonth()}function CX(e){const t=Math.floor(e/12),i=e-t*12;return new Date(Date.UTC(t,i,1))}var SX=new bn(yX,CX);function bX(e){return e.getUTCFullYear()}function wX(e){const t=new Date;return t.setUTCFullYear(e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t}var xX=new bn(bX,wX);function Ss(e){return e instanceof Date?e.getTime():e}function h0(e,t,i){const s=hO(e,t,i),n=Cp(s);return o=>n(o)}function hO(e,t,i=0){let s=1/0;for(let d=1;d<e.length;d++)s=Math.min(s,Math.abs(e[d].valueOf()-e[d-1].valueOf()));const[n,o]=t.length===0?[0,0]:xi([t[0].valueOf(),t[t.length-1].valueOf()]),r=new Date(n).getFullYear(),c=new Date(o).getFullYear()-r>0,h=isFinite(s)?MX(s,e):DX(e[0]);return AX(Math.max(h-i,0),c,e)}function MX(e,t){return e<_a?0:e<ds?1:e<ks?2:e<Kn?3:e<kr?4:e<Kn*28||e<Kn*31&&RX(t)?5:e<lh?6:7}function DX(e){return Vu.floor(e)<e?0:_u.floor(e)<e?1:Wu.floor(e)<e?2:Rv.floor(e)<e?3:oc.floor(e)<e?Cg.floor(e)<e?4:5:Cy.floor(e)<e?6:7}function RX(e){let t=new Date(e[0]).getMonth();for(let i=1;i<e.length;i++){const s=new Date(e[i]).getMonth();if(t===s)return!0;t=s}return!1}function AX(e,t,i){const s=Ss(i[0]),n=Ss(i.at(-1)),o=Math.abs(n-s),r=t||e===7,a=o===0,h=[["hour",6*ks,14*Kn,3,"%I %p"],["hour",ds,6*ks,3,"%I:%M"],["second",1e3,6*ks,1,":%S"],["ms",0,6*ks,0,".%L"],["am/pm",ds,6*ks,3,"%p"]," ",["day",Kn,kr,4,"%a"],["month",a?0:kr,52*kr,5,"%b %d"],["month",5*kr,10*lh,6,"%B"]," ",["year",r?0:lh,1/0,7,"%Y"]].filter(f=>{if(typeof f=="string")return!0;const[v,y,b,w]=f;return w>=e&&y<=o&&o<b}).reduce((f,v)=>(typeof v=="string"?f.result.push(v):f.used.has(v[0])||(f.result.push(v),f.used.add(v[0])),f),{result:[],used:new Set}).result,d=h.findIndex(f=>typeof f!="string"),p=h.findLastIndex(f=>typeof f!="string");return h.slice(d,p+1).map(f=>typeof f=="string"?f:f[4]).join("").replaceAll(/\s+/g," ").trim()}function dO(e,t,i){if(i==null||i[0]===0&&i[1]===1)return e;const s=Ge(0,Math.floor(i[0]*e.length),e.length),n=Ge(0,Math.ceil(i[1]*e.length),e.length),o=t?e.length-n:s,r=t?e.length-s:n;return e.slice(o,r)}var Sy=class gO extends oy{constructor(){super(...arguments),this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof gO}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=Ge(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this.invalid=!0,this._paddingInner=Ge(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this.invalid=!0,this._paddingOuter=Ge(0,t,1)}get paddingOuter(){return this._paddingOuter}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&de.warnOnce("Expected update to not invalidate scale"))}ticks(t,i=this.domain,s){return dO(i,!1,s)}convert(t,i){this.refresh();const s=this.getIndex(t);return s==null||s<0||s>=this.domain.length?NaN:this.ordinalRange(s)}invertNearestIndex(t){this.refresh();const{domain:i}=this;if(i.length===0)return-1;let s=0,n=i.length-1,o=1/0,r=0;for(;s<=n;){const a=(n+s)/2|0,c=this.ordinalRange(a),h=Math.abs(c-t);if(h===0)return a;h<o&&(o=h,r=a),c<t?s=a+1:n=a-1}return r}update(){const t=this.domain.length;if(t===0)return;const[i,s]=this.range;let{_paddingInner:n}=this;const{_paddingOuter:o,round:r}=this,a=s-i;let c;t===1?(n=0,c=a*(1-o*2)):c=a/Math.max(1,t-n+o*2);const h=r?Math.floor(c):c;let d=i+(a-h*(t-n))/2,p=h*(1-n);r&&(d=Math.round(d),p=Math.round(p)),this._step=h,this._inset=d,this._bandwidth=p,this._rawBandwidth=c*(1-n)}ordinalRange(t){const{_inset:i,_step:s,range:n}=this,o=Math.min(n[0],n[1]),r=Math.max(n[0],n[1]);return Ge(o,i+s*t,r)}};D([xh],Sy.prototype,"range",2);D([xh],Sy.prototype,"round",2);D([xh],Sy.prototype,"interval",2);var Sp=Sy,Xt=(e,t,i)=>({duration:t*i,timeInterval:e,step:i}),rg=[Xt(Vu,_a,1),Xt(Vu,_a,5),Xt(Vu,_a,15),Xt(Vu,_a,30),Xt(_u,ds,1),Xt(_u,ds,5),Xt(_u,ds,15),Xt(_u,ds,30),Xt(Wu,ks,1),Xt(Wu,ks,3),Xt(Wu,ks,6),Xt(Wu,ks,12),Xt(Rv,Kn,1),Xt(Rv,Kn,2),Xt(Cg,kr,1),Xt(Cg,kr,2),Xt(Cg,kr,3),Xt(oc,Jd,1),Xt(oc,Jd,2),Xt(oc,Jd,3),Xt(oc,Jd,4),Xt(oc,Jd,6),Xt(Cy,lh,1)],pO=[1,2,5,10];function qI(e,t){return Math.abs(Math.round(e)-e)<t}function d0(e,t,i,s,n,o){if(i<2)return[e,t];const r=_g(e,t,i,s,n);if(!Number.isFinite(r))return[];if(qI(e/r,1e-12)||(e=Math.ceil(e/r)*r),qI(t/r,1e-12)||(t=Math.floor(t/r)*r),o!=null&&o[0]!==0&&o[1]!==1){const a=t-e,c=e+a*o[0],h=t-a*(1-o[1]);return Wg(c-c%r,h+h%r,r)}return Wg(e,t,r)}function fO(e,t,i,s,n,o){const r=o??Math.abs(t-e)/Math.max(i,1);let a=0;for(const f of rg){if(r<=f.duration)break;a++}if(a===0){const f=Math.max(_g(e,t,i,s,n),1);return aO.every(f)}else if(a===rg.length){const f=_g(e/lh,t/lh,i,s,n);return Cy.every(f)}const c=rg[a-1],h=rg[a],{timeInterval:d,step:p}=r-c.duration<h.duration-r?c:h;return d.every(p)}function _g(e,t,i,s=0,n=1/0){if(e===t)return Ge(1,s,n);if(i<1)return NaN;const o=Math.abs(t-e),r=10**Math.floor(Math.log10(o/i));let a=NaN,c=1/0,h=!1;for(const d of pO){const p=Math.ceil(o/(d*r)),f=p>=s&&p<=n;if(h&&!f)continue;const v=Math.abs(p-i);(c>v||h!==f)&&(h||(h=f),c=v,a=d)}return a*r}function XI(e){for(let t=e.length-1;t>=0;t-=1)if(e[t]!=="0")return t+1;return 0}function QI(e,t){const i=zk(t??",f");(i.precision==null||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...e.map(n=>{if(!Number.isFinite(n))return 0;const[o,r]=n.toExponential((i.type?6:12)-1).split(/[.e]/g);return(o!=="1"&&o!=="-1"?1:0)+XI(r)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...e.map(n=>{if(!Number.isFinite(n)||n===0)return 0;const o=Math.floor(Math.log10(Math.abs(n))),r=i.type?6:12,a=n.toExponential(r-1).split(/[.e]/g)[1],c=XI(a);return Math.max(0,c-o)}))));const s=Hk(i);return n=>s(Number(n))}function Wg(e,t,i){if(!Number.isFinite(i)||i<=0)return[];const s=10**LM(i),n=Math.min(e,t),o=Math.max(e,t),r=[];for(let a=0;;a+=1){const c=Math.round((n+i*a)*s)/s;if(c>o)break;r.push(c)}return r}function ch(e,t){return e>=t?(de.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}function EX(e,t){const i=Math.abs(t-e),s=10**Math.floor(Math.log10(i));let n=1/0,o=[e,t];for(const r of pO){const a=r*s,c=Math.floor(e/a)*a,h=Math.ceil(t/a)*a,d=1-i/Math.abs(h-c);n>d&&(n=d,o=[c,h])}return o}function mO(e,t,i,s,n,o){if(e<=0)return{minTickCount:0,maxTickCount:0,tickCount:0};o=Math.max(o,e/(n+1)),i??(i=o),s??(s=e),i>s&&(i===o?i=s:s=i);const r=Math.max(1,Math.floor(e/(t*i))),a=Math.min(r,Math.ceil(e/(t*s))),c=Ge(a,Math.floor(n/t),r);return{minTickCount:a,maxTickCount:r,tickCount:c}}var vO=class extends Ct{constructor(){super([],[0,1]),this.type="time"}toDomain(e){return new Date(e)}convert(e,t){return e instanceof Date||(e=new Date(e)),super.convert(e,t)}invert(e){return new Date(super.invert(e))}niceDomain(e,t=this.domain){if(t.length<2)return[];let[i,s]=t;const n=4,o=this.getPixelRange();for(let r=0;r<n;r++){const[a,c]=TX(i,s,e,o);if(Ss(i)===Ss(a)&&Ss(s)===Ss(c))break;i=a,s=c}return[i,s]}ticks(e,t=this.domain,i=[0,1]){const{nice:s,interval:n,tickCount:o=Ct.defaultTickCount,minTickCount:r,maxTickCount:a}=e;if(t.length<2)return[];const c=t.map(Ss),h=c[0],d=c[c.length-1];if(n!=null){const p=this.getPixelRange();return g0({start:h,stop:d,interval:n,availableRange:p,visibleRange:i})??JI({start:h,stop:d,tickCount:o,minTickCount:r,maxTickCount:a,visibleRange:i})}else{if(s&&o===2)return t;if(s&&o===1)return t.slice(0,1)}return JI({start:h,stop:d,tickCount:o,minTickCount:r,maxTickCount:a,visibleRange:i})}_tickFormatter({domain:e,ticks:t,specifier:i},s){return i!=null?Cp(i):h0(t,e,s)}tickFormatter(e){return this._tickFormatter(e)}datumFormatter(e){return this._tickFormatter(e,1)}};function JI({start:e,stop:t,tickCount:i,minTickCount:s,maxTickCount:n,visibleRange:o}){const r=fO(e,t,i,s,n);return r?r.range(new Date(e),new Date(t),{visibleRange:o}):[]}function g0({start:e,stop:t,interval:i,availableRange:s,visibleRange:n}){if(!i)return[];if(i instanceof Ac){const d=i.range(new Date(e),new Date(t),{visibleRange:n});return ch(d.length,s)?void 0:d}const o=Math.abs(i);if(ch(Math.abs(t-e)/o,s))return;const r=rg.findLast(d=>o%d.duration===0);if(r)return r.timeInterval.every(o/(r.duration/r.step)).range(new Date(e),new Date(t),{visibleRange:n});let a=new Date(Math.min(e,t));const c=new Date(Math.max(e,t)),h=[];for(;a<=c;)h.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+o);return h}function TX(e,t,i,s){const{interval:n}=i,o=Math.min(Ss(e),Ss(t)),r=Math.max(Ss(e),Ss(t));let a;if(n instanceof Ac)a=n;else{let c;typeof n=="number"&&(c=(r-o)/Math.max(n,1),ch(c,s)&&(c=null)),c??(c=i.tickCount??Ct.defaultTickCount),a=fO(o,r,c,i.minTickCount,i.maxTickCount)}if(a){const c=a.range(new Date(o),new Date(r),{extend:!0});return e>t&&c.reverse(),[c[0],c.at(-1)]}else return[e,t]}var Hr=class yO extends Sp{constructor(){super(...arguments),this.type="ordinal-time",this._domain=[],this.isReversed=!1}static is(t){return t instanceof yO}set domain(t){t!==this._domain&&(this.invalid=!0,this._domain=t,this.isReversed=t.length>0&&t[0]>t[t.length-1],this.sortedTimestamps=void 0,this.precomputedSteps=void 0)}get domain(){return this._domain}toDomain(t){return new Date(t)}normalizeDomains(...t){const i=t.filter(s=>s.length>0);if(i.length===0)return{domain:[],animatable:!1};if(i.length===1){let s=i[0];const n=c0(s);return n===-1?s=s.slice().reverse():n==null&&(s=ax(s.slice())),{domain:s,animatable:!0}}return{domain:ax(i.flat()),animatable:!0}}ticks({interval:t,maxTickCount:i},s=this.domain,n=[0,1]){if(!s.length)return[];this.refresh();const{isReversed:o}=this;if(t==null)return eL(s,i,o,n);const[r,a]=[s[0].valueOf(),s.at(-1).valueOf()],c=Math.min(r,a),h=Math.max(r,a),[d,p]=this.range,f=Math.abs(p-d),v=g0({start:c,stop:h,interval:t,availableRange:f,visibleRange:n})??eL(s,i,o,n);let y=-1;return v.filter(b=>{const w=this.findInterval(b.valueOf()),S=w===y;return y=w,!S})}getSortedTimestamps(){let{sortedTimestamps:t}=this;return t==null&&(t=this.domain.map(Ss),this.isReversed&&t.reverse(),this.sortedTimestamps=t),t}getPrecomputedSteps(){const{domain:t}=this;let{precomputedSteps:i}=this;const s=t.length<1e4?t.length:Math.ceil(t.length/16);if(i!=null||s<=1)return i;const n=this.getSortedTimestamps();i=new Int32Array(s);const o=n[0],a=n[n.length-1]-o,c=0,h=n.length-1;for(let d=0;d<i.length;d+=1)i[d]=this.findIntervalInRange(o+d/s*a,c,h);this.precomputedSteps=i}findIntervalInRange(t,i,s){const n=this.getSortedTimestamps();for(;i<=s;){const o=(i+s)/2|0;if(n[o]===t)return o;n[o]<t?i=o+1:s=o-1}return i}findInterval(t){const i=this.getPrecomputedSteps();let s,n;if(i==null)s=0,n=this.domain.length-1;else{const o=this.getSortedTimestamps(),r=o[0],a=o[o.length-1],c=Math.min((t-r)/(a-r)*i.length|0,i.length-1|0);s=i[c],n=c<i.length-2?i[c+1]:o.length-1}return this.findIntervalInRange(t,s,n)}tickFormatter({domain:t,ticks:i,specifier:s}){return s!=null?Cp(s):h0(i,t)}datumFormatter(t){return this.tickFormatter(t)}invert(t,i=!1){this.refresh();const{domain:s}=this;if(i){const o=this.invertNearestIndex(t-this.bandwidth/2);return o!=null?s[o]:void 0}return M9(0,s.length-1,o=>this.ordinalRange(o)>=t?s[o]:void 0)??s[0]}getIndex(t){const i=this.getSortedTimestamps(),s=Number(t);if(s<i[0])return;let n=this.findInterval(s);return this.isReversed&&(n=this.domain.length-n-1),n}};function eL(e,t,i,s){const n=[],o=Math.ceil(e.length/t),r=Math.floor(o/2),a=Math.floor(s[0]*e.length),c=Math.ceil(s[1]*e.length);for(let h=a;h<c;h+=1){const d=i?e.length-1-h:h;(o<=0||(d+r)%o===0)&&n.push(e[h])}return i&&n.reverse(),n}var jg={bottomCenter:kX,center:PX,clone:BX,collides:zX,end:LX,from:HX,height:OX,round:GX,start:IX,topCenter:FX,origin:VX,width:NX};function IX(e){return{x:e.x1,y:e.y1}}function LX(e){return{x:e.x2,y:e.y2}}function FX(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}}function PX(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}function kX(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}}function NX(e){return Math.abs(e.x2-e.x1)}function OX(e){return Math.abs(e.y2-e.y1)}function GX(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}}function BX(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}function zX(e,t){const i=lx(e),s=lx(t);return i.x1<=s.x2&&i.x2>=s.x1&&i.y1<=s.y2&&i.y2>=s.y1}function lx(e){return{x1:Math.min(e.x1,e.x2),x2:Math.max(e.x1,e.x2),y1:Math.min(e.y1,e.y2),y2:Math.max(e.y1,e.y2)}}function HX(e,t,i,s){if(typeof e=="number")return{x1:e,y1:t,x2:i,y2:s};if("width"in e)return lx({x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height});throw new Error(`Values can not be converted into a vector4: [${JSON.stringify(e)}] [${t}] [${i}] [${s}]`)}function VX(){return{x1:0,y1:0,x2:0,y2:0}}function bm(e,t,i,s,n){return t+(s-t)*((n-e)/(i-e))}function tL(e,t,i,s,n){return e+(n-t)*((i-e)/(s-t))}function iL(e,t,i){return[tL(e,i.min,t,i.max,0),tL(e,i.min,t,i.max,1)]}function _X(e,t,i){const[s,n]=iL(e.x1,e.x2,t),[o,r]=iL(e.y1,e.y2,i);return{x1:s,x2:n,y1:o,y2:r}}function sL(e,t,i,s,n,o){if(i<=n&&o<=s)return i;const r=n-i,a=o-s,c=Math.abs(r)<Math.abs(a)?r:a;return Ge(e,i+c,t)}function WX(e,t,i){const{x:s={min:0,max:1},y:n={min:0,max:1}}=t,o=jg.from(i),r=jg.from(e),a=_X(r,s,n),c=sL(a.x1,a.x2,r.x1,r.x2,o.x1,o.x2),h=sL(a.y1,a.y2,r.y1,r.y2,o.y1,o.y2),d={x:{min:bm(r.x1,s.min,r.x2,s.max,c),max:bm(r.x1,s.min,r.x2,s.max,c+e.width)},y:{min:bm(r.y1,n.min,r.y2,n.max,h),max:bm(r.y1,n.min,r.y2,n.max,h+e.height)}},p=d.x.max-d.x.min,f=d.y.max-d.y.min;return d.x.min=Ge(0,d.x.min,1-p),d.x.max=d.x.min+p,d.y.min=Ge(0,d.y.min,1-f),d.y.max=d.y.min+f,d}var jX=["rangeX","rangeY","ratioX","ratioY","autoScaledAxes"],UX=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},nL=e=>pt((t,{options:i})=>!Ct.is(e==null?void 0:e.scale)&&!Hr.is(e==null?void 0:e.scale)||t==null||i.end==null?!0:t<=i.end,"to be less than end"),CO=class extends dl{constructor(e,t){super(),this.fireChartEvent=e,this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new oh(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new UX,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0,this.destroyFns.push(t.addListener("layout:complete",()=>{const{pendingMemento:i}=this,s=!this.didLayoutAxes;this.didLayoutAxes=!0,i?this.restoreMemento(i.version,i.mementoVersion,i.memento):s&&this.autoScaleYZoom("zoom-manager")}))}createMemento(){return this.getMementoRanges()}guardMemento(e,t){if(e==null)return!0;if(!pi(e))return!1;for(const r of Object.keys(e))if(!jX.includes(r))return!1;const i=this.getPrimaryAxis("x"),s=this.getPrimaryAxis("y"),n={rangeX:{start:hs(ti(Le,Bu),nL(i)),end:ti(Le,Bu)},rangeY:{start:hs(ti(Le,Bu),nL(s)),end:ti(Le,Bu)},ratioX:{start:hs(_t,Ng("end")),end:_t},ratioY:{start:hs(_t,Ng("end")),end:_t},autoScaledAxes:$t(je("y"))},o=lo(e,n);return o.errors.length>0?(t.push(...o.errors.map(r=>r.message)),!1):!0}restoreMemento(e,t,i){var a;const{independentAxes:s}=this;if(!this.axes||!this.didLayoutAxes){this.pendingMemento={version:e,mementoVersion:t,memento:i};return}this.pendingMemento=void 0;const n=this.getDefinedZoom();if(i!=null&&i.rangeX?n.x=this.rangeToRatio(i.rangeX,"x")??{min:0,max:1}:i!=null&&i.ratioX?n.x={min:i.ratioX.start??0,max:i.ratioX.end??1}:n.x={min:0,max:1},!this.navigatorModule||this.zoomModule){let c=(a=i==null?void 0:i.autoScaledAxes)==null?void 0:a.includes("y");i!=null&&i.rangeY?(n.y=this.rangeToRatio(i.rangeY,"y")??{min:0,max:1},c??(c=!1)):i!=null&&i.ratioY?(n.y={min:i.ratioY.start??0,max:i.ratioY.end??1},c??(c=!1)):(n.y={min:0,max:1},c??(c=!0)),n.autoScaleYAxis=c}if(this.lastRestoredState=n,s!==!0){this.updateZoom("zoom-manager",n);return}const o=this.getPrimaryAxis("x"),r=this.getPrimaryAxis("y");for(const c of[o,r])c&&this.updateAxisZoom("zoom-manager",c.id,n[c.direction])}updateAxes(e){this.axes=e;const t=new Map(e.map(i=>[i.id,this.axisZoomManagers.get(i.id)]));this.axisZoomManagers.clear();for(const i of e)this.axisZoomManagers.set(i.id,t.get(i.id)??new YX(i));this.state.size>0&&e.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(e=!0){this.independentAxes=e}setAutoScaleYAxis(e,t){this.autoScaleYAxis.enabled=e,this.autoScaleYAxis.padding=t}setNavigatorEnabled(e=!0){this.navigatorModule=e}setZoomModuleEnabled(e=!0){this.zoomModule=e}isNavigatorEnabled(){return this.navigatorModule}isZoomEnabled(){return this.zoomModule}updateZoom(e,t){if(t!=null&&t.x&&(t.x.min<0||t.x.max>1)&&(de.warnOnce(`Attempted to update x-axis zoom to an invalid ratio of [{ min: ${t.x.min}, max: ${t.x.max} }], expecting a ratio of 0 to 1, ignoring.`),t.x=void 0),t!=null&&t.y&&(t.y.min<0||t.y.max>1)&&(de.warnOnce(`Attempted to update y-axis zoom to an invalid ratio of [{ min: ${t.y.min}, max: ${t.y.max} }], expecting a ratio of 0 to 1, ignoring.`),t.y=void 0),this.axisZoomManagers.size===0){const s=this.state.stateId();(s==="initial"||s===e)&&this.state.set(e,t);return}this.state.set(e,t);const i=t==null?void 0:t.autoScaleYAxis;i!=null&&(this.autoScaleYAxis.manuallyAdjusted=!i),this.axisZoomManagers.forEach(s=>{s.updateZoom(e,t==null?void 0:t[s.getDirection()])}),this.applyChanges(e)}updateAxisZoom(e,t,i){var s;(s=this.axisZoomManagers.get(t))==null||s.updateZoom(e,i),this.applyChanges(e)}resetZoom(e){var i,s,n,o;this.autoScaleYAxis.manuallyAdjusted=!1;const t=this.getRestoredZoom();this.updateZoom(e,{x:{min:((i=t==null?void 0:t.x)==null?void 0:i.min)??0,max:((s=t==null?void 0:t.x)==null?void 0:s.max)??1},y:{min:((n=t==null?void 0:t.y)==null?void 0:n.min)??0,max:((o=t==null?void 0:t.y)==null?void 0:o.max)??1},autoScaleYAxis:(t==null?void 0:t.autoScaleYAxis)??!0})}resetAxisZoom(e,t){const i=this.axisZoomManagers.get(t),s=i==null?void 0:i.getDirection();if(s==null)return;const n=this.getRestoredZoom();if(s==="y"){const o=(n==null?void 0:n.autoScaleYAxis)??!0;this.autoScaleYAxis.manuallyAdjusted=!o}this.updateAxisZoom(e,t,(n==null?void 0:n[s])??{min:0,max:1})}setAxisManuallyAdjusted(e,t){var s;((s=this.axisZoomManagers.get(t))==null?void 0:s.getDirection())==="y"&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(e,t,i){const s=this.getPrimaryAxis(t);s&&this.updateAxisZoom(e,s.id,i)}panToBBox(e,t,i){if(!this.isZoomEnabled()&&!this.isNavigatorEnabled())return!1;const s=this.getZoom();if(s===void 0||!s.x&&!s.y)return!1;if(!(t.width>0&&t.height>0&&Math.abs(i.width)<=Math.abs(t.width)&&Math.abs(i.height)<=Math.abs(t.height)))return de.warnOnce("cannot pan to target BBox - chart too small?"),!1;const o=WX(t,s,i);return this.independentAxes?(this.updatePrimaryAxisZoom(e,"x",o.x),this.updatePrimaryAxisZoom(e,"y",o.y)):this.updateZoom(e,o),!0}fireZoomPanStartEvent(e){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:e})}extendToEnd(e,t,i){return this.extendWith(e,t,s=>Number(s)-i)}extendWith(e,t,i){const s=this.getPrimaryAxis(t);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;const[,o]=n,r=i(o),a=this.rangeToRatio({start:r,end:o},t);a&&this.updateZoom(e,{[t]:a})}updateWith(e,t,i){const s=this.getPrimaryAxis(t);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;let[o,r]=n;[o,r]=i(o,r);const a=this.rangeToRatio({start:o,end:r},t);a&&this.updateZoom(e,{[t]:a})}getZoom(){let e,t;if(this.axisZoomManagers.forEach(i=>{i.getDirection()==="x"?e??(e=i.getZoom()):i.getDirection()==="y"&&(t??(t=i.getZoom()))}),e||t)return{x:e,y:t}}getAxisZoom(e){var t;return((t=this.axisZoomManagers.get(e))==null?void 0:t.getZoom())??{min:0,max:1}}getAxisZooms(){const e={};for(const[t,i]of this.axisZoomManagers.entries())e[t]={direction:i.getDirection(),zoom:i.getZoom()};return e}getRestoredZoom(){return this.lastRestoredState}getPrimaryAxisId(e){var t;return(t=this.getPrimaryAxis(e))==null?void 0:t.id}isVisibleItemsCountAtLeast(e,t){const i=this.getPrimaryAxis("x"),s=this.getPrimaryAxis("y"),n=new Set;let o=0;const r=[e.x.min,e.x.max],a=[e.y.min,e.y.max];for(const c of(i==null?void 0:i.boundSeries)??[]){n.add(c.id);const h=t-(o??0),d=c.getVisibleItems(r,a,h);if(o+=d,o>=t)return!0}for(const c of(s==null?void 0:s.boundSeries)??[]){if(n.has(c.id))continue;const h=t-(o??0),d=c.getVisibleItems(r,a,h);if(o+=d,o>=t)return!0}return n.size===0}getMementoRanges(){const e=this.getDefinedZoom();let t;return this.autoScaleYAxis.enabled&&(t=this.autoScaleYAxis.manuallyAdjusted?[]:["y"]),{rangeX:this.getRangeDirection(e.x,"x"),rangeY:this.getRangeDirection(e.y,"y"),ratioX:{start:e.x.min,end:e.x.max},ratioY:{start:e.y.min,end:e.y.max},autoScaledAxes:t}}autoScaleYZoom(e,t=!0){var a,c;if(!this.isZoomEnabled())return;const{independentAxes:i,autoScaleYAxis:s}=this,n=this.getZoom();if((n==null?void 0:n.x)==null||!s.enabled||s.manuallyAdjusted)return;const{padding:o}=s;let r;if(((a=n.x)==null?void 0:a.min)===0&&((c=n.x)==null?void 0:c.max)===1?r={min:0,max:1}:i?r=this.primaryAxisZoom("y",n.x,{padding:o}):r=this.combinedAxisZoom("y",n.x,{padding:o}),r!=null){if(i){const h=this.getPrimaryAxis("y"),d=h==null?void 0:this.axisZoomManagers.get(h.id);d==null||d.updateZoom("zoom-manager",r)}else for(const h of this.axisZoomManagers.values())h.getDirection()==="y"&&h.updateZoom("zoom-manager",r);t&&this.applyChanges(e)}}applyChanges(e){if(this.autoScaleYZoom(e,!1),!Array.from(this.axisZoomManagers.values(),s=>s.applyChanges()).includes(!0))return;const i={};for(const[s,n]of this.axisZoomManagers.entries())i[s]=n.getZoom();this.listeners.dispatch("zoom-change",{type:"zoom-change",...this.getZoom(),axes:i,callerId:e}),this.fireChartEvent({type:"zoom",...this.getMementoRanges()})}getRangeDirection(e,t){const i=this.getPrimaryAxis(t);if(!i||!Ct.is(i.scale)&&!Hr.is(i.scale))return;const s=this.getDomainPixelExtents(i);if(!s)return;const[n,o]=s;let r,a;return n<=o?(r=i.scale.invert(0),a=i.scale.invert(n+(o-n)*e.max)):(r=i.scale.invert(n-(n-o)*e.min),a=i.scale.invert(0)),{start:r,end:a}}rangeToRatio(e,t){var v,y,b,w,S,M,R,A,T,F,P,N;const i=this.getPrimaryAxis(t);if(!i)return;const s=this.getDomainPixelExtents(i);if(!s)return;const[n,o]=s;let r=e.start==null?n:(y=(v=i.scale).convert)==null?void 0:y.call(v,e.start),a=e.end==null?o:(w=(b=i.scale).convert)==null?void 0:w.call(b,e.end);if(!nt(r)||!nt(a))return;const[c,h]=[Math.min(n,o),Math.max(n,o)];if(r<c||r>h){de.warnOnce(`Invalid range start [${e.start}], expecting a value between [${(M=(S=i.scale).invert)==null?void 0:M.call(S,n)}] and [${(A=(R=i.scale).invert)==null?void 0:A.call(R,o)}], ignoring.`);return}if(a<c||a>h){de.warnOnce(`Invalid range end [${e.end}], expecting a value between [${(F=(T=i.scale).invert)==null?void 0:F.call(T,n)}] and [${(N=(P=i.scale).invert)==null?void 0:N.call(P,o)}], ignoring.`);return}r=Math.min(h,Math.max(c,r)),a=Math.min(h,Math.max(c,a));const d=o-n,p=Math.abs((r-n)/d),f=Math.abs((a-n)/d);return{min:p,max:f}}getPrimaryAxis(e){var t;return(t=this.axes)==null?void 0:t.find(i=>i.direction===e)}getDomainExtents(e){const{domain:t}=e.scale,i=t.at(0),s=t.at(-1);if(!(i==null||s==null))return[i,s]}getDomainPixelExtents(e){var n,o,r,a;const{domain:t}=e.scale,i=(o=(n=e.scale).convert)==null?void 0:o.call(n,t.at(0)),s=(a=(r=e.scale).convert)==null?void 0:a.call(r,t.at(-1));if(!(!nt(i)||!nt(s)))return[i,s]}getDefinedZoom(){var t,i,s,n;const e=this.getZoom();return{x:{min:((t=e==null?void 0:e.x)==null?void 0:t.min)??0,max:((i=e==null?void 0:e.x)==null?void 0:i.max)??1},y:{min:((s=e==null?void 0:e.y)==null?void 0:s.min)??0,max:((n=e==null?void 0:e.y)==null?void 0:n.max)??1}}}zoomBounds(e,t,i,s){const n=e.scale,o=n.range;n.range=[0,1];const r=t.scale,a=r.range;r.range=[0,1];let c=1,h=!1,d=0,p=!1;for(const y of t.boundSeries){const{connectsToYAxis:b}=y,w=y.getRange("y",[i.min,i.max]);for(const S of w){const M=r.convert(S);Number.isFinite(M)&&(M<c&&(c=M,h=!b||S<0),M>d&&(d=M,p=!b||S>0))}}if(nt(t.min)&&(c=0),nt(t.max)&&(d=1),n.range=o,r.range=a,c>=d)return;const f=(h?s:0)+(p?s:0),v=Math.min((d-c)*(1+f),1);if(!(v<=0)){if(h&&p){const y=(d+c)/2;c=y-v/2,d=y+v/2}else!h&&p?d=c+v:h&&!p&&(c=d-v);return c<0?(d+=-c,c=0):d>1&&(c-=d-1,d=1),{min:c,max:d}}}primaryAxisZoom(e,t,{padding:i=0}={}){const s=e==="x"?"y":"x",n=this.getPrimaryAxis(s),o=this.getPrimaryAxis(e);if(!(n==null||o==null))return this.zoomBounds(n,o,t,i)}combinedAxisZoom(e,t,{padding:i=0}={}){const s=e==="x"?"y":"x",n=new Map;for(const c of this.axes)if(c.direction===s)for(const h of c.boundSeries)n.set(h,c);let o=1,r=0;for(const c of this.axes)if(c.direction===e)for(const h of c.boundSeries){const d=n.get(h);if(d==null)continue;const p=this.zoomBounds(d,c,t,i);if(p==null)return;o=Math.min(o,p.min),r=Math.max(r,p.max)}const a=1e-6;if(o<a&&(o=0),r>1-a&&(r=1),!(o>r))return{min:o,max:r}}},YX=class{constructor(e){this.axis=e;const[t=0,i=1]=e.visibleRange;this.state=new oh({min:t,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(e,t){this.state.set(e,t)}getZoom(){return zt(this.state.stateValue())}hasChanges(){const e=this.currentZoom,t=this.state.stateValue();return e.min!==t.min||e.max!==t.max}applyChanges(){const e=this.hasChanges();return this.currentZoom=this.state.stateValue(),e}};function KX(e,t,i,s,n,o){if(e.size===0)return!1;let r=e.x,a=e.y;t!=null&&(r-=(t.x-.5)*e.size,a-=(t.y-.5)*e.size);let c=r;r<i?c=i:r>i+n&&(c=i+n);let h=a;a<s?h=s:a>s+o&&(h=s+o);const d=r-c,p=a-h;return Math.sqrt(d*d+p*p)<=e.size*.5}function SO(e,t,i,s,n){const o=e.x+e.width>t&&e.x<t+s,r=e.y+e.height>i&&e.y<i+n;return o&&r}function $X(e,t,i,s,n){return t+s<e.x+e.width&&t>e.x&&i>e.y&&i+n<e.y+e.height}function ZX(e){return e!=null&&typeof e.point=="object"&&typeof e.label=="object"}var qX={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function XX(e,t,i=5){var a;const s=new Map,n=[],o=new Map([...e.entries()].map(([c,h])=>[c,h.toSorted((d,p)=>p.point.size-d.point.size)])),r=[...o.values()].flat();for(const[c,h]of o.entries()){const d=[];if((a=h[0])!=null&&a.label){for(let p=0,f=h.length;p<f;p++){const v=h[p],{point:y,label:b,anchor:w}=v,{text:S,width:M,height:R}=b,A=y.size*.5;let T=0,F=0;if(A>0&&v.placement!=null){const se=qX[v.placement];T=(M*.5+A+i)*se.x,F=(R*.5+A+i)*se.y}const P=y.x-M*.5+T-(((w==null?void 0:w.x)??.5)-.5)*y.size,N=y.y-R*.5+F-(((w==null?void 0:w.y)??.5)-.5)*y.size;if(!(!t||$X(t,P,N,M,R))||r.some(se=>KX(se.point,se.anchor,P,N,M,R))||n.some(se=>SO(se,P,N,M,R)))continue;const U={index:p,text:S,x:P,y:N,width:M,height:R,datum:v};d.push(U),n.push(U)}s.set(c,d)}}return s}function QX(e,t=0){const i=[];for(let s=0;s<e.length;s++){const n=e[s],{point:{x:o,y:r},label:{text:a}}=n;let{width:c,height:h}=n.label;if(c+=t,h+=t,i.some(d=>SO(d,o,r,c,h)))return!0;i.push({index:s,text:a,x:o,y:r,width:c,height:h,datum:n})}return!1}var JX=class{constructor(){this.labelData=new Map}updateLabels(e,t,i=Me.zero){var r;const s={x:-t.left,y:-t.top,width:i.width+t.left+t.right,height:i.height+t.top+t.bottom},n=new Set(e.map(a=>a.id));for(const a of this.labelData.keys())n.has(a)||this.labelData.delete(a);for(const a of e){const c=a.getLabelData();c.every(ZX)&&this.labelData.set(a.id,c)}const o=XX(this.labelData,s,5);for(const a of e)(r=a.updatePlacedLabelData)==null||r.call(a,o.get(a.id)??[])}},eQ=class extends dl{constructor(){super(...arguments),this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(({hideInLegend:e,isFixed:t})=>!e&&!t).map(({enabled:e,seriesId:t,itemId:i,legendItemName:s})=>({visible:e,seriesId:t,itemId:i,legendItemName:s}))}guardMemento(e){return e==null||Ue(e)}restoreMemento(e,t,i){i==null||i.forEach(s=>{const{seriesId:n,data:o}=this.getRestoredData(s)??{};!n||!o||this.updateData(n,o)}),this.update()}getRestoredData(e){const{seriesId:t,itemId:i,legendItemName:s,visible:n}=e;if(t){const r=(this.legendDataMap.get(t)??[]).map(a=>{const c=a.seriesId===t&&(!i||a.itemId===i);return c&&a.isFixed&&this.warnFixed(a.seriesId,a.itemId),!a.isFixed&&c?{...a,enabled:n}:a});return{seriesId:t,data:r}}if(!(i==null&&s==null))for(const o of this.getData()){if(i!=null&&o.itemId!==i||s!=null&&o.legendItemName!==s)continue;if(o.isFixed){this.warnFixed(o.seriesId,i);return}const r=(this.legendDataMap.get(o.seriesId)??[]).map(a=>a.itemId===i||a.legendItemName===s?{...a,enabled:n}:a);return{seriesId:o.seriesId,data:r}}}warnFixed(e,t){de.warnOnce(`The legend item with seriesId [${e}] and itemId [${t}] is not configurable, this series item cannot be toggled through the legend.`)}update(e){this.listeners.dispatch("legend-change",{type:"legend-change",legendData:e??this.getData()})}updateData(e,t=[]){this.legendDataMap.set(e,t)}clearData(){this.legendDataMap.clear()}toggleItem(e,t,i,s){if(s){this.getData().forEach(a=>{const c=(this.legendDataMap.get(a.seriesId)??[]).map(h=>h.legendItemName===s?{...h,enabled:e}:h);this.updateData(a.seriesId,c)});return}const n=this.getData(t),o=n.length===1,r=n.map(a=>i==null&&o||a.itemId===i?{...a,enabled:e}:a);this.updateData(t,r)}getData(e){return e?this.legendDataMap.get(e)??[]:[...this.legendDataMap].reduce((t,[i,s])=>t.concat(s),[])}getDatum({seriesId:e,itemId:t}={}){return this.getData(e).find(i=>i.itemId===t)}getSeriesEnabled(e){const t=this.getData(e);if(t.length>0)return t.some(i=>i.enabled)}getItemEnabled({seriesId:e,itemId:t}={}){var i;return((i=this.getDatum({seriesId:e,itemId:t}))==null?void 0:i.enabled)??!0}},tQ=class{constructor(){this.groups={}}registerSeries({internalId:e,seriesGrouping:t,visible:i,type:s}){var n;t&&((n=this.groups)[s]??(n[s]={}),this.groups[s][e]={grouping:t,visible:i})}updateSeries({internalId:e,seriesGrouping:t,visible:i,type:s}){var o;if(!t)return;const n=(o=this.groups[s])==null?void 0:o[e];n&&(n.grouping=t,n.visible=i)}deregisterSeries({internalId:e,type:t}){this.groups[t]&&delete this.groups[t][e],this.groups[t]&&Object.keys(this.groups[t]).length===0&&delete this.groups[t]}getVisiblePeerGroupIndex({type:e,seriesGrouping:t,visible:i}){if(!t)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const s=new Set,n=new Set;for(const r of Object.values(this.groups[e]??{}))r.visible&&(s.add(r.grouping.groupIndex),r.grouping.groupIndex===t.groupIndex&&n.add(r.grouping.stackIndex));const o=Array.from(s);return o.sort((r,a)=>r-a),{visibleGroupCount:o.length,visibleSameStackCount:n.size,index:o.indexOf(t.groupIndex)}}},Sg=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=4]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=5]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=6]="SCENE_RENDER",e[e.NONE=7]="NONE",e))(Sg||{}),bO=class{constructor(e){this.updateCallback=e,this.events=new MM}addListener(e,t){return this.events.on(e,t)}removeListener(e,t){return this.events.on(e,t)}destroy(){this.events.clear()}update(e=0,t){this.updateCallback(e,t)}dispatchUpdateComplete(){this.events.emit("update-complete",{type:"update-complete"})}dispatchPreDomUpdate(){this.events.emit("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(){this.events.emit("pre-scene-render",{type:"pre-scene-render"})}dispatchProcessData({series:e}){this.events.emit("process-data",{type:"process-data",series:e})}},iQ=class{constructor(e,t){this.callbackCache=new Mq,this.chartEventManager=new qN,this.highlightManager=new QN,this.layoutManager=new DN,this.localeManager=new gq,this.seriesStateManager=new tQ,this.stateManager=new U8,this.seriesLabelLayoutManager=new JX,this.contextModules=[];const{scene:i,root:s,syncManager:n,container:o,fireEvent:r,updateCallback:a,updateMutex:c,styleContainer:h,chartType:d,domMode:p}=t;this.chartService=e,this.syncManager=n,this.domManager=new NN(o,h,p),this.widgets=new Oq(this.domManager);const f=this.domManager.addChild("canvas","scene-canvas",i==null?void 0:i.canvas.element);this.scene=i??new my({canvasElement:f}),this.scene.setRoot(s),this.axisManager=new Rq(s),this.legendManager=new eQ,this.annotationManager=new Dq(e.annotationRoot,r),this.chartTypeOriginator=new W8(e),this.interactionManager=new $N,this.contextMenuRegistry=new XN,this.updateService=new bO(a),this.proxyInteractionService=new zN(this.localeManager,this.domManager),this.historyManager=new j8(this.chartEventManager),this.animationManager=new ZN(this.interactionManager,c),this.dataService=new vy(this.animationManager),this.tooltipManager=new Dv(this.localeManager,this.domManager,e.tooltip),this.zoomManager=new CO(r,this.layoutManager);for(const v of Uo.byType("context")){if(!v.chartTypes.includes(d))continue;const y=v.moduleFactory(this);this.contextModules.push(y),this[v.contextKey]=y}}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.domManager.destroy(),this.highlightManager.destroy(),this.proxyInteractionService.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.widgets.destroy(),this.contextModules.forEach(e=>e.destroy())}},wO=class extends Be{constructor(){super(...arguments),this.range="tooltip"}};D([E(bt(["tooltip","node"],"a range"))],wO.prototype,"range",2);function sQ(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function nQ(e,t){if(e==null||t==null)return e===t;if(e.size!==t.size)return!1;for(const[i,s]of e){const n=t.get(i);if(n==null||!sQ(s,n))return!1}return!0}function oQ(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){const{type:s,idsMap:n,scopes:o,data:r,...a}=e[i],{type:c,idsMap:h,scopes:d,data:p,...f}=t[i];if(s!==c||o&&d&&!jo(o,d)||r&&p&&r!==p||!Qo(a,f)||!nQ(n,h))return!1}return!0}function rQ(e,t){const{props:i,...s}=e,{props:n,...o}=t;return Qo(s,o)&&oQ(i,n)}function aQ(e,t,i,s){return t===e.data&&jo(i,e.ids)&&rQ(s,e.opts)}var oL=class xO{constructor(){this.domain=new Set}static is(t){return t instanceof xO}extend(t){this.domain.add(t)}getDomain(){return Array.from(this.domain)}},Ga=class MO{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof MO}static extendDomain(t,i=[1/0,-1/0]){for(const s of t)typeof s=="number"&&(i[0]>s&&(i[0]=s),i[1]<s&&(i[1]=s));return i}extend(t){this.domain[0]>t&&(this.domain[0]=t),this.domain[1]<t&&(this.domain[1]=t)}getDomain(){return[...this.domain]}},Lu=0,Fu=1,No=2,lQ=class{constructor(e){const t=e.reduce((o,r)=>Math.max(o,r.length),0);let s=1<<32-Math.clz32(t);t===s/2&&(s=s>>>1),this.maxLevelSize=s;const n=new Float64Array((s*2-1)*2).fill(NaN);for(const o of e)for(let r=0;r<o.length;r+=1){const a=Number(o[r]),c=s+r-1,h=(c*No|0)+Lu,d=(c*No|0)+Fu,p=n[h],f=n[d];(!Number.isFinite(p)||a<p)&&(n[h]=a),(!Number.isFinite(f)||a>f)&&(n[d]=a)}for(let o=s/2|0;o>=1;o=o/2|0){const r=o-1|0,a=r+o|0;for(let c=0;c<o;c+=1){const h=r+c,d=a+c*2,p=d+1,f=n[(d*No|0)+Lu],v=n[(p*No|0)+Lu];n[(h*No|0)+Lu]=!Number.isFinite(v)||f<v?f:v;const y=n[(d*No|0)+Fu],b=n[(p*No|0)+Fu];n[(h*No|0)+Fu]=!Number.isFinite(b)||y>b?y:b}}this.buffer=n}computeRangeInto(e,t,i,s,n,o,r){const a=n+o-1;if(a<t||n>=i)return r;if(n>=t&&a<i){const c=e[(s*No|0)+Lu],h=e[(s*No|0)+Fu];Number.isFinite(c)&&(r[0]=Math.min(r[0],c)),Number.isFinite(h)&&(r[1]=Math.max(r[1],h))}else o>1&&(s=s*2|0,o=o/2|0,this.computeRangeInto(e,t,i,s+1|0,n,o,r),this.computeRangeInto(e,t,i,s+2|0,n+o,o,r));return r}rangeBetween(e,t){if(e>t)return[NaN,NaN];const{maxLevelSize:i,buffer:s}=this,n=[1/0,-1/0];return this.computeRangeInto(s,e,t,0,0,i,n),n}get range(){const{buffer:e}=this;return[e[Lu],e[Fu]]}},rL=Symbol("domain-ranges");function cQ(e){return e.map(t=>pi(t)?JSON.stringify(t):t).join("-")}function Qs(e){const t=e==null?void 0:e.map(Number);return t!=null&&t.every(Number.isFinite)?t:[]}function p0(e,t){return(t==null?void 0:t.get(e.id))??0}function uQ(e){return"scopes"in e&&Array.isArray(e.scopes)}function tw(e,t){const i=[];for(let s=0;s<e;s+=1)i[s]=t;return i}function Av(e,t,i){var n;const s=[];for(const o of e){const r=(n=o.get(t))==null?void 0:n[i];if(r==null)return;s.push(r)}return s}function DO(e){const t=[];let i=0,s;const n=new RegExp(`((?:(?:^|\\.)\\s*\\w+|\\[\\s*(?:'(?:[^']|(?<!\\\\)\\\\')*'|"(?:[^"]|(?<!\\\\)\\\\")*"|-?\\d+)\\s*\\])\\s*)`,"g");for(;s=n.exec(e);){if(s.index!==i)return;i=s.index+s[0].length;const o=s[1].trim();if(o.startsWith("."))t.push(o.slice(1).trim());else if(o.startsWith("[")){const r=o.slice(1,-1).trim();r.startsWith("'")?t.push(r.slice(1,-1).replace(new RegExp("(?<!\\\\)\\\\'","g"),"'")):r.startsWith('"')?t.push(r.slice(1,-1).replace(new RegExp('(?<!\\\\)\\\\"',"g"),'"')):t.push(r)}else t.push(o)}if(i===e.length)return t}function hQ(e){return t=>{let i=t;for(const s of e)i=i[s];return i}}var RO=class{constructor(e,t="standalone",i=!1){var a;this.opts=e,this.mode=t,this.suppressFieldDotNotation=i,this.debug=at.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[],this.markScopeDatumInvalid=function(c,h,d,p){for(const f of c)p.has(f)||p.set(f,tw(h.length,!1)),p.get(f)[d]=!0};let s=!0;for(const c of e.props){if(c.type==="key"&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");c.type==="value"&&s&&(s=!1)}const n=({matchGroupIds:c=[]})=>{for(const h of c)if(this.values.every(d=>d.groupId!==h))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${h}).`)},o=new Set,r=new Set;for(const c of e.props){const h=c.type==="key"?o:r;switch(uQ(c)&&((a=c.scopes)==null||a.forEach(d=>h.add(d))),c.type){case"key":this.keys.push({...c,index:this.keys.length,missing:new Map});break;case"value":if(c.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(c)}`);this.values.push({...c,index:this.values.length,missing:new Map});break;case"aggregate":n(c),this.aggregates.push({...c,index:this.aggregates.length});break;case"group-value-processor":n(c),this.groupProcessors.push({...c,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...c,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...c,index:this.reducers.length});break;case"processor":this.processors.push({...c,index:this.processors.length});break}}if(this.opts.groupByKeys||this.opts.groupByFn!=null){const c=new Set(r.values());if(o.forEach(h=>c.delete(h)),c.size>0)throw new Error(`AG Charts - scopes missing key for grouping, illegal configuration: ${[...c.values()]}`)}}resolveProcessedDataDefById(e,t){var s;const i=(s=this.scopeCache.get(e.id))==null?void 0:s.get(t);if(!i)throw new Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveKeysById(e,t,i){const s=this.resolveProcessedDataIndexById(e,t),n=i.keys[s];if(n==null)throw new Error(`AG Charts - didn't find keys for [${t}, ${e.id}]`);return n.get(e.id)}hasColumnById(e,t){var i;return((i=this.scopeCache.get(e.id))==null?void 0:i.get(t))!=null}resolveColumnById(e,t,i){var o;const s=this.resolveProcessedDataIndexById(e,t),n=(o=i.columns)==null?void 0:o[s];if(n==null)throw new Error(`AG Charts - didn't find column for [${t}, ${e.id}]`);return n}*forEachDatum(e,t,i){const s=t.columnScopes.findIndex(n=>n.has(e.id));for(const n of i.datumIndices[s]??[])yield t.columns[s][n]}*forEachGroupDatum(e,t){const i=t.columnScopes.findIndex(o=>o.has(e.id)),s={groupIndex:0,columnIndex:i},n=[];for(const o of t.groups){s.group=o;let r=0;for(const a of o.datumIndices[i]??n)s.datumIndex=a,s.valueIndex=r++,yield s;s.groupIndex++}}*forEachGroupDatumTuple(e,t){const s={columnIndex:t.columnScopes.findIndex(n=>n.has(e.id)),datumIndexes:[void 0,void 0,void 0]};for(const n of this.forEachGroupDatum(e,t))s.group=s.nextGroup,s.groupIndex=s.nextGroupIndex,s.nextGroup=n.group,s.nextGroupIndex=n.groupIndex,s.datumIndexes[0]=s.datumIndexes[1],s.datumIndexes[1]=s.datumIndexes[2],s.datumIndexes[2]=n.datumIndex,s.group!=null&&s.datumIndexes[1]!=null&&(yield s);s.group=s.nextGroup,s.groupIndex=s.nextGroupIndex,s.nextGroup=void 0,s.nextGroupIndex=void 0,s.datumIndexes[0]=s.datumIndexes[1],s.datumIndexes[1]=s.datumIndexes[2],s.datumIndexes[2]=void 0,s.group!=null&&s.datumIndexes[1]!=null&&(yield s)}getDomain(e,t,i,s){const n=this.getDomainsByType(i??"value",s);return(n==null?void 0:n[this.resolveProcessedDataIndexById(e,t)])??[]}getDomainBetweenRange(e,t,[i,s],n){const o=t.map(h=>this.resolveProcessedDataIndexById(e,h)),r=o.join(":"),a=n[rL];let c=a.get(r);if(c==null){const h=o.map(d=>n.columns[d]);c=new lQ(h),a.set(r,c)}return c.rangeBetween(i,s)}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}processData(e){const{opts:{groupByKeys:t,groupByFn:i},aggregates:s,groupProcessors:n,reducers:o,processors:r,propertyProcessors:a}=this,c=performance.now();if(t&&this.keys.length===0)return;let h=this.extractData(e);t?h=this.groupData(h):i&&(h=this.groupData(h,i(h))),n.length>0&&h.type==="grouped"&&this.postProcessGroups(h),s.length>0&&h.type==="ungrouped"?this.aggregateUngroupedData(h):s.length>0&&h.type==="grouped"&&this.aggregateGroupedData(h),a.length>0&&this.postProcessProperties(h),o.length>0&&this.reduceData(h),r.length>0&&this.postProcessData(h),this.warnDataMissingProperties(e);const d=performance.now();return h.time=d-c,this.debug.check()&&dQ(h),this.processScopeCache(),h}warnDataMissingProperties(e){var t;if(e.size!==0)for(const i of ac(this.keys,this.values))for(const[s,n]of i.missing){if(n<(((t=e.get(s))==null?void 0:t.length)??1/0))continue;const o=s==null?"":` for ${s}`;de.warnOnce(`the key '${i.property}' was not found in any data element${o}.`)}}processScopeCache(){var e;this.scopeCache.clear();for(const t of ac(this.keys,this.values,this.aggregates))if(t.idsMap)for(const[i,s]of t.idsMap)for(const n of s)if(!this.scopeCache.has(i))this.scopeCache.set(i,new Map([[n,t]]));else{if((e=this.scopeCache.get(i))!=null&&e.has(n))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(i).set(n,t)}}valueGroupIdxLookup({matchGroupIds:e}){const t=[];for(const[i,s]of this.values.entries())(!e||s.groupId&&e.includes(s.groupId))&&t.push(i);return t}valueIdxLookup(e,t){const i=e==null||e.length===0,s=typeof t=="string"?t:t.id,n=r=>{if(r.idsMap){for(const[a,c]of r.idsMap)if(e!=null&&e.includes(a)&&c.has(s))return!0}return!1},o=this.values.reduce((r,a,c)=>((a.scopes==null||i&&!a.scopes.length||a.scopes.some(d=>e==null?void 0:e.includes(d)))&&(a.property===s||a.id===s||n(a))&&r.push(c),r),[]);if(o.length===0)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`);return o}extractData(e){const{dataDomain:t,processValue:i,allScopesHaveSameDefs:s}=this.initDataDomainProcessor(),{keys:n,values:o}=this,{invalidData:r,invalidKeys:a,allKeyMappings:c}=this.extractKeys(n,e,i),{columns:h,columnScopes:d,partialValidDataCount:p,maxDataLength:f}=this.extractValues(r,o,e,a,i),v=y=>{const b=t.get(y),w=b.getDomain();return Ga.is(b)&&w[0]>w[1]?[]:w};return{type:"ungrouped",input:{count:f},scopes:new Set(e.keys()),dataSources:e,aggregation:void 0,keys:[...c.values()],columns:h,columnScopes:d,invalidKeys:a,invalidData:r,domain:{keys:n.map(v),values:o.map(v)},defs:{allScopesHaveSameDefs:s,keys:n,values:o},partialValidDataCount:p,time:0,[rL]:new Map}}extractKeys(e,t,i){const s=new Map,n=new Map,o=new Map;let r,a;const c=(h,d)=>{const p=a.get(h);r.set(d,r.get(p)),s.has(p)&&(s.set(d,s.get(p)),n.set(d,n.get(p)))};for(const h of e){const{invalidValue:d,scopes:p}=h;r=new Map,a=new Map,o.set(h,r);for(const f of p??[]){const v=t.get(f)??[];if(a.has(v)){c(v,f);continue}const y=[];r.set(f,y),a.set(v,f);let b,w;for(let S=0;S<v.length;S++){if(v[S]==null||typeof v[S]!="object")continue;const M=i(h,v[S],S,f);if(M.valid){y.push(M.value);continue}y.push(d),b??(b=tw(v.length,!1)),w??(w=tw(v.length,!1)),b[S]=!0,w[S]=!0}b&&w&&(s.set(f,b),n.set(f,w))}}return{invalidData:n,invalidKeys:s,allKeyMappings:o}}extractValues(e,t,i,s,n){var h;let o=0;const r=[],a=[];let c=0;for(const d of t){const{invalidValue:p}=d;if(new Set(d.scopes.map(S=>i.get(S))).size>1)throw new Error(`AG Charts - more than one data source for: ${JSON.stringify(d)}`);const v=new Set(d.scopes),y=Zd(d.scopes),b=i.get(y),w=new Array;for(let S=0;S<b.length;S++){if(b[S]==null||typeof b[S]!="object")continue;const M=b[S],R=(h=s.get(y))==null?void 0:h[S],A=n(d,M,S,d.scopes);let T=A.value;(R||!A.valid)&&this.markScopeDatumInvalid(d.scopes,b,S,e),R?T=p:A.valid||(o+=1,T=p),w[S]=T}r.push(w),a.push(v),c=Math.max(c,w.length)}return{columns:r,columnScopes:a,partialValidDataCount:o,maxDataLength:c}}groupData(e,t){var i;const s=new Map,{keys:n,columns:o,columnScopes:r,invalidKeys:a,invalidData:c}=e,h=e.scopes,d=new Set;for(const v of h){const y=o.map((A,T)=>T).filter(A=>!d.has(A)&&r[A].has(v));if(y.length===0)continue;for(const A of y)d.add(A);const b=new Set;for(const A of y)for(const T of r[A])b.add(T);const w=n.map(A=>A.get(v)).filter(A=>A!=null),S=o[Zd(y)],M=c==null?void 0:c.get(v),R=a==null?void 0:a.get(v);for(let A=0;A<S.length;A++){if((R==null?void 0:R[A])===!0)continue;const T=w.map(O=>O[A]);if(T==null||T.length===0)throw new Error("AG Charts - no keys found for scope: "+v);const F=(t==null?void 0:t(T))??T,P=cQ(F),N=s.get(P)??{keys:F,datumIndices:[],validScopes:h};if(s.has(P)||s.set(P,N),(M==null?void 0:M[A])===!0){N.validScopes===h&&(N.validScopes=new Set(h.values()));for(const O of b)N.validScopes.delete(O)}for(const O of y)(i=N.datumIndices)[O]??(i[O]=[]),N.datumIndices[O].push(A)}}const p=[],f=[];for(const{keys:v,datumIndices:y,validScopes:b}of s.values())p.push(v),f.push({datumIndices:y,keys:v,aggregation:[],validScopes:b});return{...e,type:"grouped",domain:{...e.domain,groups:p},groups:f}}aggregateUngroupedData(e){const t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;const{keys:i,columns:s,dataSources:n}=e,o=Zd(n.keys()),r=n.get(o);e.aggregation=r==null?void 0:r.map((a,c)=>{var d,p,f;const h=[];for(const[v,y]of this.aggregates.entries()){const b=this.valueGroupIdxLookup(y);let w=((d=y.groupAggregateFunction)==null?void 0:d.call(y))??[1/0,-1/0];const S=b.map(T=>s[T][c]),M=Av(i,o,c),R=M!=null?y.aggregateFunction(S,M):void 0;R&&(w=((p=y.groupAggregateFunction)==null?void 0:p.call(y,R,w))??Ga.extendDomain(R,w));const A=((f=y.finalFunction)==null?void 0:f.call(y,w))??w;h[v]=A,Ga.extendDomain(A,t[v])}return h})}aggregateGroupedData(e){var s,n,o;const t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;const{columns:i}=e;for(const[r,a]of this.aggregates.entries()){const c=this.valueGroupIdxLookup(a);for(const h of e.groups){h.aggregation??(h.aggregation=[]);const d=h.keys;let p=((s=a.groupAggregateFunction)==null?void 0:s.call(a))??[1/0,-1/0];const f=Math.max(...c.map(y=>{var b;return((b=h.datumIndices[y])==null?void 0:b.length)??0}));for(let y=0;y<f;y++){const b=c.map(S=>{var M;return i[S][(M=h.datumIndices[S])==null?void 0:M[y]]}),w=a.aggregateFunction(b,d);w&&(p=((n=a.groupAggregateFunction)==null?void 0:n.call(a,w,p))??Ga.extendDomain(w,p))}const v=((o=a.finalFunction)==null?void 0:o.call(a,p))??p;h.aggregation[r]=v,Ga.extendDomain(v,t[r])}}}postProcessGroups(e){const{groupProcessors:t}=this,{columnScopes:i,columns:s,invalidData:n}=e;for(const o of t){const r=this.valueGroupIdxLookup(o),a=o.adjust()();for(const c of e.groups)a(s,r,c);for(const c of r){const d=this.values[c].valueType==="category",p=s[c],f=Zd(i[c]),v=n==null?void 0:n.get(f),y=d?new oL:new Ga;for(let b=0;b<p.length;b+=1)(v==null?void 0:v[b])!==!0&&y.extend(p[b]);e.domain.values[c]=y.getDomain()}}}postProcessProperties(e){for(const{adjust:t,property:i,scopes:s}of this.propertyProcessors)for(const n of this.valueIdxLookup(s,i))t()(e,n)}reduceData(e){var s;e.reduced??(e.reduced={});const{dataSources:t,keys:i}=e;for(const n of this.reducers){const o=n.reducer();let r=n.initialValue;if(e.type==="grouped")for(const a of e.groups)r=o(r,a.keys);else{const a=Zd(t.keys()),c=i.map(p=>p.get(a)).filter(p=>p!=null),h=c.map(()=>{}),d=t.get(a);for(let p=0;p<d.length;p+=1){for(let f=0;f<h.length;f++)h[f]=(s=c[f])==null?void 0:s[p];r=o(r,h)}}e.reduced[n.property]=r}}postProcessData(e){e.reduced??(e.reduced={});for(const t of this.processors)e.reduced[t.property]=t.calculate(e,e.reduced[t.property])}initDataDomainProcessor(){const{keys:e,values:t}=this,i=new Set;for(const d of t)if(d.scopes)for(const p of d.scopes)i.add(p);const s=new Map,n=new Map;let o=!0;const r=()=>{for(const d of ac(e,t))d.valueType==="category"?s.set(d,new oL):(s.set(d,new Ga),o&&(o=(d.scopes??[]).length===i.size))};r();const a=this.buildAccessors(ac(e,t)),c={value:void 0,missing:!1,valid:!1};return{dataDomain:s,processValue:(d,p,f,v)=>{var S,M;let y,b;if(a.has(d.property)){try{b=a.get(d.property)(p)}catch{}y=b!=null}else y=d.property in p,b=y?p[d.property]:d.missingValue;d.forceValue!=null&&(b=y&&IM(b)?-1*d.forceValue:d.forceValue,y=!0),c.missing=!y;const w="missingValue"in d;if(!y&&!w)if(typeof v=="string"){const R=d.missing.get(v)??0;d.missing.set(v,R+1)}else for(const R of v){const A=d.missing.get(R)??0;d.missing.set(R,A+1)}if(s.has(d)||r(),y&&((S=d.validation)==null?void 0:S.call(d,b,p,f))===!1)if(c.valid=!1,"invalidValue"in d)b=d.invalidValue;else return this.mode!=="integrated"&&de.warnOnce(`invalid value of type [${typeof b}] for [${d.scopes} / ${d.id}] ignored:`,`[${b}]`),c.value=void 0,c;else c.valid=!0;if(d.processor){let R=n.get(d);R==null&&(R=d.processor(),n.set(d,R)),b=R(b,f)}return(M=s.get(d))==null||M.extend(b),c.value=b,c},initDataDomain:r,scopes:i,allScopesHaveSameDefs:o}}buildAccessors(e){const t=new Map;if(this.suppressFieldDotNotation)return t;for(const i of e){if(!(i.property.includes(".")||i.property.includes("[")))continue;const n=DO(i.property);if(n==null){de.warnOnce("Invalid property path [%s]",i.property);continue}const o=hQ(n);t.set(i.property,o)}return t}};function dQ(e){const t=(i,s)=>{s.length>0&&(de.log(`DataModel.processData() - ${i}`),de.table(s))};de.log("DataModel.processData() - processedData",e),t("Key Domains",e.domain.keys),t("Group Domains",e.domain.groups??[]),t("Value Domains",e.domain.values),t("Aggregate Domains",e.domain.aggValues??[])}var AO=class Tr{constructor(t,i){this.mode=t,this.suppressFieldDotNotation=i,this.debug=at.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(t,i,s){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((n,o)=>{this.requested.push({id:t,opts:s,data:i,resolve:n,reject:o})})}execute(t){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const i=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",i);const s=this.mergeRequested(i);this.debug("DataController.execute() - merged",s),this.debug.check()&&(Et().processedData=[]);const n=[];for(const{data:o,ids:r,opts:a,resolves:c,rejects:h}of s){const d=t==null?void 0:t.find(v=>aQ(v,o,r,a));let p,f;if(d==null)try{p=new RO(a,this.mode,this.suppressFieldDotNotation);const v=new Map(i.map(y=>[y.id,y.data]));f=p.processData(v)}catch(v){h.forEach(y=>y(v));continue}else({dataModel:p,processedData:f}=d);n.push({opts:a,data:o,ids:r,dataModel:p,processedData:f}),this.debug.check()&&Et("processedData").push(f),(f==null?void 0:f.partialValidDataCount)===0?c.forEach(v=>v({dataModel:p,processedData:f})):f?this.splitResult(p,f,r,c):h.forEach(v=>v(new Error("AG Charts - no processed data generated")))}return n}validateRequests(t){const i=[];for(const[s,n]of t.entries())s>0&&n.data.length!==t[0].data.length&&n.opts.groupByData===!1&&n.opts.groupByKeys===!1?n.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(n);return i}mergeRequested(t){const i=[];for(const s of t){const n=i.find(Tr.groupMatch(s));n?n.push(s):i.push([s])}return i.map(Tr.mergeRequests)}splitResult(t,i,s,n){for(let o=0;o<s.length;o++){const r=n[o];r({dataModel:t,processedData:i})}}static groupMatch({data:t,opts:i}){function s(h){return h.filter(d=>d.type==="key").map(d=>d.property).join(";")}const{groupByData:n,groupByKeys:o=!1,groupByFn:r,props:a}=i,c=s(a);return([h])=>(n===!1||h.data===t)&&(h.opts.groupByKeys??!1)===o&&h.opts.groupByFn===r&&s(h.opts.props)===c}static mergeRequests(t){const i=new Set(["key","group-value-processor"]);return t.reduce((s,{id:n,data:o,resolve:r,reject:a,opts:{props:c,...h}})=>{var d;s.ids.push(n),s.rejects.push(a),s.resolves.push(r),s.data??(s.data=o),s.opts??(s.opts={...h,props:[]});for(const p of c){const f={...p,scopes:[n],data:o};Tr.createIdsMap(n,f);const v=s.opts.props.find(y=>y.type===f.type&&(i.has(y.type)||y.data===f.data)&&Tr.deepEqual(y,f));if(!v){s.opts.props.push(f);continue}v.scopes??(v.scopes=[]),v.scopes.push(...f.scopes??[]),(v.type==="key"||v.type==="value")&&((d=f.idsMap)!=null&&d.size)&&Tr.mergeIdsMap(f.idsMap,v.idsMap)}return s},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(t,i){for(const[s,n]of t){const o=i.get(s);if(o==null)i.set(s,new Set(n));else for(const r of n)o.add(r)}}static createIdsMap(t,i){i.id!=null&&(i.idsMap??(i.idsMap=new Map),i.idsMap.has(t)?i.idsMap.get(t).add(i.id):i.idsMap.set(t,new Set([i.id])))}static deepEqual(t,i){if(t===i)return!0;if(t&&i&&typeof t=="object"&&typeof i=="object"){if(t.constructor!==i.constructor)return!1;let s,n;if(Array.isArray(t)){if(n=t.length,n!==i.length)return!1;for(s=n-1;s>=0;s--)if(!Tr.deepEqual(t[s],i[s]))return!1;return!0}const o=Object.keys(t);if(n=o.length,n!==Object.keys(i).length)return!1;for(s=n-1;s>=0;s--){const r=o[s];if(!Tr.skipKeys.has(r)&&(!Object.hasOwn(i,r)||!Tr.deepEqual(t[r],i[r])))return!1}return!0}return!1}};AO.skipKeys=new Set(["id","idsMap","type","scopes","data"]);var EO=AO,gQ=class{constructor(){this.axesMap=new Map,this.themeTemplates=new Map}register(e,t){this.axesMap.set(e,t.moduleFactory),t.themeTemplate&&this.setThemeTemplate(e,t.themeTemplate)}create(e,t){const i=this.axesMap.get(e);if(i)return i(t);throw new Error(`AG Charts - unknown axis type: ${e}`)}has(e){return this.axesMap.has(e)}keys(){return this.axesMap.keys()}setThemeTemplate(e,t){return this.themeTemplates.set(e,t),this}getThemeTemplate(e){return this.themeTemplates.get(e)}},mc=new gQ,bp=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bar",community:!0},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"line",community:!0},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function Nc(e){var t;return(t=bp.find(i=>i.type==="series"&&i.identifier===e))==null?void 0:t.chartTypes}function pQ(e){var i;return((i=Nc(e))==null?void 0:i.find(s=>s==="cartesian"))==="cartesian"}function fQ(e){var i;return((i=Nc(e))==null?void 0:i.find(s=>s==="polar"))==="polar"}function mQ(e){var i;return((i=Nc(e))==null?void 0:i.find(s=>s==="hierarchy"))==="hierarchy"}function vQ(e){var i;return((i=Nc(e))==null?void 0:i.find(s=>s==="topology"))==="topology"}function yQ(e){var i;return((i=Nc(e))==null?void 0:i.find(s=>s==="flow-proportion"))==="flow-proportion"}function CQ(e){var i;return((i=Nc(e))==null?void 0:i.find(s=>s==="standalone"))==="standalone"}function SQ(e){var i;return((i=Nc(e))==null?void 0:i.find(s=>s==="gauge"))==="gauge"}function bQ(e){return e.packageType==="enterprise"}function wQ(e){if(!bQ(e))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const t=bp.find(i=>i.type===e.type&&("optionsKey"in i&&"optionsKey"in e?i.optionsKey===e.optionsKey:!0)&&("contextKey"in i&&"contextKey"in e?i.contextKey===e.contextKey:!0)&&i.identifier===e.identifier&&e.chartTypes.every(s=>i.chartTypes.includes(s)));return t&&(t.useCount??(t.useCount=0),t.useCount++),t!=null}function xQ(){return bp.filter(({useCount:e})=>e==null||e===0)}var MQ=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(e,{optionsKey:t,moduleFactory:i,themeTemplate:s}){this.legendMap.set(e,{optionsKey:t,moduleFactory:i}),this.themeTemplates.set(t,s)}create(e,t){var s;const i=(s=this.legendMap.get(e))==null?void 0:s.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown legend type: ${e}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((e,[t,i])=>(e[t]=i.optionsKey,e),{})}},f0=new MQ,TO=class extends Map{get(e){return super.get(e)??"unknown"}isCartesian(e){return this.get(e)==="cartesian"}isPolar(e){return this.get(e)==="polar"}isHierarchy(e){return this.get(e)==="hierarchy"}isTopology(e){return this.get(e)==="topology"}isFlowProportion(e){return this.get(e)==="flow-proportion"}isStandalone(e){return this.get(e)==="standalone"}isGauge(e){return this.get(e)==="gauge"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(e=>this.isCartesian(e))}get polarTypes(){return this.seriesTypes.filter(e=>this.isPolar(e))}get hierarchyTypes(){return this.seriesTypes.filter(e=>this.isHierarchy(e))}get topologyTypes(){return this.seriesTypes.filter(e=>this.isTopology(e))}get flowProportionTypes(){return this.seriesTypes.filter(e=>this.isFlowProportion(e))}get standaloneTypes(){return this.seriesTypes.filter(e=>this.isStandalone(e))}get gaugeTypes(){return this.seriesTypes.filter(e=>this.isGauge(e))}},DQ=class extends Map{set(e,t){return super.set(e,Qe(t,this.get(e)))}},Kt=new TO,RQ=new TO,cx=new DQ,AQ=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(e,{chartTypes:[t],moduleFactory:i,tooltipDefaults:s,defaultAxes:n,themeTemplate:o,solo:r,stackable:a,groupable:c,stackedByDefault:h,hidden:d}){this.setThemeTemplate(e,o),this.seriesMap.set(e,{moduleFactory:i,tooltipDefaults:s,defaultAxes:n,solo:r,stackable:a,groupable:c,stackedByDefault:h}),Kt.set(e,t),d||RQ.set(e,t)}create(e,t){var s;const i=(s=this.seriesMap.get(e))==null?void 0:s.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown series type: ${e}`)}cloneDefaultAxes(e){var i;const t=(i=this.seriesMap.get(e))==null?void 0:i.defaultAxes;return t==null?null:{axes:zt(t)}}setThemeTemplate(e,t){const i=this.themeTemplates.get(e);this.themeTemplates.set(e,Qe(t,i))}getThemeTemplate(e){return this.themeTemplates.get(e)}getTooltipDefauls(e){var t;return(t=this.seriesMap.get(e))==null?void 0:t.tooltipDefaults}isSolo(e){var t;return((t=this.seriesMap.get(e))==null?void 0:t.solo)??!1}isGroupable(e){var t;return((t=this.seriesMap.get(e))==null?void 0:t.groupable)??!1}isStackable(e){var t;return((t=this.seriesMap.get(e))==null?void 0:t.stackable)??!1}isStackedByDefault(e){var t;return((t=this.seriesMap.get(e))==null?void 0:t.stackedByDefault)??!1}},Gn=new AQ,m0=class ec extends dl{constructor(t){super(),this.chart=t}subscribe(t=ec.DEFAULT_GROUP){let i=this.get(t);return i||(i=new Set,ec.chartsGroups.set(t,i)),i.add(this.chart),this}unsubscribe(t=ec.DEFAULT_GROUP){var i;return(i=this.get(t))==null||i.delete(this.chart),this}getChart(){return this.chart}getGroup(t=ec.DEFAULT_GROUP){const i=this.get(t);return i?Array.from(i):[]}getGroupSiblings(t=ec.DEFAULT_GROUP){return this.getGroup(t).filter(i=>i!==this.chart)}get(t){return ec.chartsGroups.get(t)}};m0.chartsGroups=new Map;m0.DEFAULT_GROUP=Symbol("sync-group-default");var EQ=m0,v0=class extends Be{constructor(){super(...arguments),this.enabled=!1}};D([E()],v0.prototype,"enabled",2);D([E()],v0.prototype,"tabIndex",2);var IO={};xo(IO,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>ho,fromToMotion:()=>ii,staticFromToMotion:()=>Qr});var ho={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function ii(e,t,i,s,n,o,r){const{fromFn:a,toFn:c,applyFn:h=(y,b)=>y.setProperties(b)}=n,{nodes:d,selections:p}=yy(s),f=(y,b)=>{let w,S=0,M=0;for(const R of b){const A=y[S]===R,T={last:M>=b.length-1,lastLive:S>=y.length-1,prev:b[M-1],prevFromProps:w,prevLive:y[S-1],next:b[M+1],nextLive:y[S+(A?1:0)]},F=`${e}_${t}_${R.id}`;i.stopByAnimationId(F);let P="unknown";A?o&&r&&(P=TQ(R,R.datum,o,r)):P="removed",R.transitionOut=P==="removed";const{phase:N,start:O,finish:B,delay:V,duration:U,...se}=a(R,R.datum,P,T),{phase:Ce,start:Se,finish:H,delay:q,duration:ie,...he}=c(R,R.datum,P,T),G=B==null;i.animate({id:F,groupId:e,phase:N??Ce??"update",duration:U??ie,delay:V??q,from:se,to:he,ease:Hg,collapsable:G,onPlay:()=>{const W={...O,...Se,...se};h(R,W,"start")},onUpdate(W){h(R,W,"update")},onStop:()=>{const W={...O,...Se,...se,...he,...B,...H};h(R,W,"end")}}),A&&S++,M++,w=se}};let v=0;for(const y of p){const b=y.nodes(),w=b.filter(S=>!y.isGarbage(S));f(w,b),i.animate({id:`${e}_${t}_selection_${v}`,groupId:e,phase:"end",from:0,to:1,ease:Hg,onStop(){y.cleanup()}}),v++}f(d,d)}function Qr(e,t,i,s,n,o,r){const{nodes:a,selections:c}=yy(s),{start:h,finish:d,phase:p}=r;i.animate({id:`${e}_${t}`,groupId:e,phase:p??"update",from:n,to:o,ease:Hg,onPlay:()=>{if(h){for(const f of a)f.setProperties(h);for(const f of c)for(const v of f.nodes())v.setProperties(h)}},onUpdate(f){for(const v of a)v.setProperties(f);for(const v of c)for(const y of v.nodes())y.setProperties(f)},onStop:()=>{for(const f of a)f.setProperties({...o,...d});for(const f of c){for(const v of f.nodes())v.setProperties({...o,...d});f.cleanup()}}})}function TQ(e,t,i,s){const n=i(e,t);return s.added.has(n)?"added":s.removed.has(n)?"removed":"updated"}var LO={};xo(LO,{resetMotion:()=>Ki});function Ki(e,t){const{nodes:i,selections:s}=yy(e);for(const n of s){for(const o of n.nodes()){const r=t(o,o.datum);o.setProperties(r)}n.cleanup()}for(const n of i){const o=t(n,n.datum);n.setProperties(o)}}var iw="color: green",sw="color: grey";function IQ(){return $k(()=>{})}function ux(e,t){const i=$a(t);if(i.length===0)return;const s=Zk(e);for(const n of i)n in s&&(t[n]=s[n])}var FO=class{transitionRoot(e,t){this.parent?this.parent.transitionRoot(e,t):this.transition(e,t)}},y0=class Zs extends FO{constructor(t,i,s){super(),this.defaultState=t,this.states=i,this.enterEach=s,this.debug=at.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,iw)}transition(t,i){var d,p,f,v;if(!this.transitionChild(t,i)||this.state===Zs.child||this.state===Zs.parent)return;const n=this.state,o=this.states[this.state];let r=o[t];const a=`%c${this.constructor.name} | ${this.state} -> ${t} ->`;if(Array.isArray(r))r=r.find(y=>{if(!y.guard)return!0;const b=y.guard(i);return b||this.debug(`${a} (guarded)`,y.target,sw),b});else if(typeof r=="object"&&!(r instanceof Zs)&&r.guard&&!r.guard(i)){this.debug(`${a} (guarded)`,r.target,sw);return}if(!r){this.debug(`${a} ${this.state}`,sw);return}const c=this.getDestinationState(r),h=c===this.state?void 0:o.onExit;this.debug(`${a} ${c}`,iw),this.state=c,typeof r=="function"?r(i):typeof r=="object"&&!(r instanceof Zs)&&((d=r.action)==null||d.call(r,i)),h==null||h(),(p=this.enterEach)==null||p.call(this,n,c),c!==n&&c!==Zs.child&&c!==Zs.parent&&((v=(f=this.states[c]).onEnter)==null||v.call(f,n,i))}transitionAsync(t,i){setTimeout(()=>{this.transition(t,i)},0)}is(t){return this.state===Zs.child&&this.childState?this.childState.is(t):this.state===t}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(t,i){var s,n;return this.state!==Zs.child||!this.childState||(ux(this,this.childState),this.childState.transition(t,i),!this.childState.is(Zs.parent))?!0:(this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.defaultState}`,iw),this.state=this.defaultState,(n=(s=this.states[this.state]).onEnter)==null||n.call(s),this.childState.resetHierarchy(),!1)}getDestinationState(t){let i=this.state;return typeof t=="string"?i=t:t instanceof Zs?(this.childState=t,this.childState.parent=this,i=Zs.child):typeof t=="object"&&(t.target instanceof Zs?(this.childState=t.target,this.childState.parent=this,i=Zs.child):t.target!=null&&(i=t.target)),i}};y0.child="__child";y0.parent="__parent";var wp=y0,LQ=class extends FO{constructor(...e){super(),this.stateMachines=e;for(const t of e)t.parent=this}transition(e,t){for(const i of this.stateMachines)ux(this,i),i.transition(e,t)}transitionAsync(e,t){for(const i of this.stateMachines)ux(this,i),i.transitionAsync(e,t)}},C0=class{constructor(){this.moduleMap=new Map}*modules(){for(const e of this.moduleMap.values())yield e.moduleInstance}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw new Error(`AG Charts - module already initialised: ${e.optionsKey}`);this.moduleMap.set(e.optionsKey,{module:e,moduleInstance:t(e)})}removeModule(e){var i;const t=qi(e)?e:e.optionsKey;(i=this.moduleMap.get(t))==null||i.moduleInstance.destroy(),this.moduleMap.delete(t)}getModule(e){var t;return(t=this.moduleMap.get(qi(e)?e:e.optionsKey))==null?void 0:t.moduleInstance}isEnabled(e){return this.moduleMap.has(qi(e)?e:e.optionsKey)}mapModules(e){return Array.from(this.moduleMap.values(),(t,i)=>e(t.moduleInstance,i))}destroy(){var e;for(const t of this.moduleMap.keys())(e=this.moduleMap.get(t))==null||e.moduleInstance.destroy();this.moduleMap.clear()}},wi=class tc{constructor(t,i,s=!0){this.parentNode=t,this.autoCleanup=s,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=at.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Kr,i)?()=>new i:i}static select(t,i,s=!0){return new tc(t,i,s)}static selectAll(t,i){const s=[],n=o=>{i(o)&&s.push(o);for(const r of o.children())n(r)};return n(t),s}static selectByClass(t,...i){return tc.selectAll(t,s=>i.some(n=>s instanceof n))}static selectByTag(t,i){return tc.selectAll(t,s=>s.tag===i)}createNode(t,i,s){const n=this.nodeFactory(t);return n.datum=t,i==null||i(n),s==null?this._nodes.push(n):this._nodes.splice(s,0,n),this.parentNode.appendChild(n),n}update(t,i,s){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",t),s){const n=new Map(t.map((o,r)=>[s(o),[o,r]]));for(const[o,r]of this._nodesMap.entries())if(n.has(r)){const[a]=n.get(r);o.datum=a,this.garbageBin.delete(o),n.delete(r)}else this.garbageBin.add(o);for(const[o,[r,a]]of n.entries())this._nodesMap.set(this.createNode(r,i,a),o)}else{const n=Math.max(t.length,this.data.length);for(let o=0;o<n;o++)o>=t.length?this.garbageBin.add(this._nodes[o]):o>=this._nodes.length?this.createNode(t[o],i):(this._nodes[o].datum=t[o],this.garbageBin.delete(this._nodes[o]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(t=>this.garbageBin.has(t)?(this._nodesMap.delete(t),this.garbageBin.delete(t),t.destroy(),!1):!0),this)}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}each(t){for(const i of this._nodes.entries())t(i[1],i[1].datum,i[0]);return this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const i=this._nodes[t];yield{node:i,datum:i.datum,index:t}}}select(t){return tc.selectAll(this.parentNode,t)}selectByClass(t){return tc.selectByClass(this.parentNode,t)}selectByTag(t){return tc.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(t){return this._nodes.at(t)}get length(){return this._nodes.length}},wn=class extends $n{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new Me(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){return this.x1===this.x2||this.y1===this.y2?this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(e,t):!1}distanceSquared(e,t){const{x1:i,y1:s,x2:n,y2:o}=this;return vg(e,t,i,s,n,o,1/0)}render(e){var a;const{ctx:t,devicePixelRatio:i}=e;let{x1:s,y1:n,x2:o,y2:r}=this;if(s===o){const{strokeWidth:c}=this,h=Math.round(s*i)/i+Math.trunc(c*i)%2/(i*2);s=h,o=h}else if(n===r){const{strokeWidth:c}=this,h=Math.round(n*i)/i+Math.trunc(c*i)%2/(i*2);n=h,r=h}t.beginPath(),t.moveTo(s,n),t.lineTo(o,r),this.fillStroke(t),(a=this.fillShadow)==null||a.markClean(),super.render(e)}toSVG(){if(!this.visible)return;const e=Zi("line");return e.setAttribute("x1",String(this.x1)),e.setAttribute("y1",String(this.y1)),e.setAttribute("x2",String(this.x2)),e.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(e),{elements:[e]}}};wn.className="Line";wn.defaultStyles={...$n.defaultStyles,fill:void 0,strokeWidth:1};D([De()],wn.prototype,"x1",2);D([De()],wn.prototype,"y1",2);D([De()],wn.prototype,"x2",2);D([De()],wn.prototype,"y2",2);var Mo=class extends $n{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new Me(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){var b;const{ctx:t}=e;let{x1:i,y1:s,x2:n,y2:o}=this;i=this.align(i),s=this.align(s),n=this.align(n),o=this.align(o);const{fill:r,opacity:a,isRange:c}=this;if(!!(c&&r)){const{fillOpacity:w}=this;this.applyFill(t),t.globalAlpha=a*w,t.beginPath(),t.moveTo(i,s),t.lineTo(n,s),t.lineTo(n,o),t.lineTo(i,o),t.closePath(),t.fill()}const{stroke:d,strokeWidth:p,startLine:f,endLine:v}=this;if(!!((f||v)&&d&&p)){const{strokeOpacity:w,lineDash:S,lineDashOffset:M,lineCap:R,lineJoin:A}=this;this.applyStroke(t),t.globalAlpha=a*w,t.lineWidth=p,S&&t.setLineDash(S),M&&(t.lineDashOffset=M),R&&(t.lineCap=R),A&&(t.lineJoin=A),t.beginPath(),f&&(t.moveTo(i,s),t.lineTo(n,s)),v&&(t.moveTo(n,o),t.lineTo(i,o)),t.stroke()}(b=this.fillShadow)==null||b.markClean(),super.render(e)}};Mo.className="Range";Mo.defaultStyles={...$n.defaultStyles,strokeWidth:1};D([De()],Mo.prototype,"x1",2);D([De()],Mo.prototype,"y1",2);D([De()],Mo.prototype,"x2",2);D([De()],Mo.prototype,"y2",2);D([De()],Mo.prototype,"startLine",2);D([De()],Mo.prototype,"endLine",2);D([De()],Mo.prototype,"isRange",2);var Hi=class extends Be{constructor(){super(...arguments),this.enabled=!0}getFont(){return Ht.toFontString(this)}};D([E()],Hi.prototype,"enabled",2);D([E()],Hi.prototype,"color",2);D([E()],Hi.prototype,"fontStyle",2);D([E()],Hi.prototype,"fontWeight",2);D([E()],Hi.prototype,"fontSize",2);D([E()],Hi.prototype,"fontFamily",2);D([E()],Hi.prototype,"formatter",2);function Ev(e){const{parallelFlipRotation:t=0,regularFlipRotation:i=0}=e,s=e.rotation?Pt(Wt(e.rotation)):0,n=!s&&t>=0&&t<=Math.PI?-1:1,o=!s&&i>=0&&i<=Math.PI?-1:1;let r=0;return e.parallel?r=n*Math.PI/2:o===-1&&(r=Math.PI),{configuredRotation:s,defaultRotation:r,parallelFlipFlag:n,regularFlipFlag:o}}function FQ(e,t){return e??(t?0:10)}function PQ(e,t,i,s){return e&&!t?i*s===-1?"hanging":"bottom":"middle"}function aL(e,t,i,s,n){const o=t>0&&t<=Math.PI,r=i>0&&i<=Math.PI,a=o||r?-1:1;if(e)if(t||i){if(s*a===-1)return"end"}else return"center";else if(s*n===-1)return"end";return"start"}function kQ(e,t,i,s){const n=[];for(const{tickLabel:o,translationY:r}of e){if(!o)continue;const{width:a,height:c}=s.measureLines(o),h=new Me(t,r,a,c),d=new Me(t,r,0,0);i.transformBBox(d,h);const{x:p,y:f}=h;n.push({point:{x:p,y:f},label:{text:o,width:a,height:c}})}return n}function NQ(e){return e!=null&&Object.hasOwn(e,"toString")&&qi(e.toString())}function OQ(e){return e!=null&&Object.hasOwn(e,"valueOf")&&nt(e.valueOf())}function by(e){return nt(e)||dp(e)||OQ(e)}function GQ(e,t){return e!=null&&(!t||by(e))}function hx(e){return NQ(e)&&Object.hasOwn(e,"id")?e.id:e}var S0=e=>e==="value"?St((t,i)=>i.target.type==="line",t=>t.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):St((t,i)=>i.target.type==="range",t=>t.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'");function PO(e){switch(e.type){case"line":return e.value;case"range":return e.range}}function kO(e,t){if(e==null)return!1;const i=Ct.is(t)||Hr.is(t),s=n=>GQ(n,i)&&!isNaN(t.convert(n));if(Ue(e)){const[n,o]=e;return s(n)&&s(o)}else return s(e)}var BQ={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},zQ={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function dx({yDirection:e,padding:t=0,position:i="top",bbox:s}){const n=e?BQ:zQ,{xTranslationDirection:o,yTranslationDirection:r}=n[i],a=o*(t+s.width/2),c=r*(t+s.height/2);return{xTranslation:a,yTranslation:c}}function NO({yDirection:e,bbox:t,padding:i=0,position:s="top"}){const n={};return s.startsWith("inside")||(s==="top"&&!e?n.top=i+t.height:s==="bottom"&&!e?n.bottom=i+t.height:s==="left"&&e?n.left=i+t.width:s==="right"&&e&&(n.right=i+t.width)),n}var Tv=({direction:e,xEnd:t,yStart:i,yEnd:s})=>e==="y"?{x:t/2,y:i}:{x:t,y:isNaN(s)?i:(i+s)/2},lL=({direction:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e==="y"?{x:t,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:s},cL=({direction:e,xEnd:t,yStart:i,yEnd:s})=>e==="y"?{x:t,y:isNaN(s)?i:(i+s)/2}:{x:t/2,y:isNaN(s)?i:s},uL=({direction:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e==="y"?{x:i/2,y:isNaN(n)?s:n}:{x:t,y:isNaN(n)?s:(s+n)/2},HQ=({xEnd:e,yStart:t,yEnd:i})=>({x:e/2,y:isNaN(i)?t:(t+i)/2}),hL=({direction:e,xStart:t,xEnd:i,yStart:s})=>e==="y"?{x:t/2,y:s}:{x:i,y:s},dL=({direction:e,xStart:t,yStart:i,yEnd:s})=>e==="y"?{x:t,y:isNaN(s)?i:s}:{x:t,y:i},gL=({direction:e,xEnd:t,yStart:i,yEnd:s})=>e==="y"?{x:t,y:i}:{x:t,y:isNaN(s)?i:s},pL=({direction:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e==="y"?{x:i,y:isNaN(n)?s:n}:{x:t,y:isNaN(n)?s:n},OO={top:{c:Tv},bottom:{c:uL},left:{c:lL},right:{c:cL},"top-left":{c:hL},"top-right":{c:gL},"bottom-left":{c:dL},"bottom-right":{c:pL},inside:{c:HQ},"inside-left":{c:lL},"inside-right":{c:cL},"inside-top":{c:Tv},"inside-bottom":{c:uL},"inside-top-left":{c:hL},"inside-bottom-left":{c:dL},"inside-top-right":{c:gL},"inside-bottom-right":{c:pL}};bt(["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"],"crossLine label position");var Zn=class extends Be{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};D([E()],Zn.prototype,"enabled",2);D([E()],Zn.prototype,"text",2);D([E()],Zn.prototype,"fontStyle",2);D([E()],Zn.prototype,"fontWeight",2);D([E()],Zn.prototype,"fontSize",2);D([E()],Zn.prototype,"fontFamily",2);D([E()],Zn.prototype,"padding",2);D([E()],Zn.prototype,"color",2);D([E()],Zn.prototype,"position",2);D([E()],Zn.prototype,"rotation",2);D([E()],Zn.prototype,"parallel",2);var Bs=class extends Be{constructor(){super(),this.id=vn(this),this.defaultColorRange=[],this.fill="#c16068",this.label=new Zn,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.rangeGroup=new Ne({name:this.id}),this.lineGroup=new Ne({name:this.id}),this.labelGroup=new Ne({name:this.id}),this.crossLineRange=new Mo,this.crossLineLabel=new nh,this.labelPoint=void 0,this.data=void 0,this.startLine=!1,this.endLine=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}update(e){const{enabled:t,type:i,data:s,scale:n}=this;if(!n||!t||!e||!this.isValid()||!kO(PO(this),n)||s==null){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateNodes();const o=i==="range";o!==this._isRange&&(o?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=o}calculateLayout(e,t){if(!e)return;const{type:i,range:s,value:n,scale:o,gridLength:r,sideFlag:a,direction:c,label:{position:h="top"},clippedRange:d,strokeWidth:p=0}=this;if(this.data=void 0,!o)return;const f=o.bandwidth??0,v=o.step??0,y=(t?-1:1)*(o instanceof Sp?(v-f)/2:0),[b,w]=[0,a*r];let S,M,R,A;if(i==="line"){const O=f/2;S=o.convert(n)+O,M=NaN,R=o.convert(n,!0)+O,A=NaN}else if(s){const[O,B]=s,V=(O==null?void 0:O.valueOf())===(B==null?void 0:B.valueOf())&&Hr.is(o)?f/2+y:0;S=o.convert(O)+V,M=o.convert(B)+f,R=o.convert(O,!0)+V-y,A=o.convert(B,!0)+f+y}else return;R=rx(R,d),A=rx(A,d);const T=(S===R||M===A||R!==A)&&Math.abs(A-R)>0;if(T&&R>A&&([R,A]=[A,R],[S,M]=[M,S]),S-y>=R&&(S-=y),M+y<=A&&(M+=y),this.startLine=p>0&&S>=R&&S<=R+y,this.endLine=p>0&&M>=A-f-y&&M<=A,i==="range"&&!T&&!this.startLine&&!this.endLine||(this.data=[R,A],this.label.enabled===!1||!this.label.text))return;const{c:F=Tv}=OO[h]??{},{x:P,y:N}=F({direction:c,xStart:b,xEnd:w,yStart:R,yEnd:A});this.labelPoint={x:P,y:N}}updateNodes(){this.updateRangeNode();const{label:e}=this;e.enabled!==!1&&e.text&&(this.updateLabel(),this.positionLabel())}updateRangeNode(){const{type:e,crossLineRange:t,sideFlag:i,gridLength:s,data:n,startLine:o,endLine:r,fill:a,fillOpacity:c,stroke:h,strokeWidth:d,lineDash:p}=this;t.x1=0,t.x2=i*s,t.y1=(n==null?void 0:n[0])??0,t.y2=(n==null?void 0:n[1])??0,t.startLine=o,t.endLine=r,t.isRange=e==="range",t.fill=a,t.fillOpacity=c??1,t.stroke=h,t.strokeWidth=d??1,t.strokeOpacity=this.strokeOpacity??1,t.lineDash=p}updateLabel(){const{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}positionLabel(){const{crossLineLabel:e,labelPoint:{x:t=void 0,y:i=void 0}={},label:{parallel:s,rotation:n,position:o="top",padding:r=0},direction:a,parallelFlipRotation:c,regularFlipRotation:h}=this;if(t===void 0||i===void 0)return;const{defaultRotation:d,configuredRotation:p}=Ev({rotation:n,parallel:s,regularFlipRotation:h,parallelFlipRotation:c});e.rotation=d+p,e.textBaseline="middle",e.textAlign="center";const f=e.getBBox();if(!f)return;const v=a==="y",{xTranslation:y,yTranslation:b}=dx({yDirection:v,padding:r,position:o,bbox:f});e.translationX=t+y,e.translationY=i+b}computeLabelBBox(){const{label:e}=this;if(e.enabled===!1||!e.text)return;const t=new nh;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text;const{labelPoint:{x:i=void 0,y:s=void 0}={},label:{parallel:n,rotation:o,position:r="top",padding:a=0},direction:c,parallelFlipRotation:h,regularFlipRotation:d}=this;if(i===void 0||s===void 0)return;const{configuredRotation:p}=Ev({rotation:o,parallel:n,regularFlipRotation:d,parallelFlipRotation:h});t.rotation=p,t.textBaseline="middle",t.textAlign="center";const f=t.getBBox();if(!f)return;const v=c==="y",{xTranslation:y,yTranslation:b}=dx({yDirection:v,padding:a,position:r,bbox:f});return t.x=i+y,t.y=s+b,t.getBBox()}calculatePadding(e){const{data:t,direction:i,label:{padding:s=0,position:n="top"}}=this;if(t==null)return;const o=this.computeLabelBBox();if((o==null?void 0:o.x)==null||(o==null?void 0:o.y)==null)return;const r=NO({yDirection:i==="y",padding:s,position:n,bbox:o});e.left=Math.max(e.left??0,r.left??0),e.right=Math.max(e.right??0,r.right??0),e.top=Math.max(e.top??0,r.top??0),e.bottom=Math.max(e.bottom??0,r.bottom??0)}};Bs.className="CrossLine";D([E()],Bs.prototype,"enabled",2);D([E(bt(["range","line"],"a crossLine type"))],Bs.prototype,"type",2);D([E(cl(S0("range"),zM.restrict({length:2})))],Bs.prototype,"range",2);D([E(S0("value"))],Bs.prototype,"value",2);D([E()],Bs.prototype,"defaultColorRange",2);D([E()],Bs.prototype,"fill",2);D([E()],Bs.prototype,"fillOpacity",2);D([E()],Bs.prototype,"stroke",2);D([E()],Bs.prototype,"strokeWidth",2);D([E()],Bs.prototype,"strokeOpacity",2);D([E()],Bs.prototype,"lineDash",2);D([E()],Bs.prototype,"label",2);var VQ=["stroke","lineDash"];zi(e=>pi(e)&&Object.keys(e).every(t=>VQ.includes(t)),"objects with gridline style properties such as 'stroke' or 'lineDash'");var wy=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};D([E()],wy.prototype,"enabled",2);D([E()],wy.prototype,"width",2);D([E()],wy.prototype,"style",2);var _Q=St(e=>nt(e)&&e>0||e instanceof Ac,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Oc=class extends Be{};D([E()],Oc.prototype,"step",2);D([E()],Oc.prototype,"values",2);D([E()],Oc.prototype,"minSpacing",2);D([E()],Oc.prototype,"maxSpacing",2);var Vi=class extends Be{constructor(){super(...arguments),this.enabled=!0,this.spacing=5,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}getFont(){return Ht.toFontString(this)}};D([E()],Vi.prototype,"enabled",2);D([E()],Vi.prototype,"fontStyle",2);D([E()],Vi.prototype,"fontWeight",2);D([E(yn.restrict({min:1}))],Vi.prototype,"fontSize",2);D([E()],Vi.prototype,"fontFamily",2);D([E()],Vi.prototype,"spacing",2);D([E()],Vi.prototype,"minSpacing",2);D([E()],Vi.prototype,"color",2);D([E()],Vi.prototype,"rotation",2);D([E()],Vi.prototype,"avoidCollisions",2);D([E()],Vi.prototype,"mirrored",2);D([E()],Vi.prototype,"parallel",2);D([E()],Vi.prototype,"itemStyler",2);D([E()],Vi.prototype,"formatter",2);D([E()],Vi.prototype,"format",2);var xy=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};D([E()],xy.prototype,"enabled",2);D([E()],xy.prototype,"width",2);D([E()],xy.prototype,"stroke",2);var Rh=class extends Be{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};D([E()],Rh.prototype,"enabled",2);D([E()],Rh.prototype,"width",2);D([E()],Rh.prototype,"size",2);D([E()],Rh.prototype,"stroke",2);var Do=class extends Be{constructor(){super(...arguments),this.caption=new jt,this.enabled=!1,this.spacing=jt.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};D([E()],Do.prototype,"enabled",2);D([E()],Do.prototype,"text",2);D([E()],Do.prototype,"spacing",2);D([E()],Do.prototype,"fontStyle",2);D([E()],Do.prototype,"fontWeight",2);D([E()],Do.prototype,"fontSize",2);D([E()],Do.prototype,"fontFamily",2);D([E()],Do.prototype,"color",2);D([E()],Do.prototype,"wrapping",2);D([E()],Do.prototype,"formatter",2);var GO=(e=>(e[e.TickAndDomain=0]="TickAndDomain",e[e.TicksOnly=1]="TicksOnly",e[e.Off=2]="Off",e))(GO||{});function Iv(e){const[t,i]=xi(e.range),s=Math.floor(t),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}var gx=Math.PI*2,WQ=gx/2;function jQ(e,t){return Math.abs(t-e)<WQ?t:e>t?t+gx:t-gx}function BO(e){const t=(r,a)=>{const[c=e.min,h=e.max]=xi(a??[]);return r<c||r>h};return{tick:{fromFn(r,a,c){let h=r.y1+r.translationY,d=r.opacity;return(c==="added"||t(r.datum.translationY,r.datum.range))&&(h=a.translationY,d=0),{y:0,translationY:h,opacity:d,phase:ho[c]}},toFn(r,a,c){const h=a.translationY;let d=1;return c==="removed"&&(d=0),{y:0,translationY:h,opacity:d,finish:{y:h,translationY:0}}},applyFn(r,a){r.setProperties(a),r.visible=!t(r.y)}},line:{fromFn(r,a){return{...r.previousDatum??a,phase:ho.updated}},toFn(r,a){return{...a}}},label:{fromFn(r,a,c){const h=r.previousDatum??a,d=h.x,p=h.y,f=h.rotationCenterX;let v=Math.round(r.translationY),y=h.rotation,b=r.opacity;return c==="removed"||t(h.y,h.range)?y=a.rotation:(c==="added"||t(r.datum.y,r.datum.range))&&(v=Math.round(h.translationY),b=0,y=a.rotation),{x:d,y:p,rotationCenterX:f,translationY:v,rotation:y,opacity:b,phase:ho[c]}},toFn(r,a,c){var b;const h=a.x,d=a.y,p=a.rotationCenterX,f=Math.round(a.translationY);let v=0,y=1;return c==="added"?v=a.rotation:c==="removed"?(y=0,v=a.rotation):v=jQ(((b=r.previousDatum)==null?void 0:b.rotation)??a.rotation,a.rotation),{x:h,y:d,rotationCenterX:p,translationY:f,rotation:v,opacity:y,finish:{rotation:a.rotation}}}},group:{fromFn(r,a){const{rotation:c,translationX:h,translationY:d}=r;return{rotation:c,translationX:h,translationY:d,phase:ho.updated}},toFn(r,a){const{rotation:c,translationX:h,translationY:d}=a;return{rotation:c,translationX:h,translationY:d}}}}}function zO(){return(e,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY})}function b0(e){const{visible:t,min:i,max:s}=e;return(n,o)=>{const r=o.translationY,a=t&&r>=i&&r<=s;return{y:r,translationY:0,opacity:1,visible:a}}}function w0(){return(e,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX})}function HO(){return(e,t)=>({...t})}var Lv=class extends Pc(wn){},VO=(e=>(e[e.TickLines=0]="TickLines",e[e.AxisLine=1]="AxisLine",e[e.TickLabels=2]="TickLabels",e))(VO||{}),Jr=class _O{constructor(t,i){this.moduleCtx=t,this.scale=i,this.id=vn(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new Oc,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Qd({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new Ne({name:`${this.id}-Axis-tick-lines`,zIndex:0})),this.tickLabelGroup=this.axisGroup.appendChild(new Ne({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.labelGroup=new Ne({name:`${this.id}-Labels`,zIndex:9}),this.gridGroup=new Qd({name:`${this.id}-Axis-grid`,zIndex:1}),this.gridLineGroup=this.gridGroup.appendChild(new Ne({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new Qd({name:`${this.id}-CrossLines-Range`,zIndex:4}),this.crossLineLineGroup=new Qd({name:`${this.id}-CrossLines-Line`,zIndex:8}),this.crossLineLabelGroup=new Qd({name:`${this.id}-CrossLines-Label`,zIndex:13}),this.tickLineGroupSelection=wi.select(this.tickLineGroup,Lv,!1),this.tickLabelGroupSelection=wi.select(this.tickLabelGroup,nh,!1),this.gridLineGroupSelection=wi.select(this.gridLineGroup,Lv,!1),this._crossLines=[],this.line=new xy,this.tick=new Rh,this.gridLine=new wy,this.label=this.createLabel(),this.defaultTickMinSpacing=_O.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.axisContext=void 0,this.labelFormatter=void 0,this.datumFormatter=void 0,this.scaleFormatterParams=void 0,this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new Do,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.animatable=!0,this._scaleNiceDomainInputDomain=void 0,this._scaleNiceDomainRangeExtent=NaN,this.moduleMap=new C0,this.range=this.scale.range.slice(),this.crossLines.forEach(s=>this.initCrossLine(s))}get type(){return this.constructor.type??""}get labelNodes(){return this.tickLabelGroupSelection.nodes()}set crossLines(t){const{CrossLineConstructor:i}=this.constructor;this._crossLines.forEach(s=>this.detachCrossLine(s)),this._crossLines=t.map(s=>{const n=new i;return n.set(s),n}),this._crossLines.forEach(s=>{this.attachCrossLine(s),this.initCrossLine(s)})}get crossLines(){return this._crossLines}resetAnimation(t){}attachCrossLine(t){this.crossLineRangeGroup.appendChild(t.rangeGroup),this.crossLineLineGroup.appendChild(t.lineGroup),this.crossLineLabelGroup.appendChild(t.labelGroup)}detachCrossLine(t){this.crossLineRangeGroup.removeChild(t.rangeGroup),this.crossLineLineGroup.removeChild(t.lineGroup),this.crossLineLabelGroup.removeChild(t.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}updateScale(){const{range:t,visibleRange:i,scale:s}=this,n=(t[1]-t[0])/(i[1]-i[0]),o=n*i[0],r=t[0]-o;s.range=[r,r+n],this.crossLines.forEach(a=>{a.clippedRange=[t[0],t[1]]})}setCrossLinesVisible(t){this.crossLineRangeGroup.visible=t,this.crossLineLineGroup.visible=t,this.crossLineLabelGroup.visible=t}attachAxis(t){t.gridNode.appendChild(this.gridGroup),t.axisNode.appendChild(this.axisGroup),t.labelNode.appendChild(this.labelGroup),t.crossLineRangeNode.appendChild(this.crossLineRangeGroup),t.crossLineLineNode.appendChild(this.crossLineLineGroup),t.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(t){t.gridNode.removeChild(this.gridGroup),t.axisNode.removeChild(this.axisGroup),t.labelNode.removeChild(this.labelGroup),t.crossLineRangeNode.removeChild(this.crossLineRangeGroup),t.crossLineLineNode.removeChild(this.crossLineLineGroup),t.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(t){this.labelGroup.append(t)}inRange(t,i=0){const[s,n]=xi(this.range);return t>=s-i&&t<=n+i}getRangeOverflow(t){const{range:i,visibleRange:s}=this,n=(i[1]-i[0])/(s[1]-s[0]),[o,r]=xi([i[0]-n*s[0],i[0]-n*s[0]+n]);return t<o?t-o:t>r?t-r:0}defaultDatumFormatter(t,i){return $r(t,i+1)}defaultLabelFormatter(t,i){return $r(t,i)}onGridLengthChange(t,i){i^t&&this.onGridVisibilityChange(),this.crossLines.forEach(s=>this.initCrossLine(s))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new Vi}update(){this.updatePosition(),this.updateSelections(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled,this.updateLabels(),this.updateGridLines(),this.updateTickLines(),this.updateCrossLines()}getAxisLineCoordinates(){const[t,i]=xi(this.range);return{x:0,y1:t,y2:i}}getLabelStyles(t,i){const{label:s}=this,n={color:s.color,spacing:s.spacing,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let o;s.itemStyler&&(o=this.moduleCtx.callbackCache.call(this,s.itemStyler,{...t,...n}));const{color:r,fontFamily:a,fontSize:c,fontStyle:h,fontWeight:d,spacing:p}=Qe(o,i,n);return{fill:r,fontFamily:a,fontSize:c,fontStyle:h,fontWeight:d,spacing:p}}getTickSize(){return this.tick.enabled?this.tick.size:0}processData(){const{includeInvisibleDomains:t,boundSeries:i,direction:s}=this,o=(t?i:i.filter(r=>r.isEnabled())).map(r=>r.getDomain(s));this.setDomains(...o)}setDomains(...t){let i,s;t.length>0?{domain:i,animatable:s}=this.scale.normalizeDomains(...t):(i=[],s=!0),this.dataDomain=this.normaliseDataDomain(i),this.reverse&&this.dataDomain.domain.reverse(),this.animatable=s}calculateLayout(t){const{scale:i,label:s,visibleRange:n,nice:o}=this;this.updateScale();const r=ah(this.range),a=this.dataDomain.domain;let c;n[0]===0&&n[1]===1?c=void 0:o?this._scaleNiceDomainInputDomain===a&&this._scaleNiceDomainRangeExtent===r?c=this.scale.domain:c=this.calculateTickLayout(a,0,[0,1]).niceDomain:c=a;let h;o?c==null?h=0:h=1:h=2;const{niceDomain:d,primaryTickCount:p,ticks:f,tickDomain:v,fractionDigits:y,bbox:b}=this.calculateTickLayout(c??a,h,n,t);this.scale.domain=d,this._scaleNiceDomainInputDomain=o?a:void 0,this._scaleNiceDomainRangeExtent=o?r:NaN;const w=s.format;this.labelFormatter=i.tickFormatter({domain:v,specifier:w,ticks:f,fractionDigits:y})??(F=>this.defaultLabelFormatter(F,y)),this.datumFormatter=i.datumFormatter({domain:v,specifier:w,ticks:f,fractionDigits:y})??(F=>this.defaultDatumFormatter(F,y)),this.scaleFormatterParams={domain:v,ticks:f,fractionDigits:y},this.layout.label={fractionDigits:y,spacing:this.label.spacing,format:this.label.format};const S=s.getSideFlag(),M=this.isAnySeriesActive(),{rotation:R,parallelFlipRotation:A,regularFlipRotation:T}=this.calculateRotations();return this.crossLines.forEach(F=>{var N;var P;F.sideFlag=-S,F.direction=R===-Math.PI/2?"x":"y",F instanceof Bs&&((P=F.label).parallel??(P.parallel=s.parallel)),F.parallelFlipRotation=A,F.regularFlipRotation=T,(N=F.calculateLayout)==null||N.call(F,M,this.reverse)}),{primaryTickCount:p,bbox:b}}getTransformBox(t){const i=new bo,{rotation:s,translationX:n,translationY:o}=this.getAxisTransform();return bo.updateTransformMatrix(i,1,1,s,n,o),i.transformBBox(t)}calculateRotations(){const t=Wt(this.rotation),i=Pt(t),s=Pt(t-Math.PI/2);return{rotation:t,parallelFlipRotation:i,regularFlipRotation:s}}updateCrossLines(){const t=this.isAnySeriesActive();this.crossLines.forEach(i=>{i.update(t)})}updateTickLines(){const{tick:t,label:i}=this,s=i.getSideFlag();this.tickLineGroupSelection.each((n,o)=>{n.strokeWidth=o.tickWidth??t.width,n.stroke=o.tickStroke??t.stroke,n.x1=s*(o.tickSize??this.getTickSize()),n.x2=0})}getAxisTransform(){return{rotation:Wt(this.rotation),translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineRangeGroup:t,crossLineLineGroup:i,crossLineLabelGroup:s,gridGroup:n,translation:o}=this,{rotation:r}=this.calculateRotations(),a=Math.floor(o.x),c=Math.floor(o.y);t.setProperties({rotation:r,translationX:a,translationY:c}),i.setProperties({rotation:r,translationX:a,translationY:c}),s.setProperties({rotation:r,translationX:a,translationY:c}),n.setProperties({rotation:r,translationX:a,translationY:c})}updateGridLines(){const t=this.label.getSideFlag(),{gridLine:{style:i,width:s},gridPadding:n,gridLength:o}=this;o===0||i.length===0||this.gridLineGroupSelection.each((r,a,c)=>{const{stroke:h,lineDash:d}=i[c%i.length];r.setProperties({x1:n,x2:-t*o+n,stroke:h,strokeWidth:s,lineDash:d})})}formatTick(t,i,s,n,o){const{labelFormatter:r,label:{formatter:a},moduleCtx:{callbackCache:c}}=this;let h;if(a){const d=this.getFormatterBoundSeries();h=c.call(this,a,{value:t,index:i,domain:s,fractionDigits:n,boundSeries:d})}else o?h=o(t):r&&(h=r(t));return String(h??t)}formatDatum(t){const{label:{formatter:i},moduleCtx:{callbackCache:s},datumFormatter:n=this.labelFormatter}=this;let o;if(i){const{domain:r}=this.scale,a=this.getFormatterBoundSeries();o=s.call(this,i,{value:t,index:NaN,domain:r,boundSeries:a})}else n?o=s.call(this,n,t):Ue(t)&&(o=t.filter(Boolean).join(" - "));return String(o??t)}getScaleValueFormatter(t){const{scaleFormatterParams:i}=this;let s;try{t!=null&&i!=null&&(s=this.scale.tickFormatter({...i,specifier:t}))}catch{de.warnOnce(`the format string ${t} is invalid, ignoring.`)}return s??(s=n=>this.formatDatum(n)),s}getBBox(){return this.axisGroup.getBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,i,s,n){this.tickLineGroup.setClipRect(new Me(t,i,s,n))}clipGrid(t,i,s,n){this.gridGroup.setClipRect(new Me(t,i,s,n))}getFormatterBoundSeries(){const{direction:t}=this,i=[];for(const s of this.boundSeries){const n=s.getKeys(t),o=s.getNames(t);for(let r=0;r<n.length;r++)i.push({key:n[r],name:o[r]})}return i}getTitleFormatterParams(t){var n;const{direction:i}=this,s=this.getFormatterBoundSeries();return{domain:t,direction:i,boundSeries:s,defaultValue:(n=this.title)==null?void 0:n.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){const{scale:t}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:Ct.is(t)||Hr.is(t),getCanvasBounds:()=>ri.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((i,s)=>(s.getKeyProperties(this.direction).forEach(o=>i.add(o)),i),new Set),seriesIds:()=>this.boundSeries.map(i=>i.id),scaleValueFormatter:i=>this.getScaleValueFormatter(i),scaleInvert:i=>t.invert(i,!0),scaleInvertNearest:i=>t.invert(i,!0),attachLabel:i=>this.attachLabel(i),inRange:(i,s)=>this.inRange(i,s),getRangeOverflow:i=>this.getRangeOverflow(i)}}isReversed(){return this.reverse}};Jr.defaultTickMinSpacing=50;Jr.CrossLineConstructor=Bs;D([E()],Jr.prototype,"nice",2);D([E()],Jr.prototype,"reverse",2);D([E()],Jr.prototype,"keys",2);D([E()],Jr.prototype,"interval",2);D([E()],Jr.prototype,"title",2);D([hl((e,t,i)=>e.onGridLengthChange(t,i))],Jr.prototype,"gridLength",2);var x0=Jr;function UQ(e,t,i){let[s,n]=xi(e);s=YQ(Math.floor(s),n,t);const o=$Q(s,n,t),r=t-1;n=s+r*o;const a=i?[n,s]:[s,n],c=KQ(s,o,t);return{domain:a,ticks:c}}function YQ(e,t,i){const s=Math.abs(t-e)/(i-1),n=Math.floor(Math.log10(s)),o=Math.pow(10,n);return Math.floor(e/o)*o}function KQ(e,t,i){const s=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(s):0,o=Math.pow(10,n),r=[];for(let a=0;a<i;a++){const c=e+t*a;r[a]=Math.round(c*o)/o}return r}function $Q(e,t,i){const s=i-1,n=(t-e)/s;return ZQ(n)}function ZQ(e){const t=Math.floor(Math.log10(e)),i=Math.pow(10,t),s=e/i*10;return s>0&&s<=1?i/10:s>1&&s<=2?2*i/10:s>1&&s<=5?5*i/10:s>5&&s<=10?10*i/10:s>10&&s<=20?20*i/10:s>20&&s<=40?40*i/10:s>40&&s<=50?50*i/10:s>50&&s<=100?100*i/10:s}function M0(){const e=new Map;return t=>{const i=e.get(t);return i?(e.set(t,i+1),`${t}_${i}`):(e.set(t,1),t)}}var WO=class{constructor(e){this.axis=e}estimateTickCount(e,t,i){return mO(ah(this.axis.range),ah(e),t,i,Ct.defaultTickCount,this.axis.defaultTickMinSpacing)}filterTicks(e,t){const{minSpacing:i,maxSpacing:s}=this.axis.interval,o=i!=null||s!=null?Math.ceil(e.length/t):2,r=e.length%o?-1:0;return e.filter((a,c)=>(c+r)%o===0)}generateTicks({domain:e,primaryTickCount:t,visibleRange:i,niceMode:s,parallelFlipRotation:n,regularFlipRotation:o,labelX:r,sideFlag:a}){const{scale:c,label:h,interval:{minSpacing:d,maxSpacing:p}}=this.axis,{parallel:f,rotation:v,fontFamily:y,fontSize:b,fontStyle:w,fontWeight:S}=h,M=t!==void 0,{defaultRotation:R,configuredRotation:A,parallelFlipFlag:T,regularFlipFlag:F}=Ev({rotation:v,parallel:f,regularFlipRotation:o,parallelFlipRotation:n}),P=A+R,N=new bo,{maxTickCount:O}=this.estimateTickCount(i,d,p),V=!(Ct.is(c)||Hr.is(c))||isNaN(O)?10:O;let U=aL(f,A,0,a,F);const se=PQ(f,A,a,T),Ce=Ht.toFontString({fontFamily:y,fontSize:b,fontStyle:w,fontWeight:S}),Se=qr.getMeasurer({font:Ce}),H={fontFamily:y,fontSize:b,fontStyle:w,fontWeight:S,textBaseline:se,textAlign:U},q=h.enabled&&h.avoidCollisions,ie=({ticks:fe},le)=>{if(!q)return!1;const be=A!==0||le!==0,ue=P+le,ae=FQ(h.minSpacing,be);bo.updateTransformMatrix(N,1,1,ue,0,0);const we=kQ(fe,r,N,Se);return QX(we,ae)};let he={tickDomain:[],ticks:[],rawTicks:[],fractionDigits:0,niceDomain:void 0},G=0,W=0,Y=!0,X=!1;for(;!X&&Y&&G<=V;){W=0;for(const fe of this.getTickStrategies({domain:e,niceMode:s,secondaryAxis:M,index:G}))({tickData:he,index:G,autoRotation:W,terminate:X}=fe({index:G,tickData:he,textProps:H,terminate:X,primaryTickCount:t,visibleRange:i,get labelOverlap(){return ie(he,W)}}));Y=ie(he,W)}U=aL(f,A,W,a,F);const ee=R+A+W;return!M&&he.rawTicks.length>0&&(t=he.rawTicks.length),{tickData:he,primaryTickCount:t,combinedRotation:ee,textBaseline:se,textAlign:U}}getTickStrategies({domain:e,niceMode:t,index:i,secondaryAxis:s}){const{scale:n,label:o,interval:r}=this.axis,{minSpacing:a}=r,c=Ct.is(n)||Hr.is(n),h=o.enabled&&o.avoidCollisions,d=!c&&i!==0&&h,p=o.autoRotate===!0&&o.rotation===void 0,f=[];let v;r.values?v=3:s?v=1:d?v=2:v=0;const y=({index:b,tickData:w,primaryTickCount:S,visibleRange:M,terminate:R})=>this.createTickData(e,t,M,S,v,b,w,R);if(f.push(y),!c&&a!=null){const b=({index:w,tickData:S,primaryTickCount:M,visibleRange:R,terminate:A})=>this.createTickData(e,t,R,M,2,w,S,A);f.push(b)}if(h&&p){const b=({index:w,tickData:S,labelOverlap:M,terminate:R})=>({index:w,tickData:S,autoRotation:M?Pt(Wt(o.autoRotateAngle??0)):0,terminate:R});f.push(b)}return f}createTickData(e,t,i,s,n,o,r,a){const{scale:c,interval:h}=this.axis,{step:d,values:p,minSpacing:f,maxSpacing:v}=h,{maxTickCount:y,minTickCount:b,tickCount:w}=this.estimateTickCount(i,f,v),S=Ct.is(c)||Hr.is(c),M=!S||isNaN(y)?10:y,R=T=>S?Math.max(w-T,b):y,A=d==null&&p==null&&R(o)>b&&(S||n===2);for(;o<=M;){const T=r.rawTicks;if(r=this.getTicks({domain:e,niceMode:t,visibleRange:i,tickGenerationType:n,previousTicks:T,minTickCount:b,maxTickCount:y,primaryTickCount:s,tickCount:R(o)}),o++,!A||!jo(r.rawTicks,T))break}return a||(a=d!=null||p!=null),{tickData:r,index:o,autoRotation:0,terminate:a}}getTicks({domain:e,niceMode:t,visibleRange:i,tickGenerationType:s,previousTicks:n,tickCount:o,minTickCount:r,maxTickCount:a,primaryTickCount:c}){const{axis:h}=this,{label:d,range:p,scale:f,interval:v}=h,y=M0(),b={nice:t===0,interval:v.step,tickCount:o,minTickCount:r,maxTickCount:a},w={...b,nice:t===0||t===1};let S=t===0?f.niceDomain(b,e):e,M=S,R;switch(s){case 3:if(M=v.values,R=v.values,Ct.is(f)){const[B,V]=xi(S.map(Number));R=R.filter(U=>Number(U)>=B&&Number(U)<=V).sort((U,se)=>Number(U)-Number(se))}break;case 1:if(Ct.is(f)){const B=UQ(e.map(Number),c??0,h.reverse);R=B.ticks,S=B.domain.map(V=>f.toDomain(V))}else R=f.ticks(w,S,i)??[];break;case 2:R=this.filterTicks(n,o);break;default:R=f.ticks(w,S,i)??[]}const A=R.reduce((B,V)=>Math.max(B,typeof V=="number"?LM(V):0),0),T={domain:M,ticks:R,fractionDigits:A,specifier:d.format},F=f.tickFormatter(T),P=f.domain;f.domain=S;const N=(f.bandwidth??0)/2,O=[];for(let B=0;B<R.length;B++){const V=R[B],U=f.convert(V)+N;if(p.length>0&&!h.inRange(U,.001))continue;const se=d.enabled?h.formatTick(V,B,S,A,F):"";O.push({tick:V,tickId:y(se),tickLabel:se,translationY:Math.floor(U)})}return f.domain=P,{tickDomain:M,rawTicks:R,fractionDigits:A,ticks:O,niceDomain:S}}},D0=class extends Vi{constructor(){super(...arguments),this.autoRotateAngle=335}};D([E()],D0.prototype,"autoRotate",2);D([E()],D0.prototype,"autoRotateAngle",2);var R0=class jO extends x0{constructor(t,i){super(t,i),this.lineNode=this.axisGroup.appendChild(new Lv({name:`${this.id}-Axis-line`,zIndex:1})),this.tempText=new nh({debugDirty:!1}),this.tempCaption=new jt,this.tickGenerator=new WO(this),this.generatedTicks=void 0,this.animationManager=t.animationManager,this.animationState=new wp("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:n=>this.animateReadyUpdate(n),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this.axisGroup.appendChild(this.title.caption.node);let s;this.destroyFns.push(t.layoutManager.addListener("layout:complete",n=>{const o=[n.chart.width,n.chart.height];s!=null&&!jo(o,s)&&this.animationState.transition("resize"),s=o}),this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}static is(t){return t instanceof jO}resetAnimation(t){t==="initial"&&this.animationState.transition("reset")}get direction(){return this.position==="top"||this.position==="bottom"?"x":"y"}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new D0}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}calculateTickLayout(t,i,s,n){const o=this.label.getSideFlag(),{parallelFlipRotation:r,regularFlipRotation:a}=this.calculateRotations(),c=o*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding);if(i===2&&this.label.enabled===!1&&this.tick.enabled===!1&&this.gridLine.enabled===!1)return this.generatedTicks={ticks:[],labels:[]},{ticks:[],tickDomain:t,niceDomain:t,primaryTickCount:n,fractionDigits:0,bbox:this.tickBBox(t,[],[])};const h=this.tickGenerator.generateTicks({domain:t,niceMode:i,visibleRange:s,primaryTickCount:n,parallelFlipRotation:r,regularFlipRotation:a,labelX:c,sideFlag:o}),{tickData:d,primaryTickCount:p=n}=h,{ticks:f,tickDomain:v,rawTicks:y,fractionDigits:b,niceDomain:w=t}=d,S=f.map(R=>this.getTickLabelProps(R,h)),M=this.tickBBox(v,f,S);return this.generatedTicks={ticks:f,labels:S},{ticks:y,tickDomain:v,niceDomain:w,primaryTickCount:p,fractionDigits:b,bbox:M}}update(){var o;this.updateDirection();const t=Array.from(this.tickLabelGroupSelection.nodes(),r=>r.datum.tickId);if(super.update(),this.animatable||this.moduleCtx.animationManager.skipCurrentBatch(),this.generatedTicks){const{ticks:r}=this.generatedTicks;if(this.animationManager.isSkipped())this.resetSelectionNodes();else{const a=r.map(h=>h.tickId),c=D9(t,a);this.animationState.transition("update",c)}}const{enabled:i,stroke:s,width:n}=this.line;this.lineNode.setProperties({stroke:s,strokeWidth:i?n:0}),this.updateTitle(this.scale.domain,!((o=this.generatedTicks)!=null&&o.ticks.length))}updatePosition(){super.updatePosition(),this.axisGroup.datum=this.getAxisTransform()}tickBBox(t,i,s){var f;const n=this.label.getSideFlag(),o=[],{x:r,y1:a,y2:c}=this.getAxisLineCoordinates(),h=new Me(r+Math.min(n*this.seriesAreaPadding,0),a,this.seriesAreaPadding,c-a);if(o.push(h),this.tick.enabled)for(const v of i){const{x1:y,x2:b,y:w}=this.getTickLineCoordinates(v),S=new Me(y,w,b-y,0);o.push(S)}const{tempText:d}=this;if(this.label.enabled)for(const v of s){if(!v.visible)continue;d.setProperties({...v,translationY:Math.round(v.translationY)});const y=d.getBBox();y&&o.push(y)}if((f=this.title)!=null&&f.enabled){const v=Me.merge(o).width;this.setTitleProps(this.tempCaption,{domain:t,spacing:v});const y=this.tempCaption.node.getBBox();y&&o.push(y)}const p=Me.merge(o);return this.getTransformBox(p)}setTitleProps(t,i){const{title:s}=this;if(!s.enabled){t.enabled=!1,t.node.visible=!1;return}t.enabled=!0,t.color=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.wrapping=s.wrapping;const n=t.node,o=(s.spacing??0)+i.spacing,r=this.label.getSideFlag(),a=Pt(this.rotation),c=r===-1&&a>Math.PI&&a<Math.PI*2?-1:1,h=c*r*Math.PI/2,d=c===1?"bottom":"top",{range:p}=this,f=Math.floor(c*r*(p[0]+p[1])/2),v=Math.floor(r===-1?c*-o:-o),{callbackCache:y}=this.moduleCtx,{formatter:b=S=>S.defaultValue}=s,w=y.call(this,b,this.getTitleFormatterParams(i.domain));t.text=w,n.setProperties({visible:!0,text:w,textBaseline:d,x:f,y:v,rotation:h})}getTickLabelProps(t,i){const{combinedRotation:s,textBaseline:n,textAlign:o}=i,{range:r}=this.scale,a=t.tickLabel,h=this.label.getSideFlag()*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),d=a!==""&&a!=null;return{...this.getLabelStyles({value:t.tickLabel}),tickId:t.tickId,rotation:s,rotationCenterX:h,translationY:t.translationY,text:a,textAlign:o,textBaseline:n,visible:d,x:h,y:0,range:r}}getTickLineCoordinates(t){const s=this.label.getSideFlag()*this.getTickSize(),n=Math.min(0,s),o=n+Math.abs(s),r=t.translationY;return{x1:n,x2:o,y:r}}updateSelections(){if(!this.generatedTicks)return;const t=this.getAxisLineCoordinates(),{ticks:i,labels:s}=this.generatedTicks,n=o=>o.tickId;this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?i:[],void 0,n),this.tickLineGroupSelection.update(i,void 0,n),this.tickLabelGroupSelection.update(s,void 0,n)}updateTitle(t,i,s){const{title:n,tickLineGroup:o,tickLabelGroup:r,lineNode:a}=this;n.enabled&&!i&&s==null&&(s=Ne.computeChildrenBBox([o,r,a]).width+(r.visible?0:this.seriesAreaPadding)),s??(s=0),this.setTitleProps(n.caption,{domain:t,spacing:s})}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((t,i)=>{t.fill=i.fill,t.fontFamily=i.fontFamily,t.fontSize=i.fontSize,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.text=i.text,t.textBaseline=i.textBaseline,t.textAlign=i.textAlign??"center"})}animateReadyUpdate(t){const{animationManager:i}=this.moduleCtx,s=Iv(this),n=BO(s);ii(this.id,"axis-group",i,[this.axisGroup],n.group),ii(this.id,"line",i,[this.lineNode],n.line),ii(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],n.tick,(o,r)=>r.tickId,t),ii(this.id,"tick-labels",i,[this.tickLabelGroupSelection],n.label,(o,r)=>r.tickId,t)}resetSelectionNodes(){const t=Iv(this);Ki([this.axisGroup],zO()),Ki([this.gridLineGroupSelection,this.tickLineGroupSelection],b0(t)),Ki([this.tickLabelGroupSelection],w0()),Ki([this.lineNode],HO())}};D([E()],R0.prototype,"thickness",2);D([E()],R0.prototype,"position",2);var xp=R0,UO=["top","right","bottom","left"];function qQ(e){return typeof e=="string"&&UO.includes(e)}function XQ(e){const t=[],i=[],s=[...UO];for(const n of e)n instanceof xp&&(qQ(n.position)?i.push(n.position):t.push(n));for(const n of t){let o;do o=s.pop();while(o&&i.includes(o));if(o==null)break;n.position=o}}var QQ=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function JQ(e,t,i){var h,d;const s=(p,f,v)=>{const y=[p];for(const b of QQ)b in f&&f[b]!=null&&y.push(`${b}=${f[b]}`);return v!=null&&v.seriesGrouping&&y.push(`seriesGrouping.groupId=${v==null?void 0:v.seriesGrouping.groupId}`),y.join(";")},n=new Map;let o=0;for(const p of e){const f=s(p.type,p.properties,i==null?void 0:i[o]);n.has(f)||n.set(f,[]),(h=n.get(f))==null||h.push([p,o++])}const r=new Map;o=0;for(const p of t){const f=s(p.type,p,p);r.has(f)||r.set(f,[]),(d=r.get(f))==null||d.push([p,o++])}if(![...n.keys()].some(p=>r.has(p)))return{status:"no-overlap",oldKeys:n.keys(),newKeys:r.keys()};const c=[];for(const[p,f]of r.entries())for(const[v,y]of f){const b=n.get(p);if(b==null||b.length<1){c.push({opts:v,targetIdx:y,idx:y,status:"add"}),n.delete(p);continue}const[w,S]=b.shift(),M=(i==null?void 0:i[S])??{},R=er(M,v??{}),{groupIndex:A,stackIndex:T}=(R==null?void 0:R.seriesGrouping)??{};A!=null||T!=null?c.push({opts:v,series:w,diff:R,targetIdx:y,idx:S,status:"series-grouping"}):R?c.push({opts:v,series:w,diff:R,targetIdx:y,idx:S,status:"update"}):c.push({opts:v,series:w,targetIdx:y,idx:S,status:"no-op"}),b.length===0&&n.delete(p)}for(const p of n.values())for(const[f,v]of p)c.push({series:f,idx:v,targetIdx:-1,status:"remove"});return{status:"overlap",changes:c}}function ea(e){var i;const{series:t}=e;return((i=t==null?void 0:t[0])==null?void 0:i.type)??"line"}function A0(e){const t=ea(e);return Kt.isCartesian(t)||pQ(t)}function YO(e){const t=ea(e);return Kt.isPolar(t)||fQ(t)}function KO(e){const t=ea(e);return Kt.isHierarchy(t)||mQ(t)}function $O(e){const t=ea(e);return Kt.isTopology(t)||vQ(t)}function ZO(e){const t=ea(e);return Kt.isFlowProportion(t)||yQ(t)}function E0(e){const t=ea(e);return Kt.isStandalone(t)||CQ(t)}function T0(e){const t=ea(e);return Kt.isGauge(t)||SQ(t)}function e7(e){const t=ea(e);return YO(e)&&t!=="pie"&&t!=="donut"}var t7=class extends C0{applyOptions(e){for(const t of this.moduleMap.values())t.module.optionsKey in e&&Jo(t.moduleInstance)&&t.moduleInstance.set(e[t.module.optionsKey])}*legends(){for(const{module:e,moduleInstance:t}of this.moduleMap.values())e.type==="legend"&&(yield{legendType:e.identifier,legend:t})}},px="ag-charts-overlay",fL="ag-charts-dark-overlay",lc=class extends Be{constructor(e,t){super(),this.className=e,this.defaultMessageId=t,this.enabled=!0}getText(e){return e.t(this.text??this.defaultMessageId)}getElement(e,t,i){var s;if((s=this.content)==null||s.remove(),this.focusBox=i,this.renderer){const n=this.renderer();if(n instanceof HTMLElement)this.content=n;else{const o=$e("div");o.innerHTML=n,this.content=o.firstElementChild}}else{const n=$e("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",fontFamily:"var(--ag-charts-font-family)",fontSize:"var(--ag-charts-font-size)",fontWeight:"var(--ag-charts-font-weight)"});n.innerText=this.getText(t),this.content=n,e==null||e.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(o){n.style.opacity=String(o)},onStop(){n.style.opacity="1"}})}return this.content}removeElement(e=()=>{var i;return(i=this.content)==null?void 0:i.remove()},t){if(this.content){if(t){const{content:i}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(s){i.style.opacity=String(s)},onStop(){e==null||e()}})}else e==null||e();this.content=void 0,this.focusBox=void 0}}};D([E()],lc.prototype,"enabled",2);D([E()],lc.prototype,"text",2);D([E()],lc.prototype,"renderer",2);var Ah=class extends Be{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new lc("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new lc("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new lc("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new lc("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(e){for(const t of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(t.focusBox!==void 0)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};D([E()],Ah.prototype,"darkTheme",2);D([E()],Ah.prototype,"loading",2);D([E()],Ah.prototype,"noData",2);D([E()],Ah.prototype,"noVisibleSeries",2);D([E()],Ah.prototype,"unsupportedBrowser",2);function i7(e,t){const{animationDuration:i}=Vg.add,s=i*t,n=$e("div",`${px}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${s}ms linear 50ms both`}),o=$e("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),r=$e("p",{marginTop:"1em"});r.innerText=e;const a=$e("div",`${px}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),c=$e("style");return c.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),n.replaceChildren(c,o,r,a),n}var qO=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.ANY_CONTENT=1]="ANY_CONTENT",e))(qO||{}),XO=(e=>(e[e.FOREGROUND=0]="FOREGROUND",e[e.HIGHLIGHT=1]="HIGHLIGHT",e[e.LABEL=2]="LABEL",e))(XO||{});function vc(e,t,i){if(So(e))return{type:"gradient",gradient:e.gradient??t.gradient,colorStops:e.colorStops??t.colorStops,bounds:e.bounds??t.bounds,rotation:e.rotation??t.rotation,reverse:e.reverse??t.reverse};if(Dc(e)&&i){const s=e.pattern??i.pattern;let n=e.strokeWidth;s==="backward-slanted-lines"||s==="forward-slanted-lines"||s==="horizontal-lines"||s==="vertical-lines"?n??(n=i.strokeWidth):n??(n=0);const o=e.width??e.height??i.width,r=e.height??e.width??i.height;return{type:"pattern",pattern:s,width:o,height:r,padding:e.padding??i.padding,fill:e.fill??i.fill,fillOpacity:e.fillOpacity??i.fillOpacity,backgroundFill:e.backgroundFill??i.backgroundFill,backgroundFillOpacity:e.backgroundFillOpacity??i.backgroundFillOpacity,stroke:e.stroke??i.stroke,strokeOpacity:e.strokeOpacity??i.strokeOpacity,strokeWidth:n,rotation:e.rotation??i.rotation}}return e}function Yo(e,t,i){return!So(e==null?void 0:e.fill)&&!Dc(e==null?void 0:e.fill)?e:{...e,fill:vc(e.fill,t,i)}}function My(e,t,i,s){i==null||!So(t)||t.bounds==null||t.bounds==="item"?e.fillBBox=void 0:e.fillBBox=i[t.bounds],e.fillParams=s}function Ec(e,t,i,s,n){const o=(i==null?void 0:i.fill)??t.fill;e.fill=o,My(e,(i==null?void 0:i.fill)??t.fill,s,n),e.fillOpacity=(i==null?void 0:i.fillOpacity)??t.fillOpacity??1,e.stroke=(i==null?void 0:i.stroke)??t.stroke,e.strokeOpacity=(i==null?void 0:i.strokeOpacity)??t.strokeOpacity??1,e.strokeWidth=(i==null?void 0:i.strokeWidth)??t.strokeWidth??0,e.lineDash=(i==null?void 0:i.lineDash)??t.lineDash,e.lineDashOffset=(i==null?void 0:i.lineDashOffset)??t.lineDashOffset??0}var QO=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(QO||{}),s7=.25,n7=.125,Mp=class{constructor(e,t,i,s){this.type=e,this.event=t,this.defaultPrevented=!1,this.datum=i.datum,this.seriesId=s.id}preventDefault(){this.defaultPrevented=!0}},I0=class{constructor(e,t,i){this.series=e,this.seriesGrouping=t,this.oldGrouping=i,this.type="groupingChanged"}},Dy=class extends bN{constructor(e){super(),this.destroyFns=[],this.usesPlacedLabels=!1,this.seriesGrouping=void 0,this.NodeEvent=Mp,this.internalId=vn(this),this.contentGroup=new Ps({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new Ps({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new Ps({name:`${this.internalId}-annotation`}),this.labelGroup=new Ps({name:`${this.internalId}-series-labels`}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new C0,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this._declarationOrder=-1,this.seriesListeners=new Xr,this._pickNodeCache=new ZM;const{moduleCtx:t,pickModes:i,directionKeys:s={},directionNames:n={},canHaveAxes:o=!1,usesPlacedLabels:r=!1}=e;this.ctx=t,this.directionKeys=s,this.directionNames=n,this.canHaveAxes=o,this.usesPlacedLabels=r,this.highlightGroup=new Ps({name:`${this.internalId}-highlight`}),this.highlightNode=this.highlightGroup.appendChild(new Ne({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new Ne({name:"highlightLabel",zIndex:10})),this.pickModes=i}get pickModeAxis(){return"main"}get id(){var e;return((e=this.properties)==null?void 0:e.id)??this.internalId}get type(){return this.constructor.type??""}get focusable(){return!0}get data(){return this._data??this._chartData}set visible(e){this.properties.visible=e,this.ctx.legendManager.toggleItem(e,this.id),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){return this.data!=null&&this.data.length>0}get tooltipEnabled(){var e;return(e=this.properties.tooltip)==null?void 0:e.enabled}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){const{internalId:i,type:s,visible:n}=this;e&&this.ctx.seriesStateManager.deregisterSeries(this),t&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:s,visible:n,seriesGrouping:t}),this.fireEvent(new I0(this,t,e))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(e,t,i){e.appendChild(this.contentGroup),t.appendChild(this.highlightGroup),t.appendChild(this.labelGroup),i==null||i.appendChild(this.annotationGroup)}detachSeries(e,t,i){e==null||e.removeChild(this.contentGroup),t.removeChild(this.highlightGroup),t.removeChild(this.labelGroup),i==null||i.removeChild(this.annotationGroup)}setSeriesIndex(e){return e===this._declarationOrder?!1:(this._declarationOrder=e,this.contentGroup.zIndex=[1,e,0],this.highlightGroup.zIndex=[1,e,1],this.labelGroup.zIndex=[1,e,2],this.annotationGroup.zIndex=e,!0)}renderToOffscreenCanvas(){return!1}addEventListener(e,t){return super.addEventListener(e,t)}removeEventListener(e,t){return super.removeEventListener(e,t)}hasEventListener(e){return super.hasEventListener(e)}addListener(e,t){return this.seriesListeners.addListener(e,t)}dispatch(e,t){this.seriesListeners.dispatch(e,t)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns=[],this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(e,t){const i=this.resolveKeyDirection(e),s=t==null?void 0:t[i],n=[];if(!s)return n;const o=(...r)=>{for(const a of r)Array.isArray(a)?o(...a):typeof a=="object"?o(...Object.values(a)):n.push(a)};return o(...s.map(r=>this.properties[r])),n}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getKeyProperties(e){return this.directionKeys[this.resolveKeyDirection(e)]??[]}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){const t=this.getSeriesDomain(e),i=this.moduleMap.mapModules(s=>s.getDomain(e)).flat();return i.length!==0?t.concat(i):t}getRange(e,t){return this.getSeriesRange(e,t)}getVisibleItems(e,t,i){return 1/0}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||t===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return t}}getStrokeWidth(e){const{strokeWidth:t,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||t===void 0)return e;switch(this.isItemIdHighlighted()){case 1:return t;case 0:case 2:return e}}isItemIdHighlighted(){var t,i;const e=(i=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight())==null?void 0:i.series;return e==null?0:e!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(e=>e.getTooltipParams()).reduce((e,t)=>Object.assign(e,t),{})}pickNodes(e,t,i=!1){const{pickModes:s,pickModeAxis:n,visible:o,contentGroup:r}=this;if(!o||!r.visible||t==="highlight"&&!this.properties.highlight.enabled||t==="highlight-tooltip"&&!this.properties.highlight.enabled)return;let a=1/0;if(t==="tooltip"||t==="highlight-tooltip"){const{tooltip:f}=this.properties;a=typeof f.range=="number"?f.range:1/0,i||(i=f.range==="exact")}else if(t==="event"||t==="context-menu"){const{nodeClickRange:f}=this.properties;a=typeof f=="number"?f:1/0,i||(i=f==="exact")}const c=s.filter(f=>!i||f===0),{x:h,y:d}=e,p=JSON.stringify({x:h,y:d,maxDistance:a,selectedPickModes:c});if(this._pickNodeCache.has(p))return this._pickNodeCache.get(p);for(const f of c){let v;switch(f){case 0:{const y=this.pickNodesExactShape(e);v=y.length===0?void 0:{datums:y,distance:0};break}case 1:{const y=this.pickNodeClosestDatum(e),b=(y==null?void 0:y.distance)===0?this.pickNodesExactShape(e):void 0;b!=null&&b.length!==0?v={datums:b,distance:0}:y?v={datums:[y.datum],distance:y.distance}:v=void 0;break}case 2:{const y=n!=null?this.pickNodeMainAxisFirst(e,n==="main-category"):void 0;v=y!=null?{datums:[y.datum],distance:y.distance}:void 0;break}}if(v&&v.distance<=a)return this._pickNodeCache.set(p,{pickMode:f,datums:v.datums,distance:v.distance})}return this._pickNodeCache.set(p,void 0)}pickNodesExactShape(e){const t=[];for(const i of this.contentGroup.pickNodes(e.x,e.y)){const s=i.closestDatum();s!=null&&s.missing!==!0&&t.push(s)}return t}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){var n;const i=iy(e.x,e.y,t),s=(n=i.nearest)==null?void 0:n.closestDatum();if(s!=null&&s.missing!==!0)return{datum:s,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(e){}fireNodeClickEvent(e,t){const i=new this.NodeEvent("seriesNodeClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}fireNodeDoubleClickEvent(e,t){const i=new this.NodeEvent("seriesNodeDoubleClick",e,t,this);return this.fireEvent(i),!i.defaultPrevented}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}onLegendInitialState(e,t){const{visible:i=!0,itemId:s,legendItemName:n}=t??{};this.toggleSeriesItem(i,e,s,n)}onLegendItemClick(e){const{enabled:t,itemId:i,series:s,legendType:n}=e,o="legendItemName"in this.properties?this.properties.legendItemName:void 0,r="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,a=o!=null&&o===e.legendItemName;(s.id===this.id||a||r!=null)&&this.toggleSeriesItem(t,n,i,o,e)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n,legendType:o}=e,r="legendItemName"in this.properties?this.properties.legendItemName:void 0,a="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,c=r!=null&&r===e.legendItemName;s.id===this.id||c||a!=null?this.toggleSeriesItem(!0,o,i,r,e):t&&n===1?this.toggleSeriesItem(!0,o,void 0,r):this.toggleSeriesItem(!1,o,void 0,r)}toggleSeriesItem(e,t,i,s,n){const o=this.id;(e||t!=="category")&&(this.visible=e),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const r={type:"seriesVisibilityChange",seriesId:o,itemId:i,legendItemName:(n==null?void 0:n.legendItemName)??s,visible:e};this.fireEvent(r),this.ctx.legendManager.toggleItem(e,o,i,s)}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getLabelText(e,t,i=$r){return e.formatter?this.ctx.callbackCache.call(this.properties,e.formatter,{seriesId:this.id,...t})??this.callWithContext(i,t.value):this.callWithContext(i,t.value)}getMarkerStyle(e,t,i,s=!1,n=e.size??0,o){const{itemStyler:r,fillGradientDefaults:a,fillPatternDefaults:c}=e;let d=Yo(Qe({size:n},o,e.getStyle()),a,c);if(r&&i){const p=this.ctx.callbackCache.call(this.properties,r,{seriesId:this.id,...d,...i,highlighted:s,datum:t});d=Yo(Qe(p,d),a,c)}return d}updateMarkerStyle(e,t,i,s,n,o,r,a,{applyTranslation:c=!0,selected:h=!0}={}){const d=this.getMarkerStyle(e,i,n,o,s==null?void 0:s.size,r),{shape:p,size:f}=d,v=this.visible&&f>0&&s&&!isNaN(s.x)&&!isNaN(s.y);if(Ec(t,d,void 0,a),c?t.setProperties({visible:v,shape:p,size:f,x:s==null?void 0:s.x,y:s==null?void 0:s.y,scalingCenterX:s==null?void 0:s.x,scalingCenterY:s==null?void 0:s.y}):t.setProperties({visible:v,shape:p,size:f}),h||(t.fillOpacity*=s7,t.strokeOpacity*=n7),typeof e.shape=="function"&&!t.dirtyPath){t.path.clear(!0),t.updatePath(),t.checkPathDirty();const y=t.getBBox();if(s!==void 0&&y.isFinite()){const b=y.computeCenter(),[w,S]=["x","y"].map(M=>(d.strokeWidth??0)+Math.abs(b[M]-s[M]));s.focusSize=Math.max(y.width+w,y.height+S)}}}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){const{width:t,height:i}=e??{width:NaN,height:NaN},s=e?{seriesRectWidth:t,seriesRectHeight:i}:void 0,n=er(this.nodeDataDependencies,s)!=null;return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}pickFocus(e){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(e,t){const{datumCallbackCache:i}=this,s=i.get(e);if(s!=null)return s;try{const n=t();return i.set(e,n),n}catch(n){de.error(String(n))}}callWithContext(e,...t){return a0(this.properties,e,t)}};D([Js({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],Dy.prototype,"seriesGrouping",2);function ze(e){const{changeCb:t,convertor:i}=e??{};return De({type:"path",convertor:i,changeCb:t})}var zs=class extends $n{constructor(){super(...arguments),this.path=new sh,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0,this.lastPixelRatio=NaN}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty("path"))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var e,t;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(((e=this.fillShadow)==null?void 0:e.isDirty())??!1)||(((t=this._clipPath)==null?void 0:t.isDirty())??!1))}computeBBox(){return this.updatePathIfDirty(),this.path.computeBBox()}isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}distanceSquared(e,t){return this.distanceSquaredTransformedPoint(e,t)}svgPathData(e){return this.updatePathIfDirty(),this.path.toSVG(e)}distanceSquaredTransformedPoint(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)?0:this.path.distanceSquared(e,t)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(e){return e.devicePixelRatio!==this.lastPixelRatio&&(this.dirtyPath=!0),this.lastPixelRatio=e.devicePixelRatio,this.updatePathIfDirty(),super.preRender(e,this.path.commands.length)}render(e){var i,s;const{ctx:t}=e;if(this.clip&&!isNaN(this._clipX)&&!isNaN(this._clipY)){t.save();const n=this.strokeWidth/2;this._clipPath??(this._clipPath=new sh),this._clipPath.clear(),this._clipPath.rect(-n,-n,this._clipX+n,this._clipY+n+n),t.clip((i=this._clipPath)==null?void 0:i.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(t),t.restore()}else this._clipPath=void 0,this.drawPath(t);(s=this.fillShadow)==null||s.markClean(),super.render(e)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}toSVG(){if(!this.visible)return;const e=Zi("path");e.setAttribute("d",this.svgPathData());const t=this.applySvgFillAttributes(e,[]);return this.applySvgStrokeAttributes(e),{elements:[e],defs:t}}};zs.className="Path";D([ze()],zs.prototype,"clip",2);D([ze()],zs.prototype,"clipX",1);D([ze()],zs.prototype,"clipY",1);var o7=class{constructor(e){this.swapChain=e,this.hasBeenActivated=!1,this.div=$e("div"),this.svg=Zi("svg"),this.outerPath=Zi("path"),this.innerPath=Zi("path"),this.svg.append(this.outerPath),this.svg.append(this.innerPath),this.outerPath.classList.add("ag-charts-focus-svg-outer-path"),this.innerPath.classList.add("ag-charts-focus-svg-inner-path"),this.element=$e("div","ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",t=>this.onSwap(t))}clear(){}update(e,t,i){if(t!=null)if(e instanceof zs){const s=(o,r)=>{let{x:a,y:c}=ri.toCanvasPoint(e,o,r);return a-=t.x??0,c-=t.y??0,{x:a,y:c}},n=e.svgPathData(s);this.outerPath.setAttribute("d",n),this.innerPath.setAttribute("d",n),this.show(this.svg)}else{let s;if(i){const n=Math.max(e.x-t.x,0),o=Math.max(e.y-t.y,0),r=Math.min(e.x+e.width-t.x,t.width),a=Math.min(e.y+e.height-t.y,t.height);s=new Me(n,o,r-n,a-o)}else s=new Me(e.x-t.x,e.y-t.y,e.width,e.height);Cv(this.div,s),this.show(this.div)}}onSwap(e){e!==this.element.parentElement&&(this.element.remove(),e.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(e){this.hasBeenActivated=!0,this.element.innerHTML="",this.element.append(e)}overrideFocusVisible(e){this.focusVisible=e;const t={true:"1",false:"0",undefined:""},i=this.element.parentElement;i==null||i.style.setProperty("opacity",t[`${e}`])}isFocusVisible(e=!1){if(!e&&!this.hasBeenActivated)return!1;const t=this.element.parentElement;return t!=null&&Et().getComputedStyle(t).opacity==="1"}},r7=class{constructor(e,t,i,s){this.label1=e,this.label2=t,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=n=>(uo(n.target,"pointer-events",void 0),!this.skipDispatch&&this.dispatch("blur",n)),this.onFocus=n=>(uo(n.target,"pointer-events","auto"),!this.skipDispatch&&this.dispatch("focus",n)),At(this.label1,"id",`${i}-label1`),At(this.label2,"id",`${i}-label2`),uo(this.label1,"display","none"),uo(this.label2,"display","none"),this.activeAnnouncer=this.createAnnouncer(s),this.inactiveAnnouncer=this.createAnnouncer(s),At(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap("")}createAnnouncer(e){const t=$e("div");return t.role=e,t.className="ag-charts-swapchain",t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t}destroy(){for(const e of[this.activeAnnouncer,this.inactiveAnnouncer])e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.remove()}focus(e){this.focusOptions=e,this.activeAnnouncer.focus(e),this.focusOptions=void 0}update(e){this.skipDispatch=!0,this.swap(e),this.hasFocus&&this.activeAnnouncer.focus(this.focusOptions),this.skipDispatch=!1}addListener(e,t){this.listeners[e].push(t),e==="swap"&&t(this.activeAnnouncer)}dispatch(e,t){e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),this.listeners[e].forEach(i=>i(t))}swap(e){const t=this.activeAnnouncer.tabIndex;this.label2.textContent=e,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],Rc(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),Rc(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:t}),this.dispatch("swap",this.activeAnnouncer)}},a7={arrowdown:{bindings:[{code:"ArrowDown"}]},arrowleft:{bindings:[{code:"ArrowLeft"}]},arrowright:{bindings:[{code:"ArrowRight"}]},arrowup:{bindings:[{code:"ArrowUp"}]},delete:{bindings:[{key:"Backspace"},{key:"Delete"}],activatesFocusIndicator:!1},redo:{bindings:[{key:"y",ctrlOrMeta:!0},{key:"z",ctrlOrMeta:!0,shift:!0}],activatesFocusIndicator:!1},undo:{bindings:[{key:"z",ctrlOrMeta:!0}],activatesFocusIndicator:!1},submit:{bindings:[{key:"Enter"},{code:"Enter"},{code:"Space"}]},zoomin:{bindings:[{key:"+"},{code:"ZoomIn"},{code:"Add"}],activatesFocusIndicator:!1},zoomout:{bindings:[{key:"-"},{code:"ZoomOut"},{code:"Substract"}],activatesFocusIndicator:!1}};function l7(e,t){for(const i of t)if("code"in i){if(i.code===e.code)return!0}else if(i.key===e.key&&(i.shift===void 0||i.shift===e.shiftKey)&&(i.ctrlOrMeta===void 0||i.ctrlOrMeta===e.ctrlKey||i.ctrlOrMeta===e.metaKey))return!0;return!1}function c7(e){for(const[t,{activatesFocusIndicator:i=!0,bindings:s}]of po(a7))if(l7(e,s))return{name:t,activatesFocusIndicator:i}}function u7(e,t,i){const s=l0(e,i.datum,i.movedBounds);if(s!=null)return{x:s.canvasX,y:s.canvasY};const n=i.bounds;if(n!=null){if(n instanceof Me){const{x:o,y:r}=n.computeCenter();return{x:t.x+o,y:t.y+r}}return ri.toCanvas(n).computeCenter()}}function h7({bounds:e}){return e instanceof Me?e:e!=null?ri.toCanvas(e):Me.NaN}function d7(e,t,i){const{x:s,y:n}=u7(e,t,i)??{};if(s!==void 0&&n!==void 0)return{type:"keyboard",canvasX:s,canvasY:n}}function L0(){return(e,t)=>{const i=[`Property [${e}] is deprecated.`,t].filter(Boolean).join(" ");de.warnOnce(i)}}function JO(e,t){const i=L0(),s=t==null?void 0:t.default;return tl((n,o,r)=>(r!==s&&i(o.toString(),e),r))}function g7(e,t){const i=L0();return tl((s,n,o)=>(o!==s[e]&&(i(n.toString(),`Use [${e}] instead.`),OM(s,e,t?t(o):o)),gv),(s,n)=>(i(n.toString(),`Use [${e}] instead.`),ih(s,e)))}function e1(e,t,i,s){let{top:n,right:o,bottom:r,left:a,width:c,height:h}=s;return a!=null?c!=null?o=i.width-a+c:o!=null&&(c=i.width-a-o):o!=null&&c!=null&&(a=i.width-o-c),n!=null?h!=null?r=i.height-n-h:r!=null&&(h=i.height-r-n):r!=null&&h!=null&&(n=i.height-r-h),c==null?h==null?(c=e,h=t):c=Math.ceil(e*h/t):h==null&&(h=Math.ceil(t*c/e)),a==null&&(o==null?a=Math.floor((i.width-c)/2):a=i.width-o-c),n==null&&(r==null?n=Math.floor((i.height-h)/2):n=i.height-h-r),{x:a,y:n,width:c,height:h}}var mL=.1,vL=200,yL=12,p7=.5,f7=class extends Xr{constructor(){super(...arguments),this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(e,t){if(Number.isNaN(this.x)||Number.isNaN(this.y)){this.x=e,this.y=t,this.vx=0,this.vy=0,this.emitUpdate(),this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0);return}this.x1=e,this.y1=t,this.t0=Date.now(),this.animationFrameHandle==null&&(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:e,y1:t,t0:i}=this,s=Date.now(),n=s-i;this.t0=s;const o=.001,r=Math.ceil(n/(o*1e3))|0;let{x:a,y:c,vx:h,vy:d}=this;for(let p=0;p<r;p+=1){const f=a-e,v=c-t,y=-(vL*f+yL*h)/mL,b=-(vL*v+yL*d)/mL;h+=y*o,d+=b*o,a+=h*o,c+=d*o}Math.hypot(a-e,c-t)<p7?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=a,this.y=c,this.vx=h,this.vy=d,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.dispatch("update",{type:"update",x:this.x,y:this.y})}},wm=null;function bg(e){return e===""?"":(wm??(wm=$e("div")),wm.textContent=String(e),wm.innerHTML.replace(/\n/g,"<br>"))}function ag(e,t){const{path:i,size:s}=e,{x:n,y:o}=e;i.clear();let r=!1;for(const[a,c]of t){const h=n+(a-.5)*s,d=o+(c-.5)*s;r?i.lineTo(h,d):i.moveTo(h,d),r=!0}i.closePath()}var m7={circle({path:e,x:t,y:i,size:s}){const n=s/2;e.clear(),e.arc(t,i,n,0,Math.PI*2),e.closePath()},cross(e){ag(e,[[.25,0],[.5,.25],[.75,0],[1,.25],[.75,.5],[1,.75],[.75,1],[.5,.75],[.25,1],[0,.75],[.25,.5],[0,.25]])},diamond(e){ag(e,[[.5,0],[1,.5],[.5,1],[0,.5]])},heart({path:e,x:t,y:i,size:s}){const n=s/4;i=i+n/2,e.clear(),e.arc(t-n,i-n,n,Wt(130),Wt(330)),e.arc(t+n,i-n,n,Wt(220),Wt(50)),e.lineTo(t,i+n),e.closePath()},pin({path:e,x:t,y:i,size:s}){e.moveTo(t+(.15625-.5)*s,i+(.34375-.5)*s),e.cubicCurveTo(t+(.15625-.5)*s,i+(.151491-.5)*s,t+(.307741-.5)*s,i+(0-.5)*s,t+(.5-.5)*s,i+(0-.5)*s),e.cubicCurveTo(t+(.692259-.5)*s,i+(0-.5)*s,t+(.84375-.5)*s,i+(.151491-.5)*s,t+(.84375-.5)*s,i+(.34375-.5)*s),e.cubicCurveTo(t+(.84375-.5)*s,i+(.493824-.5)*s,t+(.784625-.5)*s,i+(.600181-.5)*s,t+(.716461-.5)*s,i+(.695393-.5)*s),e.cubicCurveTo(t+(.699009-.5)*s,i+(.719769-.5)*s,t+(.681271-.5)*s,i+(.743104-.5)*s,t+(.663785-.5)*s,i+(.766105-.5)*s),e.cubicCurveTo(t+(.611893-.5)*s,i+(.834367-.5)*s,t+(.562228-.5)*s,i+(.899699-.5)*s,t+(.528896-.5)*s,i+(.980648-.5)*s),e.cubicCurveTo(t+(.524075-.5)*s,i+(.992358-.5)*s,t+(.512663-.5)*s,i+(1-.5)*s,t+(.5-.5)*s,i+(1-.5)*s),e.cubicCurveTo(t+(.487337-.5)*s,i+(1-.5)*s,t+(.475925-.5)*s,i+(.992358-.5)*s,t+(.471104-.5)*s,i+(.980648-.5)*s),e.cubicCurveTo(t+(.487337-.5)*s,i+(1-.5)*s,t+(.475925-.5)*s,i+(.992358-.5)*s,t+(.471104-.5)*s,i+(.980648-.5)*s),e.cubicCurveTo(t+(.437772-.5)*s,i+(.899699-.5)*s,t+(.388107-.5)*s,i+(.834367-.5)*s,t+(.336215-.5)*s,i+(.766105-.5)*s),e.cubicCurveTo(t+(.318729-.5)*s,i+(.743104-.5)*s,t+(.300991-.5)*s,i+(.719769-.5)*s,t+(.283539-.5)*s,i+(.695393-.5)*s),e.cubicCurveTo(t+(.215375-.5)*s,i+(.600181-.5)*s,t+(.15625-.5)*s,i+(.493824-.5)*s,t+(.15625-.5)*s,i+(.34375-.5)*s),e.closePath()},plus(e){ag(e,[[1/3,0],[2/3,0],[2/3,1/3],[1,1/3],[1,2/3],[2/3,2/3],[2/3,1],[1/3,1],[1/3,2/3],[0,2/3],[0,1/3],[1/3,1/3]])},square({path:e,x:t,y:i,size:s,pixelRatio:n}){const o=s/2;e.clear(),e.moveTo(Oi(n,t-o),Oi(n,i-o)),e.lineTo(Oi(n,t+o),Oi(n,i-o)),e.lineTo(Oi(n,t+o),Oi(n,i+o)),e.lineTo(Oi(n,t-o),Oi(n,i+o)),e.closePath()},star({path:e,x:t,y:i,size:s}){const o=s/2,r=o/2,a=Math.PI/2;for(let c=0;c<5*2;c++){const h=c%2===0?o:r,d=c*Math.PI/5-a,p=t+Math.cos(d)*h,f=i+Math.sin(d)*h;e.lineTo(p,f)}e.closePath()},triangle(e){ag(e,[[.5,0],[1,.87],[0,.87]])}},Dp=class extends zs{constructor(){super(...arguments),this.shape="square",this.x=0,this.y=0,this.size=12}updatePath(){var c,h;const{path:e,shape:t,x:i,y:s,size:n}=this,o=((h=(c=this.layerManager)==null?void 0:c.canvas)==null?void 0:h.pixelRatio)??1,r=Bi.anchor(t),a={path:e,x:i-(r.x-.5)*n,y:s-(r.y-.5)*n,size:n,pixelRatio:o};e.clear(),typeof t=="string"?m7[t](a):typeof t=="function"&&t(a)}computeBBox(){const{x:e,y:t,size:i}=this,s=Bi.anchor(this.shape);return new Me(e-i*s.x,t-i*s.y,i,i)}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};D([ze()],Dp.prototype,"shape",2);D([ze()],Dp.prototype,"x",2);D([ze()],Dp.prototype,"y",2);D([ze({convertor:Math.abs})],Dp.prototype,"size",2);var Bi=class extends Dh(UM(Pc(Dp))){static anchor(e){return e==="pin"?{x:.5,y:1}:typeof e=="function"&&"anchor"in e?e.anchor:{x:.5,y:.5}}constructor(e){super(e),(e==null?void 0:e.shape)!=null&&(this.shape=e.shape)}};function t1(e,t,i=t*(5/3)){var c;const s=new Ne,n=Math.min(e.marker.strokeWidth??1,2),o=Math.min(((c=e.line)==null?void 0:c.strokeWidth)??0,2),r=Math.max(e.marker.enabled===!1?0:t,e.line==null?0:i),a=Math.max(e.marker.enabled===!1?0:t,o);if(e.line!=null){const{stroke:h,strokeOpacity:d,lineDash:p}=e.line,f=new wn;f.x1=0,f.y1=a/2,f.x2=r,f.y2=a/2,f.stroke=h,f.strokeOpacity=d,f.strokeWidth=o,f.lineDash=p,s.append(f)}if(e.marker.enabled!==!1){const{shape:h,fill:d,fillOpacity:p,stroke:f,strokeOpacity:v,lineDash:y,lineDashOffset:b}=e.marker,w=new Bi;w.shape=h??"square",w.size=t,w.fill=d,w.fillOpacity=p??1,w.stroke=f,w.strokeOpacity=v??1,w.strokeWidth=n,w.lineDash=y,w.lineDashOffset=b??0;const S=Bi.anchor(h),M=r/2+(S.x-.5)*t,R=a/2+(S.y-.5)*t,A=t/(t+n);w.x=M,w.y=R,w.scalingCenterX=M,w.scalingCenterY=R,w.scalingX=A,w.scalingY=A,s.append(w)}return Ne.toSVG(s,r,a)}var $i="ag-charts-tooltip",i1="ag-charts-tooltip--dark";function s1(e){const t=[],i=new Map;for(const s of e)if(s.type==="structured"){const{heading:n}=s,o=n!=null?i.get(n):void 0,r={type:"structured",heading:n,items:[s]};o==null?(i.set(n,r),t.push(r)):o.items.push(s)}else t.push(s);return t}function n1(e){const t=s1(e),i=[];return t.forEach(s=>{if(s.type==="raw")return"";s.heading!=null&&i.push(s.heading),s.items.forEach(n=>{var o;n.title!=null&&i.push(n.title),(o=n.data)==null||o.forEach(r=>{i.push(r.label??r.fallbackLabel,r.value)})})}),i.join("; ")}function fx(e,t,i){let s="";e==null?s+=`<span class="${$i}-label">${bg(t)}</span>`:(s+=`<span class="${$i}-label">${bg(e)}</span>`,s+=" ",s+=`<span class="${$i}-value">${bg(t)}</span>`);const n=[`${$i}-row`];return i&&n.push(`${$i}-row--inline`),s=`<div class="${n.join(" ")}">${s}</div>`,s}function v7(e){var n,o,r;let t="";const i=e.title==null&&((n=e.data)==null?void 0:n.length)===1,s=e.symbol==null?void 0:t1(e.symbol,12);return s!=null&&(e.title!=null||(o=e.data)!=null&&o.length)&&(t+=`<span class="${$i}-symbol">${s}</span>`),e.title!=null&&(t+=`<span class="${$i}-title">${bg(e.title)}</span>`,t+=" "),(r=e.data)==null||r.forEach(a=>{t+=fx(a.label??a.fallbackLabel,a.value,i),t+=" "}),t}function o1(e,t){if(e==null||t.length===1)return;const i=e==null?void 0:e.t("tooltipPaginationStatus",{index:t.index+1,count:t.length});return`<div class="${$i}-footer">${i}</div>`}function CL(e,t,i,s){var d,p;const n=t.items.length===1?t.items[0]:void 0;let o,r,a;switch(i){case"compact":o=!0,r=n==null?void 0:n.title;break;case"single":o=n!=null&&(t.heading==null||n.title==null)&&((d=n.data)==null?void 0:d.length)===1&&n.data[0].label==null&&n.data[0].value!=null,a=t.heading??(n==null?void 0:n.title);break;case"shared":o=!1}let c="";if(o&&n!=null?(r!=null&&(c+=fx(void 0,r,!1)),(p=n.data)==null||p.forEach(f=>{c+=fx(f.label??a,f.value,!1),c+=" "})):(t.heading!=null&&(c+=`<span class="${$i}-heading">${bg(t.heading)}</span>`,c+=" "),t.items.forEach(f=>{c+=v7(f)})),c.length===0)return;const h=i!=="compact"&&s!=null?o1(e,s):void 0;return h+null&&(c+=h),c=`<div class="${$i}-content">${c.trimEnd()}</div>`,c}function y7(e,t){const i=t==null?void 0:o1(e,t);return i==null?"":`<div class="${$i}-content">${i}</div>`}function r1(e,t,i,s){const n=s1(t);if(n.length!==0){if(n.length===1&&n[0].type==="structured")return CL(e,n[0],i,s);{const o=n.map(r=>r.type==="structured"?CL(e,r,i):r.rawHtmlString);return s!=null&&o.push(y7(e,s)??""),o.join("")}}}var C7={left:-1,"top-left":-1,"bottom-left":-1,top:0,center:0,bottom:0,right:1,"top-right":1,"bottom-right":1},S7={"top-left":-1,top:-1,"top-right":-1,left:0,center:0,right:0,"bottom-left":1,bottom:1,"bottom-right":1},b7={left:3,"top-left":void 0,"bottom-left":void 0,top:2,center:void 0,bottom:1,right:0,"top-right":void 0,"bottom-right":void 0},SL={top:2,bottom:2,left:1,right:1,"top-right":3,"top-left":3,"bottom-right":3,"bottom-left":3,center:0};bt(["single","shared","compact"]);bt(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"],"a position type");bt(["pointer","node","chart"],"an anchorTo");var bL=bt(["top","right","bottom","left","top-right","bottom-right","bottom-left","top-left","center"],"a placement");ps(bL,zi(bL));var ta=class extends Be{constructor(){super(...arguments),this.xOffset=0,this.yOffset=0}get defaultAnchorTo(){const{type:e,_seriesOverrideType:t}=this,i=e??t??"pointer";return i==="node"||i==="pointer"?i:"chart"}get defaultPlacement(){const{type:e,_seriesOverrideType:t}=this,i=e??t??"pointer";return i==="node"||i==="pointer"?"top":i}};D([E(),JO("Use `anchorTo` and/or `placement` options instead.")],ta.prototype,"type",2);D([E()],ta.prototype,"_seriesOverrideType",2);D([E()],ta.prototype,"xOffset",2);D([E()],ta.prototype,"yOffset",2);D([E()],ta.prototype,"anchorTo",2);D([E()],ta.prototype,"placement",2);var qn=class extends Be{constructor(){super(),this.enabled=!0,this.mode="single",this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new ta,this.pagination=!1,this.darkTheme=!1,this.bounds="extended",this.destroyFns=[],this.springAnimation=new f7,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.sizeMonitor=new PN,this._elementSize=void 0,this._showTimeout=void 0,this.arrowPosition=void 0,this._visible=!1,this.positionParams=void 0,this.localeManager=void 0,this.destroyFns.push(this.springAnimation.addListener("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(e,t){return"togglePopover"in Et().HTMLElement.prototype&&(this.element=t.addChild("tooltip-container",$i),this.element.setAttribute("popover","manual"),this.element.className=$i,this.element.style.positionAnchor=t.anchorName,this.sizeMonitor.observe(this.element,i=>{this._elementSize=i,this.updateTooltipPosition()})),this.localeManager=e,()=>{t.removeChild("tooltip-container",$i),this.destroyFns.forEach(i=>i()),this.element&&this.sizeMonitor.unobserve(this.element)}}isVisible(){return this._visible}contains(e){var t;return((t=this.element)==null?void 0:t.contains(e))??!1}updateTooltipPosition(){var N,O,B,V,U,se;const{element:e,_elementSize:t,positionParams:i}=this;if(e==null||t==null||i==null)return;const{canvasRect:s,relativeRect:n,meta:o}=i,{x:r,y:a}=this.springAnimation;let c=((N=o.position)==null?void 0:N.placement)??this.position.placement??((O=o.position)==null?void 0:O.defaultPlacement)??this.position.defaultPlacement;Array.isArray(c)||(c=[c]);const h=((B=o.position)==null?void 0:B.anchorTo)??this.position.anchorTo??((V=o.position)==null?void 0:V.defaultAnchorTo)??this.position.defaultAnchorTo,d=((U=o.position)==null?void 0:U.xOffset)??0,p=((se=o.position)==null?void 0:se.yOffset)??0,f=n.x,v=n.y,y=n.width-t.width-1+f,b=n.height-t.height+v;let w=0,S,M,R=!1;do{S=c[w],w+=1;const Ce=this.getTooltipBounds({elementSize:t,placement:S,anchorTo:h,canvasX:r,canvasY:a,yOffset:p,xOffset:d,canvasRect:s});M=e1(t.width,t.height,n,Ce),R=!1,SL[S]&1&&(R||(R=M.x<f||M.x>y)),SL[S]&2&&(R||(R=M.y<v||M.y>b))}while(w<c.length&&R);const A=Ge(f,M.x,y),T=Ge(v,M.y,b);R||(R=A!==M.x||T!==M.y);const F=h!=="chart"&&!R&&!d&&!p,P=o.showArrow??this.showArrow??F;this.arrowPosition=P?b7[S]:void 0,this.updateClassModifiers(),e.style.translate=`${A}px ${T}px`}show(e,t,i,s,n,o=!1){var h,d;const{element:r}=this;if(r!=null&&s!=null&&s.length!==0){const p=r1(this.localeManager,s,this.mode,this.pagination?n:void 0);if(p==null){this.toggle(!1);return}r.innerHTML=p}else if(r==null||r.innerHTML===""){this.toggle(!1);return}const a={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height};switch(this.positionParams={canvasRect:t,relativeRect:a,meta:i},((h=i.position)==null?void 0:h.anchorTo)??this.position.anchorTo??((d=i.position)==null?void 0:d.defaultAnchorTo)??this.position.defaultAnchorTo){case"node":this.springAnimation.update(i.nodeCanvasX??i.canvasX,i.nodeCanvasY??i.canvasY);break;case"pointer":this.springAnimation.update(i.canvasX,i.canvasY);break;case"chart":this.springAnimation.reset()}i.enableInteraction?(this.enableInteraction=!0,r.style.pointerEvents="auto",r.removeAttribute("aria-hidden"),r.tabIndex=-1):(this.enableInteraction=!1,r.style.pointerEvents="none",r.setAttribute("aria-hidden","true"),r.removeAttribute("tabindex")),r.style.setProperty("--top",`${t.top}px`),r.style.setProperty("--left",`${t.left}px`),this.updateClassModifiers(),this.toggle(!0,o)}hide(){this.toggle(!1)}toggle(e,t=!1){const{delay:i}=this;e&&i>0&&!t?this._showTimeout??(this._showTimeout=setTimeout(()=>{this._showTimeout=void 0,this.toggleCallback(!0)},i)):(clearTimeout(this._showTimeout),this._showTimeout=void 0,this.toggleCallback(e))}toggleCallback(e){var t;(t=this.element)!=null&&t.isConnected&&this._visible!==e&&(this._visible=e,this.element.togglePopover(e),e?this.updateTooltipPosition():this.springAnimation.reset())}updateClassModifiers(){var i;if(!((i=this.element)!=null&&i.isConnected))return;const{classList:e}=this.element,t=(s,n)=>e.toggle(`${$i}--${s}`,n);t("no-interaction",!this.enableInteraction),t("arrow-top",this.arrowPosition===1),t("arrow-right",this.arrowPosition===3),t("arrow-bottom",this.arrowPosition===2),t("arrow-left",this.arrowPosition===0),t("compact",this.mode==="compact"),e.toggle(i1,this.darkTheme);for(const s of this.wrapTypes)e.toggle(`${$i}--wrap-${s}`,s===this.wrapping)}getTooltipBounds(e){const{elementSize:t,anchorTo:i,placement:s,canvasX:n,canvasY:o,yOffset:r,xOffset:a,canvasRect:c}=e,{width:h,height:d}=t,p={width:h,height:d};if(i==="node"||i==="pointer"){const f=C7[s],v=S7[s];return p.top=o+r+d*(v-1)/2+8*v,p.left=n+a+h*(f-1)/2+8*f,p}switch(s){case"top":return p.top=r,p.left=c.width/2-h/2+a,p;case"right":return p.top=c.height/2-d/2+r,p.left=c.width-h/2+a,p;case"left":return p.top=c.height/2-d/2+r,p.left=a,p;case"bottom":return p.top=c.height-d+r,p.left=c.width/2-h/2+a,p;case"top-left":return p.top=r,p.left=a,p;case"top-right":return p.top=r,p.left=c.width-h+a,p;case"bottom-right":return p.top=c.height-d+r,p.left=c.width-h+a,p;case"bottom-left":return p.top=c.height-d+r,p.left=a,p}return p}};D([E()],qn.prototype,"enabled",2);D([E()],qn.prototype,"mode",2);D([E()],qn.prototype,"showArrow",2);D([E()],qn.prototype,"delay",2);D([E()],qn.prototype,"range",2);D([E()],qn.prototype,"wrapping",2);D([E()],qn.prototype,"position",2);D([E()],qn.prototype,"pagination",2);D([E()],qn.prototype,"darkTheme",2);D([E(bt(["extended","canvas"]))],qn.prototype,"bounds",2);function mx(e,t){return e.series===t.series&&Qo(e.datumIndex,t.datumIndex)}var w7=class{constructor(){this.candidates=[]}get current(){return this.active}reset(){this.candidates.length=0,this.active=void 0}update(e,t){this.candidates=e;let i=t!=null?e.findIndex(s=>mx(s,t)):-1;return i===-1&&(i=0),this.active=e[i],{current:this.active,index:i,length:e.length}}next(){const{candidates:e,active:t}=this,i=t==null?-1:e.findIndex(n=>mx(n,t));if(i===-1)return;let s=i+1;return s>=e.length&&(s=0),this.active=e[s],{current:this.active,index:s,length:this.candidates.length}}},x7=class extends dl{constructor(e){super(),this.chart=e,this.id=vn(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="pointer",this.previousInputDevice="keyboard",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=D8(()=>{if(!(!this.tooltip.lastHover&&!this.highlight.pendingHoverEvent)){if(this.chart.getUpdateType()<=4){this.hoverScheduler.schedule();return}this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}}),this.tooltipCandidates=new w7;const t=e.ctx.domManager.addChild("series-area","series-area-aria-label1"),i=e.ctx.domManager.addChild("series-area","series-area-aria-label2");this.swapChain=new r7(t,i,this.id,"img"),this.swapChain.addListener("blur",r=>this.onBlur(r)),this.swapChain.addListener("focus",()=>this.onFocus()),e.ctx.domManager.mode==="normal"&&(this.focusIndicator=new o7(this.swapChain),this.focusIndicator.overrideFocusVisible(e.mode==="integrated"?!1:void 0));const{seriesDragInterpreter:s,seriesWidget:n,containerWidget:o}=e.ctx.widgets;n.setTabIndex(-1),this.destroyFns.push(()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label1"),()=>e.ctx.domManager.removeChild("series-area","series-area-aria-label2"),n.addListener("focus",()=>this.swapChain.focus()),n.addListener("mousemove",r=>this.onHover(r)),n.addListener("wheel",r=>this.onWheel(r)),n.addListener("mouseleave",r=>this.onLeave(r)),n.addListener("keydown",r=>this.onKeyDown(r)),n.addListener("contextmenu",(r,a)=>this.onContextMenu(r,a)),s.addListener("drag-move",r=>this.onDragMove(r)),s.addListener("click",r=>this.onClick(r,n)),s.addListener("dblclick",r=>this.onClick(r,n)),o.addListener("contextmenu",(r,a)=>this.onContextMenu(r,a)),o.addListener("click",(r,a)=>this.onClick(r,a)),o.addListener("dblclick",(r,a)=>this.onClick(r,a)),e.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),e.ctx.domManager.addListener("resize",()=>this.clearAll()),e.ctx.highlightManager.addListener("highlight-change",r=>this.changeHighlightDatum(r)),e.ctx.layoutManager.addListener("layout:complete",r=>this.layoutComplete(r)),e.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),e.ctx.updateService.addListener("update-complete",()=>this.updateComplete()),e.ctx.zoomManager.addListener("zoom-change",()=>this.clearAll()),e.ctx.zoomManager.addListener("zoom-pan-start",()=>this.clearAll()))}isState(e){return this.chart.ctx.interactionManager.isState(e)}isIgnoredTouch(e){return!(e.device!=="touch"||e.type==="click"||this.chart.ctx.chartService.touch.dragAction==="hover"||this.chart.ctx.chartService.touch.dragAction==="drag"&&this.isState(9))}dataChanged(){var t;var e;(e=this.highlight).stashedHoverEvent??(e.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),(t=this.focusIndicator)==null||t.clear(),this.clearHighlight()}preSceneRender(){this.highlight.stashedHoverEvent!=null&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),this.tooltip.lastHover!=null&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}updateComplete(){var e;this.isState(34)&&((e=this.focusIndicator)!=null&&e.isFocusVisible())&&this.handleSeriesFocus(0,0,!0)}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort((t,i)=>{let s=t.properties.focusPriority??1/0,n=i.properties.focusPriority??1/0;return s===n&&([s,n]=[t._declarationOrder,i._declarationOrder]),s<n?-1:s>n?1:0}),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.paddedRect,this.chart.ctx.widgets.seriesWidget.setBounds(e.series.paddedRect),this.chart.ctx.domManager.mode==="normal"&&this.chart.ctx.widgets.chartWidget.setBounds(e.chart)}onContextMenu(e,t){var c;const{sourceEvent:i}=e;if(i.currentTarget!=t.getElement())return;if(i.target==this.chart.ctx.widgets.containerWidget.getElement()){if(this.isState(36)){const{currentX:h,currentY:d}=e;this.chart.ctx.contextMenuRegistry.dispatchContext("all",{sourceEvent:i,canvasX:h,canvasY:d},{})}return}let s,n;if((c=this.focusIndicator)!=null&&c.isFocusVisible())s=this.chart.ctx.highlightManager.getActiveHighlight(),s&&this.seriesRect&&s.midPoint&&(n=ri.toCanvasPoint(s.series.contentGroup,s.midPoint.x,s.midPoint.y));else if(this.isState(36)){const h=this.pickNodes({x:e.currentX,y:e.currentY},"context-menu");h&&(this.chart.ctx.highlightManager.updateHighlight(this.id),s=h.matches[0].datum)}const o=s==null?void 0:s.series;this.clearAll();const r=e.currentX+t.cssLeft(),a=e.currentY+t.cssTop();this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",{sourceEvent:i,canvasX:r,canvasY:a},{pickedSeries:o,pickedNode:s},n)}onLeave(e){if(!this.isState(41))return;const t=e.sourceEvent.relatedTarget;(t==null?void 0:t.className)!=="ag-charts-text-input__textarea"&&(this.chart.ctx.tooltipManager.isEnteringInteractiveTooltip(e.sourceEvent)||(this.chart.ctx.domManager.updateCursor(this.id),this.hoverDevice!=="keyboard"&&this.clearAll()))}onWheel(e){var t;this.isState(41)&&((t=this.focusIndicator)==null||t.overrideFocusVisible(!1),this.previousInputDevice="pointer")}onDragMove(e){var t;this.isState(41)&&((t=this.focusIndicator)==null||t.overrideFocusVisible(!1),this.onHoverLikeEvent(e))}onHover(e){this.isState(41)&&this.onHoverLikeEvent(e)}onHoverLikeEvent(e){var t;if(!this.isIgnoredTouch(e)&&((e.device==="touch"||M7(e,"drag-move"))&&(this.tooltip.lastHover=e),e.device==="touch"&&this.chart.ctx.chartService.touch.dragAction==="hover"&&e.sourceEvent.preventDefault(),this.hoverDevice="pointer",this.previousInputDevice="pointer",this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule(),this.isState(32))){const{currentX:i,currentY:s}=e,n=(t=this.pickNodes({x:i,y:s},"event"))==null?void 0:t.matches,o=n==null?void 0:n[0];o!=null&&o.series.hasEventListener("seriesNodeClick")||o!=null&&o.series.hasEventListener("seriesNodeDoubleClick")||n!=null&&n.length>1&&this.chart.tooltip.pagination?this.chart.ctx.domManager.updateCursor(this.id,"pointer"):this.chart.ctx.domManager.updateCursor(this.id)}}onClick(e,t){var s;if(e.device==="touch"&&t===this.chart.ctx.widgets.seriesWidget&&this.swapChain.focus({preventScroll:!0}),!this.isState(41))return;if(t===this.chart.ctx.widgets.seriesWidget){if(!t.getElement().contains(e.sourceEvent.target))return}else if(e.sourceEvent.target!=t.getElement())return;if((s=this.focusIndicator)==null||s.overrideFocusVisible(!1),this.onHoverLikeEvent(e),!this.isState(32))return;if(t==this.chart.ctx.widgets.seriesWidget&&this.checkSeriesNodeClick(e)){this.update(4),e.sourceEvent.preventDefault();return}const i={type:e.type==="click"?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(i)}onFocus(){var e;this.isState(34)&&(this.hoverDevice=(e=this.focusIndicator)!=null&&e.isFocusVisible(!0)?"keyboard":"pointer",this.handleFocus(0,0))}onBlur(e){var t;this.isState(34)&&(this.hoverDevice="pointer",this.chart.ctx.tooltipManager.isEnteringInteractiveTooltip(e)||this.clearAll(),(t=this.focusIndicator)==null||t.overrideFocusVisible(void 0))}onKeyDown(e){var i;if(!this.isState(43))return;const t=c7(e.sourceEvent);switch((t==null?void 0:t.activatesFocusIndicator)===!1&&((i=this.focusIndicator)==null||i.overrideFocusVisible(this.previousInputDevice==="keyboard")),t==null?void 0:t.name){case"redo":return this.chart.ctx.chartEventManager.seriesEvent("series-redo");case"undo":return this.chart.ctx.chartEventManager.seriesEvent("series-undo");case"zoomin":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(1,e);case"zoomout":return this.chart.ctx.chartEventManager.seriesKeyNavZoom(-1,e);case"arrowup":return this.onArrow(-1,0,e);case"arrowdown":return this.onArrow(1,0,e);case"arrowleft":return this.onArrow(0,-1,e);case"arrowright":return this.onArrow(0,1,e);case"submit":return this.onSubmit(e)}}onArrow(e,t,i){var s;this.isState(34)&&(this.hoverDevice="keyboard",this.previousInputDevice="keyboard",(s=this.focusIndicator)==null||s.overrideFocusVisible(!0),this.focus.seriesIndex+=e,this.focus.datumIndex+=t,this.handleFocus(e,t),i.sourceEvent.preventDefault(),this.chart.ctx.chartEventManager.seriesEvent("series-focus-change"))}onSubmit(e){if(!this.isState(34))return;const{series:t,datum:i}=this.focus,s=e.sourceEvent;t!==void 0&&i!==void 0?t.fireNodeClickEvent(s,i):this.chart.fireEvent({type:"click",event:s}),s.preventDefault()}checkSeriesNodeClick(e){var a,c,h;var t;const i=this.pickNodes({x:e.currentX,y:e.currentY},"event");if(i==null||i.matches.length===0)return;const s=this.chart.tooltip.pagination?(a=this.tooltipCandidates.update(i.matches,this.tooltipCandidates.current))==null?void 0:a.current:void 0,{series:n,datum:o}=s??i.matches[0],r=s==null?i.distance:0;if(e.type==="click"){const p=n.fireNodeClickEvent(e.sourceEvent,o)&&this.chart.tooltip.pagination?this.tooltipCandidates.next():void 0;if(p!=null){e.sourceEvent.preventDefault();const{currentX:f,currentY:v}=e,y=f+(((c=this.hoverRect)==null?void 0:c.x)??0),b=v+(((h=this.hoverRect)==null?void 0:h.y)??0);(t=this.highlight).pendingHoverEvent??(t.pendingHoverEvent=this.highlight.appliedHoverEvent),this.handleHoverHighlight(!1),this.showTooltip(p.current,y,b,{index:p.index,length:p.length})}return!0}return e.type==="dblclick"?(e.preventZoomDblClick=r===0,n.fireNodeDoubleClickEvent(e.sourceEvent,o),!0):!1}handleFocus(e,t){var s;const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);i==null?this.handleSeriesFocus(e,t):(s=this.focusIndicator)==null||s.update(i.rect,this.seriesRect,!1)}handleSeriesFocus(e,t,i=!1){if(this.chart.chartType==="hierarchy"||this.chart.chartType==="gauge"){this.handleSoloSeriesFocus(e,t,i);return}const{focus:s}=this,n=s.sortedSeries.filter(h=>h.visible&&h.focusable);if(n.length===0)return;const o=s.datumIndex-t,r=s.seriesIndex-e;s.seriesIndex=Ge(0,s.seriesIndex,n.length-1),s.series=n[s.seriesIndex];const a=this.focus.datumIndex,c=this.focus.seriesIndex;this.updatePickedFocus(a,t,o,c,e,r,i)}handleSoloSeriesFocus(e,t,i){this.focus.series=this.focus.sortedSeries[0];const s=this.focus.datumIndex,n=this.focus.seriesIndex,o=this.focus.datumIndex-t,r=this.focus.seriesIndex-e;this.updatePickedFocus(s,t,o,n,e,r,i)}updatePickedFocus(e,t,i,s,n,o,r){var v,y,b,w;const{focus:a,hoverRect:c,seriesRect:h}=this;if(a.series===void 0||c===void 0)return;const d=(v=a==null?void 0:a.series)==null?void 0:v.pickFocus({datumIndex:e,datumIndexDelta:t,otherIndex:s,otherIndexDelta:n,seriesRect:h});if(!d)return;const{datum:p}=d;if(d.otherIndex!==void 0&&(a.seriesIndex=d.otherIndex),a.datumIndex=d.datumIndex,a.datum=p,(y=this.focusIndicator)!=null&&y.isFocusVisible()&&this.chart.ctx.animationManager.reset(),(b=this.focusIndicator)!=null&&b.isFocusVisible()){const S=h7(d),{x:M,y:R}=S.computeCenter();if(!c.containsPoint(M,R)&&this.chart.ctx.zoomManager.panToBBox(this.id,c,S))return;const{x1:A,x2:T,y1:F,y2:P}=jg.from(S),N=c.containsPoint(A,F),O=c.containsPoint(T,F),B=c.containsPoint(A,P),V=c.containsPoint(T,P);if(!(N||O||B||V)){const U=jg.from(c);d.movedBounds=S.clone(),A<U.x1&&T<U.x1?(d.movedBounds.x=U.x1-2,d.movedBounds.width=4):A>U.x2&&T>U.x2&&(d.movedBounds.x=U.x2-2,d.movedBounds.width=4),F<U.y1&&P<U.y1?(d.movedBounds.y=U.y1-2,d.movedBounds.height=4):F>U.y2&&P>U.y2&&(d.movedBounds.y=U.y2-2,d.movedBounds.height=4)}}(w=this.focusIndicator)==null||w.update(d.movedBounds??d.bounds,this.seriesRect,d.clipFocusBox);const f=d7(a.series,c,d);if(f!==void 0&&this.hoverDevice==="keyboard"){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const S=this.chart.getTooltipContent(a.series,p.datumIndex,p),M=Dv.makeTooltipMeta(f,a.series,p,d.movedBounds);this.chart.ctx.highlightManager.updateHighlight(this.id,p),a.series.tooltipEnabled??this.chart.tooltip.enabled?this.chart.ctx.tooltipManager.updateTooltip(this.id,M,S):this.chart.ctx.tooltipManager.removeTooltip(this.id),r||(t===0&&n===0||i!==d.datumIndex||o!==(d.otherIndex??a.seriesIndex))&&this.swapChain.update(this.getDatumAriaText(p,S))}}getDatumAriaText(e,t){var s,n;const i=t==null?"":n1(t);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:((n=(s=e.series).getDatumAriaText)==null?void 0:n.call(s,e,i))??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){var e;this.clearHighlight(),this.clearTooltip(),(e=this.focusIndicator)==null||e.clear()}handleHoverHighlight(e){var f,v,y;this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const t=this.highlight.appliedHoverEvent;if(!t||!this.isState(41))return;const{currentX:i,currentY:s}=t,n=t.currentX+(((f=this.hoverRect)==null?void 0:f.x)??0),o=t.currentY+(((v=this.hoverRect)==null?void 0:v.y)??0);if(e?this.chart.ctx.animationManager.isActive():!((y=this.hoverRect)!=null&&y.containsPoint(n,o))){this.clearHighlight();return}const{range:r}=this.chart.highlight,a=r==="tooltip"?"highlight-tooltip":"highlight",c=this.pickNodes({x:i,y:s},a);if(!c||c.matches.length===0){this.chart.ctx.highlightManager.updateHighlight(this.id);return}const{current:h}=this.tooltipCandidates,d=h==null?void 0:c.matches.find(b=>mx(b,h)),p=(d==null?void 0:d.datum)??c.matches[0].datum;this.chart.ctx.highlightManager.updateHighlight(this.id,p),this.hoverDevice="pointer"}handleHoverTooltip(e,t){var h,d,p;const{current:i}=this.tooltipCandidates;if(this.tooltipCandidates.reset(),!this.isState(41))return;const{currentX:s,currentY:n}=e,o=s+(((h=this.hoverRect)==null?void 0:h.x)??0),r=n+(((d=this.hoverRect)==null?void 0:d.y)??0),a=e.sourceEvent.target;if(t?this.chart.ctx.animationManager.isActive():!((p=this.hoverRect)!=null&&p.containsPoint(o,r))){this.hoverDevice=="pointer"&&this.clearTooltip();return}if(a&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(a,"canvas-overlay",$i))return;const c=this.pickNodes({x:e.currentX,y:e.currentY},"tooltip");if(!c||c.matches.length===0){this.hoverDevice=="pointer"&&this.clearTooltip();return}if(this.hoverDevice="pointer",c.distance===0){const{current:f,index:v,length:y}=this.tooltipCandidates.update(c.matches,this.chart.tooltip.pagination?i:void 0);this.showTooltip(f,o,r,{index:v,length:y})}else this.showTooltip(c.matches[0],o,r)}showTooltip({series:e,datum:t,datumIndex:i},s,n,o){const r=this.chart.getTooltipContent(e,i,t);if((e.tooltipEnabled??this.chart.tooltip.enabled)&&r!=null){const h=Dv.makeTooltipMeta({type:"pointermove",canvasX:s,canvasY:n},e,t,void 0);this.chart.ctx.tooltipManager.updateTooltip(this.id,h,r,o)}else this.chart.ctx.tooltipManager.removeTooltip(this.id)}changeHighlightDatum(e){const t=new Set,{series:i=void 0,datum:s}=e.currentHighlight??{},{series:n=void 0,datum:o}=e.previousHighlight??{};n&&t.add(n),i&&t.add(i),n!=null&&n.properties.cursor&&o&&this.chart.ctx.domManager.updateCursor(n.id),i!=null&&i.properties.cursor&&(i==null?void 0:i.properties.cursor)!=="default"&&s&&this.chart.ctx.domManager.updateCursor(i.id,i.properties.cursor),i==null||n==null?this.update(4):this.update(4,{seriesToUpdate:t})}pickNodes(e,t,i){const s=[...this.series].reverse();let n;for(const o of s){if(!o.visible||!o.contentGroup.visible)continue;const r=o.pickNodes(e,t,i);if(r==null||r.datums.length===0)continue;const{datums:a,distance:c}=r;if(r.datums.length!==0){if(c===0){(n==null?void 0:n.distance)!==0&&(n={matches:[],distance:0});for(const h of a){const{datumIndex:d}=h;n.matches.push({series:o,datum:h,datumIndex:d})}}else if(n==null||n.distance>c){const[h]=a,{datumIndex:d}=h;n={matches:[{series:o,datum:h,datumIndex:d}],distance:c}}}}return n}};function M7(e,t){return e.type!==t}var wL=30,D7=class{constructor(e){this.seriesRoot=e,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}requestGroup(e){const{internalId:t,type:i,contentGroup:s,seriesGrouping:n}=e,{groupIndex:o=t}=n??{},r=this.series.get(t);if(r!=null)throw new Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(r)}`);this.series.size===0&&(this.mode=this.expectedSeriesCount>=wL?"aggressive-grouping":"normal");let a=this.groups.get(i);a==null&&(a=new Map,this.groups.set(i,a));const c=this.lookupIdx(o);let h=a.get(c);return h==null&&(h={type:i,id:c,seriesIds:[],group:this.seriesRoot.appendChild(new Ne({name:`${e.contentGroup.name??i}-managed-layer`,zIndex:e.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},a.set(c,h)),this.series.set(t,{layerState:h,seriesConfig:e}),h.seriesIds.push(t),h.group.appendChild(s),h.group}changeGroup(e){var a,c;const{internalId:t,seriesGrouping:i,type:s,contentGroup:n,oldGrouping:o}=e,{groupIndex:r=t}=i??{};(c=(a=this.groups.get(s))==null?void 0:a.get(r))!=null&&c.seriesIds.includes(t)||(this.series.has(t)&&this.releaseGroup({internalId:t,seriesGrouping:o,type:s,contentGroup:n}),this.requestGroup(e))}releaseGroup(e){var o,r,a;const{internalId:t,contentGroup:i,type:s}=e;if(!this.series.has(t))throw new Error(`AG Charts - series doesn't have an allocated layer: ${t}`);const n=(o=this.series.get(t))==null?void 0:o.layerState;n&&(n.seriesIds=n.seriesIds.filter(c=>c!==t),n.group.removeChild(i)),(n==null?void 0:n.seriesIds.length)===0?(this.seriesRoot.removeChild(n.group),(r=this.groups.get(n.type))==null||r.delete(n.id),(a=this.groups.get(s))==null||a.delete(t)):n!=null&&n.seriesIds.length>0&&(n.group.zIndex=this.getLowestSeriesZIndex(n.seriesIds)),this.series.delete(t)}updateLayerCompositing(){this.groups.forEach(e=>{e.forEach(t=>{const{group:i,seriesIds:s}=t;let n;if(s.length===0)n=!1;else if(s.length>1)n=!0;else{const o=this.series.get(s[0]);n=(o==null?void 0:o.seriesConfig.renderToOffscreenCanvas())===!0}i.renderToOffscreenCanvas=n,i.zIndex=this.getLowestSeriesZIndex(s)})})}lookupIdx(e){return this.mode==="normal"?e:typeof e=="string"&&(e=Number(e.split("-").at(-1)),!e)?0:Math.floor(Ge(0,e/this.expectedSeriesCount,1)*wL)}destroy(){this.groups.forEach(e=>{e.forEach(t=>{this.seriesRoot.removeChild(t.group)})}),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(e){return e.reduce((i,s)=>{const n=this.series.get(s),o=n==null?void 0:n.seriesConfig.contentGroup.zIndex;return i==null||o==null?o:pN(i,o)<=0?i:o},void 0)??1}},a1=class extends Be{constructor(){super(...arguments),this.dragAction="drag"}};D([E(bt(["none","drag","hover"]))],a1.prototype,"dragAction",2);var R7=class{constructor(e,t,i,s,n){this.chart=e,this.dataService=t,this.updateService=i,this.zoomManager=s,this.animationManager=n,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(e=>e())}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow()}onZoomChange(){this.dirtyZoom=!0}updateWindow(){if(!this.dataService.isLazy())return;const e=this.getValidAxis();let t,i=!0;if(e){const s=this.zoomManager.getAxisZoom(e.id);t=this.getAxisWindow(e,s),i=this.shouldRefresh(e,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:t==null?void 0:t.min,windowEnd:t==null?void 0:t.max})}getValidAxis(){return this.chart.axes.find(e=>e.type==="time")}shouldRefresh(e,t){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(e.id);return i&&t.min===i.min&&t.max===i.max?!1:(this.lastAxisZooms.set(e.id,t),!0)}getAxisWindow(e,t){const{domain:i}=e.scale;if(!t||i.length===0||isNaN(Number(i[0])))return;const s=Number(i[1])-Number(i[0]),n=new Date(Number(i[0])+s*t.min),o=new Date(Number(i[0])+s*t.max);return{min:n,max:o}}},A7=/^((?!chrome|android).)*safari/i,E7=/Version\/(\d+(\.\d+)?)/,T7=/Chrome/,I7=/Chrome\/(\d+)/,L7=/Edg/,F7=/OPR/;function P7(){const{userAgent:e}=Et("navigator");if(A7.test(e)){const t=E7.exec(e);if(t==null)return!1;const i=parseFloat(t[1]),s=Math.floor(i)>16;return s||de.warnOnce(`Unsupported Safari version: ${i}; ${e}`),!s}else if(T7.test(e)&&!L7.test(e)&&!F7.test(e)){const t=I7.exec(e);if(t==null)return!1;const i=parseInt(t[1],10),s=i>126;return s||de.warnOnce(`Unsupported Chrome version: ${i}; ${e}`),!s}return!1}var k7=new Set(["map-shape-background","map-line-background"]),N7=class{constructor(e,t,i,s,n,o,r){this.chartLike=e,this.overlays=t,this.dataService=i,this.layoutManager=s,this.localeManager=n,this.animationManager=o,this.domManager=r,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(px),this.destroyFns.push(this.layoutManager.addListener("layout:complete",a=>this.onLayoutComplete(a)))}destroy(){this.destroyFns.forEach(e=>e()),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:e}}){const t=this.dataService.isLoading(),i=this.chartLike.series.some(h=>h.hasData),s=this.chartLike.series.some(h=>h.visible&&!k7.has(h.type));this.overlays.darkTheme?this.overlayElem.classList.add(fL):this.overlayElem.classList.remove(fL),this.overlayElem.style.left=`${e.x}px`,this.overlayElem.style.top=`${e.y}px`,this.overlayElem.style.width=`${e.width}px`,this.overlayElem.style.height=`${e.height}px`;const n=t,o=!t&&!i,r=i&&!s,a=this.overlays.unsupportedBrowser.enabled&&P7();n?this.showOverlay(this.overlays.loading,e):this.hideOverlay(this.overlays.loading),o?this.showOverlay(this.overlays.noData,e):this.hideOverlay(this.overlays.noData),r?this.showOverlay(this.overlays.noVisibleSeries,e):this.hideOverlay(this.overlays.noVisibleSeries),a?this.showOverlay(this.overlays.unsupportedBrowser,e):this.hideOverlay(this.overlays.unsupportedBrowser);const c=n||o||r||a;At(this.overlayElem,"aria-hidden",!c)}showOverlay(e,t){if(!e.enabled)return;const i=e.getElement(this.animationManager,this.localeManager,t);this.overlayElem.appendChild(i)}hideOverlay(e){e.removeElement(()=>{this.overlayElem.innerText=" "},this.animationManager)}},no=at.create(!0,"opts"),F0=class extends Be{constructor(){super(...arguments),this.padding=new ul(0)}};D([E()],F0.prototype,"clip",2);D([E()],F0.prototype,"padding",2);var Mi=class l1 extends bN{constructor(t,i){var s;super(),this.id=vn(this),this.seriesRoot=new Ps({name:`${this.id}-series-root`,zIndex:5}),this.annotationRoot=new Ps({name:`${this.id}-annotation-root`,zIndex:9}),this.titleGroup=new Ne({name:"titles",zIndex:13}),this.debug=at.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new TI,this.padding=new ul(20),this.seriesArea=new F0,this.keyboard=new v0,this.touch=new a1,this.mode="standalone",this.chartCaptions=new gy,this.suppressFieldDotNotation=!1,this.destroyed=!1,this._destroyFns=[],this.skipSync=!1,this.chartAnimationPhase="initial",this.modulesManager=new t7,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new TI,this.performUpdateType=7,this.runningUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new x8,this.updateRequestors={},this.performUpdateTrigger=R8(({count:d})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(d)}catch(p){de.error("update error",p)}}).catch(p=>de.errorOnce(p))}),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=d=>{this.fireEvent(d)},this.onSeriesNodeDoubleClick=d=>{this.fireEvent(d)},this.onSeriesVisibilityChange=d=>{this.fireEvent(d)},this.seriesGroupingChanged=d=>{if(!(d instanceof I0))return;const{series:p,seriesGrouping:f,oldGrouping:v}=d;p.contentGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:p.internalId,type:p.type,contentGroup:p.contentGroup,renderToOffscreenCanvas:()=>p.renderToOffscreenCanvas(),seriesGrouping:f,oldGrouping:v})},this.chartOptions=t;const n=i==null?void 0:i.scene,o=(i==null?void 0:i.container)??t.processedOptions.container??void 0,r=(i==null?void 0:i.styleContainer)??t.specialOverrides.styleContainer;n&&(this._firstAutoSize=!1,this._lastAutoSize=[n.width,n.height,n.pixelRatio]);const a=new Ne({name:"root"});a.visible=!1,a.append(this.seriesRoot),a.append(this.annotationRoot),a.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new qn,this.seriesLayerManager=new D7(this.seriesRoot),this.mode=t.userOptions.mode??this.mode;const c=this.ctx=new iQ(this,{chartType:this.getChartType(),scene:n,root:a,container:o,styleContainer:r,domMode:t.optionMetadata.domMode,syncManager:new EQ(this),fireEvent:d=>this.fireEvent(d),updateCallback:(d,p)=>this.update(d,p),updateMutex:this.updateMutex});this._destroyFns.push(c.domManager.addListener("resize",()=>this.parentResize(c.domManager.containerSize))),this.overlays=new Ah,(s=this.overlays.loading).renderer??(s.renderer=()=>i7(this.overlays.loading.getText(c.localeManager),c.animationManager.defaultDuration)),this.processors=[new R7(this,c.dataService,c.updateService,c.zoomManager,c.animationManager),new N7(this,this.overlays,c.dataService,c.layoutManager,c.localeManager,c.animationManager,c.domManager)],this.highlight=new wO,this.container=o;const h=this.getModuleContext();c.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new x7(this.initSeriesAreaDependencies()),this._destroyFns.push(c.layoutManager.registerElement(0,d=>{d.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(d)}),c.layoutManager.addListener("layout:complete",d=>this.chartCaptions.positionAbsoluteCaptions(d)),c.dataService.addListener("data-load",d=>{this.data=d.data}),this.title.registerInteraction(h,"beforebegin"),this.subtitle.registerInteraction(h,"beforebegin"),this.footnote.registerInteraction(h,"afterend"),cr.addWindowEvent("page-left",()=>this.destroy()),c.animationManager.addListener("animation-frame",()=>{this.update(6)}),c.animationManager.addListener("animation-start",()=>c.domManager.setDataBoolean("animating",!0)),c.animationManager.addListener("animation-stop",()=>c.domManager.setDataBoolean("animating",!1)),c.zoomManager.addListener("zoom-change",()=>{this.series.forEach(p=>{var f;return(f=p.animationState)==null?void 0:f.transition("updateData")});const d=this.chartAnimationPhase!=="initial";this.update(3,{forceNodeDataRefresh:!0,skipAnimations:d})})),this.parentResize(c.domManager.containerSize)}static getInstance(t){return l1.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}download(t,i){this.ctx.scene.download(t,i)}getCanvasDataURL(t){return this.ctx.scene.getDataURL(t)}toSVG(){return this.ctx.scene.toSVG()}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}overrideFocusVisible(t){var i;(i=this.seriesAreaManager.focusIndicator)==null||i.overrideFocusVisible(t)}initSeriesAreaDependencies(){const{ctx:t,tooltip:i,highlight:s,overlays:n,seriesRoot:o,mode:r}=this,a=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,getTooltipContent:(p,f,v)=>this.getTooltipContent(p,f,v),chartType:a,ctx:t,tooltip:i,highlight:s,overlays:n,seriesRoot:o,mode:r}}getModuleContext(){return this.ctx}getTooltipContent(t,i,s){const n=t.properties.tooltip.enabled!==!1?t.getTooltipContent(i,s):void 0,o=n==null?[]:[n];if(this.tooltip.mode!=="shared"||this.series.length===1)return o;const r=t.getCategoryValue(i);return r==null?o:this.series.flatMap(a=>{if(a===t)return o;if(!a.isEnabled()||a.properties.tooltip.enabled===!1)return[];const c=a.datumIndexForCategoryValue(r),h=c==null?void 0:a.getTooltipContent(c,void 0);return h==null?[]:[h]})}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(t=>t.enabled&&t.text).map(t=>t.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const t of this.series)t.resetAnimation(this.chartAnimationPhase);for(const t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clear()}destroy(t){if(this.destroyed)return;const i=t==null?void 0:t.keepTransferableResources;let s;return this.performUpdateType=7,this._destroyFns.forEach(n=>n()),this.processors.forEach(n=>n.destroy()),this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),s={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(n=>n.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),s}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await t(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}}).catch(i=>de.errorOnce(i)))}clearCallbackCache(){this.ctx.callbackCache.invalidateCache();for(const t of this.series)t.resetDatumCallbackCache()}update(t=0,i){if(this.destroyed)return;const{forceNodeDataRefresh:s=!1,skipAnimations:n,seriesToUpdate:o=this.series,newAnimationBatch:r}=i??{};this.ctx.widgets.seriesWidget.setDragTouchEnabled(this.touch.dragAction!=="none"),s&&this.series.forEach(a=>a.markNodeDataDirty());for(const a of o)this.seriesToUpdate.add(a);if(n&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),r&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.skipSync=(i==null?void 0:i.skipSync)??!1,this.debug.check()){let a=new Error().stack??"<unknown>";a=a.replace(/\([^)]*/g,""),this.updateRequestors[a]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(i==null?void 0:i.backOffMs))}async performUpdate(t){const{performUpdateType:i,extraDebugStats:s,_performUpdateSplits:n,ctx:o}=this,r=[...this.seriesToUpdate];this.clearCallbackCache(),this.performUpdateType=7,this.seriesToUpdate.clear(),this.runningUpdateType=i,this.updateShortcutCount===0&&i<6&&(o.animationManager.startBatch(this._performUpdateSkipAnimations),o.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.ctx.scene.updateDebugFlags(),this.debug("Chart.performUpdate() - start",Sg[i]);let a=performance.now();n.start??(n.start=a);const c=d=>{n[d]??(n[d]=0),n[d]+=performance.now()-a,a=performance.now()};switch(i){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),c("⬇️");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),c("🏭");case 3:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(3))break;await this.processLayout(),c("⌖");case 4:{if(this.checkUpdateShortcut(4))break;await this.updateSeries(r),c("🤔"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing()}case 5:if(this.checkUpdateShortcut(5))break;o.updateService.dispatchPreSceneRender(),c("↖");case 6:if(this.checkUpdateShortcut(6))break;o.animationManager.endBatch(),s.updateShortcutCount=this.updateShortcutCount,o.scene.render({debugSplitTimes:n,extraDebugStats:s,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const d of Object.keys(n))delete n[d];this.ctx.domManager.incrementDataCounter("sceneRenders"),this.ctx.domManager.postRenderUpdate();case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,o.animationManager.endBatch()}this.destroyed||(o.updateService.dispatchUpdateComplete(),this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=7),this._performUpdateNotify.notify();const h=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((h-n.start)*100)/100,count:t,performUpdateType:Sg[i]})}updateThemeClassName(){const t="ag-charts-theme-",i=[`${t}default`,`${t}default-dark`];let s=i[0],n=!1,{theme:o}=this.chartOptions.processedOptions;for(;typeof o!="string"&&o!=null;)o=o.baseTheme;typeof o=="string"&&(s=o.replace("ag-",t),n=o.includes("-dark")),i.includes(s)||(s=n?i[1]:i[0]),this.ctx.domManager.setThemeClass(s)}updateDOM(){this.updateThemeClassName();const{enabled:t,tabIndex:i}=this.keyboard;this.ctx.domManager.setTabGuardIndex(t?i??0:-1),this.ctx.domManager.setThemeParameters(this.chartOptions.themeParameters)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(t){return this.destroyed?!0:this.updateShortcutCount>3?(de.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t?(this.updateShortcutCount++,!0):!1}async checkFirstAutoSize(){this.width!=null&&this.height!=null||this._lastAutoSize||await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}onAxisChange(t,i){i==null&&t.length===0||this.ctx.axisManager.updateAxes(i??[],t)}onSeriesChange(t,i){var n,o;const s=(i==null?void 0:i.filter(r=>!t.includes(r)))??[];this.destroySeries(s),(n=this.seriesLayerManager)==null||n.setSeriesCount(t.length);for(const r of t){if(i!=null&&i.includes(r))continue;const a=this.seriesLayerManager.requestGroup(r);r.attachSeries(a,this.seriesRoot,this.annotationRoot);const c=this;r.chart={get mode(){return c.mode},get isMiniChart(){return!1},get seriesRect(){return c.seriesRect}},r.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(r),r.addChartEventListeners()}(o=this.seriesAreaManager)==null||o.seriesChanged(t)}destroySeries(t){t==null||t.forEach(i=>{i.removeEventListener("seriesNodeClick",this.onSeriesNodeClick),i.removeEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.detachSeries(void 0,this.seriesRoot,this.annotationRoot),i.chart=void 0})}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("seriesNodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("seriesNodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&t.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const t of this.axes)t.boundSeries=this.series.filter(i=>i.axes[t.direction]===t)}assignAxesToSeries(){const t=TM(this.axes,i=>i.direction);for(const i of this.series)for(const s of i.directions){const n=t[s];if(!n){de.warnOnce(`no available axis for direction [${s}]; check series and axes configuration.`);return}const o=i.getKeys(s),r=n.find(a=>!a.keys.length||o.some(c=>a.keys.includes(c)));if(!r){de.warnOnce(`no matching axis for direction [${s}] and keys [${o}]; check series and axes configuration.`);return}i.axes[s]=r}}parentResize(t){if(t==null||this.width!=null&&this.height!=null)return;let{width:i,height:s}=t;const{pixelRatio:n}=t;if(i=Math.floor(i),s=Math.floor(s),i===0&&s===0)return;const[o=0,r=0,a=1]=this._lastAutoSize??[];o===i&&r===s&&a===n||(this._lastAutoSize=[i,s,n],this.resize("SizeMonitor",{}))}resize(t,i){var v,y,b;const{scene:s,animationManager:n}=this.ctx,{inWidth:o,inHeight:r,inMinWidth:a,inMinHeight:c,inOverrideDevicePixelRatio:h}=i;this.ctx.domManager.setSizeOptions(a??this.minWidth,c??this.minHeight,o??this.width,r??this.height);const d=o??this.width??((v=this._lastAutoSize)==null?void 0:v[0]),p=r??this.height??((y=this._lastAutoSize)==null?void 0:y[1]),f=h??this.overrideDevicePixelRatio??((b=this._lastAutoSize)==null?void 0:b[2]);if(this.debug(`Chart.resize() from ${t}`,{width:d,height:p,pixelRatio:f,stack:new Error().stack}),!(d==null||p==null||!nt(d)||!nt(p))&&s.resize(d,p,f)){n.reset();let w=!0;(this.width==null||this.height==null)&&this._firstAutoSize&&(w=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:w}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach(i=>i.setChartData(this.data));const t=this.modulesManager.mapModules(i=>{var s;return(s=i.updateData)==null?void 0:s.call(i,this.data)});await Promise.all(t)}async processData(){this.series.some(n=>n.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new EO(this.mode,this.suppressFieldDotNotation),i=this.series.map(n=>n.processData(t)),s=this.modulesManager.mapModules(n=>{var o;return(o=n.processData)==null?void 0:o.call(n,t)});this._cachedData=t.execute(this._cachedData),await Promise.all([...i,...s]);for(const n of this.axes)n.processData();this.updateLegends()}updateLegends(t){for(const{legend:i,legendType:s}of this.modulesManager.legends())s==="category"?this.setCategoryLegendData(t):this.setLegendData(s,i)}setCategoryLegendData(t){var i;const{ctx:{legendManager:s,stateManager:n}}=this;t&&this.series.forEach(r=>{const a=t.find(c=>c.seriesId===r.id);r.onLegendInitialState("category",a)});const o=this.series.flatMap(r=>{const a=r.getLegendData("category");return s.updateData(r.id,a),a});if(t){n.setStateAndRestore(s,t);return}if(this.mode!=="integrated"){const r={},a=new Map(this.series.map(c=>[c.id,c.type]));for(const{seriesId:c,symbol:{marker:h},label:d}of o.filter(p=>!p.hideInLegend)){if(h.fill==null)continue;const p=a.get(c),f=r[p]??(r[p]={});f[i=d.text]??(f[i]=h.fill),f[d.text]!==h.fill&&de.warnOnce(`legend item '${d.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}s.update()}setLegendData(t,i){i.data=this.series.filter(s=>s.properties.showInLegend).flatMap(s=>s.getLegendData(t))}async processLayout(){var o;const t=this.animationRect,{width:i,height:s}=this.ctx.scene,n=this.ctx.layoutManager.createContext(i,s);await this.performLayout(n),t&&!((o=this.animationRect)!=null&&o.equals(t))&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(t){const{seriesRect:i}=this;await Promise.all(t.map(s=>s.update({seriesRect:i}))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(s=>s.visible&&s.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(t=1e4,i=!1){const s=performance.now();for(;(this._pendingFactoryUpdatesCount>0||this.performUpdateType!==7||this.runningUpdateType!==7)&&!this.destroyed;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(this.performUpdateType!==7||this.runningUpdateType!==7)&&await this._performUpdateNotify.await(),performance.now()-s>t){const n=`Chart.waitForUpdate() timeout of ${t} reached - first chart update taking too long.`;if(i)throw new Error(n);de.warnOnce(n)}mN()&&await ZZ()}}filterMiniChartSeries(t){return t==null?void 0:t.filter(i=>i.showInMiniChart!==!1)}applyOptions(t){var b,w,S,M,R;const i=this.firstApply?t.processedOptions:t.diffOptions(this.chartOptions);if(i==null||Object.keys(i).length===0)return;const s=this.firstApply?{}:this.chartOptions.processedOptions,n=t.processedOptions;no("Chart.applyOptions() - applying delta",i);const o=this.applyModules(n),r=["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"];i.listeners&&this.registerListeners(this,i.listeners),yg(this,i,{skip:r});let a=!1,c="no-op";i.series!=null&&(c=this.applySeries(this,i.series,s==null?void 0:s.series),a=!0),c==="replaced"&&this.resetAnimations(),this.applyAxes(this,n,s,c,[])&&(a=!0),i.data&&(this.data=i.data),(b=i.legend)!=null&&b.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,i.legend.listeners),(w=i.locale)!=null&&w.localeText&&(this.modulesManager.getModule("locale").localeText=(S=i.locale)==null?void 0:S.localeText),this.chartOptions=t;const h=this.modulesManager.getModule("navigator"),d=this.modulesManager.getModule("zoom");!(h!=null&&h.enabled)&&!(d!=null&&d.enabled)&&this.ctx.zoomManager.updateZoom("chart");const p=h==null?void 0:h.miniChart,f=((R=(M=n.navigator)==null?void 0:M.miniChart)==null?void 0:R.series)??n.series;(p==null?void 0:p.enabled)===!0&&f!=null?this.applyMiniChartOptions(p,f,n,s):(p==null?void 0:p.enabled)===!1&&(p.series=[],p.axes=[]),this.ctx.annotationManager.setAnnotationStyles(t.annotationThemes),a||(a=this.shouldForceNodeDataRefresh(i,c));const y=a||o?0:3;this.maybeResetAnimations(c),this.shouldClearLegendData(n,s,c)&&this.ctx.legendManager.clearData(),this.applyInitialState(n),no("Chart.applyOptions() - update type",Sg[y],{seriesStatus:c,forceNodeDataRefresh:a}),this.update(y,{forceNodeDataRefresh:a,newAnimationBatch:!0}),this.firstApply=!1}applyInitialState(t){var c,h,d;const{annotationManager:i,chartTypeOriginator:s,historyManager:n,stateManager:o,zoomManager:r}=this.ctx,{initialState:a}=t;if("annotations"in t&&((c=t.annotations)!=null&&c.enabled)&&(a==null?void 0:a.annotations)!=null){const p=a.annotations.map(f=>{const v=i.getAnnotationTypeStyles(f.type);return Qe(f,v)});o.setState(i,p)}(a==null?void 0:a.chartType)!=null&&o.setState(s,a.chartType),((h=t.navigator)!=null&&h.enabled||(d=t.zoom)!=null&&d.enabled)&&(a==null?void 0:a.zoom)!=null&&o.setState(r,a.zoom),(a==null?void 0:a.legend)!=null&&this.updateLegends(a.legend),a!=null&&n.clear()}maybeResetAnimations(t){if(this.mode==="standalone")switch(t){case"series-grouping-change":case"replaced":this.resetAnimations();break}}shouldForceNodeDataRefresh(t,i){const s=!!t.data||i==="data-change"||i==="replaced",n=f0.getKeys(),o=Object.values(n).some(a=>t[a]!=null),r=t.title!=null&&t.subtitle!=null;return s||o||r}shouldClearLegendData(t,i,s){const n=s==="replaced"||s==="series-grouping-change"||s==="updated",o=i.legend!=null&&t.legend==null;return n||o}applyMiniChartOptions(t,i,s,n){var d,p,f,v;const o=((p=(d=n==null?void 0:n.navigator)==null?void 0:d.miniChart)==null?void 0:p.series)??(n==null?void 0:n.series),r=this.applySeries(t,this.filterMiniChartSeries(i),this.filterMiniChartSeries(o));this.applyAxes(t,s,n,r,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const a=t.series;for(const y of a)y.properties.id=void 0;const c=t.axes,h=c.find(y=>y.direction==="x");for(const y of c)y.nice=!1,y.gridLine.enabled=!1,y.label.enabled=y===h,y.tick.enabled=!1,y.interactionEnabled=!1;if(h!=null){const y=(f=s.navigator)==null?void 0:f.miniChart,b=y==null?void 0:y.label,w=(v=y==null?void 0:y.label)==null?void 0:v.interval;if(h.line.enabled=!1,h.label.set(il(b,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),h.tick.set(il(w,["enabled","width","size","color","interval","step"])),h.type==="grouped-category"){h.label.enabled=!1,h.label.rotation=0;const{depthOptions:M}=h;if(M.length===0)M.set([{label:{enabled:!0}}]);else for(let R=1;R<M.length;R++)M[R].label.enabled=!1}const S=w==null?void 0:w.step;S!=null&&(h.interval.step=S)}}applyModules(t){var n;const{type:i}=this.constructor;let s=!1;for(const o of Uo.byType("root","legend")){const a=t[o.optionsKey]!=null&&o.chartTypes.includes(i);a!==this.modulesManager.isEnabled(o)&&(a?(this.modulesManager.addModule(o,c=>c.moduleFactory(this.getModuleContext())),o.type==="legend"&&((n=this.modulesManager.getModule(o))==null||n.attachLegend(this.ctx.scene)),this[o.optionsKey]=this.modulesManager.getModule(o)):(this.modulesManager.removeModule(o),delete this[o.optionsKey]),s=!0)}return s}initSeriesDeclarationOrder(t){for(let i=0;i<t.length;i++)t[i].setSeriesIndex(i)}applySeries(t,i,s){var d;if(!i)return"no-change";const n=JQ(t.series,i,s);if(n.status==="no-overlap"){no(`Chart.applySeries() - creating new series instances, status: ${n.status}`,n);const p=i.map(f=>this.createSeries(f));return this.initSeriesDeclarationOrder(p),t.series=p,"replaced"}no("Chart.applySeries() - matchResult",n);const o=[];let r=!1,a=!1,c=!1;const h=n.changes.toSorted((p,f)=>p.targetIdx-f.targetIdx);for(const p of h)switch(a||(a=p.status==="series-grouping"),r||(r=((d=p.diff)==null?void 0:d.data)!=null),c||(c=p.status!=="no-op"),p.status){case"add":{const f=this.createSeries(p.opts);o.push(f),no("Chart.applySeries() - created new series",f);break}case"remove":no(`Chart.applySeries() - removing series at previous idx ${p.idx}`,p.series);break;case"no-op":o.push(p.series),no(`Chart.applySeries() - no change to series at previous idx ${p.idx}`,p.series);break;case"series-grouping":case"update":default:{const{series:f,diff:v,idx:y}=p;no(`Chart.applySeries() - applying series diff previous idx ${y}`,v,f),this.applySeriesValues(f,v),f.markNodeDataDirty(),o.push(f)}}return this.initSeriesDeclarationOrder(o),no("Chart.applySeries() - final series instances",o),t.series=o,a?"series-grouping-change":r?"data-change":c?"updated":"no-op"}applyAxes(t,i,s,n,o=[]){if(!("axes"in i)||!i.axes)return!1;o=["axes[].type",...o];const{axes:r}=i;return!(n==="replaced")&&t.axes.length===r.length&&t.axes.every((h,d)=>h.type===r[d].type)&&A0(s)?(t.axes.forEach((h,d)=>{var y;const p=((y=s.axes)==null?void 0:y[d])??{},f=er(p,r[d]);no(`Chart.applyAxes() - applying axis diff idx ${d}`,f);const v=`axes[${d}]`;yg(h,f,{path:v,skip:o})}),!0):(no(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${n}`),t.axes=this.createAxis(r,o),!0)}createSeries(t){const i=Gn.create(t.type,this.getModuleContext());return this.applySeriesOptionModules(i,t),this.applySeriesValues(i,t),i}applySeriesOptionModules(t,i){const s=t.createModuleContext(),n=t.getModuleMap();for(const o of Uo.byType("series-option"))o.optionsKey in i&&o.seriesTypes.includes(t.type)&&n.addModule(o,r=>r.moduleFactory(s))}applySeriesValues(t,i){const s=t.getModuleMap(),{type:n,data:o,listeners:r,seriesGrouping:a,showInMiniChart:c,...h}=i;for(const d of bp)if(d.type==="series-option"&&d.optionsKey in h){const p=s.getModule(d.optionsKey);if(p){const f=h[d.optionsKey];delete h[d.optionsKey],p.properties.set(f)}}t.properties.set(h),"data"in i&&t.setOptionsData(o),r&&this.registerListeners(t,r,{nodeClick:"seriesNodeClick",nodeDoubleClick:"seriesNodeDoubleClick"}),"seriesGrouping"in i&&(a==null?t.seriesGrouping=void 0:t.seriesGrouping={...t.seriesGrouping,...a})}createAxis(t,i){const s=[],n=this.getModuleContext();for(let o=0;o<t.length;o++){const r=t[o],a=mc.create(r.type,n);this.applyAxisModules(a,r),yg(a,r,{path:`axes[${o}]`,skip:i}),s.push(a)}return XQ(s),s}applyAxisModules(t,i){const s=t.createModuleContext(),n=t.getModuleMap();for(const o of Uo.byType("axis-option")){const r=i[o.optionsKey]!=null;r!==n.isEnabled(o)&&(r?(n.addModule(o,a=>a.moduleFactory(s)),t[o.optionsKey]=n.getModule(o)):(n.removeModule(o),delete t[o.optionsKey]))}}registerListeners(t,i,s){t.clearEventListeners();for(const[n,o]of po(i))if(ll(o)){const r=s==null?void 0:s[n];r==null?t.addEventListener(n,o):t.addEventListener(r,a=>{if((a==null?void 0:a.type)===r){const c=new Proxy(a,{get(h,d,p){return d==="type"?n:Reflect.get(h,d,p)}});o(c)}else o(a)})}}};Mi.chartsInstances=new WeakMap;D([Js({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),Mi.chartsInstances.set(e,this))},oldValue(e){Mi.chartsInstances.delete(e)}})],Mi.prototype,"container",2);D([Js({newValue(e){this.resize("width option",{inWidth:e})}})],Mi.prototype,"width",2);D([Js({newValue(e){this.resize("height option",{inHeight:e})}})],Mi.prototype,"height",2);D([Js({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],Mi.prototype,"minWidth",2);D([Js({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],Mi.prototype,"minHeight",2);D([Js({newValue(e){this.resize("overrideDevicePixelRatio option",{inOverrideDevicePixelRatio:e})}})],Mi.prototype,"overrideDevicePixelRatio",2);D([E()],Mi.prototype,"padding",2);D([E()],Mi.prototype,"seriesArea",2);D([E()],Mi.prototype,"keyboard",2);D([E()],Mi.prototype,"touch",2);D([E(bt(["standalone","integrated"],"a chart mode"))],Mi.prototype,"mode",2);D([xt("chartCaptions.title")],Mi.prototype,"title",2);D([xt("chartCaptions.subtitle")],Mi.prototype,"subtitle",2);D([xt("chartCaptions.footnote")],Mi.prototype,"footnote",2);D([E()],Mi.prototype,"suppressFieldDotNotation",2);D([Js({changeValue(e,t){this.onAxisChange(e,t)}})],Mi.prototype,"axes",2);D([Js({changeValue(e,t){this.onSeriesChange(e,t)}})],Mi.prototype,"series",2);var Ry=Mi,xL=at.create(!0,"opts"),Hl="AG Charts - Chart was destroyed, cannot perform request.",wg=class{constructor(t,i,s){this.factoryApi=i,this.licenseManager=s,this.chart=t}async update(t){if(!this.chart)throw new Error(Hl);return xL.group("AgChartInstance.update()",async()=>{var i;this.factoryApi.update(t,this),await((i=this.chart)==null?void 0:i.waitForUpdate())})}async updateDelta(t){if(!this.chart)throw new Error(Hl);return xL.group("AgChartInstance.updateDelta()",async()=>{var i;this.factoryApi.updateUserDelta(this,t),await((i=this.chart)==null?void 0:i.waitForUpdate())})}getOptions(){if(!this.chart)throw new Error(Hl);const t=zt(this.chart.getOptions());for(const i of Object.keys(t))i.startsWith("_")&&delete t[i];return t}waitForUpdate(){if(!this.chart)throw new Error(Hl);return this.chart.waitForUpdate()}async download(t){var s;if(!this.chart)throw new Error(Hl);const i=await this.prepareResizedChart(this,this.chart,t);try{(s=i.chart)==null||s.download(t==null?void 0:t.fileName,t==null?void 0:t.fileFormat)}finally{i.destroy()}}async __toSVG(t){var s;if(!this.chart)throw new Error(Hl);const i=await this.prepareResizedChart(this,this.chart,{width:600,height:300,...t});try{return(s=i==null?void 0:i.chart)==null?void 0:s.toSVG()}finally{i==null||i.destroy()}}async getImageDataURL(t){if(!this.chart)throw new Error(Hl);const i=await this.prepareResizedChart(this,this.chart,t);try{return i.chart.getCanvasDataURL(t==null?void 0:t.fileFormat)}finally{i.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(t){const{chart:i}=this;if(!i)return;const s=this.getEnabledOriginators();if(!s.includes(i.ctx.legendManager)){await this.setStateOriginators(t,s);return}await this.setStateOriginators(t,s.filter(n=>n!==i.ctx.zoomManager)),await this.setStateOriginators(t,[i.ctx.zoomManager])}resetAnimations(){var t;(t=this.chart)==null||t.resetAnimations()}skipAnimations(){var t;(t=this.chart)==null||t.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.releaseChart=void 0):this.chart&&(this.chart.publicApi=void 0,this.chart.destroy()),this.chart=void 0}async prepareResizedChart(t,i,s={}){var y,b,w,S,M,R;const n=s.width??i.width??i.ctx.scene.canvas.width,o=s.height??i.height??i.ctx.scene.canvas.height,r=t.getState(),a=Uo.hasEnterpriseModules(),c={...i.chartOptions.processedOverrides,container:document.createElement("div"),width:n,height:o};s.width!=null&&s.height!=null&&(c.overrideDevicePixelRatio=1);const h=i.getOptions();a&&(c.animation={enabled:!1},(y=this.licenseManager)!=null&&y.isDisplayWatermark()&&(c.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const d={...i.chartOptions.specialOverrides},p={...i.chartOptions.optionMetadata},f=this.factoryApi.create(h,c,d,p);await f.setState(r),(b=f.chart)==null||b.ctx.zoomManager.updateZoom("chartProxy",i.ctx.zoomManager.getZoom()),(w=f.chart)==null||w.ctx.legendManager.clearData(),(S=f.chart)==null||S.ctx.legendManager.update(i.ctx.legendManager.getData()),i.series.forEach((A,T)=>{A.visible||(f.chart.series[T].visible=!1)});const v=[];for(const A of i.modulesManager.legends())v.push(((M=A.legend.pagination)==null?void 0:M.currentPage)??0);for(const A of f.chart.modulesManager.legends()){const T=v.shift()??0;A.legend.pagination&&A.legend.pagination.setPage(T)}return(R=f.chart)==null||R.update(0,{forceNodeDataRefresh:!0}),await f.waitForUpdate(),f}getEnabledOriginators(){var h,d,p;if(!this.chart)return[];const{chartOptions:{processedOptions:t,optionMetadata:i},ctx:{annotationManager:s,chartTypeOriginator:n,zoomManager:o,legendManager:r}}=this.chart,a=[];return"annotations"in t&&((h=t.annotations)!=null&&h.enabled)&&a.push(s),i.presetType==="price-volume"&&a.push(n),((d=t.navigator)!=null&&d.enabled||(p=t.zoom)!=null&&p.enabled)&&a.push(o),"legend"in this.chart&&a.push(r),a}async setStateOriginators(t,i){var s,n;this.factoryApi.caretaker.restore(t,...i),(s=this.chart)==null||s.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await((n=this.chart)==null?void 0:n.waitForUpdate())}};wg.chartInstances=new WeakMap;D([Js({oldValue(e){e.destroyed||(e.publicApi=void 0),wg.chartInstances.delete(e)},newValue(e){e&&(e.publicApi=this,wg.chartInstances.set(e,this))}})],wg.prototype,"chart",2);var ML=wg,P0=class extends Jv{constructor(e){super(),this.ctx=e,this.localeText=void 0}};D([hl(e=>{e.ctx.localeManager.setLocaleText(e.localeText)}),E()],P0.prototype,"localeText",2);D([hl(e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)}),E()],P0.prototype,"getLocaleText",2);var O7={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new P0(e)},Rp=class extends Sp{constructor(){super(...arguments),this.type="band",this.index=void 0,this._domain=[]}set domain(e){this._domain!==e&&(this.invalid=!0,this._domain=e,this.index=void 0)}get domain(){return this._domain}normalizeDomains(...e){let t;const i=new Set;let s=!0;for(const n of e)i.has(n)||(i.add(n),t==null?t=DL(n):(s&&(s=G7(n,t)),t=DL([...t,...n])));return t??(t=[]),{domain:t,animatable:s}}toDomain(e){}invert(e,t=!1){this.refresh();const i=t?this.bandwidth/2:0,s=this.invertNearestIndex(Math.max(0,e-i));return t||e===this.ordinalRange(s)?this.domain[s]:void 0}getIndex(e){let{index:t}=this;if(t==null){const{domain:i}=this;t=new Map;for(let s=0;s<i.length;s++)t.set(Ss(i[s]),s);this.index=t}return t.get(Ss(e))}};function DL(e){let t;const i=new Set;for(const s of e){const n=Ss(s),o=i.size;i.add(n),i.size!==o?t==null||t.push(s):t??(t=e.slice(0,i.size))}return t??e}function G7(e,t){let i=-1;for(const s of e){const n=t.indexOf(s);if(n===-1)i=1/0;else{if(n<=i)return!1;i=n}}return!0}var Eh=class c1 extends xp{constructor(t,i=new Rp){super(t,i),this.groupPaddingInner=.1,this.includeInvisibleDomains=!0,this.nice=!1}static is(t){return t instanceof c1}normaliseDataDomain(t){return{domain:t,clipped:!1}}updateScale(){super.updateScale();let{paddingInner:t,paddingOuter:i}=this;if(!nt(t)||!nt(i)){const s=this.reduceBandScalePadding();t??(t=s.inner),i??(i=s.outer)}this.scale.paddingInner=t??0,this.scale.paddingOuter=i??0}reduceBandScalePadding(){return this.boundSeries.reduce((t,i)=>{var n;const s=(n=i.getBandScalePadding)==null?void 0:n.call(i);return s&&(t.inner>s.inner&&(t.inner=s.inner),t.outer<s.outer&&(t.outer=s.outer)),t},{inner:1/0,outer:-1/0})}};Eh.className="CategoryAxis";Eh.type="category";D([E()],Eh.prototype,"groupPaddingInner",2);D([E()],Eh.prototype,"paddingInner",2);D([E()],Eh.prototype,"paddingOuter",2);var Gc=Eh,RL=class extends Rp{normalizeDomains(...e){const{domain:t}=super.normalizeDomains(...e);return{domain:t,animatable:!1}}getIndex(e){return super.getIndex(e)??this.getMatchIndex(e)}getMatchIndex(e){const t=JSON.stringify(e),i=this._domain.find(s=>JSON.stringify(s)===t);if(i!=null)return super.getIndex(i)}};function ia(e){if(e.length===0)return null;let t=1/0,i=-1/0;for(const n of e){const o=n instanceof Date?n.getTime():n;typeof o=="number"&&(o<t&&(t=o),o>i&&(i=o))}const s=[t,i];return s.every(isFinite)?s:null}function k0(e,t,i){let s=!1;return e.length>2&&(e=ia(e)??[NaN,NaN]),t!=null&&(s||(s=t>e[0]),e=[t,e[1]]),i!=null&&(s||(s=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{extent:e,clipped:s}}var eg=new WeakMap;function Fv(e,t){var s,n,o;const i=JSON.stringify(e,null,0);return eg.has(t)||eg.set(t,new Map),(s=eg.get(t))!=null&&s.has(i)||(n=eg.get(t))==null||n.set(i,t(e)),(o=eg.get(t))==null?void 0:o.get(i)}function Ts(e,t){const i=new Map,s=(...r)=>r.map(a=>typeof a=="object"||typeof a=="symbol"?a:(i.has(a)||i.set(a,{v:a}),i.get(a))),n={},o=new WeakMap;return(...r)=>{const a=r.length===0?[n]:s(...r);let c=o;for(const p of a.slice(0,-1))c.has(p)||c.set(p,new WeakMap),c=c.get(p);const h=a.at(-1);let d=c.get(h);return d?t==null||t("hit",e,r):(d=e(...r),c.set(h,d),t==null||t("miss",e,r)),d}}function Ay(e,t=[0,0]){for(const i of e)typeof i=="number"&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function B7(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:s=>Ay(s)}}function u1(e,t){return{id:e,type:"aggregate",matchGroupIds:t?[t]:void 0,aggregateFunction:i=>Ay(i),groupAggregateFunction:(i,s=[0,0])=>(s[0]+=(i==null?void 0:i[0])??0,s[1]+=(i==null?void 0:i[1])??0,s)}}function z7(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:s=>Ga.extendDomain(s)}}function vx(e){return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,i=[0,0])=>(i[0]+=(t==null?void 0:t[0])??0,i[1]+=(t==null?void 0:t[1])??0,i)}}function h1(e,t){return{id:e,matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:s=>Ay(s),groupAggregateFunction:(s,n=[0,0,-1])=>(n[0]+=(s==null?void 0:s[0])??0,n[1]+=(s==null?void 0:s[1])??0,n[2]++,n),finalFunction:(s=[0,0,0])=>{const n=s[0]+s[1];return n>=0?[0,n/s[2]]:[n/s[2],0]}}}function yx(e,t,i){const s={id:e,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(n,o=[])=>{const r=o[1]-o[0];return t.aggregateFunction(n).map(a=>a/r)}};return t.groupAggregateFunction&&(s.groupAggregateFunction=t.groupAggregateFunction),s}function d1(e){return()=>{let t=0;return i=>nt(i)?(t+=e?Math.max(0,i):i,t):i}}function g1(){return()=>{let e=0;return t=>{if(!nt(t))return t;const i=e;return e+=t,i}}}function p1(e){return e!=null&&by(e)}function H7(e){return e!=null}function f1(e){switch(e){case"number":case"log":case"ordinal-time":case"time":case"color":return p1;default:return H7}}function m1(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function vo(e,t,i={}){return{property:e,type:"key",valueType:m1(t),validation:f1(t),...i}}function Je(e,t,i={}){return{property:e,type:"value",valueType:m1(t),validation:f1(t),...i}}function v1(e,t={}){return{property:e,type:"value",valueType:"range",missingValue:1,processor:()=>()=>1,...t}}var V7=function(e){return e};function y1(...e){const t=e.filter(i=>i!=null);return t.length===0?()=>V7:t.length===1?t[0]:()=>{const i=t.map(s=>s());return(s,n)=>i.reduce((o,r)=>r(o,n),s)}}function N0(e,t={}){const{min:i=-1/0,max:s=1/0,processor:n,...o}=t;return{type:"value",property:e,valueType:"range",validation:p1,processor:y1(n,()=>r=>nt(r)?Ge(i,r,s):r),...o}}function Ug(e,t,i={}){const{onlyPositive:s,processor:n,...o}=i;return{...Je(e,t,o),processor:y1(n,d1(s))}}function _7(e,t,i={}){return{...Je(e,t,i),processor:g1()}}function qa(e,t,i,s,n){return[Je(e,n,s),x1(s.groupId,t,i,s.separateNegative),...s.rangeId!=null?[z7(s.rangeId,s.groupId)]:[]]}function C1(e,t,i){return[Je(e,t,i),M1(i.groupId)]}var S1={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=NaN;return(t=1/0,i)=>{const s=typeof i[0]=="number"?i[0]:Number(i[0]),n=Math.abs(s-e);return e=s,!isNaN(n)&&n>0&&n<t?n:t}}},b1={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let e=NaN;return(t=-1/0,i)=>{const s=typeof i[0]=="number"?i[0]:Number(i[0]),n=Math.abs(s-e);return e=s,!isNaN(n)&&n>0&&n>t?n:t}}},w1={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:e}})=>e==null?void 0:e.slice().sort((t,i)=>{for(let s=0;s<t.length;s++){const n=t[s]-i[s];if(n!==0)return n}return 0})};function W7({normaliseTo:e}){const t=(i,s)=>{if(s===0)return null;const n=(i??0)*e/s;return n>=0?Math.min(e,n):Math.max(-e,n)};return()=>()=>(i,s,n)=>{const o=j7(i,s,n);for(const r of s)for(const a of n.datumIndices[r]??[]){const c=i[r],h=c[a];if(h==null){c[a]=void 0;continue}c[a]=typeof h=="number"?t(h,o):h.map(d=>t(d,o))}}}function j7(e,t,i){const s=[0,0];for(const n of t){const o=e[n];for(const r of i.datumIndices[n]??[]){const a=o[r];if(a==null)continue;const c=typeof a=="number"?a:Math.max(...a.map(d=>d??0)),h=c<0?0:1;h===0?s[h]=Math.min(s[h],c):s[h]=Math.max(s[h],c)}}return Math.max(Math.abs(s[0]),s[1])}function Ey(e,t){return{type:"group-value-processor",matchGroupIds:e,adjust:Fv({normaliseTo:t},W7)}}function U7({normaliseTo:e,zeroDomain:t,rangeMin:i,rangeMax:s}){const n=e[1]-e[0],o=(r,a,c)=>{const h=e[0]+(r-a)/c*n;return c===0?t:h>=e[1]?e[1]:h<e[0]?e[0]:h};return()=>(r,a)=>{let[c,h]=r.domain.values[a];i!=null&&(c=i),s!=null&&(h=s);const d=h-c;r.domain.values[a]=[e[0],e[1]];const p=r.columns[a];for(let f=0;f<p.length;f+=1)p[f]=o(p[f],c,d)}}function yc(e,t,i,s,n){return{type:"property-value-processor",property:e,adjust:Fv({normaliseTo:t,rangeMin:s,rangeMax:n,zeroDomain:i},U7)}}var Cx=1,Sx=2,AL=(e,t,i,s)=>{var r,a;let n=Cx|Sx;if(t.valueType==="category")return i.length!==e&&(n&=-2),n;let o=(r=s[0])==null?void 0:r.valueOf();for(let c=1;n!==0&&c<s.length;c++){const h=(a=s[c])==null?void 0:a.valueOf();(!Number.isFinite(h)||o>h)&&(n&=-3),Number.isFinite(h)&&o===h&&(n&=-2),o=h}return n};function Th(e){return{type:"processor",property:"animationValidation",calculate(t){const{keys:i,values:s}=t.defs,{input:{count:n},domain:{keys:o,values:r},keys:a,columns:c}=t;let h=Cx|Sx;if(n!==0){for(let d=0;h!==0&&d<i.length;d++)for(const p of i[d].scopes)h&=AL(n,i[d],o[d],a[d].get(p));for(let d=0;h!==0&&d<s.length;d++){const p=s[d];e!=null&&e.includes(p.id)&&(h&=AL(n,p,r[d],c[d]))}}return{uniqueKeys:(h&Cx)!==0,orderedKeys:(h&Sx)!==0}}}}function Y7({mode:e,separateNegative:t}){return()=>()=>(i,s,n)=>{const o=[0,0];for(const r of s)for(const a of n.datumIndices[r]??[]){const c=i[r],h=c[a],d=IM(h)&&t?0:1;nt(h)&&(e==="normal"&&(o[d]+=h),c[a]=o[d],e==="trailing"&&(o[d]+=h))}}}function K7({mode:e,sum:t}){return()=>{const i=[];let s=!0;return()=>(n,o,r)=>{let a=0;for(const c of o){const h=n[c];for(const d of r.datumIndices[c]??[]){const p=h[d],f=s&&t==="current"?0:i[c];i[c]=p;const v=t==="current"?p:f;if(!nt(p)||!nt(f)){h[d]=a;continue}e==="normal"&&(a+=v),h[d]=a,e==="trailing"&&(a+=v)}}s=!1}}}function x1(e,t,i,s=!1){let n;if(t.startsWith("window")){const o=t.endsWith("-trailing")?"trailing":"normal";n=Fv({mode:o,sum:i},K7)}else n=Fv({mode:t,separateNegative:s},Y7);return{type:"group-value-processor",matchGroupIds:[e],adjust:n}}function $7(){return()=>(e,t,i)=>{const s=new Float64Array(t.length);let n=0;for(const o of t){const r=e[o];for(const a of i.datumIndices[o]??[]){const c=r[a];s[n]=Number.isFinite(c)?c:NaN,n+=1,r[a]=s.subarray(0,n)}}}}function M1(e){return{type:"group-value-processor",matchGroupIds:[e],adjust:$7}}function EL(e){return e.id??e.property}function Z7(e,t,i){var a,c;const s=new Map,n=t.defs.values;for(let h=0;h<n.length;h+=1){const d=n[h];if(((a=d.scopes)==null?void 0:a.includes(e))===!1)continue;const p=EL(d);if(s.has(p))return;s.set(p,h)}const o=[],r=i.defs.values;for(let h=0;h<r.length;h+=1){const d=r[h];if(((c=d.scopes)==null?void 0:c.includes(e))===!1)continue;const p=EL(d),f=s.get(p);if(f==null)return;s.delete(p),o.push({previousIndex:f,nextIndex:h})}if(s.size===0)return o}function nw(e,t,i,s,n){for(const{previousIndex:o,nextIndex:r}of i){const a=e[o],c=t[r],h=a[s],d=c[n];if(h!==d)return!1}return!0}function Ih(e,t,i=!0){return{type:"processor",property:"diff",calculate(s,n){const o=new Map,r=new Map,a=new Map,c=new Map,h=t.keys,d=s.keys,p=t.columns,f=s.columns,v=Z7(e,t,s);if(v==null)return n;const y=Math.max(t.input.count,s.input.count);for(let S=0;S<y;S++){const M=S<t.input.count,R=S<s.input.count,A=M?Av(h,e,S):void 0,T=A!=null?Xi(A):"",F=R?Av(d,e,S):void 0,P=F!=null?Xi(F):"";if(R&&M&&T===P){nw(p,f,v,S,S)||a.set(P,S);continue}const N=c.get(P);N!=null?((i||!nw(p,f,v,N,S))&&(a.set(P,S),o.set(P,S)),c.delete(P)):R&&r.set(P,S);const O=r.get(T);O!=null?((i||!nw(p,f,v,O,S))&&(a.set(T,S),o.set(T,S)),r.delete(T)):M&&(a.delete(T),c.set(T,S))}const w={changed:r.size>0||a.size>0||c.size>0,added:new Set(r.keys()),updated:new Set(a.keys()),removed:new Set(c.keys()),moved:new Set(o.keys())};return{...n,[e]:w}}}}function Xi(e,...t){let i;return Ue(e)?i=e.map(n=>hx(n)).join("___"):i=hx(e),(typeof i=="string"||typeof i=="number"||typeof i=="boolean"||i instanceof Date)&&t.length>0&&(i+=`___${t.join("___")}`),i}var q7=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){e>this.right&&(this.right=e),e<this.left&&(this.left=e),t>this.bottom&&(this.bottom=t),t<this.top&&(this.top=t)}},X7=class D1{constructor(t="",i,s){this.label=t,this.parent=i,this.refId=s,this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screenX=0,this.depth=i?i.depth+1:0}insertTick(t,i){let s=this;for(let n=0;n<t.length;n++){const o=t[n],r=n!==t.length-1,{children:a}=s,c=a.find(h=>h.label===o);if(c&&r)s=c;else{const h=new D1(o,s,i);h.index=a.length,a.push(h),r&&(s=h)}}}getLeftSibling(){var t;return this.index>0?(t=this.parent)==null?void 0:t.children[this.index-1]:void 0}getLeftmostSibling(){var t;return this.index>0?(t=this.parent)==null?void 0:t.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){var t;return((t=this.parent)==null?void 0:t.children.filter((i,s)=>s!==this.index))??[]}};function Q7(e){const t=e.reduce((s,n)=>s<n.length?n.length:s,0),i=new X7;for(let s=0;s<e.length;s++){const n=e[s];for(;n.length<t;)n.push("");i.insertTick(n,s)}return i}function J7(e,t,i){const s=t.index-e.index,n=i/s;t.change-=n,t.shift+=i,e.change+=n,t.prelim+=i,t.mod+=i}function eJ(e,t,i){return t.getSiblings().indexOf(e.ancestor)>=0?e.ancestor:i}function tJ({children:e}){let t=0,i=0;for(let s=e.length-1;s>=0;s--){const n=e[s];n.prelim+=t,n.mod+=t,i+=n.change,t+=n.shift+i}}function iJ(e,t){const i=e.getLeftSibling();if(i){let s=e,n=e,o=i,r=n.getLeftmostSibling(),a=n.mod,c=s.mod,h=o.mod,d=r.mod;for(;o.nextRight()&&n.nextLeft();){o=o.nextRight(),n=n.nextLeft(),r=r.nextLeft(),s=s.nextRight(),s.ancestor=e;const p=o.prelim+h-(n.prelim+a)+1;p>0&&(J7(eJ(o,e,t),e,p),a+=p,c+=p),h+=o.mod,a+=n.mod,d+=r.mod,c+=s.mod}o.nextRight()&&!s.nextRight()?s.mod+=h-c:(n.nextLeft()&&!r.nextLeft()&&(r.mod+=a-d),t=e)}return t}function R1(e){const{children:t}=e;if(t.length){let[i]=t;for(const o of t)R1(o),i=iJ(o,i);tJ(e);const s=(t[0].prelim+t.at(-1).prelim)/2,n=e.getLeftSibling();n?(e.prelim=n.prelim+1,e.mod=e.prelim-s):e.prelim=s}else{const i=e.getLeftSibling();e.prelim=i?i.prelim+1:0}}function A1(e,t,i){e.x=e.prelim+t,e.y=e.depth,i.insertNode(e);for(const s of e.children)A1(s,t+e.mod,i)}function E1(e){const{children:t}=e;let i=0;for(const s of t)E1(s),s.children.length?i+=s.leafCount:i++;e.leafCount=i,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t[t.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}function sJ(e){const t=new nJ,i=Q7(e);return R1(i),A1(i,-i.prelim,t),E1(i),t}var nJ=class{constructor(){this.dimensions=new q7,this.nodes=[],this.depth=0}insertNode(e){this.depth<e.depth&&(this.depth=e.depth),this.dimensions.update(e.x,e.y),this.nodes.push(e)}scalingX(e,t){let i=1;if(e>0){const{left:s,right:n}=this.dimensions;i=e/(n-s)}return t&&(i*=-1),i}},sa=class extends Be{constructor(){super(...arguments),this.enabled=!0}};D([E()],sa.prototype,"enabled",2);D([E()],sa.prototype,"avoidCollisions",2);D([E()],sa.prototype,"color",2);D([E()],sa.prototype,"spacing",2);D([E()],sa.prototype,"fontStyle",2);D([E()],sa.prototype,"fontWeight",2);D([E(yn.restrict({min:1}))],sa.prototype,"fontSize",2);D([E()],sa.prototype,"fontFamily",2);var Ty=class extends Be{constructor(){super(...arguments),this.enabled=!0}};D([E()],Ty.prototype,"enabled",2);D([E()],Ty.prototype,"width",2);D([E()],Ty.prototype,"stroke",2);var O0=class extends Be{constructor(){super(...arguments),this.label=new sa,this.tick=new Ty}};D([E()],O0.prototype,"label",2);D([E()],O0.prototype,"tick",2);var Bc=class extends Gc{constructor(e){super(e,new RL),this.tickScale=new RL,this.depthOptions=new mp(O0),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:e}=this.tickTreeLayout,{range:t,step:i,inset:s,bandwidth:n}=this.scale,o=Math.abs(t[1]-t[0])-i,r=this.tickTreeLayout.scalingX(o,t[0]>t[1]),a=s+n/2;let c=0;for(const h of e){const d=h.x*r;c>d&&(c=d),h.screenX=d+a}for(const h of e)h.screenX-=c}getDepthOptionsMap(e){var n,o,r,a;const t=[],{depthOptions:i,label:s}=this;for(let c=0;c<e;c++)t.push(((n=i[c])==null?void 0:n.label.enabled)??s.enabled?{enabled:!0,spacing:((o=i[c])==null?void 0:o.label.spacing)??s.spacing,lineHeight:Ht.getLineHeight(((r=i[c])==null?void 0:r.label.fontSize)??s.fontSize??10),avoidCollisions:((a=i[c])==null?void 0:a.label.avoidCollisions)??s.avoidCollisions}:{enabled:!1,spacing:0,lineHeight:0,avoidCollisions:!1});return t}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((e,t)=>e.setProperties(t))}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){var Se;if(this.updateDirection(),this.updateScale(),this.resizeTickTree(),!((Se=this.tickTreeLayout)!=null&&Se.depth))return{bbox:Me.zero,separatorLayout:[],tickLabelLayout:[]};const{step:e}=this.scale,{title:t,label:i,range:s,depthOptions:n}=this,{depth:o,nodes:r}=this.tickTreeLayout,a=Math.ceil(i.fontSize/e),c=Wt(this.rotation),h=this.position==="top"||this.position==="bottom",d=i.getSideFlag(),p=[],f=new Map,v=new nh,{defaultRotation:y,configuredRotation:b}=Ev({rotation:i.rotation,parallel:i.parallel,regularFlipRotation:Pt(c-Math.PI/2),parallelFlipRotation:Pt(c)}),w=y+b,S=this.getDepthOptionsMap(o),M=(H,q)=>{var W,Y;const ie=o-H.depth;if(!((W=S[ie])!=null&&W.enabled)||q%a!==0||!A9(H.screenX,s))return!1;const he=this.formatTick(H.label,q-1,this.scale.domain),G=this.getLabelStyles({value:he,depth:ie},(Y=n[ie])==null?void 0:Y.label);return v.setProperties({...G,text:he,textAlign:"center",textBaseline:i.parallel?"hanging":"bottom",rotation:0,translationX:0,translationY:H.screenX}),!0};let R=0;const A={};r.forEach((H,q)=>{const ie=o-H.depth,he=e9(H.label);if(A[ie]??(A[ie]=1),A[ie]<he&&(A[ie]=he),!(!M(H,q)||!v.getBBox())&&(f.set(q,v.getBBox()),!H.leafCount)){v.rotation=w;const{width:W}=v.getBBox();R<W&&(R=W)}});const T=M0(),F=d*S[0].spacing,P=new Map,N=H=>{let q=R;for(let ie=1;ie<=H;ie++)q+=S[ie].spacing,(i.mirrored||ie!==H)&&(q+=A[ie]*S[ie].lineHeight);return q};r.forEach((H,q)=>{var Y;if(q===0)return;const ie=M(H,q),he=!H.children.length,G=o-H.depth;if(H.parent){const X=he?H.x:H.x-(H.leafCount-1)/2;if(!P.has(X)){const ee=(Y=this.depthOptions[G])==null?void 0:Y.tick;let fe=R;for(let le=0;le<=G;le++)fe+=S[le].spacing,le!==0&&(fe+=A[le]*S[le].lineHeight);P.set(X,{tickSize:fe,tickStroke:ee==null?void 0:ee.stroke,tickWidth:(ee==null?void 0:ee.enabled)!==!1?ee==null?void 0:ee.width:0})}}if(!ie)return;if(v.x=F,v.y=0,he){const{width:X}=f.get(q),ee=Xk(w);v.rotation=w,v.textAlign="end",v.textBaseline="middle",v.rotationCenterX=F-X/2,v.translationX=(S[G].spacing-X)/2*ee*d,i.mirrored&&(v.translationX+=X)}else v.rotation=h?y:-Math.PI/2,v.rotationCenterX=F,v.translationX=d*N(G);if(S[G].avoidCollisions){const X=he?e:H.leafCount*e;if(v.getBBox().height>X){f.delete(q);return}}const{text:W=""}=v;p.push({text:W,visible:!0,range:this.scale.range,tickId:T(W),fill:v.fill,fontFamily:v.fontFamily,fontSize:v.fontSize,fontStyle:v.fontStyle,fontWeight:v.fontWeight,rotation:v.rotation,rotationCenterX:v.rotationCenterX,textAlign:v.textAlign,textBaseline:v.textBaseline,translationX:v.translationX,translationY:v.translationY,x:v.x,y:v.y}),f.set(q,ri.toCanvas(v))});const{enabled:O,stroke:B,width:V}=this.line;this.lineNode.datum={x:0,y1:s[0],y2:s[1]},this.lineNode.setProperties({stroke:B,strokeWidth:O?V:0});const U=[...P.values()];U.push(U[0]);const se=[this.lineNode.getBBox(),new Me(0,0,U[0].tickSize*d,0)];t.enabled&&(this.updateTitle(this.scale.domain,!1,U[0].tickSize),se.push(t.caption.node.getBBox()));const Ce=Me.merge(ac(f.values(),se));return{bbox:this.getTransformBox(Ce),separatorLayout:U,tickLabelLayout:p}}update(){if(!this.computedLayout)return;this.moduleCtx.animationManager.skipCurrentBatch();const{tickScale:e,gridLine:t,gridLength:i}=this,{separatorLayout:s}=this.computedLayout,n=e.ticks({nice:!1,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}).map((o,r)=>({...s[r],tick:o,tickId:Xi(o,r),tickLabel:o.filter(Boolean).join(" - "),translationY:Math.round(e.convert(o))}));this.gridLineGroupSelection.update(t.enabled&&i?n:[]),this.tickLineGroupSelection.update(this.tick.enabled?n:[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(this.scale.domain),this.resetSelectionNodes()}calculateLayout(){const{separatorLayout:e,tickLabelLayout:t,bbox:i}=this.computeLayout();return this.computedLayout={separatorLayout:e,tickLabelLayout:t},{bbox:i,niceDomain:this.scale.domain}}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.tickLabelGroupSelection.clear()}updateScale(){super.updateScale(),this.tickScale.range=this.scale.range,this.scale.paddingOuter=this.scale.paddingInner/2}processData(){const{direction:e}=this,t=this.boundSeries.filter(n=>n.visible).flatMap(n=>n.getDomain(e));this.dataDomain={domain:ia(t)??this.filterDuplicateArrays(t),clipped:!1},this.isReversed()&&this.dataDomain.domain.reverse();const i=this.dataDomain.domain.map(n=>hv(pi(n)&&"value"in n?n.value:n));this.tickTreeLayout=sJ(i);const s=[];for(const n of this.tickTreeLayout.nodes)n.leafCount||n.refId==null||s.push(this.dataDomain.domain[n.refId]);this.scale.domain=x9(this.dataDomain.domain,s),this.tickScale.domain=i.concat([[""]])}updateGridLines(){if(!this.gridLength)return;const{width:e,style:t}=this.gridLine,i=this.gridLength*-this.label.getSideFlag();this.gridLineGroupSelection.each((s,n,o)=>{const{stroke:r,lineDash:a}=t[o%t.length],c=n.translationY;s.visible=this.inRange(c),s.x1=0,s.x2=i,s.y=c,s.stroke=r,s.strokeWidth=e,s.lineDash=a})}filterDuplicateArrays(e){const t=new Set;return e.filter(i=>{const s=Ue(i)?JSON.stringify(i):i;return t.has(s)?!1:(t.add(s),!0)})}};Bc.className="GroupedCategoryAxis";Bc.type="grouped-category";D([E()],Bc.prototype,"depthOptions",2);var oJ={2:(e,t)=>Math.log2(t),[Math.E]:(e,t)=>Math.log(t),10:(e,t)=>Math.log10(t)},rJ=(e,t)=>Math.log(t)/Math.log(e);function ow(e,t,i){const s=Math.min(...t),n=oJ[e]??rJ;return s>=0?n(e,i):-n(e,-i)}var aJ={[Math.E]:(e,t)=>Math.exp(t),10:(e,t)=>t>=0?10**t:1/10**-t},lJ=(e,t)=>e**t;function rw(e,t,i){const s=Math.min(...t),n=aJ[e]??lJ;return s>=0?n(e,i):-n(e,-i)}var G0=class extends Ct{constructor(e=[1,10],t=[0,1]){super(e,t),this.type="log",this.defaultClamp=!0,this.base=10,this.log=i=>ow(this.base,this.domain,i),this.pow=i=>rw(this.base,this.domain,i)}toDomain(e){return e}transform(e){const[t,i]=xi(this.domain);return t>=0!=i>=0?NaN:t>=0?Math.log(e):-Math.log(-e)}transformInvert(e){const[t,i]=xi(this.domain);return t>=0!=i>=0?NaN:t>=0?Math.exp(e):-Math.exp(-e)}niceDomain(e,t=this.domain){if(t.length<2)return[];const{base:i}=this,[s,n]=t,o=s>n?Math.ceil:Math.floor,r=s>n?Math.floor:Math.ceil,a=rw(i,t,o(ow(i,t,s))),c=rw(i,t,r(ow(i,t,n)));return[a,c]}ticks({interval:e,tickCount:t=Ct.defaultTickCount},i=this.domain,s){if(!i||i.length<2||t<1)return[];const n=this.base,[o,r]=i,a=Math.min(o,r),c=Math.max(o,r);let h=this.log(a),d=this.log(c);if(e){const b=M=>M>=a&&M<=c,w=Math.min(Math.abs(e),Math.abs(d-h)),S=Wg(h,d,w).map(this.pow).filter(b);if(!ch(S.length,this.getPixelRange()))return S}if(!E9(n)||d-h>=t)return d0(h,d,Math.min(d-h,t)).map(this.pow);let p=[];const f=a>0;h=Math.floor(h)-1,d=Math.round(d)+1;const v=ah(this.range)/t;let y=1/0;for(let b=h;b<=d;b++){const w=this.convert(this.pow(b+1));for(let S=1;S<n;S++){const M=f?S:n-S+1,R=this.pow(b)*M,A=this.convert(R),T=Math.abs(y-A),F=Math.abs(A-w),P=T>=v&&F>=v;R>=a&&R<=c&&(S===1||P||p.length===0)&&(p.push(R),y=A)}}return p=dO(p,f,s),p}tickFormatter({specifier:e}){return e!=null?Hk(e):String}datumFormatter(e){return this.tickFormatter(e)}},yo=class T1 extends Ct{constructor(){super([0,1],[0,1]),this.type="number"}static getTickStep(t,i,s){const{interval:n,tickCount:o=Ct.defaultTickCount,minTickCount:r,maxTickCount:a}=s;return n??_g(t,i,o,r,a)}toDomain(t){return t}ticks({interval:t,tickCount:i=Ct.defaultTickCount,minTickCount:s,maxTickCount:n},o=this.domain,r){if(!o||o.length<2||i<1||!o.every(isFinite))return[];const[a,c]=o;if(t){const h=Math.abs(t);if(!ch((c-a)/h,this.getPixelRange()))return Wg(a,c,h)}return d0(a,c,i,s,n,r)}niceDomain(t,i=this.domain){if(i.length<2)return[];const{tickCount:s=Ct.defaultTickCount}=t;let[n,o]=i;if(s===1)[n,o]=EX(n,o);else if(s>1){const r=n>o?Math.ceil:Math.floor,a=n>o?Math.floor:Math.ceil,c=4;for(let h=0;h<c;h++){const d=n,p=o,f=T1.getTickStep(n,o,t),[v,y]=i;if(n=r(v/f)*f,o=a(y/f)*f,n===d&&o===p)break}}return[n,o]}tickFormatter({ticks:t,fractionDigits:i,specifier:s}){return s!=null?QI(t,s):n=>$r(n,i)}datumFormatter({ticks:t,fractionDigits:i,specifier:s}){return s!=null?QI(t,s):n=>$r(n,i+1)}},na=class extends xp{constructor(e,t=new yo){super(e,t)}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=k0(e,t,i);return{domain:s,clipped:n}}};na.className="NumberAxis";na.type="number";D([E(cl(BM,ly("max")))],na.prototype,"min",2);D([E(cl(BM,cy("min")))],na.prototype,"max",2);var Lh=class extends na{normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=k0(e,t,i);return s[0]<0&&s[1]>0||e[0]<0&&e[1]>0?(de.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:n}):s[0]===0||s[1]===0||e[0]===0||e[1]===0?(de.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:n}):{domain:s,clipped:n}}set base(e){this.scale.base=e}get base(){return this.scale.base}constructor(e){super(e,new G0)}defaultDatumFormatter(e,t){return String(e)}defaultLabelFormatter(e,t){return String(e)}};Lh.className="LogAxis";Lh.type="log";var gl=class extends xp{constructor(e){super(e,new vO),this.min=void 0,this.max=void 0}normaliseDataDomain(e){var n;let{min:t,max:i}=this,s=!1;return typeof t=="number"&&(t=new Date(t)),typeof i=="number"&&(i=new Date(i)),e.length>2&&(e=((n=ia(e))==null?void 0:n.map(o=>new Date(o)))??[]),t instanceof Date&&(s||(s=t>e[0]),e=[t,e[1]]),i instanceof Date&&(s||(s=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{domain:e,clipped:s}}};gl.className="TimeAxis";gl.type="time";D([E(cl(VM,ly("max")))],gl.prototype,"min",2);D([E(cl(VM,cy("min")))],gl.prototype,"max",2);var lg=(e,{x0:t,y0:i,x1:s,y1:n,cx:o,cy:r},a,c)=>{if(c&&e.moveTo(t,i),t!==s||i!==n){const h=Math.atan2(i-r,t-o),d=Math.atan2(n-r,s-o);e.arc(o,r,a,h,d)}else e.lineTo(t,i)},TL=1e-6,xm=(e,t,i,s,n)=>{let o=!1,r=!1,a=s-Math.sqrt(Math.max(n**2-i**2,0)),c=0,h=0,d=i-Math.sqrt(Math.max(n**2-s**2,0));return a>e?(o=!0,a=e,c=i-Math.sqrt(Math.max(n**2-(s-e)**2))):a<TL&&(a=0),d>t?(r=!0,h=s-Math.sqrt(Math.max(n**2-(i-t)**2)),d=t):d<TL&&(d=0),{leading0:a,leading1:c,trailing0:h,trailing1:d,leadingClipped:o,trailingClipped:r}},Ym=(e,t,i,s,n,o,r)=>{let{topLeft:a,topRight:c,bottomRight:h,bottomLeft:d}=o;const p=Math.max(a+d,c+h),f=Math.max(a+c,d+h);if(p<=0&&f<=0){r==null?e.rect(t,i,s,n):e.rect(r.x,r.y,r.width,r.height);return}else if(r==null&&a===c&&a===h&&a===d){e.roundRect(t,i,s,n,a);return}if(s<0&&(t+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),s<=0||n<=0)return;if(r==null)r=new Me(t,i,s,n);else{const P=Math.max(t,r.x),N=Math.min(t+s,r.x+r.width),O=Math.max(i,r.y),B=Math.min(i+n,r.y+r.height);r=new Me(P,O,N-P,B-O)}const v=Math.max(p/n,f/s,1);v>1&&(a/=v,c/=v,h/=v,d/=v);let y=!0,b=!0,w=!0,S=!0,M,R,A,T;if(y){const P=xm(r.height,r.width,Math.max(t+a-r.x,0),Math.max(i+a-r.y,0),a);P.leadingClipped&&(S=!1),P.trailingClipped&&(b=!1);const N=Math.max(r.x+P.leading1,r.x),O=Math.max(r.y+P.leading0,r.y),B=Math.max(r.x+P.trailing1,r.x),V=Math.max(r.y+P.trailing0,r.y),U=t+a,se=i+a;M={x0:N,y0:O,x1:B,y1:V,cx:U,cy:se}}if(b){const P=xm(r.width,r.height,Math.max(i+c-r.y,0),Math.max(r.x+r.width-(t+s-c),0),c);P.leadingClipped&&(y=!1),P.trailingClipped&&(w=!1);const N=Math.min(r.x+r.width-P.leading0,r.x+r.width),O=Math.max(r.y+P.leading1,r.y),B=Math.min(r.x+r.width-P.trailing0,r.x+r.width),V=Math.max(r.y+P.trailing1,r.y),U=t+s-c,se=i+c;R={x0:N,y0:O,x1:B,y1:V,cx:U,cy:se}}if(w){const P=xm(r.height,r.width,Math.max(r.x+r.width-(t+s-h),0),Math.max(r.y+r.height-(i+n-h),0),h);P.leadingClipped&&(b=!1),P.trailingClipped&&(S=!1);const N=Math.min(r.x+r.width-P.leading1,r.x+r.width),O=Math.min(r.y+r.height-P.leading0,r.y+r.height),B=Math.min(r.x+r.width-P.trailing1,r.x+r.width),V=Math.min(r.y+r.height-P.trailing0,r.y+r.height),U=t+s-h,se=i+n-h;A={x0:N,y0:O,x1:B,y1:V,cx:U,cy:se}}if(S){const P=xm(r.width,r.height,Math.max(r.y+r.height-(i+n-d),0),Math.max(t+d-r.x,0),d);P.leadingClipped&&(w=!1),P.trailingClipped&&(y=!1);const N=Math.max(r.x+P.leading0,r.x),O=Math.min(r.y+r.height-P.leading1,r.y+r.height),B=Math.max(r.x+P.trailing0,r.x),V=Math.min(r.y+r.height-P.trailing1,r.y+r.height),U=t+d,se=i+n-d;T={x0:N,y0:O,x1:B,y1:V,cx:U,cy:se}}let F=!1;y&&M!=null&&(lg(e,M,a,!F),F||(F=!0)),b&&R!=null&&(lg(e,R,c,!F),F||(F=!0)),w&&A!=null&&(lg(e,A,h,!F),F||(F=!0)),S&&T!=null&&lg(e,T,d,!F),e.closePath()},Ms=class extends zs{constructor(){super(...arguments),this.borderPath=new sh,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=$n.defaultStyles.strokeWidth,this.effectiveStrokeWidth=$n.defaultStyles.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var w;const{path:e,borderPath:t,crisp:i,topLeftCornerRadius:s,topRightCornerRadius:n,bottomRightCornerRadius:o,bottomLeftCornerRadius:r}=this;let{x:a,y:c,width:h,height:d,strokeWidth:p,clipBBox:f}=this;const y=1/(((w=this.layerManager)==null?void 0:w.canvas.pixelRatio)??1);let b=1;if(e.clear(!0),t.clear(!0),i&&(h<=y&&(b*=h/y),d<=y&&(b*=d/y),h=this.align(a,h),d=this.align(c,d),a=this.align(a),c=this.align(c),f=f!=null?new Me(this.align(f.x),this.align(f.y),this.align(f.x,f.width),this.align(f.y,f.height)):void 0),p)if(h<y){const S=a+y/2;t.moveTo(S,c),t.lineTo(S,c+d),p=y,this.borderClipPath=void 0}else if(d<y){const S=c+y/2;t.moveTo(a,S),t.lineTo(a+h,S),p=y,this.borderClipPath=void 0}else if(p<h&&p<d){const S=p/2;a+=S,c+=S,h-=p,d-=p;const M=f==null?void 0:f.clone().shrink(S),R={topLeft:s>0?s-p:0,topRight:n>0?n-p:0,bottomRight:o>0?o-p:0,bottomLeft:r>0?r-p:0};this.borderClipPath=void 0,h>0&&d>0&&(M==null||(M==null?void 0:M.width)>0&&(M==null?void 0:M.height)>0)&&(Ym(e,a,c,h,d,R,M),Ym(t,a,c,h,d,R,M))}else this.borderClipPath=this.borderClipPath??new sh,this.borderClipPath.clear(!0),this.borderClipPath.rect(a,c,h,d),t.rect(a,c,h,d);else{const S={topLeft:s,topRight:n,bottomRight:o,bottomLeft:r};this.borderClipPath=void 0,Ym(e,a,c,h,d,S,f)}if([s,n,o,r].every(S=>S===0)){const S=this.getBBox();this.hittester=S.containsPoint.bind(S),this.distanceSquared=(M,R)=>this.getBBox().distanceSquared(M,R)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=p,this.lastUpdatePathStrokeWidth=p,this.microPixelEffectOpacity=b}computeBBox(){const{x:e,y:t,width:i,height:s,clipBBox:n}=this;return(n==null?void 0:n.clone())??new Me(e,t,i,s)}isPointInPath(e,t){return this.hittester(e,t)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(e,t){return this.distanceCalculator(e,t)}applyFillAlpha(e){const{fillOpacity:t,microPixelEffectOpacity:i,opacity:s}=this;e.globalAlpha*=s*t*i}renderStroke(e){const{stroke:t,effectiveStrokeWidth:i}=this;if(t&&i){const{globalAlpha:s}=e,{strokeOpacity:n,lineDash:o,lineDashOffset:r,lineCap:a,lineJoin:c,borderPath:h,borderClipPath:d,opacity:p,microPixelEffectOpacity:f}=this;d&&e.clip(d.getPath2D()),this.applyStroke(e),e.globalAlpha*=p*n*f,e.lineWidth=i,o&&e.setLineDash(o),r&&(e.lineDashOffset=r),a&&(e.lineCap=a),c&&(e.lineJoin=c),e.stroke(h.getPath2D()),e.globalAlpha=s}}};Ms.className="Rect";D([ze()],Ms.prototype,"x",2);D([ze()],Ms.prototype,"y",2);D([ze()],Ms.prototype,"width",2);D([ze()],Ms.prototype,"height",2);D([ze()],Ms.prototype,"topLeftCornerRadius",2);D([ze()],Ms.prototype,"topRightCornerRadius",2);D([ze()],Ms.prototype,"bottomRightCornerRadius",2);D([ze()],Ms.prototype,"bottomLeftCornerRadius",2);D([ze()],Ms.prototype,"clipBBox",2);D([ze()],Ms.prototype,"crisp",2);var Fh=class extends Jv{constructor(e){super(),this.ctx=e,this.rectNode=new Ms,this.textNode=new Gi,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(e.scene.attachNode(this.node),e.layoutManager.addListener("layout:complete",t=>this.onLayoutComplete(t)))}createNode(){return new Ne({name:"background",zIndex:0})}onLayoutComplete(e){const{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}};D([E(),Qi("node","visible")],Fh.prototype,"visible",2);D([E(),Qi("rectNode","fill")],Fh.prototype,"fill",2);D([E()],Fh.prototype,"image",2);D([E(),Qi("textNode")],Fh.prototype,"text",2);var I1={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new Fh(e)};function cJ({orientation:e,bboxes:t,maxHeight:i,maxWidth:s,itemPaddingY:n=0,itemPaddingX:o=0,forceResult:r=!1}){const a=e==="horizontal",c={max:a?s:i,fn:a?f=>f.width:f=>f.height,padding:a?o:n},h={max:a?i:s,fn:a?f=>f.height:f=>f.width,padding:a?n:o};let d=0;const p=[];for(;d<t.length;){const f=t.slice(d),v=uJ(f,d,c,h,r);if(!v)return;d+=v.processedBBoxCount,p.push(v.pageIndices)}return dJ(p,e,t,n,o)}function uJ(e,t,i,s,n){let r=pJ(e,i);if(r<1){if(!n)return;r=1}let a=r;for(;a>=1;){const c=hJ(e,t,a,i,s,n);if(c==null&&a<=1)return;if(c==null){a--;continue}if(typeof c=="number"){if(c<=1)return;a=c<a&&c>1?c:a,a--;continue}return{processedBBoxCount:c.length*c[0].length,pageIndices:c}}}function hJ(e,t,i,s,n,o){const r=[];let a=0,c=0,h=[];const d=[];for(let p=0;p<e.length;p++){const f=(p+i)%i;f===0&&(a+=c,c=0,h.length>0&&r.push(h),h=[]);const v=s.fn(e[p])+s.padding;d[f]=Math.max(d[f]??0,v),c=Math.max(c,n.fn(e[p])+n.padding);const y=a+c,b=!o||r.length>0;if(y>n.max&&b){h=[];break}if(d.reduce((S,M)=>S+M,0)>s.max&&!o)return d.length<i?d.length:void 0;h.push(p+t)}return h.length>0&&r.push(h),r.length>0?r:void 0}function dJ(e,t,i,s,n){let o=0,r=0;return{pages:e.map(c=>{t==="horizontal"&&(c=gJ(c));let h=0;const d=c.map(v=>{const y=v.map(S=>(h=Math.max(S,h),i[S]));let b=0,w=0;return y.forEach(S=>{b+=S.height+s,w=Math.max(w,S.width+n)}),{indices:v,bboxes:y,columnHeight:Math.ceil(b),columnWidth:Math.ceil(w)}});let p=0,f=0;return d.forEach(v=>{p+=v.columnWidth,f=Math.max(f,v.columnHeight)}),o=Math.max(p,o),r=Math.max(f,r),{columns:d,startIndex:c[0][0],endIndex:h,pageWidth:p,pageHeight:f}}),maxPageWidth:o,maxPageHeight:r}}function gJ(e){const t=[];for(const i of e[0])t.push([]);return e.forEach((i,s)=>{i.forEach((n,o)=>{t[o][s]=n})}),t}function pJ(e,t){const i=e.length;let s=0;for(let n=0;n<i;n++)if(s+=t.fn(e[n])+t.padding,s>t.max)return i/n<2?Math.ceil(i/2):n;return i}var Ph=class extends Be{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};D([E()],Ph.prototype,"color",2);D([E()],Ph.prototype,"fontStyle",2);D([E()],Ph.prototype,"fontWeight",2);D([E()],Ph.prototype,"fontSize",2);D([E()],Ph.prototype,"fontFamily",2);var Vr=class extends Be{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};D([E()],Vr.prototype,"size",2);D([E()],Vr.prototype,"fill",2);D([E()],Vr.prototype,"fillOpacity",2);D([E()],Vr.prototype,"stroke",2);D([E()],Vr.prototype,"strokeWidth",2);D([E()],Vr.prototype,"strokeOpacity",2);var Iy=class extends Be{constructor(e){super(),this.parent=e,this.shape="triangle",this.size=15,this.padding=8}};D([Js({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],Iy.prototype,"shape",2);D([E()],Iy.prototype,"size",2);D([E()],Iy.prototype,"padding",2);var zc=class extends Be{constructor(e,t){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.id=vn(this),this.marker=new Iy(this),this.activeStyle=new Vr,this.inactiveStyle=new Vr,this.highlightStyle=new Vr,this.label=new Ph,this.group=new Ps({name:"pagination"}),this.labelNode=new Gi,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this.nextButton=new Bi,this.previousButton=new Bi,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){switch(this._orientation=e,e){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.getBBox();this.nextButton.translationX=e.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:s,fontStyle:n,fontWeight:o,fontSize:r,fontFamily:a}}=this;i.text=`${e+1} / ${t}`,i.fill=s,i.fontStyle=n,i.fontWeight=o,i.fontSize=r,i.fontFamily=a}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:o,highlightStyle:r,highlightActive:a}=this,c=(h,d)=>d?o:h===a?r:n;this.updateMarker(e,c("next",i)),this.updateMarker(t,c("previous",s))}updateMarker(e,t){const{shape:i,size:s}=this.marker;e.shape=i,e.size=s,e.fill=t.fill,e.fillOpacity=t.fillOpacity??1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=t===0,s=e===t-1,n=e===0;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}setPage(e){e=Ge(0,e,Math.max(0,this.totalPages-1)),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}getCursor(e){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[e]?void 0:"pointer"}onClick(e,t){e.preventDefault(),t==="next"&&!this.nextButtonDisabled?(this.incrementPage(),this.onPaginationChanged()):t==="previous"&&!this.previousButtonDisabled&&(this.decrementPage(),this.onPaginationChanged())}onMouseHover(e){this.highlightActive=e,this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(e){e.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){const e=ri.toCanvas(this.previousButton),t=ri.toCanvas(this.nextButton);return{prev:e,next:t}}};zc.className="Pagination";D([E()],zc.prototype,"marker",2);D([E()],zc.prototype,"activeStyle",2);D([E()],zc.prototype,"inactiveStyle",2);D([E()],zc.prototype,"highlightStyle",2);D([E()],zc.prototype,"label",2);var B0=class extends Be{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(e){this._dirty=!1}isDirty(){return this._dirty}},fJ=new Set(["circle","cross","diamond","heart","pin","plus","square","star","triangle"]);function mJ(e){return typeof e=="string"&&fJ.has(e)}var oa=class extends Be{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};D([E()],oa.prototype,"fill",2);D([E()],oa.prototype,"fillOpacity",2);D([E()],oa.prototype,"stroke",2);D([E()],oa.prototype,"strokeWidth",2);D([E()],oa.prototype,"strokeOpacity",2);D([E()],oa.prototype,"lineDash",2);D([E()],oa.prototype,"lineDashOffset",2);var Ly=class extends Be{};D([E()],Ly.prototype,"strokeWidth",2);D([E()],Ly.prototype,"dimOpacity",2);D([E()],Ly.prototype,"enabled",2);var L1=class extends Be{constructor(){super(...arguments),this.color="black"}};D([E()],L1.prototype,"color",2);var z0=class extends Be{constructor(){super(...arguments),this.enabled=!0}};D([E()],z0.prototype,"enabled",2);var Xn=class extends Be{constructor(){super(...arguments),this.type="gradient",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.reverse=!1}};D([E()],Xn.prototype,"type",2);D([E()],Xn.prototype,"colorStops",2);D([E()],Xn.prototype,"bounds",2);D([E()],Xn.prototype,"gradient",2);D([E()],Xn.prototype,"rotation",2);D([E()],Xn.prototype,"reverse",2);var ai=class extends Be{constructor(){super(...arguments),this.type="pattern",this.colorStops=[],this.bounds="item",this.gradient="linear",this.rotation=0,this.reverse=!1,this.pattern="forward-slanted-lines",this.width=26,this.height=26,this.padding=6,this.fill="black",this.fillOpacity=1,this.backgroundFill="white",this.backgroundFillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0}};D([E()],ai.prototype,"type",2);D([E()],ai.prototype,"colorStops",2);D([E()],ai.prototype,"bounds",2);D([E()],ai.prototype,"gradient",2);D([E()],ai.prototype,"rotation",2);D([E()],ai.prototype,"reverse",2);D([E()],ai.prototype,"pattern",2);D([E()],ai.prototype,"width",2);D([E()],ai.prototype,"height",2);D([E()],ai.prototype,"padding",2);D([E()],ai.prototype,"fill",2);D([E()],ai.prototype,"fillOpacity",2);D([E()],ai.prototype,"backgroundFill",2);D([E()],ai.prototype,"backgroundFillOpacity",2);D([E()],ai.prototype,"stroke",2);D([E()],ai.prototype,"strokeOpacity",2);D([E()],ai.prototype,"strokeWidth",2);var Ap=class extends Be{constructor(){super(...arguments),this.item=new oa,this.series=new Ly,this.text=new L1}};D([E()],Ap.prototype,"item",2);D([E()],Ap.prototype,"series",2);D([E()],Ap.prototype,"text",2);var xn=class extends Be{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new z0,this.highlightStyle=new Ap}handleUnknownProperties(e,t){"context"in t&&(this.context=t.context,e.delete("context"))}};D([E()],xn.prototype,"id",2);D([E()],xn.prototype,"visible",2);D([E()],xn.prototype,"focusPriority",2);D([E()],xn.prototype,"showInLegend",2);D([E()],xn.prototype,"cursor",2);D([E()],xn.prototype,"nodeClickRange",2);D([E()],xn.prototype,"highlight",2);D([E()],xn.prototype,"highlightStyle",2);var vJ=St(e=>mJ(e)||typeof e=="function","a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),Ji=class extends B0{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=6,this.fillGradientDefaults=new Xn,this.fillPatternDefaults=new ai,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:s,stroke:n,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:c}=this;return{size:e,shape:t,fill:i,fillOpacity:s,stroke:n,strokeWidth:o,strokeOpacity:r,lineDash:a,lineDashOffset:c}}getDiameter(){return this.size+this.strokeWidth}};D([E(),De()],Ji.prototype,"enabled",2);D([E(),De()],Ji.prototype,"shape",2);D([E(),De()],Ji.prototype,"size",2);D([E(ps(Cn,lr,ar)),De()],Ji.prototype,"fill",2);D([E()],Ji.prototype,"fillGradientDefaults",2);D([E()],Ji.prototype,"fillPatternDefaults",2);D([E(),De()],Ji.prototype,"fillOpacity",2);D([E(),De()],Ji.prototype,"stroke",2);D([E(),De()],Ji.prototype,"strokeWidth",2);D([E(),De()],Ji.prototype,"strokeOpacity",2);D([E()],Ji.prototype,"lineDash",2);D([E()],Ji.prototype,"lineDashOffset",2);D([E(),De()],Ji.prototype,"itemStyler",2);var yJ=class{constructor(e,t){this.idPrefix=t,this.dirty=!0,this.destroyFns=new RN,this.itemList=e.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${t}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=e.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${t}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"}),this.itemDescription=$e("p"),this.itemDescription.style.display="none",this.itemDescription.id=`${t}-ariaDescription`,this.itemDescription.textContent=this.getItemAriaDescription(e.localeManager),this.itemList.getElement().append(this.itemDescription)}destroy(){this.destroyFns.destroy()}initLegendList(e){if(!this.dirty)return;const{ctx:t,itemSelection:i,datumReader:s,itemListener:n}=e,o=t.localeManager,r=i.length;i.each((a,c,h)=>{var p;(p=a.proxyButton)==null||p.destroy(),a.proxyButton=t.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(o,s.getItemLabel(c),h,r),ariaChecked:!!a.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const d=a.proxyButton;d.addListener("click",f=>n.onClick(f.sourceEvent,a.datum,d)),d.addListener("dblclick",f=>n.onDoubleClick(f.sourceEvent,a.datum)),d.addListener("mouseenter",f=>n.onHover(f.sourceEvent,a)),d.addListener("mouseleave",()=>n.onLeave()),d.addListener("contextmenu",f=>n.onContextClick(f.sourceEvent,a)),d.addListener("blur",()=>n.onLeave()),d.addListener("focus",f=>n.onHover(f.sourceEvent,a)),d.addListener("drag-start",()=>{})}),this.dirty=!1}update(e){e.visible&&(this.initLegendList(e),this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!0)),this.updateVisibility(e.visible)}updateVisibility(e){this.itemList.setHidden(!e),this.paginationGroup.setHidden(!e)}updateItemProxyButtons({itemSelection:e,group:t,pagination:i,interactive:s}){const n=ri.toCanvas(t);this.itemList.setBounds(n);const o=Math.max(...e.nodes().map(r=>r.getBBox().height));e.each((r,a)=>{if(r.proxyButton){const c=r.pageIndex===i.currentPage,{x:h,y:d,height:p,width:f}=ri.toCanvas(r),v=(o-p)/2,y={x:h-n.x,y:d-v-n.y,height:o,width:f};r.proxyButton.setCursor("pointer"),r.proxyButton.setEnabled(s&&c),r.proxyButton.setBounds(y)}})}updatePaginationProxyButtons(e,t){var o,r,a,c,h,d,p,f;const{pagination:i}=e;if(this.paginationGroup.setHidden(!i.visible),t&&"ctx"in e){const{ctx:v,oldPages:y,newPages:b}=e,w=((y==null?void 0:y.length)??b.length)>1,S=b.length>1;w!==S&&(S?(this.prevButton=v.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-prev-page`,textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",M=>this.onPageButton(e,M,"previous")),this.prevButton.addListener("mouseenter",()=>i.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>i.onMouseHover(void 0)),this.nextButton??(this.nextButton=v.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-next-page`,textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",M=>this.onPageButton(e,M,"next")),this.nextButton.addListener("mouseenter",()=>i.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>i.onMouseHover(void 0))):((o=this.nextButton)==null||o.destroy(),(r=this.prevButton)==null||r.destroy(),this.nextButton=void 0,this.prevButton=void 0))}const{prev:s,next:n}=i.computeCSSBounds();(a=this.prevButton)==null||a.setBounds(s),(c=this.nextButton)==null||c.setBounds(n),(h=this.prevButton)==null||h.setEnabled(i.currentPage!==0),(d=this.nextButton)==null||d.setEnabled(i.currentPage!==i.totalPages-1),(p=this.nextButton)==null||p.setCursor(i.getCursor("next")),(f=this.prevButton)==null||f.setCursor(i.getCursor("previous"))}onPageButton(e,t,i){e.pagination.onClick(t.sourceEvent,i),this.updatePaginationProxyButtons(e,!1)}onDataUpdate(e,t){this.dirty=e.length!==t.length||e.some((i,s,n)=>{const[o,r]=[t[s],e[s]];return o.id!==r.id})}onLocaleChanged(e,t,i){const s=t.length;t.each(({proxyButton:n},o,r)=>{const a=n==null?void 0:n.getElement();if(a!=null){const c=i.getItemLabel(o);a.textContent=this.getItemAriaText(e,c,r,s)}}),this.itemDescription.textContent=this.getItemAriaDescription(e)}onPageChange(e){this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e,!1)}getItemAriaText(e,t,i,s){return i>=0&&t?(i++,e.t("ariaLabelLegendItem",{label:t,index:i,count:s})):e.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(e){return e.t("ariaDescriptionLegendItem")}};function IL(e,t,i,s){const n={defaultPrevented:!1,apiEvent:{type:e,itemId:t,seriesId:i,event:s,preventDefault:()=>n.defaultPrevented=!0}};return n}var Qn=class extends Pc(Ne){constructor(){super({name:"markerLabelGroup"}),this.symbolsGroup=this.appendChild(new Ne({name:"legend-markerLabel-symbols"})),this.label=this.appendChild(new Gi),this.enabled=!0,this.pageIndex=NaN,this.spacing=0,this.length=0,this.isCustomMarker=!1,this.marker=this.symbolsGroup.appendChild(new Bi({zIndex:1})),this.line=this.symbolsGroup.appendChild(new wn({zIndex:0}));const{label:e,line:t,symbolsGroup:i}=this;t.visible=!1,i.renderToOffscreenCanvas=!0,i.optimizeForInfrequentRedraws=!0,e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=1}destroy(){var e;super.destroy(),(e=this.proxyButton)==null||e.destroy()}setEnabled(e){this.enabled=e,this.refreshVisibilities()}refreshVisibilities(){const e=this.enabled?1:.5;this.label.opacity=e,this.opacity=e}layout(){const{marker:e,line:t,length:i,isCustomMarker:s}=this;let n=0,o=0;if(e.visible){const{size:r}=e,a=Bi.anchor(e.shape);n=(a.x-.5)*r+i/2,o=(a.y-.5)*r,s?(e.x=0,e.y=0,e.translationX=n,e.translationY=o):(e.x=n,e.y=o,e.translationX=0,e.translationY=0)}t.visible&&(t.x1=0,t.x2=i,t.y1=0,t.y2=0)}preRender(e){const t=super.preRender(e);return this.layout(),t}layoutLabel(){const{length:e,spacing:t}=this;this.label.x=e+t}computeBBox(){return this.layout(),super.computeBBox()}};Qn.className="MarkerLabel";D([Qi("label")],Qn.prototype,"text",2);D([Qi("label")],Qn.prototype,"fontStyle",2);D([Qi("label")],Qn.prototype,"fontWeight",2);D([Qi("label")],Qn.prototype,"fontSize",2);D([Qi("label")],Qn.prototype,"fontFamily",2);D([Qi("label","fill")],Qn.prototype,"color",2);D([hl(e=>e.layoutLabel())],Qn.prototype,"spacing",2);D([hl(e=>e.layoutLabel())],Qn.prototype,"length",2);D([De()],Qn.prototype,"isCustomMarker",2);var pl=class extends Be{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};D([E()],pl.prototype,"maxLength",2);D([E()],pl.prototype,"color",2);D([E()],pl.prototype,"fontStyle",2);D([E()],pl.prototype,"fontWeight",2);D([E()],pl.prototype,"fontSize",2);D([E()],pl.prototype,"fontFamily",2);D([E()],pl.prototype,"formatter",2);var kh=class extends Be{constructor(){super(...arguments),this.shape=void 0,this.size=15,this.padding=8}};D([E()],kh.prototype,"shape",2);D([E()],kh.prototype,"size",2);D([E()],kh.prototype,"padding",2);D([E()],kh.prototype,"strokeWidth",2);D([E()],kh.prototype,"enabled",2);var H0=class extends Be{};D([E()],H0.prototype,"strokeWidth",2);D([E()],H0.prototype,"length",2);var fl=class extends Be{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new kh,this.label=new pl,this.line=new H0}};D([E()],fl.prototype,"maxWidth",2);D([E()],fl.prototype,"paddingX",2);D([E()],fl.prototype,"paddingY",2);D([E()],fl.prototype,"showSeriesStroke",2);D([E()],fl.prototype,"marker",2);D([E()],fl.prototype,"label",2);D([E()],fl.prototype,"line",2);var V0=class extends Be{};D([E()],V0.prototype,"legendItemClick",2);D([E()],V0.prototype,"legendItemDoubleClick",2);var tg="legend-visibility",aw="legend-other-series",CJ={bounds:"item",gradient:"linear",colorStops:[{color:"black"}],rotation:0,reverse:!1},SJ={pattern:"forward-slanted-lines",width:8,height:8,padding:1,fill:"black",fillOpacity:1,backgroundFill:"white",backgroundFillOpacity:1,stroke:"black",strokeOpacity:1,strokeWidth:0,rotation:0},en=class extends Be{constructor(e){super(),this.ctx=e,this.id=vn(this),this.group=new Ps({name:"legend",zIndex:14}),this.itemSelection=wi.select(this.group,Qn),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.toggleSeries=!0,this.item=new fl,this.listeners=new V0,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.pagination=new zc(t=>e.updateService.update(t),t=>this.updatePageNumber(t)),this.pagination.attachPagination(this.group),this.destroyFns.push(e.contextMenuRegistry.registerDefaultAction({id:tg,type:"legend",label:"contextMenuToggleSeriesVisibility",action:t=>this.contextToggleVisibility(t)}),e.contextMenuRegistry.registerDefaultAction({id:aw,type:"legend",label:"contextMenuToggleOtherSeries",action:t=>this.contextToggleOtherSeries(t)}),e.legendManager.addListener("legend-change",this.onLegendDataChange.bind(this))),this.destroyFns.push(e.layoutManager.registerElement(1,t=>this.positionLegend(t)),e.localeManager.addListener("locale-changed",()=>this.onLocaleChanged()),()=>this.group.remove()),this.domProxy=new yJ(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(e.legendManager)}set data(e){Qo(e,this._data)||(this.domProxy.onDataUpdate(this._data,e),this._data=e,this.updateGroupVisibility())}get data(){return this._data}onLegendDataChange({legendData:e=[]}){this.enabled&&(this.data=e.filter(t=>!t.hideInLegend))}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach(e=>e()),this.itemSelection.clear(),this.domProxy.destroy()}getOrientation(){return this.orientation??"horizontal"}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.appendChild(this.group)}getItemLabel(e){const{ctx:{callbackCache:t}}=this,{formatter:i}=this.item.label;if(i){const s=e.datum;return t.call(this,i,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId,...s&&{datum:s}})}return e.label.text}calcLayout(e,t){const{paddingX:i,paddingY:s,label:n,maxWidth:o,label:{maxLength:r=1/0,fontStyle:a,fontWeight:c,fontSize:h,fontFamily:d}}=this.item,p=[...this.data];this.reverseOrder&&p.reverse(),this.itemSelection.update(p);const f=[],v=Ht.toFontString(n),b=o??e*.8,{markerWidth:w,anyLineEnabled:S}=this.calculateMarkerWidth();if(this.itemSelection.each((B,V)=>{B.fontStyle=a,B.fontWeight=c,B.fontSize=h,B.fontFamily=d;const U=this.updateMarkerLabel(B,V,w,S),se=V.itemId??V.id,Se=(this.getItemLabel(V)??"<unknown>").replace(/\r?\n/g," ");B.text=this.truncate(Se,r,b,U,v,se),f.push(B.getBBox())}),e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return{};const M=this.size,R=this.oldSize;M[0]=e,M[1]=t,(M[0]!==R[0]||M[1]!==R[1])&&(R[0]=M[0],R[1]=M[1]);const{pages:A,maxPageHeight:T,maxPageWidth:F}=this.updatePagination(f,e,t),P=this.pages;this.pages=A,this.maxPageSize=[F-i,T-s];const N=this.pagination.currentPage,O=this.pages[N];return this.pages.length<1||!O?(this.visible=!1,{oldPages:P}):(this.visible=!0,this.updatePositions(N),this.update(),{oldPages:P})}isCustomMarker(e,t){return e&&t!==void 0&&typeof t!="string"}calcSymbolsEnabled(e){const{showSeriesStroke:t,marker:i}=this.item,s=!!i.enabled||!t||(e.marker.enabled??!0),n=!!(e.line&&t),o=this.isCustomMarker(s,e.marker.shape);return{markerEnabled:s,lineEnabled:n,isCustomMarker:o}}calcSymbolsLengths(e,t,i){const{marker:s,line:n}=this.item;let o;const{shape:r}=e.marker;if(this.isCustomMarker(t,r)){const h=new Bi;h.shape=r,h.updatePath();const d=h.getBBox();o=Math.max(d.width,d.height)}const a=t?s.size:0,c=i?n.length??25:0;return{markerLength:a,lineLength:c,customMarkerSize:o}}calculateMarkerWidth(){let e=0,t=!1;return this.itemSelection.each((i,s)=>{const{symbol:n}=s,{lineEnabled:o,markerEnabled:r}=this.calcSymbolsEnabled(n),{markerLength:a,lineLength:c,customMarkerSize:h=-1/0}=this.calcSymbolsLengths(n,r,o);e=Math.max(e,c,h,a),t||(t=o)}),{markerWidth:e,anyLineEnabled:t}}updateMarkerLabel(e,t,i,s){const{marker:n,paddingX:o}=this.item,{symbol:r}=t;let a=o;const{markerEnabled:c,isCustomMarker:h}=this.calcSymbolsEnabled(r),d=n.padding;(c||s)&&(a+=d+i);const{marker:p,line:f}=e;return p.visible=c,p.visible&&(p.shape=n.shape??r.marker.shape??"square",p.size=n.size,Ec(p,this.getMarkerStyles(r))),f.visible=s,f.visible&&Ec(f,this.getLineStyles(r)),e.length=i,e.spacing=d,e.isCustomMarker=h,a}truncate(e,t,i,s,n,o){let r=!1;e.length>t&&(e=e.substring(0,t),r=!0);const a=qr.getMeasurer({font:n}),c=XM.truncateLine(e,a,i-s,r);return c.endsWith(Ht.EllipsisChar)?this.truncatedItems.add(o):this.truncatedItems.delete(o),c}updatePagination(e,t,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:o,maxPageHeight:r,maxPageWidth:a,paginationBBox:c,paginationVertical:h}=this.calculatePagination(e,t,i),d=o.findIndex(R=>R.endIndex>=n);this.pagination.currentPage=Ge(0,d,o.length-1);const{paddingX:p,paddingY:f}=this.item,v=8,y=a-p,b=r-f;let w=0,S=-c.y-this.item.marker.size/2;h?S+=b+v:(w+=-c.x+y+v,S+=(b-c.height)/2),this.pagination.translationX=w,this.pagination.translationY=S,this.pagination.update(),this.pagination.updateMarkers();let M=0;return this.itemSelection.each((R,A,T)=>{var F;T>(((F=o[M])==null?void 0:F.endIndex)??1/0)&&M++,R.pageIndex=M}),{maxPageHeight:r,maxPageWidth:a,pages:o}}calculatePagination(e,t,i){const{paddingX:s,paddingY:n}=this.item,o=this.getOrientation(),r=["left","right"].includes(this.position);let a=this.pagination.getBBox(),c=new Me(0,0,0,0),h=[],d=0,p=0,f=0;const v=b=>b.width===a.width&&b.height===a.height,y=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(f++>10){de.warn("unable to find stable legend layout.");break}a=c;const b=t-(r?0:a.width),w=i-(r?a.height:0),S=cJ({orientation:o,bboxes:e,maxHeight:w,maxWidth:b,itemPaddingY:n,itemPaddingX:s,forceResult:y});h=(S==null?void 0:S.pages)??[],d=(S==null?void 0:S.maxPageWidth)??0,p=(S==null?void 0:S.maxPageHeight)??0;const M=h.length;if(this.pagination.visible=M>1,this.pagination.totalPages=M,this.pagination.update(),this.pagination.updateMarkers(),c=this.pagination.getBBox(),!this.pagination.visible)break}while(!v(c));return{maxPageWidth:d,maxPageHeight:p,pages:h,paginationBBox:c,paginationVertical:r}}updatePositions(e=0){const{item:{paddingY:t},itemSelection:i,pages:s}=this;if(s.length<1||!s[e])return;const{columns:n,startIndex:o,endIndex:r}=s[e];let a=0,c=0;const h=n.length,d=n[0].indices.length,p=this.getOrientation()==="horizontal",f=n[0].bboxes[0].height+t,v=[];i.each((y,b,w)=>{if(w<o||w>r){y.visible=!1;return}const S=w-o;let M,R;p?(M=S%h,R=Math.floor(S/h)):(M=Math.floor(S/d),R=S%d),y.visible=!0;const A=n[M];A&&(c=Math.floor(f*R),a=Math.floor(v[R]??0),v[R]=(v[R]??0)+A.columnWidth,y.translationX=a,y.translationY=c)})}updatePageNumber(e){const{itemSelection:t,group:i,pagination:s,pages:n,toggleSeries:o}=this,{startIndex:r,endIndex:a}=n[e];r===0?this.paginationTrackingIndex=0:e===n.length-1?this.paginationTrackingIndex=a:this.paginationTrackingIndex=Math.floor((r+a)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.domProxy.onPageChange({itemSelection:t,group:i,pagination:s,interactive:o}),this.ctx.updateService.update(6)}update(){const{label:{color:e}}=this.item;this.itemSelection.each((t,i)=>{t.setEnabled(i.enabled),t.color=e}),this.updateContextMenu()}updateContextMenu(){const{toggleSeries:e,ctx:{contextMenuRegistry:t}}=this;e?(t.hideAction(tg),t.hideAction(aw)):(t.showAction(tg),t.showAction(aw))}getLineStyles(e){const{stroke:t,strokeOpacity:i=1,strokeWidth:s,lineDash:n}=e.line??{},o=Math.min(2,s??1);return{stroke:t,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??o,lineDash:n}}getMarkerStyles({marker:e}){const{fill:t,stroke:i,strokeOpacity:s=1,fillOpacity:n=1,strokeWidth:o,lineDash:r,lineDashOffset:a}=e,c=Math.min(2,o??1);return Dc(t)&&(t.width=8,t.height=8,t.padding=1,t.strokeWidth=Math.min(2,t.strokeWidth??2)),Yo({fill:t,stroke:i,strokeOpacity:s,fillOpacity:n,strokeWidth:this.item.marker.strokeWidth??c,lineDash:r,lineDashOffset:a},CJ,SJ)}computePagedBBox(){const e=Ne.computeChildrenBBox(this.group.children());if(this.pages.length>1){const[t,i]=this.maxPageSize;e.height=Math.max(i,e.height),e.width=Math.max(t,e.width)}return e}findNode(e){const{datum:t,proxyButton:i}=this.itemSelection.select(s=>{var n;return((n=s.datum)==null?void 0:n.itemId)===e.itemId})[0]??{};if(t===void 0||i===void 0)throw new Error(`AG Charts - Missing required properties { datum: ${t}, proxyButton: ${JSON.stringify(i)} }`);return{datum:t,proxyButton:i}}contextToggleVisibility(e){const{datum:t,proxyButton:i}=this.findNode(e);this.doClick(e.event,t,i)}contextToggleOtherSeries(e){this.doDoubleClick(e.event,this.findNode(e).datum)}onContextClick(e,t){var a;const i=t.datum;this.preventHidingAll&&((a=this.contextMenuDatum)!=null&&a.enabled)&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.disableAction(tg):this.ctx.contextMenuRegistry.enableAction(tg);const{offsetX:s,offsetY:n}=e,{x:o,y:r}=ri.toCanvasPoint(t,s,n);this.ctx.contextMenuRegistry.dispatchContext("legend",{sourceEvent:e,canvasX:o,canvasY:r},{legendItem:i})}onClick(e,t,i){this.doClick(e,t,i)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(e=>e.getLegendData("category")).filter(e=>e.enabled).length}doClick(e,t,i){const{listeners:{legendItemClick:s},ctx:{chartService:n,highlightManager:o},preventHidingAll:r,toggleSeries:a}=this;if(!t)return!1;const{legendType:c,seriesId:h,itemId:d,enabled:p}=t,f=n.series.find(b=>b.id===h);if(!f)return!1;let v=p;const y=IL("click",d,f.id,e);return s==null||s(y.apiEvent),y.defaultPrevented||(a&&(v=!p,r&&!v&&this.getVisibleItemCount()<2&&(v=!0),i.setChecked(v),this.ctx.chartEventManager.legendItemClick(c,f,d,v,t.legendItemName)),v?o.updateHighlight(this.id,{series:f,itemId:d,datum:void 0,datumIndex:void 0}):o.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:t.skipAnimations??!1})),!0}onDoubleClick(e,t){this.doDoubleClick(e,t)&&e.preventDefault()}doDoubleClick(e,t){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},toggleSeries:n}=this;if(s.mode==="integrated"||!t)return!1;const{legendType:o,id:r,itemId:a,seriesId:c}=t,h=s.series.find(p=>p.id===r);if(!h)return!1;const d=IL("dblclick",a,h.id,e);if(i==null||i(d.apiEvent),d.defaultPrevented)return!0;if(n){const p=s.series.flatMap(b=>b.getLegendData("category"));let f=0;const v=new Set;for(const b of p)b.enabled&&(f+=1,b.legendItemName!=null&&v.add(b.legendItemName));v.size>0&&(f=v.size);const y=p.find(b=>b.itemId===a&&b.seriesId===c);this.ctx.chartEventManager.legendItemDoubleClick(o,h,a,(y==null?void 0:y.enabled)??!1,f,y==null?void 0:y.legendItemName)}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(e,t){let i;return e instanceof FocusEvent?i=ri.toCanvas(t).computeCenter():(e.preventDefault(),i=ri.toCanvasPoint(t,e.offsetX,e.offsetY)),{canvasX:i.x,canvasY:i.y,showArrow:!1}}onHover(e,t){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(t.pageIndex);const i=t.datum,s=i?this.ctx.chartService.series.find(n=>n.id===(i==null?void 0:i.id)):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){const n=this.toTooltipMeta(e,t);this.ctx.tooltipManager.updateTooltip(this.id,n,[{type:"structured",title:this.getItemLabel(i)}])}else this.ctx.tooltipManager.removeTooltip(this.id);i!=null&&i.enabled&&s?this.updateHighlight({series:s,itemId:i==null?void 0:i.itemId,datum:void 0,datumIndex:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(e){this.ctx.interactionManager.isState(32)?this.ctx.highlightManager.updateHighlight(this.id,e):this.ctx.interactionManager.isState(2)&&(this.pendingHighlightDatum=e,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(e){const t=this.positionLegendScene(e);this.positionLegendDOM(t)}positionLegendScene(e){if(!this.enabled||!this.data.length)return;const{layoutBox:t}=e,{x:i,y:s,width:n,height:o}=t,[r,a]=this.calculateLegendDimensions(t),{oldPages:c}=this.calcLayout(r,a),h=this.computePagedBBox(),d=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return o-h.height;case"right":default:return n-h.width}};if(this.visible){const p=this.spacing;let f,v;switch(this.position){case"top":case"bottom":f=(n-h.width)/2,v=d(),t.shrink(h.height+p,this.position);break;case"left":case"right":default:f=d(),v=(o-h.height)/2,t.shrink(h.width+p,this.position)}this.group.translationX=Math.floor(i+f-h.x),this.group.translationY=Math.floor(s+v-h.y)}return c}positionLegendDOM(e){const{ctx:t,itemSelection:i,pagination:s,pages:n,toggleSeries:o,group:r,listeners:{legendItemClick:a,legendItemDoubleClick:c}}=this,h=this.visible&&this.enabled,d=o||c!=null||a!=null;this.domProxy.update({visible:h,interactive:d,ctx:t,itemSelection:i,group:r,pagination:s,oldPages:e,newPages:n,datumReader:this,itemListener:this})}calculateLegendDimensions(e){const{width:t,height:i}=e,s=t/i,n=.5,o=.2,r=.25;let a,c;switch(this.position){case"top":case"bottom":{const h=s<1?Math.min(n,o*(1/s)):o;a=this.maxWidth?Math.min(this.maxWidth,t):t,c=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*h);break}case"left":case"right":default:{const h=s>1?Math.min(n,r*s):r;a=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*h),c=this.maxHeight?Math.min(this.maxHeight,i):i}}return[a,c]}};en.className="Legend";D([E()],en.prototype,"toggleSeries",2);D([E()],en.prototype,"pagination",2);D([E()],en.prototype,"item",2);D([E()],en.prototype,"listeners",2);D([hl((e,t,i)=>{if(e.updateGroupVisibility(),t===i)return;const{ctx:{legendManager:s,stateManager:n}}=e;i===!1&&t===!0&&n.restoreState(s)}),E()],en.prototype,"enabled",2);D([E()],en.prototype,"position",2);D([E()],en.prototype,"maxWidth",2);D([E()],en.prototype,"maxHeight",2);D([E()],en.prototype,"reverseOrder",2);D([E(bt(["horizontal","vertical"],"an orientation"))],en.prototype,"orientation",2);D([E()],en.prototype,"preventHidingAll",2);D([E()],en.prototype,"spacing",2);var bJ={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new en(e),packageType:"community",removable:"standalone-only"},F1={};xo(F1,{CARTESIAN_AXIS_TYPE:()=>N1,CARTESIAN_POSITION:()=>k1,FONT_SIZE:()=>P1,FONT_SIZE_RATIO:()=>_0,POLAR_AXIS_SHAPE:()=>G1,POLAR_AXIS_TYPE:()=>O1});var P1=(e=>(e[e.SMALLEST=8]="SMALLEST",e[e.SMALLER=10]="SMALLER",e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=14]="LARGE",e[e.LARGEST=17]="LARGEST",e))(P1||{}),_0=(e=>(e[e.SMALLEST=.6666666666666666]="SMALLEST",e[e.SMALLER=.8333333333333334]="SMALLER",e[e.SMALL=1]="SMALL",e[e.MEDIUM=1.0833333333333333]="MEDIUM",e[e.LARGE=1.1666666666666667]="LARGE",e[e.LARGEST=1.4166666666666667]="LARGEST",e))(_0||{}),k1=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e))(k1||{}),N1=(e=>(e.CATEGORY="category",e.GROUPED_CATEGORY="grouped-category",e.ORDINAL_TIME="ordinal-time",e.NUMBER="number",e.TIME="time",e.LOG="log",e))(N1||{}),O1=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(O1||{}),G1=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(G1||{}),W0={};xo(W0,{DEFAULT_ANNOTATION_HANDLE_FILL:()=>Fp,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>Np,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>Op,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Kg,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>$g,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Pp,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>kp,DEFAULT_CAPTION_ALIGNMENT:()=>ja,DEFAULT_CAPTION_LAYOUT_STYLE:()=>Wa,DEFAULT_FIBONACCI_STROKES:()=>Yg,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>Ii,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>si,DEFAULT_GRIDLINE_ENABLED:()=>Vo,DEFAULT_POLAR_SERIES_STROKE:()=>Oy,DEFAULT_SEPARATION_LINES_COLOUR:()=>Ep,DEFAULT_SHADOW_COLOUR:()=>ml,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>Gy,DEFAULT_TEXTBOX_COLOR:()=>zp,DEFAULT_TEXTBOX_FILL:()=>Gp,DEFAULT_TEXTBOX_STROKE:()=>Bp,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Lp,DEFAULT_TOOLBAR_POSITION:()=>Hp,IS_COMMUNITY:()=>j0,IS_DARK_THEME:()=>Zu,IS_ENTERPRISE:()=>U0,PALETTE_ALT_DOWN_FILL:()=>Z0,PALETTE_ALT_DOWN_STROKE:()=>K0,PALETTE_ALT_NEUTRAL_FILL:()=>q0,PALETTE_ALT_NEUTRAL_STROKE:()=>Ny,PALETTE_ALT_UP_FILL:()=>$0,PALETTE_ALT_UP_STROKE:()=>Y0,PALETTE_DOWN_FILL:()=>Ip,PALETTE_DOWN_STROKE:()=>Py,PALETTE_NEUTRAL_FILL:()=>ky,PALETTE_NEUTRAL_STROKE:()=>uh,PALETTE_UP_FILL:()=>Tp,PALETTE_UP_STROKE:()=>Fy});var Zu=Symbol("is-dark-theme"),j0=Symbol("is-community"),U0=Symbol("is-enterprise"),Ep=Symbol("default-separation-lines-colour"),ml=Symbol("default-shadow-colour"),Wa=Symbol("default-caption-layout-style"),ja=Symbol("default-caption-alignment"),Fy=Symbol("palette-up-stroke"),Py=Symbol("palette-down-stroke"),Tp=Symbol("palette-up-fill"),Ip=Symbol("palette-down-fill"),uh=Symbol("palette-neutral-stroke"),ky=Symbol("palette-neutral-fill"),Y0=Symbol("palette-alt-up-stroke"),K0=Symbol("palette-alt-down-stroke"),$0=Symbol("palette-alt-up-fill"),Z0=Symbol("palette-alt-down-fill"),q0=Symbol("palette-gray-fill"),Ny=Symbol("palette-gray-stroke"),Oy=Symbol("default-polar-series-stroke"),Gy=Symbol("default-sparkline-crosshair-stroke"),si=Symbol("default-financial-charts-annotation-stroke"),Yg=Symbol("default-hierarchy-strokes"),Lp=Symbol("default-text-annotation-color"),Ii=Symbol("default-financial-charts-annotation-background-fill"),Fp=Symbol("default-annotation-handle-fill"),Pp=Symbol("default-annotation-statistics-fill"),kp=Symbol("default-annotation-statistics-stroke"),Np=Symbol("default-annotation-statistics-color"),Op=Symbol("default-annotation-statistics-divider-stroke"),Kg=Symbol("default-annotation-statistics-fill"),$g=Symbol("default-annotation-statistics-stroke"),Gp=Symbol("default-textbox-fill"),Bp=Symbol("default-textbox-stroke"),zp=Symbol("default-textbox-color"),Hp=Symbol("default-toolbar-position"),Vo=Symbol("default-gridline-enabled"),B1=[{type:"number",position:{$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},"bottom","left"]}},{type:"category",position:{$if:[{$eq:[{$path:["/direction",void 0]},"horizontal"]},"left","bottom"]}}],wJ={$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]}]},{$palette:"fillFallback"},{$palette:"fill"}]},X0={$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]}]},{$palette:"fillsFallback"},{$palette:"fills"}]},By={$if:[{$isGradient:[{$palette:"fill"}]},{$palette:"fillFallback"},{$if:[{$isPattern:[{$palette:"fill"}]},{$path:["./stroke",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},xJ={$if:[{$or:[{$isGradient:[{$palette:"fill"}]},{$isPattern:[{$palette:"fill"}]}]},[{$palette:"fillFallback"},{$palette:"fillFallback"}],{$palette:"range2"}]},nl={type:"pattern",pattern:"forward-slanted-lines",width:10,height:10,padding:2,fill:{$if:[{$isGradient:[{$palette:"fill"}]},{$palette:"fillFallback"},{$if:[{$isPattern:[{$palette:"fill"}]},{$path:["./fill",{$palette:"fillFallback"},{$palette:"fill"}]},{$palette:"fill"}]}]},fillOpacity:1,stroke:By,strokeOpacity:1,strokeWidth:4,backgroundFill:"transparent",backgroundFillOpacity:1,rotation:0};function Mn(e){return qk(e,t=>{const i=gt.fromString(t);return[gt.darken(i,.15).toString(),t,gt.lighten(i,.15).toString()]})}function Pv(e,t,i,s,n){const{addPhaseFn:o,updatePhaseFn:r,removePhaseFn:a}=n,c=(h,d,p)=>{i.animate({id:`${e}_${t}_${d.id}_${h}`,groupId:e,from:0,to:1,ease:Hg,collapsable:!1,onUpdate(f,v){v&&h!=="removed"||(d.path.clear(!0),p(f,d),d.checkPathDirty())},onStop(){h==="added"&&(d.path.clear(!0),p(1,d),d.checkPathDirty())},phase:ho[h]})};for(const h of s)i.isSkipped()||(c("removed",h,a),c("updated",h,r)),c("added",h,o)}function ct({id:e},t,i,...s){Qr(e,t,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function Ua({id:e},t,i,...s){Qr(e,t,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function ra(e){return{opacity:1}}var Ro=class extends B0{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};D([E(),De()],Ro.prototype,"enabled",2);D([E(),De()],Ro.prototype,"color",2);D([E(),De()],Ro.prototype,"xOffset",2);D([E(),De()],Ro.prototype,"yOffset",2);D([E(),De()],Ro.prototype,"blur",2);var z1=class extends Be{constructor(){super(...arguments),this.enabled=!1}};D([E()],z1.prototype,"enabled",2);var Ds=class extends Be{constructor(){super(...arguments),this.interaction=new z1,this.position=new ta,this.range=void 0,this.class=void 0}formatTooltip(e,t,i){const s=this.renderer==null?void 0:a0(e,this.renderer,[i]);return typeof s=="string"?{type:"raw",rawHtmlString:s}:s!=null?{type:"structured",...t,...s}:{type:"structured",...t}}};D([E()],Ds.prototype,"enabled",2);D([E()],Ds.prototype,"showArrow",2);D([E()],Ds.prototype,"renderer",2);D([E()],Ds.prototype,"interaction",2);D([E()],Ds.prototype,"position",2);D([E()],Ds.prototype,"range",2);D([E()],Ds.prototype,"class",2);var MJ=class{constructor(e,t,i){this.root=new AJ(e,t,i)}clear(e){this.root.clear(e)}addValue(e,t){const i={hitTester:e,value:t,distanceSquared:(s,n)=>e.distanceSquared(s,n)};this.root.addElem(i)}find(e,t){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,i),i.best}},DJ=class{constructor(e,t,i,s){this.nw=e,this.ne=t,this.sw=i,this.se=s}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,i){this.nw.find(e,t,i),this.ne.find(e,t,i),this.sw.find(e,t,i),this.se.find(e,t,i)}},RJ=class{constructor(e,t,i){this.capacity=e,this.maxdepth=t,this.boundary=i??Me.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,i){this.findCondition(e,t,i)&&(this.subdivisions===void 0?this.findAction(e,t,i):this.subdivisions.find(e,t,i))}subdivide(e){this.subdivisions=this.makeSubdivisions();for(const t of this.elems)this.subdivisions.addElem(t);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){const{x:e,y:t,width:i,height:s}=this.boundary,{capacity:n}=this,o=this.maxdepth-1,r=i/2,a=s/2,c=new Me(e,t,r,a),h=new Me(e+r,t,r,a),d=new Me(e,t+a,r,a),p=new Me(e+r,t+a,r,a);return new DJ(this.child(n,o,c),this.child(n,o,h),this.child(n,o,d),this.child(n,o,p))}},AJ=class H1 extends RJ{addCondition(t){const{x:i,y:s}=t.hitTester.midPoint;return this.boundary.containsPoint(i,s)}findCondition(t,i,s){const{best:n}=s;return n.distanceSquared!==0&&this.boundary.distanceSquared(t,i)<n.distanceSquared}findAction(t,i,s){const n=iy(t,i,this.elems,s.best.distanceSquared);n.nearest!==void 0&&n.distanceSquared<s.best.distanceSquared&&(s.best=n)}child(t,i,s){return new H1(t,i,s)}},Q0=class extends Dy{constructor({clipFocusBox:e,categoryKey:t,...i}){super(i),this.categoryKey=t,this.clipFocusBox=e??!0}getScaleInformation({xScale:e,yScale:t}){const i=Ct.is(e),s=Ct.is(t);return{isContinuousX:i,isContinuousY:s,xScaleType:e==null?void 0:e.type,yScaleType:t==null?void 0:t.type}}getModulePropertyDefinitions(){var i,s;const e=(i=this.axes.x)==null?void 0:i.scale,t=(s=this.axes.y)==null?void 0:s.scale;return this.moduleMap.mapModules(n=>n.getPropertyDefinitions(this.getScaleInformation({xScale:e,yScale:t}))).flat()}async requestDataModel(e,t,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=await e.request(this.id,t??[],i);return this.dataModel=s,this.processedData=n,this.dispatch("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}}isProcessedDataAnimatable(){var s,n;const e=(n=(s=this.processedData)==null?void 0:s.reduced)==null?void 0:n.animationValidation;if(!e)return!0;const{orderedKeys:t,uniqueKeys:i}=e;return t&&i}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){const t=this.getNodeData();if(t===void 0||t.length===0)return;const i=this.computeFocusDatumIndex(e,t);if(i===void 0)return;const{clipFocusBox:s}=this,n=t[i],o={...e,datumIndex:i},r=this.computeFocusBounds(o);if(r!==void 0)return{bounds:r,clipFocusBox:s,datum:n,datumIndex:i}}isDatumEnabled(e,t){const{missing:i=!1,enabled:s=!0,focusable:n=!0}=e[t];return!i&&s&&n}computeFocusDatumIndex(e,t){const i=(r,a)=>{for(;r>=0&&!this.isDatumEnabled(t,r);)r+=a;return r===-1?void 0:r},s=(r,a)=>{for(;r<t.length&&!this.isDatumEnabled(t,r);)r+=a;return r===t.length?void 0:r};let n;const o=Ge(0,e.datumIndex,t.length-1);return e.datumIndexDelta<0?n=i(o,e.datumIndexDelta):e.datumIndexDelta>0?n=s(o,e.datumIndexDelta):n=s(o,1)??i(o,-1),n===void 0?e.datumIndexDelta===0?void 0:e.datumIndex-e.datumIndexDelta:n}keysOrValues(e){var i,s,n;const t=this.dataModel.resolveProcessedDataIndexById(this,e);return((s=(i=this.processedData)==null?void 0:i.keys[t])==null?void 0:s.get(this.id))??((n=this.processedData)==null?void 0:n.columns[t])??[]}getCategoryKey(){return this.categoryKey}getCategoryValue(e){var o,r;const{processedData:t,dataModel:i}=this,s=this.getCategoryKey();return!t||!i||!s||(((r=(o=t.invalidData)==null?void 0:o.get(this.id))==null?void 0:r[e])??!1)?void 0:this.keysOrValues(s)[e]}datumIndexForCategoryValue(e){var r,a;const{processedData:t,dataModel:i}=this,s=this.getCategoryKey();if(!t||!i||!s)return;e=e.valueOf();const n=(r=t.invalidData)==null?void 0:r.get(this.id),o=this.keysOrValues(s);for(let c=0;c<o.length;c+=1){if((n==null?void 0:n[c])===!0)continue;const h=(a=o[c])==null?void 0:a.valueOf();if(Qo(e,h))return c}}},Hc={x:["xKey"],y:["yKey"]},Vc={x:["xName"],y:["yName"]},J0=class extends Mp{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},aa=class extends xn{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}};D([E()],aa.prototype,"legendItemName",2);D([E()],aa.prototype,"pickOutsideVisibleMinorAxis",2);var kv=100,vl=class extends Q0{constructor({pathsPerSeries:e=["path"],hasMarkers:t=!1,hasHighlightedLabels:i=!1,pathsZIndexSubOrderOffset:s=[],datumSelectionGarbageCollection:n=!0,markerSelectionGarbageCollection:o=!0,animationAlwaysUpdateSelections:r=!1,animationResetFns:a,directionKeys:c,directionNames:h,...d}){if(super({directionKeys:c,directionNames:h,canHaveAxes:!0,...d}),this.NodeEvent=J0,this.dataNodeGroup=this.contentGroup.appendChild(new Ne({name:`${this.id}-series-dataNodes`,zIndex:0})),this.markerGroup=this.contentGroup.appendChild(new Ne({name:`${this.id}-series-markers`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new Ps({name:`${this.id}-series-labels`})),this.labelSelection=wi.select(this.labelGroup,Gi),this.highlightSelection=wi.select(this.highlightNode,()=>this.opts.hasMarkers?new Bi:this.nodeFactory()),this.highlightLabelSelection=wi.select(this.highlightLabel,Gi),this.annotationSelections=new Set,this.debug=at.create(),!c||!h)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:e,hasMarkers:t,hasHighlightedLabels:i,pathsZIndexSubOrderOffset:s,directionKeys:c,directionNames:h,animationResetFns:a,animationAlwaysUpdateSelections:r,datumSelectionGarbageCollection:n,markerSelectionGarbageCollection:o},this.paths=e.map(p=>new zs({name:`${this.id}-${p}`})),this.datumSelection=wi.select(this.dataNodeGroup,()=>this.nodeFactory(),n),this.markerSelection=wi.select(this.markerGroup,Bi,o),this.animationState=new wp("empty",{empty:{update:{target:"ready",action:p=>this.animateEmptyUpdateReady(p)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:p=>this.animateReadyHighlight(p),highlightMarkers:p=>this.animateReadyHighlightMarkers(p),resize:p=>this.animateReadyResize(p),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:p=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(p):this.animateWaitingUpdateReady(p)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:p=>this.resetAllAnimation(p),reset:"empty"},clearing:{update:{target:"empty",action:p=>this.animateClearingUpdateEmpty(p)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){var e;return(e=this.contextNodeData)==null?void 0:e.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),this.attachPaths(this.paths,t,i)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.detachPaths(this.paths,t,i)}attachPaths(e,t,i){for(const s of e)this.contentGroup.appendChild(s)}detachPaths(e,t,i){for(const s of e)this.contentGroup.removeChild(s)}renderToOffscreenCanvas(){const e=this.getNodeData();return e!=null&&e.length>kv}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"?this.animationState.transition("skip"):e==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",e=>this.onLegendItemClick(e)),this.ctx.chartEventManager.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e)))}destroy(){super.destroy(),this._contextNodeData=void 0}update({seriesRect:e}){var c,h;const{visible:t,_contextNodeData:i}=this,n=((h=(c=this.ctx.highlightManager)==null?void 0:c.getActiveHighlight())==null?void 0:h.series)===this,o=this.checkResize(e),r=this.updateHighlightSelection(n);this.updateSelections(t),this.updateNodes(r,n,t);const a=this.getAnimationData(e,i);a&&(o&&this.animationState.transition("resize",a),this.animationState.transition("update",a))}updateSelections(e){var t;const i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!e&&i)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const s=this.isProcessedDataAnimatable();this._contextNodeData&&((t=this._contextNodeData).animationValid??(t.animationValid=s));const{dataModel:n,processedData:o}=this;n!==void 0&&o!==void 0&&this.dispatch("data-update",{dataModel:n,processedData:o})}this.updateSeriesSelections()}}updateSeriesSelections(e){const{datumSelection:t,labelSelection:i,markerSelection:s,paths:n}=this,o=this._contextNodeData;if(!o)return;const{nodeData:r,labelData:a,itemId:c}=o;this.updatePaths({seriesHighlighted:e,itemId:c,contextData:o,paths:n}),this.datumSelection=this.updateDatumSelection({nodeData:r,datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:i})??i,this.opts.hasMarkers&&(this.markerSelection=this.updateMarkerSelection({nodeData:r,markerSelection:s}))}getShapeFillBBox(){const{axes:e}=this,t=e.x,i=e.y,[s,n]=xi((t==null?void 0:t.range)??[0,1]),[o,r]=xi((i==null?void 0:i.range)??[0,1]),a=this.getSeriesDomain("x"),c=[t==null?void 0:t.scale.convert(a.at(0)),t==null?void 0:t.scale.convert(a.at(-1))],h=this.getSeriesDomain("y"),d=[i==null?void 0:i.scale.convert(h.at(0)),i==null?void 0:i.scale.convert(h.at(-1))],[p,f]=xi(c),[v,y]=xi(d);return{axis:new Me(s,o,n-s,r-o),series:new Me(p,v,f-p,y-v)}}updateNodes(e,t,i){const{highlightSelection:s,highlightLabelSelection:n,opts:{hasMarkers:o,hasHighlightedLabels:r}}=this,a=!this.ctx.animationManager.isSkipped(),c=this.visible&&this._contextNodeData!=null&&i;this.contentGroup.visible=a||c,this.highlightGroup.visible=(a||c)&&t;const h=this.getOpacity();o?(this.updateMarkerNodes({markerSelection:s,isHighlight:!0}),this.animationState.transition("highlightMarkers",s)):(this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("highlight",s)),r&&this.updateLabelNodes({labelSelection:n});const{dataNodeGroup:d,markerGroup:p,datumSelection:f,labelSelection:v,markerSelection:y,paths:b,labelGroup:w}=this,{itemId:S}=this.contextNodeData??{};d.opacity=h,d.visible=a||c,w.visible=c,o&&(p.opacity=h,p.visible=c),w&&(w.opacity=h),this.updatePathNodes({seriesHighlighted:t,itemId:S,paths:b,opacity:h,visible:c,animationEnabled:a}),d.visible&&(this.updateDatumNodes({datumSelection:f,highlightedItems:e,isHighlight:!1}),this.usesPlacedLabels||this.updateLabelNodes({labelSelection:v}),o&&this.updateMarkerNodes({markerSelection:y,isHighlight:!1}))}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum&&s.itemId===t.itemId);return i.length===0?void 0:i}getHighlightData(e,t){return t?[t]:void 0}updateHighlightSelection(e){var c;const{highlightSelection:t,highlightLabelSelection:i,_contextNodeData:s}=this;if(!s)return;const n=(c=this.ctx.highlightManager)==null?void 0:c.getActiveHighlight(),o=e&&(n!=null&&n.datum)?n:void 0;let r,a;if(o!=null){const h=this.isLabelEnabled(),{labelData:d,nodeData:p}=s;a=this.getHighlightData(p,o),r=h?this.getHighlightLabelData(d,o):void 0}return this.highlightSelection=this.updateHighlightSelectionItem({items:a,highlightSelection:t}),this.highlightLabelSelection=this.updateHighlightSelectionLabel({items:r,highlightLabelSelection:i}),a}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:e}of this.datumSelection)e.datum.missing!==!0&&(yield e)}getQuadTree(){if(this.quadtree===void 0){const{width:e,height:t}=this.ctx.scene.canvas,i=new Me(0,0,e,t);this.quadtree=new MJ(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);if(t.length!==0)return t;const{x:i,y:s}=e,{opts:{hasMarkers:n}}=this,{dataNodeGroup:o,markerGroup:r}=this;let a=o.pickNodes(i,s).filter(c=>c.datum.missing!==!0);if(a.length===0&&n&&(a=r==null?void 0:r.pickNodes(i,s).filter(c=>c.datum.missing!==!0)),a.length!==0)return a.map(h=>h.datum);for(const c of this.moduleMap.modules()){const{datum:h}=c.pickNodeExact(e)??{};if(h!=null&&(h==null?void 0:h.missing)!==!0)return[h]}return[]}pickNodeClosestDatum(e){var d;const{x:t,y:i}=e,{axes:s,_contextNodeData:n}=this;if(!n)return;const o=s.x,r=s.y,a={x:t,y:i};let c=1/0,h;for(const p of n.nodeData){const{point:{x:f=NaN,y:v=NaN}={}}=p;if(isNaN(f)||isNaN(v)||!((o==null?void 0:o.inRange(f))&&(r==null?void 0:r.inRange(v))))continue;const b=Math.max((a.x-f)**2+(a.y-v)**2,0);b<c&&(c=b,h=p)}for(const p of this.moduleMap.modules()){const f=p.pickNodeNearest(e);if(f!==void 0&&f.distanceSquared<c){c=f.distanceSquared,h=f.datum;break}}if(h){const p=Math.max(Math.sqrt(c)-(((d=h.point)==null?void 0:d.size)??0)/2,0);return{datum:h,distance:p}}}pickNodeMainAxisFirst(e,t){var y;const{x:i,y:s}=e,{axes:n,_contextNodeData:o}=this,{pickOutsideVisibleMinorAxis:r}=this.properties;if(!o)return;const a=n.x,c=n.y,h=[a,c].filter(Gc.is).map(b=>b.direction);if(t&&h.length===0)return;const[d="x"]=h,p=[i,s];d!=="x"&&p.reverse();const f=[1/0,1/0];let v;for(const b of o.nodeData){const{x:w=NaN,y:S=NaN}=b.point??b.midPoint??{};if(isNaN(w)||isNaN(S)||b.missing===!0)continue;const M=[a==null?void 0:a.inRange(w),c==null?void 0:c.inRange(S)];if(d!=="x"&&M.reverse(),!M[0]||!r&&!M[1])continue;const R=[w,S];d!=="x"&&R.reverse();let A=!0;for(let T=0;T<R.length;T++){const F=Math.abs(R[T]-p[T]);if(F>f[T]){A=!1;break}else F<f[T]&&(f[T]=F,f.fill(1/0,T+1,f.length))}A&&(v=b)}if(v){let b=Math.max(f[0]**2+f[1]**2-(((y=v.point)==null?void 0:y.size)??0),0);for(const w of this.moduleMap.modules()){const S=w.pickNodeMainAxisFirst(e);if(S!==void 0&&S.distanceSquared<b){v=S.datum,b=S.distanceSquared;break}}return{datum:v,distance:Math.sqrt(b)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}visibleRange(e,t,i){const s=this.keysOrValues(e),n=0;return JN((i==null?void 0:i.length)??s.length,t,o=>{const r=(i==null?void 0:i[o])??o;return this.xCoordinateRange(s[r],n,r)})}domainForVisibleRange(e,t,i,s,n,o){const{processedData:r,dataModel:a}=this,[c,h]=s,d=this.keysOrValues(i);if(n){const y=this.visibleRange(i,s,o);return a.getDomainBetweenRange(this,t,y,r)}const p=t.map(y=>this.keysOrValues(y));let f=1/0,v=-1/0;return d.forEach((y,b)=>{const[w,S]=this.xCoordinateRange(y,0,b);if(!(S<c||w>h))for(let M=0;M<t.length;M++){const R=p[M][b];f=Math.min(f,R),v=Math.max(v,R)}}),f>v?[NaN,NaN]:[f,v]}domainForClippedRange(e,t,i,s){const{processedData:n,dataModel:o,axes:r}=this,c=EJ(r[e==="x"?"y":"x"]);if(!c)return t.flatMap(y=>o.getDomain(this,y,"value",n));const h=this.keysOrValues(i);if(s){const y=TJ(h.length,c,b=>h[b]);return o.getDomainBetweenRange(this,t,y,n)}const d=t.map(y=>this.keysOrValues(y)),p=c[0].valueOf(),f=c[1].valueOf(),v=[];return h.forEach((y,b)=>{const w=y.valueOf();if(w<p||w>f)return;const S=d.map(M=>M[b]);w>=p&&v.push(...S),w<=f&&v.push(...S)}),v}countVisibleItems(e,t,i,s,n){const{dataModel:o,processedData:r}=this;if(!o||!r)return 1/0;const a=this.keysOrValues(e),c=t.map(T=>o.resolveColumnById(this,T,r)),h=this.axes.x,d=this.axes.y,p=this.shouldFlipXY(),f=h.range,v=d.range,y=(T,F,P)=>T[0]+(P-F[0])/(F[1]-F[0])*(T[1]-T[0]),b=y(f,h.visibleRange,i[0]),w=y(f,h.visibleRange,i[1]),S=y(v,d.visibleRange,p?s[0]:s[1]),M=y(v,d.visibleRange,p?s[1]:s[0]),R=Math.round((i[0]+(i[1]-i[0])/2)*a.length),A=0;return eO(0,a.length-1,R,n,T=>{let[F,P]=this.xCoordinateRange(a[T],A,T),[N,O]=this.yCoordinateRange(c.map(B=>B[T]),A,T);return!nt(F)||!nt(P)||!nt(N)||!nt(O)?!1:(p&&([F,P,N,O]=[N,O,F,P]),F>=b&&P<=w&&N>=S&&O<=M)})}updateHighlightSelectionItem(e){const{opts:{hasMarkers:t}}=this,{items:i,highlightSelection:s}=e,n=i??[];if(t){const o=s;return this.updateMarkerSelection({nodeData:n,markerSelection:o})}else return this.updateDatumSelection({nodeData:n,datumSelection:s})}updateHighlightSelectionLabel(e){return this.updateLabelSelection({labelData:e.items??[],labelSelection:e.highlightLabelSelection})}updateDatumSelection(e){return e.datumSelection}updateDatumNodes(e){}updateMarkerSelection(e){return e.markerSelection}updateMarkerNodes(e){}updatePaths(e){e.paths.forEach(t=>t.visible=!1)}updatePathNodes(e){const{paths:t,opacity:i,visible:s}=e;for(const n of t)n.opacity=i,n.visible=s}resetPathAnimation(e){var i;const{path:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&e.paths.forEach(s=>{Ki([s],t)})}resetDatumAnimation(e){var i;const{datum:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&Ki([e.datumSelection],t)}resetLabelAnimation(e){var i;const{label:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&Ki([e.labelSelection],t)}resetMarkerAnimation(e){var i;const{marker:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&this.opts.hasMarkers&&Ki([e.markerSelection],t)}resetAllAnimation(e){var t;this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),this.resetMarkerAnimation(e),((t=e.contextData)==null?void 0:t.animationValid)===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var i;const{datum:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&Ki([e],t)}animateReadyHighlightMarkers(e){var i;const{marker:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&Ki([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(e,t){const{_contextNodeData:i}=this;return i?{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:t,paths:this.paths,seriesRect:e}:void 0}updateLabelSelection(e){return e.labelSelection}getScaling(e){if(e instanceof G0){const{range:t,domain:i}=e;return{type:"log",convert:s=>e.convert(s),domain:[i[0],i[1]],range:[t[0],t[1]]}}else if(e instanceof Ct){const{range:t,domain:i}=e;return{type:"continuous",domain:[i[0],i[1]],range:[t[0],t[1]]}}else if(e instanceof Sp){const{domain:t}=e;return{type:"category",domain:t,inset:e.inset,step:e.step}}}calculateScaling(){const e={};for(const t of Object.values(QM)){const i=this.axes[t];if(!i)continue;const s=this.getScaling(i.scale);s!=null&&(e[t]=s)}return e}};function EJ(e){let t,i;if((e instanceof na||e instanceof gl)&&({min:t,max:i}=e),!(t==null&&i==null))return t??(t=-1/0),i??(i=1/0),[t,i]}function TJ(e,t,i){const s=t[0].valueOf(),n=t[1].valueOf(),o=Nk(0,e-1,a=>{var h;const c=(h=i(a))==null?void 0:h.valueOf();return!Number.isFinite(c)||c>=s});let r=kk(0,e-1,a=>{var h;const c=(h=i(a))==null?void 0:h.valueOf();return!Number.isFinite(c)||c<=n});return o==null||r==null?[0,0]:(r=Math.min(r+1,e),[o,r])}var IJ=bt(["linear","smooth","step"],"a line style"),LJ=bt(["start","middle","end"]),Nh=class extends Be{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};D([E()],Nh.prototype,"type",2);D([E()],Nh.prototype,"tension",2);D([E()],Nh.prototype,"position",2);var mi=class extends aa{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillGradientDefaults=new Xn,this.fillPatternDefaults=new ai,this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Nh,this.shadow=new Ro,this.marker=new Ji,this.label=new Hi,this.tooltip=new Ds,this.connectMissingData=!1}};D([E()],mi.prototype,"xKey",2);D([E()],mi.prototype,"xName",2);D([E()],mi.prototype,"yKey",2);D([E()],mi.prototype,"yName",2);D([E()],mi.prototype,"yFilterKey",2);D([E()],mi.prototype,"normalizedTo",2);D([E(ps(ar,lr,Cn))],mi.prototype,"fill",2);D([E()],mi.prototype,"fillGradientDefaults",2);D([E()],mi.prototype,"fillPatternDefaults",2);D([E()],mi.prototype,"fillOpacity",2);D([E()],mi.prototype,"stroke",2);D([E()],mi.prototype,"strokeWidth",2);D([E()],mi.prototype,"strokeOpacity",2);D([E()],mi.prototype,"lineDash",2);D([E()],mi.prototype,"lineDashOffset",2);D([E()],mi.prototype,"interpolation",2);D([E()],mi.prototype,"shadow",2);D([E()],mi.prototype,"marker",2);D([E()],mi.prototype,"label",2);D([E()],mi.prototype,"tooltip",2);D([E()],mi.prototype,"connectMissingData",2);function tr(e){switch(e.type){case"linear":case"step":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function FJ(e){const t=tr(e);return t[0].x>t[1].x&&t.reverse(),t}function PJ(e,t){const{x:i,y:s}=t;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:i,y0:s,x1:i,y1:s};case"step":return{type:"step",moveTo:e.moveTo,x0:i,y0:s,x1:i,y1:s,stepX:i};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:i,cp0y:s,cp1x:i,cp1y:s,cp2x:i,cp2y:s,cp3x:i,cp3y:s}}}function Zg(e,t,i){const[s,n]=tr(e),o=n.x!==s.x?(i.x-t.x)/(n.x-s.x):0,r=n.y!==s.y?(i.y-t.y)/(n.y-s.y):0;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:i.x-(e.cp2x-s.x)*o,cp1y:i.y-(e.cp2y-s.y)*r,cp2x:i.x-(e.cp1x-s.x)*o,cp2y:i.y-(e.cp1y-s.y)*r,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,stepX:i.x-(e.stepX-s.x)*o}}}function V1(e,t,i){const{moveTo:s}=e,[n,o]=FJ(e),{x:r,y:a}=n,{x:c,y:h}=o;if(i<r)return Zg(e,n,n);if(t>c)return Zg(e,o,o);switch(e.type){case"linear":{const d=a===h?void 0:(h-a)/(c-r),p=d==null?a:d*(t-r)+a,f=d==null?a:d*(i-r)+a;return{type:"linear",moveTo:s,x0:t,y0:p,x1:i,y1:f}}case"step":if(i<=e.stepX){const d=e.y0;return{type:"step",moveTo:s,x0:t,y0:d,x1:i,y1:d,stepX:i}}else if(t>=e.stepX){const d=e.y1;return{type:"step",moveTo:s,x0:t,y0:d,x1:i,y1:d,stepX:t}}else{const{y0:d,y1:p,stepX:f}=e;return{type:"step",moveTo:s,x0:t,y0:d,x1:i,y1:p,stepX:f}}case"cubic":{const d=vv(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t);let[p,f]=yv(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,d);const v=vv(f[0].x,f[1].x,f[2].x,f[3].x,i);return[f,p]=yv(f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y,v),{type:"cubic",moveTo:s,cp0x:f[0].x,cp0y:f[0].y,cp1x:f[1].x,cp1y:f[1].y,cp2x:f[2].x,cp2y:f[2].y,cp3x:f[3].x,cp3y:f[3].y}}}}function kJ(e){const t=[];let i=0,s=NaN,n=NaN;for(const{x:o,y:r}of e){if(i>0){const a=i===1;t.push({type:"linear",moveTo:a,x0:s,y0:n,x1:o,y1:r})}i+=1,s=o,n=r}return t}var NJ={start:0,middle:.5,end:1};function OJ(e,t){const i=[];let s=0,n=NaN,o=NaN;const r=typeof t=="number"?t:NJ[t];for(const{x:a,y:c}of e){if(s>0){const h=s===1,d=n+(a-n)*r;i.push({type:"step",moveTo:h,x0:n,y0:o,x1:a,y1:c,stepX:d})}s+=1,n=a,o=c}return i}var Mm=.05;function GJ(e,t){const i=Array.isArray(e)?e:Array.from(e);if(i.length<=1)return[];const s=i.map((o,r)=>{const a=r===0?o:i[r-1],c=r===i.length-1?o:i[r+1],h=r===0||r===i.length-1;if(Math.sign(a.y-o.y)===Math.sign(c.y-o.y))return 0;if(!h){const d=Math.abs(a.y-c.y),p=Math.abs(o.y-a.y)/d,f=Math.abs(o.y-c.y)/d;if(p<=Mm||1-p<=Mm||f<=Mm||1-f<=Mm)return 0}return(c.y-a.y)/(c.x-a.x)});s[1]===0&&(s[0]*=2),s[s.length-2]===0&&(s[s.length-1]*=2);const n=[];for(let o=1;o<i.length;o+=1){const r=i[o-1],a=s[o-1],c=i[o],h=s[o],d=c.x-r.x,p=c.y-r.y;let f=d*t/3,v=d*a*t/3,y=d*t/3,b=d*h*t/3;h===0&&Math.abs(v)>Math.abs(p)&&(f*=Math.abs(p/v),v=Math.sign(v)*Math.abs(p)),a===0&&Math.abs(b)>Math.abs(p)&&(y*=Math.abs(p/b),b=Math.sign(b)*Math.abs(p)),n.push({type:"cubic",moveTo:o===1,cp0x:r.x,cp0y:r.y,cp1x:r.x+f,cp1y:r.y+v,cp2x:c.x-y,cp2y:c.y-b,cp3x:c.x,cp3y:c.y})}return n}function Ti(e,t,i){return(t-e)*i+e}function BJ(e,t){const{x0:i,y0:s,x1:n,y1:o}=e,a=(o-s)/(n-i)*(t-i)+s;return{leftCp1x:i,leftCp1y:s,leftCp2x:t,leftCp2y:a,stepX:t,stepY0:a,stepY1:a,rightCp1x:t,rightCp1y:a,rightCp2x:n,rightCp2y:o}}function zJ(e,t){const{cp0x:i,cp0y:s,cp1x:n,cp1y:o,cp2x:r,cp2y:a,cp3x:c,cp3y:h}=e,d=vv(i,n,r,c,t),[p,f]=yv(i,s,n,o,r,a,c,h,d),v=p[3].y;return{leftCp1x:p[1].x,leftCp1y:p[1].y,leftCp2x:p[2].x,leftCp2y:p[2].y,stepX:t,stepY0:v,stepY1:v,rightCp1x:f[1].x,rightCp1y:f[1].y,rightCp2x:f[2].x,rightCp2y:f[2].y}}function HJ(e){const{x0:t,y0:i,x1:s,y1:n,stepX:o}=e;return{leftCp1x:(t+o)/2,leftCp1y:i,leftCp2x:(t+o)/2,leftCp2y:i,stepX:o,stepY0:i,stepY1:n,rightCp1x:(o+s)/2,rightCp1y:n,rightCp2x:(o+s)/2,rightCp2y:n}}function LL(e,t){return e.type==="linear"?BJ(e,t):e.type==="cubic"?zJ(e,t):HJ(e)}function _1(e,t,i,s,n,o,r){switch(t){case 0:r?e.moveTo(n,o):e.moveTo(i,s);break;case 1:r?e.lineTo(n,o):e.lineTo(i,s);break}}function W1(e,t,i,s,n,o){o?e.lineTo(t,i):e.lineTo(s,n)}function j1(e,t,i,s,n,o,r,a,c,h){h?e.cubicCurveTo(o,r,s,n,t,i):e.cubicCurveTo(s,n,o,r,a,c)}function U1(e,t,i,s,n,o,r){r?(e.lineTo(o,n),e.lineTo(o,i),e.lineTo(t,i)):(e.lineTo(o,i),e.lineTo(o,n),e.lineTo(s,n))}function bx(e,t,i,s){const[n,o]=tr(t);switch(_1(e,i,n.x,n.y,o.x,o.y,s),t.type){case"linear":W1(e,t.x0,t.y0,t.x1,t.y1,s);break;case"cubic":j1(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,s);break;case"step":U1(e,t.x0,t.y0,t.x1,t.y1,t.stepX,s);break}}function Y1(e,t,i){const[s,n]=tr(e),[o,r]=tr(t),a=Ti(s.x,o.x,i),c=Ti(s.y,o.y,i),h=Ti(n.x,r.x,i),d=Ti(n.y,r.y,i);return[{x:a,y:c},{x:h,y:d}]}function wx(e,t,i,s,n,o){const[{x:r,y:a},{x:c,y:h}]=Y1(t,i,s);if(_1(e,n,r,a,c,h,o),t.type==="cubic"&&i.type==="cubic"){const d=Ti(t.cp1x,i.cp1x,s),p=Ti(t.cp1y,i.cp1y,s),f=Ti(t.cp2x,i.cp2x,s),v=Ti(t.cp2y,i.cp2y,s);j1(e,r,a,d,p,f,v,c,h,o)}else if(t.type==="step"&&i.type==="step"){const d=Ti(t.stepX,i.stepX,s);U1(e,r,a,c,h,d,o)}else if(t.type==="linear"&&i.type==="linear")W1(e,r,a,c,h,o);else{let d;t.type==="step"?d=t.stepX:i.type==="step"?d=i.stepX:d=(r+c)/2;const p=LL(t,d),f=LL(i,d),v=Ti(p.leftCp1x,f.leftCp1x,s),y=Ti(p.leftCp1y,f.leftCp1y,s),b=Ti(p.leftCp2x,f.leftCp2x,s),w=Ti(p.leftCp2y,f.leftCp2y,s),S=Ti(p.stepX,f.stepX,s),M=Ti(p.stepY0,f.stepY0,s),R=Ti(p.stepY1,f.stepY1,s),A=Ti(p.rightCp1x,f.rightCp1x,s),T=Ti(p.rightCp1y,f.rightCp1y,s),F=Ti(p.rightCp2x,f.rightCp2x,s),P=Ti(p.rightCp2y,f.rightCp2y,s);o?(e.cubicCurveTo(F,P,A,T,S,R),e.lineTo(S,M),e.cubicCurveTo(b,w,v,y,r,a)):(e.cubicCurveTo(v,y,b,w,S,M),e.lineTo(S,R),e.cubicCurveTo(A,T,F,P,c,h))}}var K1=(e=>(e[e.Zero=0]="Zero",e[e.Split=1]="Split",e))(K1||{});function VJ(e,t){return e==null||t==null||typeof e!="object"||typeof t!="object"?!1:"id"in e&&"id"in t?e.id===t.id:e.toString()===t.toString()}function Cs(e,t){if(!t)return NaN;if(e instanceof Date&&(e=e.getTime()),t.type==="continuous"&&typeof e=="number")return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if(t.type==="log"&&typeof e=="number")return t.convert(e);if(t.type!=="category")return NaN;const i=t.domain.findIndex(n=>n===e);return i>=0||t.domain.findIndex(n=>VJ(e,n))>=0?t.inset+t.step*i:NaN}function _n(e){return hx(e).valueOf()}function FL({data:e},t){return e.map((i,s)=>({xValue0Index:t.indexOf(_n(i.xValue0)),xValue1Index:t.indexOf(_n(i.xValue1)),datumIndex:s}))}function _J(e,t){const i=t.scales.x,s=e.scales.x;if((i==null?void 0:i.type)!=="category"||(s==null?void 0:s.type)!=="category")return!0;let n=-1/0;for(const o of i.domain){const r=Cs(o,s);if(Number.isFinite(r)){if(r<n)return!1;n=r}}return!0}function WJ(e,t){let i=-1/0;for(const s of e){const n=Cs(s.value,t.scales.x);if(Number.isFinite(n)){if(n<i)return!1;i=n}}return!0}function jJ(e,t){const i=new Map;for(const{xValue0:d,xValue1:p}of e.data){const f=_n(d),v=_n(p);i.set(f,d).set(v,p)}const s=Array.from(i,([d,p])=>({axisValue:d,value:p}));s.sort((d,p)=>Cs(d.value,e.scales.x)-Cs(p.value,e.scales.x));const n=[];for(const{xValue0:d,xValue1:p}of t.data){const f=_n(d),v=_n(p);i.has(f)||(i.set(f,d),n.push({axisValue:f,value:d})),i.has(v)||(i.set(v,p),n.push({axisValue:v,value:p}))}n.sort((d,p)=>Cs(d.value,t.scales.x)-Cs(p.value,t.scales.x));const o=s;let r=0;for(const d of n){for(let p=o.length-1;p>r;p-=1){const f=Cs(d.value,t.scales.x),v=Cs(o[p].value,t.scales.x);if(f>v){r=p+1;break}}o.splice(r,0,d),r+=1}if(!WJ(o,t))return;const a=o.map(d=>d.axisValue),c=FL(t,a),h=FL(e,a);return{axisValues:a,oldDataAxisIndices:c,newDataAxisIndices:h}}function PL(e,t,i){if(i.xValue1Index===i.xValue0Index+1)return e;const s=tr(e),n=(s[1].x-s[0].x)/(i.xValue1Index-i.xValue0Index),o=s[0].x+(t-i.xValue0Index)*n,r=o+n;return V1(e,o,r)}function $1(e,t){const[i,s]=tr(e),n=Cs(0,t.scales.y);return Zg(e,{x:i.x,y:n},{x:s.x,y:n})}function Z1(e){const[t,i]=tr(e);return PJ(e,{x:(t.x+i.x)/2,y:(t.y+i.y)/2})}function q1(e,t,i,s,n,o){var p,f;let r,a;if(n.xValue0Index>=o.xValue1Index){const v=(p=s.findLast(b=>b.xValue1Index<=o.xValue1Index))==null?void 0:p.datumIndex,y=v!=null?i.data[v]:void 0;r=y==null?void 0:y.xValue1,a=y==null?void 0:y.yValue1}else if(n.xValue0Index<=o.xValue0Index){const v=(f=s.find(b=>b.xValue0Index>=o.xValue0Index))==null?void 0:f.datumIndex,y=v!=null?i.data[v]:void 0;r=y==null?void 0:y.xValue0,a=y==null?void 0:y.yValue0}if(r==null||a==null)switch(t){case 0:return $1(e,i);case 1:return Z1(e)}const c=Cs(r,i.scales.x),h=Cs(a,i.scales.y),d={x:c,y:h};return Zg(e,d,d)}function eD(e,t){var n;if(t==null)return;const i=_n(e.xValue0),s=_n(e.xValue1);return(n=t.find(o=>_n(o.xValue0)===i&&_n(o.xValue1)===s))==null?void 0:n.span}function kL(e,t,i,s,n,o,r){const a=e.data[s.datumIndex],c=a.span,h=eD(a,n);if(h!=null)r.removed.push({from:h,to:h}),r.moved.push({from:h,to:c}),r.added.push({from:c,to:c});else{const d=q1(c,t,e,i,s,o);r.added.push({from:d,to:c})}}function NL(e,t,i,s,n,o,r){const a=e.data[s.datumIndex],c=a.span,h=eD(a,n);if(h!=null)r.removed.push({from:c,to:c}),r.moved.push({from:c,to:h}),r.added.push({from:h,to:h});else{const d=q1(c,t,e,i,s,o);r.removed.push({from:c,to:d})}}function OL(e,t,i,s,n){const o=t[n.xValue0Index],r=i.data.find(w=>_n(w.xValue0)===o),a=t[n.xValue1Index],c=i.data.find(w=>_n(w.xValue1)===a);if(r==null||c==null)return;const[{x:h},{x:d}]=tr(e),p=Cs(r.xValue0,i.scales.x),f=Cs(r.yValue0,i.scales.y),v=Cs(c.xValue1,i.scales.x),y=Cs(c.yValue1,i.scales.y);let b=s.data[n.datumIndex].span;return b=Zg(b,{x:p,y:f},{x:v,y}),b=V1(b,h,d),b}function UJ(e,t,i,s,n,o,r,a,c){const h=n+1,d=r.find(R=>R.xValue0Index<=n&&R.xValue1Index>=h),p=o.find(R=>R.xValue0Index<=n&&R.xValue1Index>=h),f=t.zeroData,v=e.zeroData;if(d==null&&p!=null){kL(e,i,o,p,f,a,c);return}else if(d!=null&&p==null){NL(t,i,r,d,v,a,c);return}else if(d==null||p==null)return;let y;d.xValue0Index===p.xValue0Index&&d.xValue1Index===p.xValue1Index?y=0:d.xValue0Index<=p.xValue0Index&&d.xValue1Index>=p.xValue1Index?y=-1:d.xValue0Index>=p.xValue0Index&&d.xValue1Index<=p.xValue1Index?y=1:y=0;const b=t.data[d.datumIndex],w=PL(b.span,n,d),S=e.data[p.datumIndex],M=PL(S.span,n,p);if(y===1){const R=OL(w,s,t,e,p);R!=null?(c.removed.push({from:w,to:R}),c.moved.push({from:R,to:M}),c.added.push({from:M,to:M})):NL(t,i,r,d,v,a,c)}else if(y===-1){const R=OL(M,s,e,t,d);R!=null?(c.removed.push({from:w,to:w}),c.moved.push({from:w,to:R}),c.added.push({from:R,to:M})):kL(e,i,o,p,f,a,c)}else c.removed.push({from:w,to:w}),c.moved.push({from:w,to:M}),c.added.push({from:M,to:M})}function YJ(e,t,i,s){var h,d,p,f;const n={removed:[],moved:[],added:[]},{axisValues:o,oldDataAxisIndices:r,newDataAxisIndices:a}=e,c={xValue0Index:Math.max(((h=r.at(0))==null?void 0:h.xValue0Index)??-1/0,((d=a.at(0))==null?void 0:d.xValue0Index)??-1/0),xValue1Index:Math.min(((p=r.at(-1))==null?void 0:p.xValue1Index)??1/0,((f=a.at(-1))==null?void 0:f.xValue1Index)??1/0)};for(let v=0;v<o.length-1;v+=1)UJ(t,i,s,o,v,a,r,c,n);return n}function GL(e,t,i){const{span:s}=t;switch(i){case 0:return eD(t,e.zeroData)??$1(s,e);case 1:return Z1(s)}}function KJ(e,t,i){const s=[],n=[];for(const o of t.data){const r=o.span,a=GL(t,o,i);n.push({from:r,to:a})}for(const o of e.data){const r=o.span,a=GL(e,o,i);s.push({from:a,to:r})}return{removed:n,moved:[],added:s}}function xg(e,t,i){if(!_J(e,t))return;const s=jJ(e,t);return s==null?KJ(e,t,i):YJ(s,e,t,i)}function BL(e){return e.type==="continuous"||e.type==="log"}function zL(e){return e.type==="category"}function qu(e,t){return e===void 0||t===void 0?e!==void 0||t!==void 0:BL(e)&&BL(t)?e.type===t.type&&jo(e.domain,t.domain)&&jo(e.range,t.range):zL(e)&&zL(t)?e.inset===t.inset&&e.step===t.step&&jo(e.domain,t.domain):!1}function qg(e){return e==null?!1:e.type==="category"?e.domain.every(t=>t!=null):e.domain.every(t=>Number.isFinite(t)||t instanceof Date)&&e.range.every(t=>Number.isFinite(t))}function Nv(e,t){let i;const s=e.map(n=>n.point);switch(t.type){case"linear":i=kJ(s);break;case"smooth":i=GJ(s,t.tension);break;case"step":i=OJ(s,t.position);break}return i.map((n,o)=>({span:n,xValue0:e[o].xDatum,yValue0:e[o].yDatum,xValue1:e[o+1].xDatum,yValue1:e[o+1].yDatum}))}function X1(e,t,i=.001){return Math.abs(e.x-t.x)<i&&Math.abs(e.y-t.y)<i}function tD({path:e},t){let i;for(const{span:s}of t){const[n,o]=tr(s),r=i!=null&&X1(i,n)?1:0;bx(e,s,r,!1),i=o}}function Km(e,t,i){let s;for(const n of i){const[o,r]=Y1(n.from,n.to,e),a=s!=null&&X1(s,o)?1:0;wx(t.path,n.from,n.to,e,a,!1),s=r}}function iD(e,t,i){const s=(a,c)=>Km(a,c,t.removed),n=(a,c)=>Km(a,c,t.moved),o=(a,c)=>Km(a,c,t.added),r=sD(e,i);return{status:e,path:{addPhaseFn:o,updatePhaseFn:n,removePhaseFn:s},pathProperties:r}}function sD(e,t){const i=t==="none"?"updated":e,s={fromFn:n=>{let o;return e==="removed"?o={finish:{visible:!1}}:e==="added"?o={start:{visible:!0}}:o={},{phase:ho[i],...o}},toFn:n=>({phase:ho[i]})};return t==="fade"?{fromFn:n=>({opacity:e==="added"?0:n.opacity,...s.fromFn(n)}),toFn:n=>({opacity:e==="removed"?0:1,...s.toFn(n)})}:s}function Q1(e,t,i){var h,d;const s=((h=e.scales.x)==null?void 0:h.type)==="category",n=((d=t.scales.x)==null?void 0:d.type)==="category";if(s!==n||!qg(e.scales.x)||!qg(t.scales.x)||e.strokeData==null||t.strokeData==null)return;let o="updated";t.visible&&!e.visible?o="removed":!t.visible&&e.visible&&(o="added");const r=xg({scales:e.scales,data:e.strokeData.spans},{scales:t.scales,data:t.strokeData.spans},1);if(r==null)return;const a=iD(o,r,"fade"),c=((i==null?void 0:i.changed)??!0)||!qu(e.scales.x,t.scales.x)||!qu(e.scales.y,t.scales.y)||o!=="updated";return{status:o,stroke:a,hasMotion:c}}function J1({path:e},{spans:t,phantomSpans:i}){for(let s=0;s<t.length;s+=1){const{span:n}=t[s],o=i[s].span;bx(e,n,0,!1),bx(e,o,1,!0),e.closePath()}}function $m(e,{path:t},i,s){for(let n=0;n<i.length;n+=1){const o=i[n],r=s[n];wx(t,o.from,o.to,e,0,!1),wx(t,r.from,r.to,e,1,!0),t.closePath()}}function eG(e,t,i,s){const n=(c,h)=>$m(c,h,t.removed,i.removed),o=(c,h)=>$m(c,h,t.moved,i.moved),r=(c,h)=>$m(c,h,t.added,i.added),a=sD(e,s);return{status:e,path:{addPhaseFn:r,updatePhaseFn:o,removePhaseFn:n},pathProperties:a}}function tG(e,t){var p,f;const i=((p=e.scales.x)==null?void 0:p.type)==="category",s=((f=t.scales.x)==null?void 0:f.type)==="category";if(i!==s||!qg(e.scales.x)||!qg(t.scales.x))return;let n="updated";t.visible&&!e.visible?n="removed":!t.visible&&e.visible&&(n="added");const o=xg({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},0);if(o==null)return;const r=xg({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},0);if(r==null)return;const a=xg({scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},0);if(a==null)return;const c="none",h=eG(n,o,r,c),d=iD(n,a,c);return{status:n,fill:h,stroke:d}}function Xg({id:e},t,i,...s){const n={phase:i?ho[i]:"trailing"};Qr(e,"markers",t,s,{opacity:0},{opacity:1},n),s.forEach(o=>o.cleanup())}function nD({id:e},t,...i){Qr(e,"markers",t,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(s=>s.cleanup())}function oD({id:e,nodeDataDependencies:t},i,...s){const n=t.seriesRectWidth;ii(e,"markers",i,s,{fromFn:(a,c)=>{var p;const h=((p=c.midPoint)==null?void 0:p.x)??n;let d=Ge(0,jN(h/n),1);return isNaN(d)&&(d=0),{scalingX:0,scalingY:0,delay:d,duration:Mv,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function Vp(e){return{opacity:1,scalingX:1,scalingY:1}}function Qg(e,t){var i,s,n,o;return{x:((i=t.point)==null?void 0:i.x)??NaN,y:((s=t.point)==null?void 0:s.y)??NaN,scalingCenterX:((n=t.point)==null?void 0:n.x)??NaN,scalingCenterY:((o=t.point)==null?void 0:o.y)??NaN}}function _p(e,{datumIndex:t}){const i=e.getNodeData();if(i===void 0)return;const s=i[t],{point:n}=s??{};if(s==null||n==null)return;const o=4+(n.focusSize??e.getFormattedMarkerStyle(s).size),r=o/2,a=s.point.x-r,c=s.point.y-r;return ri.toCanvas(e.contentGroup,new Me(a,c,o,o))}function rD({id:e,visible:t,nodeDataDependencies:i},s,...n){const{seriesRectWidth:o,seriesRectHeight:r}=i;Qr(e,"path_properties",s,n,{clipX:0},{clipX:o},{phase:"initial",start:{clip:!0,clipY:r,visible:t},finish:{clip:!1,visible:t}})}function Ov({id:e},t,i,s="add",...n){Qr(e,t,i,n,{opacity:0},{opacity:1},{phase:s})}function aD(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function Gv({nodeDataDependencies:e},t){const i=s=>isFinite(s)?s:0;t.clipX=i(e.seriesRectWidth),t.clipY=i(e.seriesRectHeight)}var $J=.125,ZJ=.25,zy=class extends vl{constructor(e){super({moduleCtx:e,directionKeys:Hc,directionNames:Vc,categoryKey:"xValue",pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:aD({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:ra,marker:(t,i)=>({...Vp(),...Qg(t,i)})},clipFocusBox:!1}),this.properties=new mi,this.connectsToYAxis=!0,this.backgroundGroup=new Ne({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||this.contextNodeData!=null&&(this.contextNodeData.fillData.spans.length>kv||this.contextNodeData.strokeData.spans.length>kv)}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e==null||e.removeChild(this.backgroundGroup)}attachPaths([e,t]){this.backgroundGroup.appendChild(e),this.contentGroup.appendChild(t),t.zIndex=-1}detachPaths([e,t]){this.backgroundGroup.removeChild(e),this.contentGroup.removeChild(t)}isStacked(){var t;return(((t=this.seriesGrouping)==null?void 0:t.stackCount)??1)>1}setSeriesIndex(e){const t=this.isStacked();return!super.setSeriesIndex(e)&&this._isStacked===t?!1:(this._isStacked=t,t?(this.backgroundGroup.zIndex=[0,e],this.contentGroup.zIndex=[1,e,0]):(this.backgroundGroup.zIndex=[1,e,0,0],this.contentGroup.zIndex=[1,e,0,1]),!0)}async processData(e){var M,R;if(this.data==null||!this.properties.isValid())return;const{data:t,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=1}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:c,normalizedTo:h}=this.properties,d=!this.ctx.animationManager.isSkipped(),p=(M=this.axes.x)==null?void 0:M.scale,f=(R=this.axes.y)==null?void 0:R.scale,{xScaleType:v,yScaleType:y}=this.getScaleInformation({xScale:p,yScale:f}),b={value:`area-stack-${s}-yValue`,values:`area-stack-${s}-yValues`,stack:`area-stack-${s}-yValue-stack`,marker:`area-stack-${s}-yValues-marker`},w=[];fg(h)&&w.push(Ey(Object.values(b),h)),d&&w.push(Th());const S={invalidValue:null};(fg(h)||c)&&n>1&&(S.invalidValue=0),i||(S.forceValue=0),await this.requestDataModel(e,t,{props:[vo(o,v,{id:"xValue"}),Je(r,y,{id:"yValueRaw",...S}),...a!=null?[Je(a,y,{id:"yFilterRaw"})]:[],...C1(r,y,{id:"yValueStack",...S,groupId:b.stack}),Je(r,y,{id:"yValue",...S,groupId:b.value}),...qa(r,"window","current",{id:"yValueEnd",...S,groupId:b.values},y),...qa(r,"normal","current",{id:"yValueCumulative",...S,groupId:b.marker},y),...w],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}xCoordinateRange(e,t){const{marker:i}=this.properties,s=this.axes.x.scale.convert(e),n=i.enabled?.5*i.size*t:0;return[s-n,s+n]}yCoordinateRange(e,t){const{marker:i}=this.properties,s=this.axes.y.scale.convert(e[0]),n=i.enabled?.5*i.size*t:0;return[s-n,s+n]}getSeriesDomain(e){const{processedData:t,dataModel:i,axes:s}=this;if(!t||!i)return[];const n=s.y;if(e==="x"){const r=i.resolveProcessedDataDefById(this,"xValue"),a=i.getDomain(this,"xValue","key",t);return(r==null?void 0:r.def.type)==="key"&&r.def.valueType==="category"?a:Qs(ia(a))}const o=this.domainForClippedRange("y",["yValueCumulative"],"xValue",!0);if(n instanceof Lh||n instanceof gl)return Qs(o);{const r=Number.isFinite(o[1]-o[0])?[o[0]>0?0:o[0],o[1]<0?0:o[1]]:[];return Qs(r)}}getSeriesRange(e,t){const[i,s]=this.domainForVisibleRange("y",["yValueCumulative"],"xValue",t,!0);return[Math.min(i,0),Math.max(s,0)]}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["yValueCumulative"],e,t,i)}createNodeData(){var le;const{axes:e,data:t,processedData:i,dataModel:s}=this,n=e.x,o=e.y;if(!n||!o||!t||!s||(i==null?void 0:i.type)!=="grouped"||!this.properties.isValid())return;const{yKey:r,xKey:a,yFilterKey:c,marker:h,label:d,fill:p,stroke:f,connectMissingData:v,interpolation:y}=this.properties,{scale:b}=n,{scale:w}=o,{isContinuousY:S}=this.getScaleInformation({xScale:b,yScale:w}),M=(b.bandwidth??0)/2,R=s.resolveKeysById(this,"xValue",i),A=s.resolveColumnById(this,"yValueEnd",i),T=s.resolveColumnById(this,"yValueRaw",i),F=s.resolveColumnById(this,"yValueCumulative",i),P=c!=null?s.resolveColumnById(this,"yFilterRaw",i):void 0,N=s.resolveColumnById(this,"yValueStack",i),O=(be,ue,ae)=>{let we;return(fg(this.properties.normalizedTo)?S&&by(ae):!isNaN(ae))&&(we=ue),{x:b.convert(be)+M,y:w.convert(we),size:h.size}},B=[],V=[],{visibleSameStackCount:U}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let se=!1;const{dataSources:Ce}=i,Se=Ce.get(this.id)??[];for(const{datumIndex:be}of s.forEachGroupDatum(this,i)){const ue=R[be];if(ue==null)return;const ae=Se[be],we=T[be],Re=F[be],Ee=A[be],_e=Number.isFinite(we),We=O(ue,+Re,we),Ve=P!=null?P[be]===we:void 0;if(Ve===!1&&(se=!0),_e&&h&&V.push({series:this,itemId:r,datum:ae,datumIndex:be,midPoint:{x:We.x,y:We.y},cumulativeValue:Ee,yValue:we,xValue:ue,yKey:r,xKey:a,point:We,fill:h.fill??p,stroke:h.stroke??f,strokeWidth:h.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth),selected:Ve}),_e&&d){const kt=this.getLabelText(d,{value:we,datum:ae,xKey:a,yKey:r,xName:this.properties.xName,yName:this.properties.yName});B.push({series:this,itemId:r,datum:ae,datumIndex:be,x:We.x,y:We.y,labelText:kt})}}const H=be=>be.flatMap(ue=>Array.isArray(ue)?Nv(ue,y):new Array(ue.skip).fill(null)),q=(be,ue)=>({point:{x:b.convert(be)+M,y:w.convert(ue)},xDatum:be,yDatum:ue}),ie=be=>{const ue=[];for(const{datumIndexes:[ae,we,Re]}of s.forEachGroupDatumTuple(this,i)){const Ee=R[we],_e=N[we],We=_e[be],Ve=Number.isFinite(We);if(v&&!Ve)continue;const kt=ae!=null?N[ae]:void 0,ft=Re!=null?N[Re]:void 0;let Fi=0,_i=0;for(let mt=0;mt<=be;mt+=1){const Di=_e[mt];if(Number.isFinite(Di)){const li=kt==null||Number.isFinite(kt[mt]),Cl=ft==null||Number.isFinite(ft[mt]);li&&(Fi+=Di),Cl&&(_i+=Di)}}const Mt=ue[ue.length-1];if(!v&&(Fi!==_i||!Ve))if(!Ve&&Array.isArray(Mt)&&Mt.length===1)ue[ue.length-1]={skip:1};else{const mt=q(Ee,Fi),Di=q(Ee,_i);Array.isArray(Mt)?Mt.push(mt):Mt!=null&&(Mt.skip+=1),ue.push(Ve?[Di]:{skip:0})}else{const mt=v?We:Math.max(Fi,_i),Di=q(Ee,mt);Array.isArray(Mt)?Mt.push(Di):Mt!=null?(Mt.skip+=1,ue.push([Di])):ue.push([Di])}}return H(ue)},he=((le=this.seriesGrouping)==null?void 0:le.stackIndex)??0,G=()=>{const be=Array.from(s.forEachGroupDatum(this,i),({datumIndex:ue})=>{const ae=R[ue],Re=N[ue][he];if(!(v&&!Number.isFinite(Re)))return q(ae,0)}).filter(ue=>ue!=null);return Nv(be,y)},W=ie(he),Y=W.map(()=>null);for(let be=he-1;be>=-1;be-=1){let ue;for(let ae=0;ae<Y.length;ae+=1)Y[ae]==null&&(ue??(ue=be!==-1?ie(be):G()),Y[ae]=ue[ae])}const X=W.map((be,ue)=>be??Y[ue]),ee=W.filter(be=>be!=null);return{itemId:r,fillData:{itemId:r,spans:X,phantomSpans:Y},strokeData:{itemId:r,spans:ee},labelData:B,nodeData:V,scales:this.calculateScaling(),visible:this.visible,stackVisible:U>0,crossFiltering:se}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){var h;const{opacity:t,visible:i,animationEnabled:s}=e,[n,o]=e.paths,r=((h=this.contextNodeData)==null?void 0:h.crossFiltering)===!0,a=this.getStrokeWidth(this.properties.strokeWidth);o.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity*(r?ZJ:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i||s});const c=vc(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults);Ec(n,{fill:c,stroke:void 0,fillOpacity:this.properties.fillOpacity*(r?$J:1)},void 0,this.getShapeFillBBox()),n.setProperties({lineJoin:"round",pointerEvents:1,fillShadow:this.properties.shadow,opacity:t,visible:i||s}),Gv(this,o),Gv(this,n)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("AreaSeries")}updateFillPath(e,t){const[i]=e;i.path.clear(),J1(i,t.fillData),i.markDirty("AreaSeries")}updateStrokePath(e,t){const{spans:i}=t.strokeData,[,s]=e;s.path.clear(),tD(s,i),s.markDirty("AreaSeries")}updateMarkerSelection(e){var n;const{nodeData:t,markerSelection:i}=e,s=this.properties.marker.enabled||((n=this.contextNodeData)==null?void 0:n.crossFiltering)===!0;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(s?t:[])}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,marker:o,fill:r,stroke:a,strokeWidth:c,fillOpacity:h,strokeOpacity:d,highlightStyle:p}=this.properties,f=this.getSeriesDomain("x"),v=this.getSeriesDomain("y"),y=Qe(i&&p.item,o.getStyle(),{fill:r,stroke:a,strokeWidth:c,fillOpacity:h,strokeOpacity:d}),b=this.getShapeFillBBox();t.each((w,S)=>{this.updateMarkerStyle(o,w,S.datum,S.point,Za(S,s,n,f,v),i,y,b,{selected:S.selected})}),i||this.properties.marker.markClean()}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{enabled:i,fontStyle:s,fontWeight:n,fontSize:o,fontFamily:r,color:a}=this.properties.label;t.each((c,h)=>{const{x:d,y:p,labelText:f}=h;f&&i&&this.visible?(c.fontStyle=s,c.fontWeight=n,c.fontSize=o,c.fontFamily=r,c.textAlign="center",c.textBaseline="bottom",c.text=f,c.x=d,c.y=p-10,c.fill=a,c.visible=!0):c.visible=!1})}getTooltipContent(e){var F;const{id:t,dataModel:i,processedData:s,axes:n,properties:o}=this,{xKey:r,xName:a,yKey:c,yName:h,tooltip:d,marker:p}=o,f=n.x,v=n.y;if(!i||!s||!f||!v)return;const y=(F=s.dataSources.get(this.id))==null?void 0:F[e],b=i.resolveKeysById(this,"xValue",s)[e],w=i.resolveColumnById(this,"yValueRaw",s)[e],{xDomain:S,yDomain:M}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}));if(b==null)return;const R=p.getStyle(),A={xValue:b,yValue:w},T=this.getMarkerStyle(p,y,Za(A,r,c,S,M),!1,void 0,R);return d.formatTooltip(this.properties,{heading:f.formatDatum(b),symbol:this.legendItemSymbol(),data:[{label:h,fallbackLabel:c,value:v.formatDatum(w)}]},{seriesId:t,datum:y,title:h,xKey:r,xName:a,yKey:c,yName:h,...T,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:s,strokeWidth:n,lineDash:o,marker:r,fillGradientDefaults:a,fillPatternDefaults:c}=this.properties,h=!r.enabled||r.fill===void 0,d=h?vc(e,a,c):vc(r.fill,r.fillGradientDefaults,r.fillPatternDefaults);return{marker:{...this.getMarkerStyle(r,void 0,void 0,!1,void 0,{fill:d,fillOpacity:h?i:r.fillOpacity}),enabled:r.enabled||n<=0},line:{stroke:t,strokeOpacity:s,strokeWidth:n,lineDash:o}}}getLegendData(e){if(!this.properties.isValid()||e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:o,legendItemName:r,showInLegend:a}=this.properties;return[{legendType:e,id:t,itemId:n,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:n}),label:{text:r??o??n},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!a}]}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,contextData:s,paths:n}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(n,s),rD(this,o,...n),Ki([t],Qg),oD(this,o,t),ct(this,"labels",o,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:s,contextData:n,paths:o,previousContextData:r}=e,[a,c]=o;if(a==null&&c==null)return;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const h=()=>{this.resetPathAnimation(e),this.updateAreaPaths(o,n)},d=()=>{t.skipCurrentBatch(),h()};if(n==null||r==null){h(),Xg(this,t,"added",i),Ov(this,"fill_path_properties",t,"add",a),Ov(this,"stroke_path_properties",t,"add",c),ct(this,"labels",t,s);return}if(n.crossFiltering!==r.crossFiltering){d();return}const p=tG(n,r);if(p===void 0){d();return}else if(p.status==="no-op")return;Xg(this,t,void 0,i),ii(this.id,"fill_path_properties",t,[a],p.fill.pathProperties),Pv(this.id,"fill_path_update",t,[a],p.fill.path),ii(this.id,"stroke_path_properties",t,[c],p.stroke.pathProperties),Pv(this.id,"stroke_path_update",t,[c],p.stroke.path),ct(this,"labels",t,s),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(o,n)})}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Ne}getFormattedMarkerStyle(e){const{xKey:t,yKey:i}=e,s=this.getSeriesDomain("x"),n=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,e.datum,Za(e,t,i,s,n),!0)}computeFocusBounds(e){return _p(this,e)}};zy.className="AreaSeries";zy.type="area";var Hy=pt(T9,"a valid number format string"),lD={enabled:ye,text:xe,padding:Le,...pn},iG=pt({enabled:ye,type:Fe(je("line","range")),range:hs(pt((e,{options:t})=>t.type==="range","crossLine type to be 'range'"),$t(dn),Qv(2,2)),value:hs(pt((e,{options:t})=>t.type==="line","crossLine type to be 'line'"),dn),label:lD,fill:xe,fillOpacity:_t,...Gs,...Xo},"cross-line options"),sG={...iG,label:{...lD,position:je("top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"),rotation:Le}},cD={enabled:ye,rotation:Le,avoidCollisions:ye,minSpacing:me,spacing:me,formatter:yt,itemStyler:yt,...pn},Oh={autoRotate:ye,autoRotateAngle:Le,...cD},Vy={reverse:ye,gridLine:{enabled:ye,width:me,style:Mc({stroke:Ye,lineDash:$t(me)},"a grid-line style object array")},interval:{values:$t(dn),minSpacing:me},label:cD,line:{enabled:ye,width:me,stroke:Ye},tick:{enabled:ye,width:me,size:me,stroke:Ye}};Vy.context=dn;Vy.layoutConstraints={stacked:Fe(ye),align:Fe(je("start","end")),unit:Fe(je("percent","px")),width:Fe(me)};var Gh={...Vy,keys:$t(xe),crossLines:Mc(sG,"a cross-line options array"),position:je("top","right","bottom","left"),thickness:me,title:{enabled:ye,text:xe,spacing:me,formatter:yt,...pn}};function Bh(e){const t={enabled:ye,xOffset:Le,yOffset:Le,renderer:yt};return e&&(t.format=xe),{enabled:ye,snap:ye,label:t,...Gs,...Xo}}function _y(e,t){return{min:hs(e,Ng("max")),max:hs(e,Kw("min")),nice:ye,interval:{step:t?ti(Vm,ti(Vm,p9(Ac))):Vm,values:$t(e),minSpacing:hs(me,Ng("maxSpacing")),maxSpacing:hs(me,Kw("minSpacing"))}}}var xx=ti(je("circle","cross","diamond","heart","plus","pin","square","star","triangle"),yt),nG=je("never","always","hyphenate","on-space"),Bv=je("top","right","bottom","left","top-right","bottom-right","bottom-left","top-left","center"),uD=je("pointer","node","top","right","bottom","left","top-left","top-right","bottom-left","bottom-right"),hD=ti(me,je("exact","nearest")),HL=je("pointer","start","middle","end"),lw={enabled:ye,text:xe,textAlign:je("left","center","right"),wrapping:je("never","always","hyphenate","on-space"),spacing:me,maxWidth:me,maxHeight:me,...pn},Dm={enabled:ye,text:xe,renderer:yt},Rm=Mc({label:xe,action:yt},"a context menu actions array"),Mx={label:xe,ariaLabel:xe,tooltip:xe,icon:je("align-center","align-left","align-right","arrow-drawing","arrow-down-drawing","arrow-up-drawing","callout-annotation","candlestick-series","close","comment-annotation","date-range-drawing","date-price-range-drawing","delete","disjoint-channel-drawing","drag-handle","fill-color","line-style-solid","line-style-dashed","line-style-dotted","high-low-series","hlc-series","hollow-candlestick-series","horizontal-line-drawing","line-color","line-series","line-with-markers-series","locked","measurer-drawing","note-annotation","ohlc-series","pan-end","pan-left","pan-right","pan-start","parallel-channel-drawing","position-bottom","position-center","position-top","price-label-annotation","price-range-drawing","reset","settings","step-line-series","text-annotation","trend-line-drawing","fibonacci-retracement-drawing","fibonacci-retracement-trend-based-drawing","unlocked","vertical-line-drawing","zoom-in","zoom-out")},Hs={width:me,height:me,minWidth:me,minHeight:me,suppressFieldDotNotation:ye,title:lw,subtitle:lw,footnote:lw,padding:{top:me,right:me,bottom:me,left:me},seriesArea:{clip:ye,padding:{top:me,right:me,bottom:me,left:me}},legend:{enabled:ye,position:je("top","right","bottom","left"),orientation:je("horizontal","vertical"),maxWidth:me,maxHeight:me,spacing:me,preventHidingAll:ye,reverseOrder:ye,toggleSeries:ye,item:{marker:{size:me,shape:xx,padding:me,strokeWidth:me},line:{length:me,strokeWidth:me},label:{maxLength:me,formatter:yt,...pn},maxWidth:me,paddingX:me,paddingY:me,showSeriesStroke:ye},pagination:{marker:{size:me,shape:xx,padding:me},activeStyle:{...Yn,...Gs},inactiveStyle:{...Yn,...Gs},highlightStyle:{...Yn,...Gs},label:pn},listeners:{legendItemClick:yt,legendItemDoubleClick:yt}},gradientLegend:{enabled:ye,position:je("top","right","bottom","left"),spacing:me,reverseOrder:ye,gradient:{preferredLength:me,thickness:me},scale:{label:{...pn,format:Hy,formatter:yt},padding:me,interval:{step:Le,values:qo,minSpacing:hs(me,Ng("maxSpacing")),maxSpacing:hs(me,Kw("minSpacing"))}}},listeners:{seriesNodeClick:yt,seriesNodeDoubleClick:yt,seriesVisibilityChange:yt,click:yt,doubleClick:yt,annotations:yt,zoom:yt},highlight:{range:je("tooltip","node")},overlays:{loading:Dm,noData:Dm,noVisibleSeries:Dm,unsupportedBrowser:Dm},tooltip:{enabled:ye,showArrow:ye,pagination:ye,delay:me,range:hD,wrapping:nG,mode:je("single","shared","compact"),position:{type:uD,anchorTo:je("pointer","node","chart"),placement:ti(Bv,$t(Bv)),xOffset:Le,yOffset:Le}},animation:{enabled:ye,duration:me},contextMenu:{enabled:ye,extraActions:Rm,extraSeriesAreaActions:Rm,extraNodeActions:Rm,extraLegendItemActions:Rm},dataSource:{getData:yt},keyboard:{enabled:ye,tabIndex:Le},touch:{dragAction:je("none","drag","hover")},ranges:{enabled:ye,buttons:Mc({...Mx,value:ti(Le,hs($t(ti(Le,Bu)),Qv(2,2)),yt)},"range button options array")},locale:{localeText:kg,getLocaleText:yt},background:{visible:ye,fill:Ye,image:{url:xe,top:Le,right:Le,bottom:Le,left:Le,width:me,height:me,opacity:_t}},sync:{enabled:ye,groupId:xe,axes:je("x","y","xy"),nodeInteraction:ye,zoom:ye},zoom:{enabled:ye,enableAxisDragging:ye,enableDoubleClickToReset:ye,enablePanning:ye,enableScrolling:ye,enableSelecting:ye,enableTwoFingerZoom:ye,keepAspectRatio:ye,anchorPointX:HL,anchorPointY:HL,axes:je("x","y","xy"),deceleration:ti(je("off","short","long"),_t),minVisibleItems:me,minVisibleItemsX:me,minVisibleItemsY:me,panKey:je("alt","ctrl","meta","shift"),scrollingStep:_t,autoScaling:{enabled:ye,padding:_t},buttons:{enabled:ye,buttons:Mc({...Mx,value:je("reset","zoom-in","zoom-out","pan-left","pan-right","pan-start","pan-end"),section:xe},"zoom button options array"),visible:je("always","zoomed","hover")}}};Hs.dataSource.requestThrottle=me;Hs.dataSource.updateThrottle=me;Hs.dataSource.updateDuringInteraction=ye;Hs.zoom.enableIndependentAxes=ye;Hs.statusBar=dn;Hs.foreground={visible:ye,text:xe,image:{url:xe,top:Le,right:Le,bottom:Le,left:Le,width:me,height:me,opacity:_t},...Yn};Hs.overrideDevicePixelRatio=Le;var Ao={id:xe,cursor:xe,visible:ye,data:$t(kg),showInLegend:ye,nodeClickRange:hD,listeners:{nodeClick:yt,nodeDoubleClick:yt},highlightStyle:{item:{...Yn,...Gs},series:{enabled:ye,dimOpacity:_t,strokeWidth:me}}};Ao.context=dn;Ao.seriesGrouping=dn;Ao.highlight={enabled:ye};var Wp={enabled:ye,shape:xx,size:me,itemStyler:yt,...Yn,...Gs,...Xo},yl={enabled:ye,formatter:yt,...pn},qJ={...yl,lineHeight:me,minimumFontSize:me,wrapping:nG,overflowStrategy:je("ellipsis","hide")},Wy={visible:ye,xLowerKey:xe,xUpperKey:xe,yLowerKey:xe,yUpperKey:xe,xLowerName:xe,xUpperName:xe,yLowerName:xe,yUpperName:xe,itemStyler:yt,cap:{visible:ye,length:me,lengthRatio:_t,...Gs,...Xo},...Gs,...Xo},la={enabled:ye,showArrow:ye,range:hD,renderer:yt,position:{type:uD,anchorTo:je("node","pointer","chart"),placement:ti(Bv,$t(Bv)),xOffset:Le,yOffset:Le},interaction:{enabled:ye}};la.position._seriesOverrideType=uD;var jp={enabled:ye,xOffset:Le,yOffset:Le,blur:me,color:Ye},dD=DM({linear:{},smooth:{tension:_t},step:{position:je("start","middle","end")}},"interpolation line options"),XJ={type:Fe(ws("area")),xKey:Fe(xe),yKey:Fe(xe),xName:xe,yName:xe,stacked:ye,stackGroup:xe,normalizedTo:Le,showInMiniChart:ye,connectMissingData:ye,interpolation:dD,label:yl,marker:Wp,tooltip:la,shadow:jp,...Ao,...Yn,...Gs,...Xo},QJ={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:e=>new zy(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{_seriesOverrideType:"node"}},fill:{$palette:"fill"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:nl,stroke:{$palette:"stroke"},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:ml,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:nl},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}}},oG={type:"series",name:"area",chartType:"cartesian",options:XJ,create:e=>new zy(e)};function gD(e,t){for(const i of t){const s=i.datum;s===void 0?de.error("undefined datum"):e.addValue(i,s)}}function pD(e,t){const{x:i,y:s}=t,{nearest:n,distanceSquared:o}=e.getQuadTree().find(i,s);if(n!==void 0)return{datum:n.value,distance:Math.sqrt(o)}}var fD=class extends aa{constructor(){super(...arguments),this.direction="vertical"}};D([E()],fD.prototype,"direction",2);var rG=class extends vl{constructor(){super(...arguments),this.groupScale=new Rp,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(e,t){const i=typeof t=="boolean"?1:.5,s=nt(this.smallestDataInterval)?this.smallestDataInterval*i:0,n=ia(e)??[NaN,NaN];return typeof t=="boolean"?n[t?0:1]-=(t?1:-1)*s:(n[0]-=s,n[1]+=s),Qs(n)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){const e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e){return Ct.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval):e.scale.bandwidth}xCoordinateRange(e){const t=this.axes[this.getCategoryDirection()],i=t.scale,s=this.getBandwidth(t)??0,n=Ct.is(i)?s*-.5:0,o=i.convert(e)+n;return[o,o+s]}yCoordinateRange(e){const i=this.axes[this.getBarDirection()].scale,s=e.map(n=>i.convert(n));if(s.length===1){const n=i.convert(0);return[Math.min(s[0],n),Math.max(s[0],n)]}return[Math.min(...s),Math.max(...s)]}updateGroupScale(e){const t=[],{groupScale:i}=this,s=this.getBandwidth(e),{index:n,visibleGroupCount:o}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let a=0;a<o;a++)t.push(String(a));return i.domain=t,i.range=[0,s??0],e instanceof Bc?i.paddingInner=e.groupPaddingInner:e instanceof Gc?(i.paddingInner=e.groupPaddingInner,i.round=i.padding!==0):i.padding=0,{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:n}}resolveKeyDirection(e){return this.getBarDirection()==="x"?e==="x"?"y":"x":e}initQuadTree(e){gD(e,this.datumNodesIter())}pickNodeClosestDatum(e){return pD(this,e)}},mD=class extends Hi{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}};D([E(bt(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],mD.prototype,"placement",2);D([E()],mD.prototype,"padding",2);var Ut=class extends fD{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Xn,this.fillPatternDefaults=new ai,this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new Ro,this.label=new mD,this.tooltip=new Ds,this.sparklineMode=!1,this.fastDataProcessing=!1}};D([E()],Ut.prototype,"xKey",2);D([E()],Ut.prototype,"xName",2);D([E()],Ut.prototype,"yKey",2);D([E()],Ut.prototype,"yName",2);D([E()],Ut.prototype,"yFilterKey",2);D([E()],Ut.prototype,"stackGroup",2);D([E()],Ut.prototype,"normalizedTo",2);D([E(ps(ar,lr,Cn))],Ut.prototype,"fill",2);D([E()],Ut.prototype,"fillGradientDefaults",2);D([E()],Ut.prototype,"fillPatternDefaults",2);D([E()],Ut.prototype,"fillOpacity",2);D([E()],Ut.prototype,"stroke",2);D([E()],Ut.prototype,"strokeWidth",2);D([E()],Ut.prototype,"strokeOpacity",2);D([E()],Ut.prototype,"lineDash",2);D([E()],Ut.prototype,"lineDashOffset",2);D([E()],Ut.prototype,"cornerRadius",2);D([E()],Ut.prototype,"crisp",2);D([E()],Ut.prototype,"itemStyler",2);D([E()],Ut.prototype,"shadow",2);D([E()],Ut.prototype,"label",2);D([E()],Ut.prototype,"tooltip",2);D([E()],Ut.prototype,"sparklineMode",2);D([E()],Ut.prototype,"fastDataProcessing",2);function aG(e,t,i,s){if(t!=null){const[n,o]=t;if(n!==0||o!==1)return!1}if(Ct.is(e)){const n=e.calcBandwidth(s)-e.calcBandwidth(i);if(n>0&&n<1)return!1}return!0}var cw=e=>IM(e.yValue??0);function Jg(e,t,i){const{startingX:s,startingY:n}=eee(e,t);return{isVertical:e,calculate:(r,a)=>{let c=e?r.x:s,h=e?n:r.y,d=e?r.width:0,p=e?0:r.height;const{opacity:f=1}=r;a&&(isNaN(c)||isNaN(h))&&({x:c,y:h}=a,d=e?a.width:0,p=e?0:a.height,e&&!cw(a)?h+=a.height:!e&&cw(a)&&(c+=a.width));let v;return r.clipBBox==null?v=void 0:cw(r)?v=e?new Me(c,h-p,d,p):new Me(c-d,h,d,p):v=new Me(c,h,d,p),{x:c,y:h,width:d,height:p,clipBBox:v,opacity:f}},mode:i}}function JJ(e,t){return{isVertical:e,calculate:i=>({x:e?i.x:i.x+i.width/2,y:e?i.y+i.height/2:i.y,width:e?i.width:0,height:e?0:i.height,clipBBox:i.clipBBox,opacity:i.opacity??1}),mode:t}}function ep(e){const t=o=>o==null||isNaN(o.x)||isNaN(o.y);return{toFn:(o,r,a)=>a==="removed"&&o.datum==null&&e.mode==="fade"?{...tp(o,r),opacity:0}:a==="removed"||t(r)?e.calculate(r,o.previousDatum):{x:r.x,y:r.y,width:r.width,height:r.height,clipBBox:r.clipBBox,opacity:r.opacity??1},fromFn:(o,r,a)=>{a==="updated"&&t(r)?a="removed":a==="updated"&&t(o.previousDatum)&&(a="added");let c;a==="added"&&o.previousDatum==null&&e.mode==="fade"?c={...tp(o,r),opacity:0}:a==="unknown"||a==="added"?c=e.calculate(r,o.previousDatum):c={x:o.x,y:o.y,width:o.width,height:o.height,clipBBox:o.clipBBox,opacity:o.opacity??1};const h=ho[a];return{...c,phase:h}},applyFn:(o,r,a)=>{var c;o.setProperties(r),o.crisp=a==="end"&&(((c=o.datum)==null?void 0:c.crisp)??!1)}}}function eee(e,t){const i=t[e?"y":"x"];let s=1/0,n=0;return i?(e?n=i.scale.convert(Ct.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(Ct.is(i.scale)?0:Math.min(...i.range)),{startingX:s,startingY:n}):{startingX:s,startingY:n}}function tp(e,{x:t,y:i,width:s,height:n,clipBBox:o,opacity:r=1}){var a;return{x:t,y:i,width:s,height:n,clipBBox:o,opacity:r,crisp:((a=e.datum)==null?void 0:a.crisp)??!1}}function vD(e,t){if(t===void 0)return;const{x:i,y:s,width:n,height:o}=t;return ri.toCanvas(e.contentGroup,new Me(i,s,n,o))}function lG(e,t,i){if(t.enabled&&i){const{x:s,y:n,text:o,textAlign:r,textBaseline:a}=i,{color:c,fontStyle:h,fontWeight:d,fontSize:p,fontFamily:f}=t;e.setProperties({visible:!0,x:s,y:n,text:o,fill:c,fontStyle:h,fontWeight:d,fontSize:p,fontFamily:f,textAlign:r,textBaseline:a})}else e.visible=!1}var tee={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function cG({isUpward:e,isVertical:t,placement:i,padding:s=0,rect:n}){let o=n.x+n.width/2,r=n.y+n.height/2,a="center",c="middle";if(i!=="inside-center"){const h=(e?1:-1)*(t?-1:1),{direction:d,textAlignment:p}=tee[i],f=(d+1)*.5;if(t){const v=e?n.y+n.height:n.y,y=n.height*h;r=v+y*f+s*p*h,c=p===h?"top":"bottom"}else{const v=e?n.x:n.x+n.width,y=n.width*h;o=v+y*f+s*p*h,a=p===h?"left":"right"}}return{x:o,y:r,textAlign:a,textBaseline:c}}var iee=0,see=1,nee=2,oee=3,ree=4,Up=class extends rG{constructor(e){super({moduleCtx:e,directionKeys:Hc,directionNames:Vc,categoryKey:"xValue",pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:tp,label:ra}}),this.properties=new Ut,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return this.properties.yFilterKey!=null&&(this.seriesGrouping==null||this.seriesGrouping.stackIndex===0)}async processData(e){var N,O,B,V,U,se;if(!this.properties.isValid()||!this.data)return;const{xKey:t,yKey:i,yFilterKey:s,normalizedTo:n,fastDataProcessing:o}=this.properties,{seriesGrouping:{groupIndex:r=this.id}={},data:a}=this,c=((N=this.seriesGrouping)==null?void 0:N.groupCount)??0,d=(((O=this.seriesGrouping)==null?void 0:O.stackCount)??0)>=1||n!=null,p=!o||c>1||d,f=!this.ctx.animationManager.isSkipped(),v=(B=this.getCategoryAxis())==null?void 0:B.scale,y=(V=this.getValueAxis())==null?void 0:V.scale,{isContinuousX:b,xScaleType:w,yScaleType:S}=this.getScaleInformation({xScale:v,yScale:y}),M=`bar-stack-${r}-yValues`,R=`${M}-trailing`,A=this.visible?{}:{forceValue:0},T=[vo(t,w,{id:"xValue"}),Je(i,S,{id:"yValue-raw",invalidValue:null,...A})];this.crossFilteringEnabled()&&T.push(Je(s,S,{id:"yFilterValue",invalidValue:null,...A})),d&&T.push(...qa(i,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:M,separateNegative:!0,...A},S),...qa(i,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:R,separateNegative:!0,...A},S)),b&&T.push(S1,b1),nt(n)&&T.push(Ey([M,R],Math.abs(n))),f&&this.processedData&&T.push(Ih(this.id,this.processedData)),(f||!p)&&T.push(Th());const{dataModel:F,processedData:P}=await this.requestDataModel(e,a,{props:T,groupByKeys:p,groupByData:!p});this.dataAggregationFilters=this.aggregateData(F,P),this.smallestDataInterval=(U=P.reduced)==null?void 0:U.smallestKeyInterval,this.largestDataInterval=(se=P.reduced)==null?void 0:se.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){var r;const{processedData:t,dataModel:i}=this;if(i==null||t==null)return[];if(e===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue"),c=i.getDomain(this,"xValue","key",t);return(a==null?void 0:a.def.type)==="key"&&a.def.valueType==="category"?c:this.padBandExtent(c)}const s=(r=this.dataModel)!=null&&r.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw";let n=this.domainForClippedRange("y",[s],"xValue",!0);const o=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",t):void 0;if(o!=null&&(n=[Math.min(n[0],o[0]),Math.max(n[1],o[1])]),this.getValueAxis()instanceof Lh)return Qs(n);{const a=Number.isFinite(n[1]-n[0])?[Math.min(0,n[0]),Math.max(0,n[1])]:[];return Qs(a)}}getSeriesRange(e,t){var o;const i=(o=this.dataModel)!=null&&o.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw",[s,n]=this.domainForVisibleRange("y",[i],"xValue",t,!0);return[Math.min(s,0),Math.max(n,0)]}getVisibleItems(e,t,i){var n;const s=(n=this.dataModel)!=null&&n.hasColumnById(this,"yValue-end")?"yValue-end":"yValue-raw";return this.countVisibleItems("xValue",[s],e,t,i)}aggregateData(e,t){}createNodeData(){var G;const{dataModel:e,processedData:t,groupScale:i,dataAggregationFilters:s}=this,n=this.getCategoryAxis(),o=this.getValueAxis();if(!e||!t||!n||!o||!this.properties.isValid())return;const r=(G=t.dataSources)==null?void 0:G.get(this.id);if(r==null)return;const a=n.scale,c=o.scale,{xKey:h,yKey:d,xName:p,yName:f,legendItemName:v,label:y}=this.properties,b=o.isReversed(),{barWidth:w,groupIndex:S}=this.updateGroupScale(n),M=i.convert(String(S)),R=Ct.is(a)?w*-.5:0,A=e.resolveKeysById(this,"xValue",t),T=e.resolveColumnById(this,"yValue-raw",t),F=this.crossFilteringEnabled()?e.resolveColumnById(this,"yFilterValue",t):void 0,P=!this.ctx.animationManager.isSkipped(),N=W=>a.convert(A[W])+M+R,O=this.properties.crisp??aG(n==null?void 0:n.scale,n==null?void 0:n.visibleRange,this.smallestDataInterval,this.largestDataInterval),B=c.convert(0),V=({datum:W,datumIndex:Y,valueIndex:X,xValue:ee,yValue:fe,cumulativeValue:le,phantom:be,currY:ue,prevY:ae,x:we,width:Re,isPositive:Ee,yRange:_e,labelText:We,opacity:Ve,crossScale:kt=1})=>{const ft=Ee!==b,Fi=c.convert(ue),_i=c.convert(ae),Mt=c.convert(_e),mt=this.getBarDirection()==="x",Di=Re*.5*(1-kt),li={x:mt?Math.min(Fi,_i):we+Di,y:mt?we+Di:Math.min(Fi,_i),width:mt?Math.abs(_i-Fi):Re*kt,height:mt?Re*kt:Math.abs(_i-Fi)},Cl=new Me(li.x,li.y,li.width,li.height),dr={x:mt?Math.min(B,Mt):we+Di,y:mt?we+Di:Math.min(B,Mt),width:mt?Math.abs(B-Mt):Re*kt,height:mt?Re*kt:Math.abs(B-Mt)},wt=this.shouldFlipXY()?li.height:li.width;return{series:this,itemId:be?Xi(d,be):d,datum:W,datumIndex:Y,valueIndex:X,cumulativeValue:le,phantom:be,xValue:ee,yValue:fe,yKey:d,xKey:h,capDefaults:{lengthRatioMultiplier:wt,lengthMax:wt},x:dr.x,y:dr.y,width:dr.width,height:dr.height,midPoint:{x:li.x+li.width/2,y:li.y+li.height/2},opacity:Ve,topLeftCornerRadius:mt!==ft,topRightCornerRadius:ft,bottomRightCornerRadius:mt===ft,bottomLeftCornerRadius:!ft,clipBBox:Cl,crisp:O,label:We!=null?{text:We,...cG({isUpward:ft,isVertical:!mt,placement:y.placement,padding:y.padding,rect:li})}:void 0,missing:fe==null,focusable:!be}},U=[],se=[],Ce=[],Se=(W,Y,X,ee,fe,le,be,ue)=>{const ae=A[W];if(ae==null)return;const we=T[W],Re=F!=null?Number(F[W]):void 0,Ee=we>=0&&!Object.is(we,-0);if(!Number.isFinite(le)||Re!=null&&!Number.isFinite(Re))return;const _e=we!=null?this.getLabelText(this.properties.label,{datum:r[W],value:Re??we,xKey:h,yKey:d,xName:p,yName:f,legendItemName:v}):void 0,We=Re!=null&&Re>we,Ve=V({datum:r[W],datumIndex:W,valueIndex:Y,xValue:ae,yValue:Re??we,cumulativeValue:Re??le,phantom:!1,currY:Re!=null?fe+Re:le,prevY:fe,x:X,width:ee,isPositive:Ee,yRange:Math.max(fe+(Re??-1/0),be),labelText:_e,opacity:ue,crossScale:We?.6:void 0});if(se.push(Ve),Ce.push(Ve),Re!=null){const kt=V({datum:r[W],datumIndex:W,valueIndex:Y,xValue:ae,yValue:Re,cumulativeValue:Re,phantom:!0,currY:le,prevY:fe,x:X,width:ee,isPositive:Ee,yRange:be,labelText:void 0,opacity:ue,crossScale:void 0});U.push(kt)}},[H,q]=a.range,ie=q-H,he=s==null?void 0:s.find(W=>W.maxRange>ie);if(t.type==="grouped"){const W=w,Y=e.hasColumnById(this,"yValue-start"),X=Y?e.resolveColumnById(this,"yValue-start",t):void 0,ee=Y?e.resolveColumnById(this,"yValue-end",t):void 0,fe=Y?e.resolveProcessedDataIndexById(this,"yValue-range"):-1;for(const{datumIndex:le,valueIndex:be,group:{aggregation:ue}}of e.forEachGroupDatum(this,t)){const ae=N(le),we=T[le],Re=we>=0&&!Object.is(we,-0),Ee=Y?Number(X==null?void 0:X[le]):0,_e=Y?Number(ee==null?void 0:ee[le]):we;let We=_e;Y&&(We=ue[fe][Re?1:0]),Se(le,be,ae,W,Ee,_e,We,1)}}else if(he==null){const W=w;let[Y,X]=this.visibleRange("xValue",n.range);t.input.count<1e3&&(Y=0,X=t.input.count);for(let ee=Y;ee<X;ee+=1){const fe=N(ee),le=Number(T[ee]);Se(ee,0,fe,W,0,le,le,1)}}else{const{indexData:W,indices:Y}=he,[X,ee]=this.visibleRange("xValue",n.range,Y);for(let fe=X;fe<ee;fe+=1){const le=fe*ree,be=W[le+iee],ue=W[le+see],ae=W[le+nee],we=W[le+oee];if(be===-1)continue;const Re=N((be+ue)/2|0),Ee=Math.abs(N(ue)-N(be))+w,_e=A[we]!=null?Number(T[we]):NaN,We=A[ae]!=null?Number(T[ae]):NaN;if(_e>0){const Ve=We>=0?We/_e:1;Se(we,0,Re,Ee,0,_e,_e,Ve)}if(We<0){const Ve=_e<=0?_e/We:1;Se(ae,1,Re,Ee,0,We,We,Ve)}}}return{itemId:d,nodeData:U.length>0?[...U,...se]:se,labelData:Ce,scales:this.calculateScaling(),visible:this.visible||P,groupScale:this.getScaling(this.groupScale)}}nodeFactory(){return new Ms}getHighlightData(e,t){const i=e.find(s=>s.datum===t.datum&&!s.phantom);return i!=null?[i]:void 0}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>this.getDatumId(t))}getItemBaseStyle(e){const{properties:t}=this,{cornerRadius:i,fillGradientDefaults:s,fillPatternDefaults:n}=t,o=e?t.highlightStyle.item:void 0;return Yo({fill:(o==null?void 0:o.fill)??t.fill,fillOpacity:(o==null?void 0:o.fillOpacity)??t.fillOpacity,stroke:(o==null?void 0:o.stroke)??t.stroke,strokeWidth:(o==null?void 0:o.strokeWidth)??this.getStrokeWidth(t.strokeWidth),strokeOpacity:(o==null?void 0:o.strokeOpacity)??t.strokeOpacity,lineDash:(o==null?void 0:o.lineDash)??t.lineDash??[],lineDashOffset:(o==null?void 0:o.lineDashOffset)??t.lineDashOffset,cornerRadius:i},s,n)}getItemStyleOverrides(e,t,i,s,n,o){const{id:r,properties:a}=this,{xKey:c,yKey:h,itemStyler:d,fillGradientDefaults:p,fillPatternDefaults:f}=a;if(d==null)return;const{xDomain:v,yDomain:y}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")})),b=this.cachedDatumCallback(Xi(e,o?"highlight":"node"),()=>this.callWithContext(d,{seriesId:r,...Za(t,c,h,v,y),datum:t,xValue:i,yValue:s,highlighted:o,...n}));return Yo(b,p,f)}updateDatumNodes(e){if(!this.properties.isValid())return;const{shadow:t}=this.properties,i=this.getCategoryDirection()==="x",s=this.getItemBaseStyle(e.isHighlight),n=this.getShapeFillBBox();e.datumSelection.each((o,r)=>{var h,d;const a=this.getItemStyleOverrides(String(r.datumIndex),r.datum,r.xValue,r.yValue,s,e.isHighlight);o.opacity=r.opacity??0,Ec(o,s,a,n);const c=(a==null?void 0:a.cornerRadius)??s.cornerRadius;o.topLeftCornerRadius=r.topLeftCornerRadius?c:0,o.topRightCornerRadius=r.topRightCornerRadius?c:0,o.bottomRightCornerRadius=r.bottomRightCornerRadius?c:0,o.bottomLeftCornerRadius=r.bottomLeftCornerRadius?c:0,o.visible=i?(((h=r.clipBBox)==null?void 0:h.width)??r.width)>0:(((d=r.clipBBox)==null?void 0:d.height)??r.height)>0,o.crisp=r.crisp,o.fillShadow=t})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=1})}updateLabelNodes(e){e.labelSelection.each((t,i)=>{lG(t,this.properties.label,i.label)})}getTooltipContent(e){var M;const{id:t,dataModel:i,processedData:s,properties:n}=this,{xKey:o,xName:r,yKey:a,yName:c,legendItemName:h,stackGroup:d,tooltip:p}=n,f=this.getCategoryAxis(),v=this.getValueAxis();if(!i||!s||!f||!v)return;const y=(M=s.dataSources.get(this.id))==null?void 0:M[e],b=i.resolveKeysById(this,"xValue",s)[e],w=i.resolveColumnById(this,"yValue-raw",s)[e];if(b==null)return;const S=this.getItemBaseStyle(!1);return Object.assign(S,this.getItemStyleOverrides(String(e),y,b,w,S,!1)),p.formatTooltip(this.properties,{heading:f.formatDatum(b),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:a,value:v.formatDatum(w)}]},{seriesId:t,datum:y,title:c,xKey:o,xName:r,yKey:a,yName:c,legendItemName:h,stackGroup:d,...S,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:s,strokeOpacity:n,lineDash:o,lineDashOffset:r,fillGradientDefaults:a,fillPatternDefaults:c}=this.properties;return{marker:Yo({fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:s,strokeOpacity:n,strokeWidth:i,lineDash:o,lineDashOffset:r},a,c)}}getLegendData(e){const{showInLegend:t}=this.properties;if(e!=="category"||!this.properties.isValid())return[];const{id:i,ctx:{legendManager:s},visible:n}=this,{yKey:o,yName:r,legendItemName:a}=this.properties;return[{legendType:"category",id:i,itemId:o,seriesId:i,enabled:n&&s.getItemEnabled({seriesId:i,itemId:o}),label:{text:a??r??o},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!t}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t,annotationSelections:i}){const s=ep(Jg(this.isVertical(),this.axes,"normal"));ii(this.id,"nodes",this.ctx.animationManager,[e],s),ct(this,"labels",this.ctx.animationManager,t),ct(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(e){var d,p,f,v,y;const{datumSelection:t,labelSelection:i,annotationSelections:s,previousContextData:n}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);let o=(f=(p=(d=this.processedData)==null?void 0:d.reduced)==null?void 0:p.diff)==null?void 0:f[this.id];o==null&&((y=(v=this.processedData)==null?void 0:v.reduced)==null?void 0:y.diff)!=null&&(o={changed:!0,added:new Set(Array.from(t,({datum:b})=>this.getDatumId(b))),updated:new Set,removed:new Set,moved:new Set});const r=n==null?"fade":"normal",a=ep(Jg(this.isVertical(),this.axes,r));ii(this.id,"nodes",this.ctx.animationManager,[t],a,(b,w)=>this.getDatumId(w),o);const c=n!=null&&(!qu(e.contextData.scales.x,n.scales.x)||!qu(e.contextData.scales.y,n.scales.y)||!qu(e.contextData.groupScale,e.previousContextData.groupScale));(((o==null?void 0:o.changed)??!1)||c)&&(ct(this,"labels",this.ctx.animationManager,i),ct(this,"annotations",this.ctx.animationManager,...s))}getDatumId(e){return Xi(e.xValue,e.valueIndex,e.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){var i;const t=(i=this.contextNodeData)==null?void 0:i.nodeData[e].clipBBox;return vD(this,t)}};Up.className="BarSeries";Up.type="bar";var Yp={type:Fe(ws("bar")),xKey:Fe(xe),yKey:Fe(xe),xName:xe,yName:xe,direction:je("horizontal","vertical"),grouped:ye,stacked:ye,stackGroup:xe,normalizedTo:Le,legendItemName:xe,showInMiniChart:ye,cornerRadius:me,itemStyler:yt,crisp:ye,label:{...yl,placement:je("inside-center","inside-start","inside-end","outside-start","outside-end"),padding:me},errorBar:Wy,shadow:jp,tooltip:la,...Ao,...Yn,...Gs,...Xo};Yp.pickOutsideVisibleMinorAxis=ye;Yp.fastDataProcessing=ye;Yp.focusPriority=Le;Yp.sparklineMode=ye;var uG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new Up(e),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:B1,themeTemplate:{series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:nl,fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$if:[{$or:[{$eq:[{$path:"./placement"},"outside-start"]},{$eq:[{$path:"./placement"},"outside-end"]}]},{$ref:"textColor"},{$ref:"backgroundColor"}]},placement:"inside-center"},shadow:{enabled:!1,color:ml,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}}},hG={type:"series",name:"bar",chartType:"cartesian",options:Yp,create:e=>new Up(e)},yD=class extends Ji{constructor(){super(...arguments),this.maxSize=30}};D([E(),De()],yD.prototype,"maxSize",2);D([E(),De()],yD.prototype,"domain",2);var dG=class extends Hi{constructor(){super(...arguments),this.placement="top"}};D([E()],dG.prototype,"placement",2);var Tt=class extends aa{constructor(){super(...arguments),this.label=new dG,this.tooltip=new Ds,this.marker=new yD}};D([E()],Tt.prototype,"xKey",2);D([E()],Tt.prototype,"yKey",2);D([E()],Tt.prototype,"sizeKey",2);D([E()],Tt.prototype,"labelKey",2);D([E()],Tt.prototype,"xFilterKey",2);D([E()],Tt.prototype,"yFilterKey",2);D([E()],Tt.prototype,"sizeFilterKey",2);D([E()],Tt.prototype,"xName",2);D([E()],Tt.prototype,"yName",2);D([E()],Tt.prototype,"sizeName",2);D([E()],Tt.prototype,"labelName",2);D([E()],Tt.prototype,"title",2);D([xt("marker.shape")],Tt.prototype,"shape",2);D([xt("marker.size")],Tt.prototype,"size",2);D([xt("marker.maxSize")],Tt.prototype,"maxSize",2);D([xt("marker.domain",{optional:!0})],Tt.prototype,"domain",2);D([xt("marker.fillGradientDefaults")],Tt.prototype,"fillGradientDefaults",2);D([xt("marker.fillPatternDefaults")],Tt.prototype,"fillPatternDefaults",2);D([xt("marker.fill",{optional:!0})],Tt.prototype,"fill",2);D([xt("marker.fillOpacity")],Tt.prototype,"fillOpacity",2);D([xt("marker.stroke",{optional:!0})],Tt.prototype,"stroke",2);D([xt("marker.strokeWidth")],Tt.prototype,"strokeWidth",2);D([xt("marker.strokeOpacity")],Tt.prototype,"strokeOpacity",2);D([xt("marker.lineDash")],Tt.prototype,"lineDash",2);D([xt("marker.lineDashOffset")],Tt.prototype,"lineDashOffset",2);D([xt("marker.itemStyler",{optional:!0})],Tt.prototype,"itemStyler",2);D([E()],Tt.prototype,"label",2);D([E()],Tt.prototype,"tooltip",2);var aee=class extends J0{constructor(e,t,i,s){super(e,t,i,s),this.sizeKey=s.properties.sizeKey}},jy=class extends vl{constructor(e){super({moduleCtx:e,directionKeys:Hc,directionNames:Vc,categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:ra,marker:Vp},usesPlacedLabels:!0,clipFocusBox:!1}),this.NodeEvent=aee,this.properties=new Tt,this.sizeScale=new yo}get pickModeAxis(){return"main-category"}async processData(e){var S,M;if(!this.properties.isValid()||this.data==null||!this.visible)return;const t=(S=this.axes.x)==null?void 0:S.scale,i=(M=this.axes.y)==null?void 0:M.scale,{xScaleType:s,yScaleType:n}=this.getScaleInformation({xScale:t,yScale:i}),o=this.sizeScale.type,{xKey:r,yKey:a,sizeKey:c,xFilterKey:h,yFilterKey:d,sizeFilterKey:p,labelKey:f,marker:v}=this.properties,{dataModel:y,processedData:b}=await this.requestDataModel(e,this.data,{props:[Je(r,s,{id:"xValue"}),Je(a,n,{id:"yValue"}),...h!=null?[Je(h,s,{id:"xFilterValue"})]:[],...d!=null?[Je(d,n,{id:"yFilterValue"})]:[],...p!=null?[Je(p,o,{id:"sizeFilterValue"})]:[],Je(c,o,{id:"sizeValue"}),...f?[Je(f,"band",{id:"labelValue"})]:[]]}),w=y.resolveProcessedDataIndexById(this,"sizeValue");this.sizeScale.domain=v.domain??b.domain.values[w]??[],this.animationState.transition("updateData")}xCoordinateRange(e,t,i){const{properties:s,sizeScale:n}=this,{size:o,sizeKey:r}=s,a=this.axes.x.scale.convert(e),c=r!=null?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,d=.5*(c!=null?n.convert(c[i]):o)*t;return[a-d,a+d]}yCoordinateRange(e,t,i){const{properties:s,sizeScale:n}=this,{size:o,sizeKey:r}=s,a=this.axes.y.scale.convert(e[0]),c=r!=null?this.dataModel.resolveColumnById(this,"sizeValue",this.processedData):void 0,d=.5*(c!=null?n.convert(c[i]):o)*t;return[a-d,a+d]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const s={x:"xValue",y:"yValue"},n=s[e],o=t.resolveProcessedDataDefById(this,n),r=t.getDomain(this,n,"value",i);if((o==null?void 0:o.def.type)==="value"&&(o==null?void 0:o.def.valueType)==="category")return r;const c=s[e==="x"?"y":"x"],h=this.domainForClippedRange(e,[n],c,!1);return Qs(ia(h))}getSeriesRange(e,t){return this.domainForVisibleRange("y",["yValue"],"xValue",t,!1)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["yValue"],e,t,i)}createNodeData(){var G;const{axes:e,dataModel:t,processedData:i,sizeScale:s,visible:n}=this,{xKey:o,yKey:r,sizeKey:a,xFilterKey:c,yFilterKey:h,sizeFilterKey:d,labelKey:p,xName:f,yName:v,sizeName:y,labelName:b,label:w,marker:S}=this.properties,{placement:M}=w,R=Bi.anchor(S.shape),A=e.x,T=e.y;if(!(t&&i&&n&&A&&T))return;const F=t.resolveColumnById(this,"xValue",i),P=t.resolveColumnById(this,"yValue",i),N=a!=null?t.resolveColumnById(this,"sizeValue",i):void 0,O=p!=null?t.resolveColumnById(this,"labelValue",i):void 0,B=c!=null?t.resolveColumnById(this,"xFilterValue",i):void 0,V=h!=null?t.resolveColumnById(this,"yFilterValue",i):void 0,U=d!=null?t.resolveColumnById(this,"sizeFilterValue",i):void 0,se=A.scale,Ce=T.scale,Se=(se.bandwidth??0)/2,H=(Ce.bandwidth??0)/2,q=[];s.range=[S.size,S.maxSize];const ie=w.getFont(),he=qr.getMeasurer({font:ie});return(G=i.dataSources.get(this.id))==null||G.forEach((W,Y)=>{const X=F[Y],ee=P[Y],fe=N==null?void 0:N[Y],le=se.convert(X)+Se,be=Ce.convert(ee)+H;let ue;B!=null&&V!=null&&(ue=B[Y]===X&&V[Y]===ee,U!=null&&ue&&(ue=U[Y]===fe));const ae=this.getLabelText(w,{value:O!=null?O[Y]:ee,datum:W,xKey:o,yKey:r,sizeKey:a,labelKey:p,xName:f,yName:v,sizeName:y,labelName:b}),we=he.measureText(String(ae)),Re=fe!=null?s.convert(fe):S.size;q.push({series:this,itemId:r,yKey:r,xKey:o,datum:W,datumIndex:Y,xValue:X,yValue:ee,sizeValue:fe,point:{x:le,y:be,size:Re},midPoint:{x:le,y:be},label:{text:ae,...we},anchor:R,placement:M,selected:ue})}),{itemId:r,nodeData:q,labelData:q,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e;return this.isLabelEnabled()?((e=this.contextNodeData)==null?void 0:e.labelData)??[]:[]}updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?t:[];return i.update(s,void 0,n=>Xi([n.xValue,n.yValue,n.sizeValue,n.label.text]))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,sizeKey:o,labelKey:r,marker:a}=this.properties,c=Qe(i&&this.properties.highlightStyle.item,a.getStyle());this.sizeScale.range=[a.size,a.maxSize];const h=this.getShapeFillBBox();t.each((d,p)=>{this.updateMarkerStyle(a,d,p.datum,p.point,{xKey:s,yKey:n,sizeKey:o,labelKey:r},i,c,h,{selected:p.selected})}),i||this.properties.marker.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map(t=>({...t.datum,point:{x:t.x,y:t.y,size:t.datum.point.size}})),t=>{t.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{label:t}=this.properties;e.labelSelection.each((i,s)=>{var n,o;i.text=s.label.text,i.fill=t.color,i.x=((n=s.point)==null?void 0:n.x)??0,i.y=((o=s.point)==null?void 0:o.y)??0,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=t.fontSize,i.fontFamily=t.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(e){var B,V;const{id:t,dataModel:i,processedData:s,axes:n,properties:o}=this,{xKey:r,xName:a,yKey:c,yName:h,sizeKey:d,sizeName:p,labelKey:f,labelName:v,title:y,tooltip:b,marker:w}=o,S=n.x,M=n.y;if(!i||!s||!S||!M)return;const R=(B=s.dataSources.get(this.id))==null?void 0:B[e],A=i.resolveColumnById(this,"xValue",s)[e],T=i.resolveColumnById(this,"yValue",s)[e],F=(V=this.contextNodeData)==null?void 0:V.nodeData[e];if(A==null||F==null)return;const P=[{label:a,fallbackLabel:r,value:S.formatDatum(A)},{label:h,fallbackLabel:c,value:M.formatDatum(T)}];if(d!=null){const U=i.resolveColumnById(this,"sizeValue",s)[e];P.push({label:p,fallbackLabel:d,value:String(U)})}const N=w.getStyle(),O=this.getMarkerStyle(w,R,{xKey:r,yKey:c,sizeKey:d,labelKey:f,highlighted:!0},!1,void 0,N);return b.formatTooltip(this.properties,{title:y,symbol:this.legendItemSymbol(),data:P},{seriesId:t,datum:R,title:c,xKey:r,xName:a,yKey:c,yName:h,sizeKey:d,sizeName:p,labelKey:f,labelName:v,...O,...this.getModuleTooltipParams()})}legendItemSymbol(){return{marker:this.getMarkerStyle(this.properties.marker)}}getLegendData(){if(!this.properties.isValid())return[];const{id:e,ctx:{legendManager:t},visible:i}=this,{yKey:s,yName:n,title:o}=this.properties;return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:i&&t.getItemEnabled({seriesId:e,itemId:s}),label:{text:o??n??s},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady({markerSelection:e,labelSelection:t}){nD(this,this.ctx.animationManager,e),ct(this,"labels",this.ctx.animationManager,t)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Ne}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,sizeKey:s,labelKey:n,marker:o}=this.properties;return this.getMarkerStyle(o,e,{xKey:t,yKey:i,sizeKey:s,labelKey:n},!1,e.point.size)}computeFocusBounds(e){return _p(this,e)}};jy.className="BubbleSeries";jy.type="bubble";var lee={type:Fe(ws("bubble")),xKey:Fe(xe),yKey:Fe(xe),sizeKey:Fe(xe),labelKey:xe,xName:xe,yName:xe,sizeName:xe,labelName:xe,title:xe,domain:$t(Le),maxSize:me,showInMiniChart:ye,label:{placement:je("top","right","bottom","left"),...yl},tooltip:la,...Ao,...il(Wp,["enabled"])},cee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:e=>new jy(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:nl,fillOpacity:.8,tooltip:{position:{_seriesOverrideType:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}}}}},gG={type:"series",name:"bubble",chartType:"cartesian",options:lee,create:e=>new jy(e)},vi=class extends aa{constructor(){super(...arguments),this.fillGradientDefaults=new Xn,this.fillPatternDefaults=new ai,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new Ro,this.label=new Hi,this.tooltip=new Ds}};D([E()],vi.prototype,"xKey",2);D([E()],vi.prototype,"yKey",2);D([E()],vi.prototype,"xName",2);D([E()],vi.prototype,"yName",2);D([E(ps(ar,lr,Cn))],vi.prototype,"fill",2);D([E()],vi.prototype,"fillGradientDefaults",2);D([E()],vi.prototype,"fillPatternDefaults",2);D([E()],vi.prototype,"fillOpacity",2);D([E()],vi.prototype,"stroke",2);D([E()],vi.prototype,"strokeWidth",2);D([E()],vi.prototype,"strokeOpacity",2);D([E()],vi.prototype,"lineDash",2);D([E()],vi.prototype,"lineDashOffset",2);D([E()],vi.prototype,"cornerRadius",2);D([E()],vi.prototype,"areaPlot",2);D([E()],vi.prototype,"bins",2);D([E(bt(["count","sum","mean"],"a histogram aggregation"))],vi.prototype,"aggregation",2);D([E()],vi.prototype,"binCount",2);D([E()],vi.prototype,"shadow",2);D([E()],vi.prototype,"label",2);D([E()],vi.prototype,"tooltip",2);var VL=10,Uy=class extends vl{constructor(e){super({moduleCtx:e,directionKeys:Hc,directionNames:Vc,categoryKey:void 0,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:tp,label:ra}}),this.properties=new vi,this.calculatedBins=[]}deriveBins(e){const t=d0(e[0],e[1],VL),i=_g(e[0],e[1],VL),[s]=t,n=o=>[o,o+i];return[[s-i,s],...t.map(n)]}calculateNiceBins(e,t){const i=Math.floor(e[0]),s=e[1],n=t||1,{start:o,binSize:r}=this.calculateNiceStart(i,s,n);return this.getBins(o,s,r,n)}getBins(e,t,i,s){const n=[],o=this.calculatePrecision(i);for(let r=0;r<s;r++){const a=Math.round((e+r*i)*o)/o;let c=Math.round((e+(r+1)*i)*o)/o;r===s-1&&(c=Math.max(c,t)),n[r]=[a,c]}return n}calculatePrecision(e){let t=10;if(isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){const s=Math.abs(t-e)/i,n=Math.floor(Math.log10(s)),o=Math.pow(10,n);return{start:Math.floor(e/o)*o,binSize:s}}async processData(e){var p,f;this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:t,yKey:i,areaPlot:s,aggregation:n}=this.properties,o=(p=this.axes.x)==null?void 0:p.scale,r=(f=this.axes.y)==null?void 0:f.scale,{xScaleType:a,yScaleType:c}=this.getScaleInformation({yScale:r,xScale:o}),h=[vo(t,a),w1];if(i){let v=vx("groupAgg");n==="count"||(n==="sum"?v=u1("groupAgg"):n==="mean"&&(v=h1("groupAgg"))),s&&(v=yx("groupAgg",v)),h.push(Je(i,c,{invalidValue:void 0}),v)}else{h.push(v1("count"));let v=vx("groupAgg");s&&(v=yx("groupAgg",v)),h.push(v)}const d=v=>{const y=Qs(v.domain.keys[0]);if(y.length===0)return v.domain.groups=[],()=>[];const b=Hn(this.properties.binCount)?this.calculateNiceBins(y,this.properties.binCount):this.properties.bins??this.deriveBins(y),w=b.length;return this.calculatedBins=[...b],S=>{let M=S[0];if(wh(M)&&(M=M.getTime()),!Hn(M))return[];for(let R=0;R<w;R++){const A=b[R];if(M>=A[0]&&M<A[1]||R===w-1&&M<=A[1])return A}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&h.push(Ih(this.id,this.processedData,!1)),await this.requestDataModel(e,this.data,{props:h,groupByFn:d}),this.animationState.transition("updateData")}xCoordinateRange(){return[NaN,NaN]}yCoordinateRange(){return[NaN,NaN]}getSeriesDomain(e){var r,a,c;const{processedData:t,dataModel:i}=this;if(!t||!i||!this.calculatedBins.length)return[];const s=i.getDomain(this,"groupAgg","aggregate",t),n=(r=this.calculatedBins)==null?void 0:r[0][0],o=(c=this.calculatedBins)==null?void 0:c[(((a=this.calculatedBins)==null?void 0:a.length)??0)-1][1];return Qs(e==="x"?[n,o]:s)}getSeriesRange(e,[t,i]){const{dataModel:s,processedData:n}=this;if(!s||(n==null?void 0:n.type)!=="grouped")return[NaN,NaN];const o=this.axes.x.scale,r=0;let a=-1/0;return n.groups.forEach(({keys:c,aggregation:h})=>{const[[d,p]=[0,0]]=h,[f,v]=c,[y,b]=xi([o.convert(f),o.convert(v)]);if(b>=t&&y<=i){const w=d+p;a=Math.max(a,w)}}),r>a?[NaN,NaN]:[r,a]}createNodeData(){const{id:e,axes:t,processedData:i,dataModel:s}=this,n=t.x,o=t.y;if(!n||!o||!s)return;const{scale:r}=n,{scale:a}=o,{xKey:c,yKey:h,xName:d,yName:p}=this.properties,f=this.properties.label.formatter,v=[],y={itemId:this.properties.yKey??this.id,nodeData:v,labelData:v,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return!this.visible||i==null||i.type!=="grouped"||(i.groups.forEach((b,w)=>{const{keys:S,datumIndices:M,aggregation:R}=b,[[A,T]=[0,0]]=R,F=M.length,P=S,[N,O]=P,B=[...s.forEachDatum(this,i,b)],V=r.convert(N),U=r.convert(O),se=A+T,Ce=a.convert(0),Se=a.convert(se),H=Math.abs(U-V),q=Math.abs(Se-Ce),ie=Math.min(V,U),he=Math.min(Ce,Se);let G;se!==0&&(G={x:ie+H/2,y:he+q/2,text:this.cachedDatumCallback(Xi(w,"label"),()=>f==null?void 0:f({value:se,datum:B,seriesId:e,xKey:c,yKey:h,xName:d,yName:p}))??o.formatDatum(se)});const W={x:ie+H/2,y:he+q/2},Y=o.isReversed();v.push({series:this,datumIndex:w,datum:B,aggregatedValue:se,frequency:F,domain:P,yKey:h,xKey:c,x:ie,y:he,xValue:V,yValue:Se,width:H,height:q,midPoint:W,topLeftCornerRadius:!Y,topRightCornerRadius:!Y,bottomRightCornerRadius:Y,bottomLeftCornerRadius:Y,label:G,crisp:!0})}),v.sort((b,w)=>b.x-w.x)),y}nodeFactory(){return new Ms}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e;return i.update(t,void 0,s=>s.domain.join("_"))}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return Yo({fill:(i==null?void 0:i.fill)??t.fill,fillOpacity:(i==null?void 0:i.fillOpacity)??t.fillOpacity,stroke:(i==null?void 0:i.stroke)??t.stroke,strokeWidth:(i==null?void 0:i.strokeWidth)??this.getStrokeWidth(t.strokeWidth),strokeOpacity:(i==null?void 0:i.strokeOpacity)??t.strokeOpacity,lineDash:(i==null?void 0:i.lineDash)??t.lineDash,lineDashOffset:(i==null?void 0:i.lineDashOffset)??t.lineDashOffset,cornerRadius:t.cornerRadius},t.fillGradientDefaults,t.fillPatternDefaults)}updateDatumNodes(e){const{isHighlight:t}=e,{shadow:i}=this.properties,s=this.getItemBaseStyle(t),n=this.getShapeFillBBox();e.datumSelection.each((o,r)=>{const{cornerRadius:a}=s,{topLeftCornerRadius:c,topRightCornerRadius:h,bottomRightCornerRadius:d,bottomLeftCornerRadius:p}=r;Ec(o,s,void 0,n),o.topLeftCornerRadius=c?a:0,o.topRightCornerRadius=h?a:0,o.bottomRightCornerRadius=d?a:0,o.bottomLeftCornerRadius=p?a:0,o.crisp=r.crisp,o.fillShadow=i,o.visible=r.height>0})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,s=>{s.pointerEvents=1,s.textAlign="center",s.textBaseline="middle"})}updateLabelNodes(e){const{fontStyle:t,fontWeight:i,fontFamily:s,fontSize:n,color:o}=this.properties.label,r=this.isLabelEnabled();e.labelSelection.each((a,c)=>{r&&(c!=null&&c.label)?(a.text=c.label.text,a.x=c.label.x,a.y=c.label.y,a.fontStyle=t,a.fontWeight=i,a.fontFamily=s,a.fontSize=n,a.fill=o,a.visible=!0):a.visible=!1})}initQuadTree(e){const{value:t}=this.contentGroup.children().next();t&&gD(e,t.children())}pickNodeClosestDatum(e){return pD(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:o,ctx:{localeManager:r}}=this,{xKey:a,xName:c,yKey:h,yName:d,tooltip:p}=o,f=n.x,v=n.y;if(!i||(s==null?void 0:s.type)!=="grouped"||!f||!v)return;const y=s.groups[e],{aggregation:b,datumIndices:w,keys:S}=y,[[M,R]=[0,0]]=b,A=w.length,T=S,[F,P]=T,N=M+R,O={data:[...i.forEachDatum(this,s,y)],aggregatedValue:N,frequency:A,domain:T},B=[{label:c,fallbackLabel:a,value:`${f.formatDatum(F)} - ${f.formatDatum(P)}`},{label:r.t("seriesHistogramTooltipFrequency"),value:v.formatDatum(A)}];if(h!=null){let V;switch(o.aggregation){case"sum":V=r.t("seriesHistogramTooltipSum",{yName:d??h});break;case"mean":V=r.t("seriesHistogramTooltipMean",{yName:d??h});break;case"count":V=r.t("seriesHistogramTooltipCount",{yName:d??h});break}B.push({label:V,value:v.formatDatum(N)})}return p.formatTooltip(this.properties,{symbol:this.legendItemSymbol(),data:B},{seriesId:t,datum:O,title:d,xKey:a,xName:c,yKey:h,yName:d,xRange:[F,P],frequency:A,...this.getItemBaseStyle(!1)})}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:n,lineDash:o,lineDashOffset:r,fillGradientDefaults:a,fillPatternDefaults:c}=this.properties;return{marker:Yo({fill:e??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:t,strokeOpacity:n,strokeWidth:s,lineDash:o,lineDashOffset:r},a,c)}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{xKey:n,yName:o,showInLegend:r}=this.properties;return[{legendType:"category",id:t,itemId:n,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:n}),label:{text:o??n??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!r}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){const i=ep(Jg(!0,this.axes,"normal"));ii(this.id,"datums",this.ctx.animationManager,[e],i),ct(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){var s,n,o;const t=(o=(n=(s=this.processedData)==null?void 0:s.reduced)==null?void 0:n.diff)==null?void 0:o[this.id],i=ep(Jg(!0,this.axes,"normal"));ii(this.id,"datums",this.ctx.animationManager,[e.datumSelection],i,(r,a)=>Xi(a.domain),t),ct(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){var t;return vD(this,(t=this.contextNodeData)==null?void 0:t.nodeData[e])}};Uy.className="HistogramSeries";Uy.type="histogram";var uee={type:Fe(ws("histogram")),xKey:Fe(xe),yKey:xe,xName:xe,yName:xe,areaPlot:ye,aggregation:je("count","sum","mean"),bins:$t($t(Le)),binCount:me,showInMiniChart:ye,cornerRadius:me,label:yl,tooltip:la,shadow:jp,...Ao,...Yn,...Gs,...Xo},hee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:e=>new Uy(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"linear",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!1},fillPatternDefaults:nl,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"backgroundColor"}},shadow:{enabled:!1,color:ml,xOffset:3,yOffset:3,blur:5}}}},pG={type:"series",name:"histogram",chartType:"cartesian",enterprise:!0,options:uee,create:e=>new Uy(e)},Li=class extends aa{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Nh,this.marker=new Ji,this.label=new Hi,this.tooltip=new Ds,this.connectMissingData=!1,this.sparklineMode=!1}};D([E()],Li.prototype,"xKey",2);D([E()],Li.prototype,"yKey",2);D([E()],Li.prototype,"xName",2);D([E()],Li.prototype,"yName",2);D([E()],Li.prototype,"yFilterKey",2);D([E()],Li.prototype,"stackGroup",2);D([E()],Li.prototype,"normalizedTo",2);D([E()],Li.prototype,"title",2);D([E()],Li.prototype,"stroke",2);D([E()],Li.prototype,"strokeWidth",2);D([E()],Li.prototype,"strokeOpacity",2);D([E()],Li.prototype,"lineDash",2);D([E()],Li.prototype,"lineDashOffset",2);D([E()],Li.prototype,"interpolation",2);D([E()],Li.prototype,"marker",2);D([E()],Li.prototype,"label",2);D([E()],Li.prototype,"tooltip",2);D([E()],Li.prototype,"connectMissingData",2);D([E()],Li.prototype,"sparklineMode",2);var dee=.25,Kp=class extends vl{constructor(e){super({moduleCtx:e,directionKeys:Hc,directionNames:Vc,categoryKey:"xValue",hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:aD({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:ra,marker:(t,i)=>({...Vp(),...Qg(t,i)})},clipFocusBox:!1}),this.properties=new Li,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}async processData(e){var T,F;if(this.data==null||!this.properties.isValid())return;const{data:t,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=0}={}}=this,{xKey:o,yKey:r,yFilterKey:a,connectMissingData:c,normalizedTo:h}=this.properties,d=!this.ctx.animationManager.isSkipped(),p=(T=this.axes.x)==null?void 0:T.scale,f=(F=this.axes.y)==null?void 0:F.scale,{isContinuousX:v,xScaleType:y,yScaleType:b}=this.getScaleInformation({xScale:p,yScale:f}),w=n>=1||h!=null,S={invalidValue:null};c&&w&&(S.invalidValue=0),w&&!i&&(S.forceValue=0);const M=[];if((!v||w)&&M.push(vo(o,y,{id:"xKey"})),M.push(Je(o,y,{id:"xValue"}),Je(r,b,{id:"yValueRaw",...S,invalidValue:void 0})),a!=null&&M.push(Je(a,b,{id:"yFilterRaw"})),w){const P=[`line-stack-${s}-yValues`,`line-stack-${s}-yValues-trailing`,`line-stack-${s}-yValues-marker`];M.push(...qa(r,"window","current",{id:"yValueEnd",...S,groupId:P[0]},b),...qa(r,"window-trailing","current",{id:"yValueStart",...S,groupId:P[1]},b),...qa(r,"normal","current",{id:"yValueCumulative",...S,groupId:P[2]},b)),fg(h)&&M.push(Ey([P[0],P[1],P[2]],h))}d&&(M.push(Th(v?["xValue"]:void 0)),this.processedData&&M.push(Ih(this.id,this.processedData)));const{dataModel:R,processedData:A}=await this.requestDataModel(e,t,{props:M,groupByKeys:w,groupByData:!w});this.dataAggregationFilters=this.aggregateData(R,A),this.animationState.transition("updateData")}xCoordinateRange(e,t){const{marker:i}=this.properties,s=this.axes.x.scale.convert(e),n=i.enabled?.5*i.size*t:0;return[s-n,s+n]}yCoordinateRange(e,t){const{marker:i}=this.properties,s=this.axes.y.scale.convert(e[0]),n=i.enabled?.5*i.size*t:0;return[s-n,s+n]}getSeriesDomain(e){var o;const{dataModel:t,processedData:i}=this;if(!t||!i)return[];if(e==="x"){const r=t.resolveProcessedDataDefById(this,"xValue"),a=t.getDomain(this,"xValue","value",i);return(r==null?void 0:r.def.type)==="value"&&r.def.valueType==="category"?a:Qs(ia(a))}const s=(o=this.dataModel)!=null&&o.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw",n=this.domainForClippedRange("y",[s],"xValue",!0);return Qs(n)}getSeriesRange(e,t){var s;const i=(s=this.dataModel)!=null&&s.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.domainForVisibleRange("y",[i],"xValue",t,!0)}getVisibleItems(e,t,i){var n;const s=(n=this.dataModel)!=null&&n.hasColumnById(this,"yValueEnd")?"yValueEnd":"yValueRaw";return this.countVisibleItems("xValue",[s],e,t,i)}aggregateData(e,t){}createNodeData(){var ue;const{dataModel:e,processedData:t,axes:i,dataAggregationFilters:s}=this,n=i.x,o=i.y;if(!e||!t||!n||!o)return;const{xKey:r,yKey:a,yFilterKey:c,xName:h,yName:d,marker:p,label:f,connectMissingData:v,interpolation:y,legendItemName:b}=this.properties,w=(ue=this.dataModel)==null?void 0:ue.hasColumnById(this,"yValueEnd"),S=n.scale,M=o.scale,R=(S.bandwidth??0)/2,A=(M.bandwidth??0)/2,T=p.enabled?p.size:0,F=t.dataSources.get(this.id)??[],P=e.resolveColumnById(this,"xValue",t),N=e.resolveColumnById(this,"yValueRaw",t),O=w?e.resolveColumnById(this,"yValueEnd",t):void 0,B=w?e.resolveColumnById(this,"yValueCumulative",t):N,V=c!=null?e.resolveColumnById(this,"yFilterRaw",t):void 0,U=ae=>S.convert(P[ae])+R,se=ae=>M.convert(B[ae])+A,Ce={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},Se=[];let H;const q=ae=>{const we=F[ae],Re=P[ae],Ee=N[ae],_e=O==null?void 0:O[ae],We=V==null?void 0:V[ae],Ve=U(ae),kt=se(ae);if(!Number.isFinite(Ve))return;if(Ee!=null){const Fi=f.enabled?this.getLabelText(f,{value:Ee,datum:we,xKey:r,yKey:a,xName:h,yName:d,legendItemName:b}):void 0;Se.push({series:this,datum:we,datumIndex:ae,yKey:a,xKey:r,point:{x:Ve,y:kt,size:T},midPoint:{x:Ve,y:kt},cumulativeValue:_e,yValue:Ee,xValue:Re,capDefaults:Ce,labelText:Fi,selected:We})}if(H==null)return;const ft=H[H.length-1];if(Ee!=null){const Fi={point:{x:Ve,y:kt},xDatum:Re,yDatum:Ee};Array.isArray(ft)?ft.push(Fi):ft!=null?(ft.skip+=1,H.push([Fi])):H.push([Fi])}else v||(Array.isArray(ft)||ft==null?H.push({skip:0}):ft.skip+=1)},[ie,he]=S.range,G=he-ie,W=s==null?void 0:s.find(ae=>ae.maxRange>G),Y=W==null?void 0:W.indices;let[X,ee]=this.visibleRange("xValue",n.range,Y);X=Math.max(X-1,0),ee=Math.min(ee+1,(Y==null?void 0:Y.length)??P.length),t.input.count<1e3&&(X=0,ee=t.input.count),Y==null&&(H=[]);for(let ae=X;ae<ee;ae+=1)q((Y==null?void 0:Y[ae])??ae);const fe=H==null?void 0:H.flatMap(ae=>Array.isArray(ae)?Nv(ae,y):[]),le=fe!=null?{itemId:a,spans:fe}:void 0,be=(V==null?void 0:V.some((ae,we)=>ae===N[we]))??!1;return{itemId:a,nodeData:Se,labelData:Se,strokeData:le,scales:this.calculateScaling(),visible:this.visible,crossFiltering:be}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){var r;const{paths:[t],opacity:i,visible:s,animationEnabled:n}=e,o=((r=this.contextNodeData)==null?void 0:r.crossFiltering)===!0;t.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(o?dee:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),n||(t.visible=s),Gv(this,t)}getMarkerItemBaseStyle(e){const{properties:t}=this,{marker:i}=t,s=e?t.highlightStyle.item:void 0;return Yo({size:i.size,shape:i.shape,fill:(s==null?void 0:s.fill)??i.fill,fillOpacity:(s==null?void 0:s.fillOpacity)??i.fillOpacity,stroke:(s==null?void 0:s.stroke)??i.stroke,strokeWidth:(s==null?void 0:s.strokeWidth)??i.strokeWidth,strokeOpacity:(s==null?void 0:s.strokeOpacity)??i.strokeOpacity,lineDash:(s==null?void 0:s.lineDash)??i.lineDash,lineDashOffset:(s==null?void 0:s.lineDashOffset)??i.lineDashOffset},i.fillGradientDefaults,i.fillPatternDefaults)}getMarkerItemStyleOverrides(e,t,i,s){const{id:n,properties:o}=this,{xKey:r,yKey:a,marker:c}=o,{itemStyler:h}=c;if(h!=null)return this.cachedDatumCallback(Xi(e,s?"highlight":"node"),()=>{const d=this.getSeriesDomain("x"),p=this.getSeriesDomain("y");return this.callWithContext(h,{seriesId:n,...Za(t,r,a,d,p),datum:t,highlighted:s,...i})})}updateMarkerSelection(e){var n;let{nodeData:t}=e;const{markerSelection:i}=e;return t=this.properties.marker.enabled||((n=this.contextNodeData)==null?void 0:n.crossFiltering)===!0?t:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,o=>Xi(o.xValue))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,stroke:o,strokeWidth:r,strokeOpacity:a,marker:c,highlightStyle:h}=this.properties,d=this.getSeriesDomain("x"),p=this.getSeriesDomain("y"),f=Qe(i&&h.item,c.getStyle(),{stroke:o,strokeWidth:r,strokeOpacity:a}),v=this.ctx.animationManager.isSkipped(),y=this.getShapeFillBBox();t.each((b,w)=>{this.updateMarkerStyle(c,b,w.datum,w.point,Za(w,s,n,d,p),i,f,y,{applyTranslation:v,selected:w.selected})}),i||c.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){const{enabled:t,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:o,color:r}=this.properties.label;e.labelSelection.each((a,c)=>{t&&(c!=null&&c.labelText)?(a.fontStyle=i,a.fontWeight=s,a.fontSize=n,a.fontFamily=o,a.textAlign="center",a.textBaseline="bottom",a.text=c.labelText,a.x=c.point.x,a.y=c.point.y-10,a.fill=r,a.visible=!0):a.visible=!1})}getTooltipContent(e){var S;const{id:t,dataModel:i,processedData:s,axes:n,properties:o}=this,{xKey:r,xName:a,yKey:c,yName:h,tooltip:d}=o,p=n.x,f=n.y;if(!i||!s||!p||!f)return;const v=(S=s.dataSources.get(this.id))==null?void 0:S[e],y=i.resolveColumnById(this,"xValue",s)[e],b=i.resolveColumnById(this,"yValueRaw",s)[e];if(y==null)return;const w=this.getMarkerItemBaseStyle(!1);return Object.assign(w,this.getMarkerItemStyleOverrides(String(e),v,w,!1)),d.formatTooltip(this.properties,{heading:p.formatDatum(y),symbol:this.legendItemSymbol(),data:[{label:h,fallbackLabel:c,value:f.formatDatum(b)}]},{seriesId:t,datum:v,title:h,xKey:r,xName:a,yKey:c,yName:h,...w,...this.getModuleTooltipParams()})}legendItemSymbol(){const e="rgba(0, 0, 0, 0)",{stroke:t,strokeOpacity:i,strokeWidth:s,lineDash:n,marker:o}=this.properties;return{marker:{...this.getMarkerStyle(o,void 0,void 0,!1,void 0,{fill:o.fill??e,stroke:o.stroke??t??e}),enabled:o.enabled},line:{stroke:t??e,strokeOpacity:i,strokeWidth:s,lineDash:n}}}getLegendData(e){if(!(this.properties.isValid()&&e==="category"))return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:o,title:r,legendItemName:a,showInLegend:c}=this.properties;return[{legendType:"category",id:t,itemId:n,legendItemName:a,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:n}),label:{text:a??r??o??n},symbol:this.legendItemSymbol(),hideInLegend:!c}]}updatePaths(e){this.updateLinePaths(e.paths,e.contextData)}plotNodeDataPoints(e,t){if(t.length===0)return;const i=t[0].point;e.moveTo(i.x,i.y);for(let s=1;s<t.length;s+=1){const{x:n,y:o}=t[s].point;e.lineTo(n,o)}}updateLinePaths(e,t){var n;const i=(n=t.strokeData)==null?void 0:n.spans,[s]=e;s.path.clear(),i!=null?tD(s,i):this.plotNodeDataPoints(s.path,t.nodeData),s.markDirty("LineSeries")}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,annotationSelections:s,contextData:n,paths:o}=e,{animationManager:r}=this.ctx;this.updateLinePaths(o,n),rD(this,r,...o),Ki([t],Qg),oD(this,r,t),ct(this,"labels",r,i),ct(this,"annotations",r,...s)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var f,v,y;const{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:s,annotationSelections:n,contextData:o,paths:r,previousContextData:a}=e,[c]=r;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const h=()=>{this.resetPathAnimation(e),this.updateLinePaths(r,o)},d=()=>{t.skipCurrentBatch(),h()};if(o==null||a==null){h(),Xg(this,t,"added",i),Ov(this,"path_properties",t,"add",c),ct(this,"labels",t,s),ct(this,"annotations",t,...n);return}if(o.crossFiltering!==a.crossFiltering){d();return}const p=Q1(o,a,(y=(v=(f=this.processedData)==null?void 0:f.reduced)==null?void 0:v.diff)==null?void 0:y[this.id]);if(p===void 0){d();return}else if(p.status==="no-op")return;ii(this.id,"path_properties",t,[c],p.stroke.pathProperties),p.status==="added"?this.updateLinePaths(r,o):p.status==="removed"?this.updateLinePaths(r,a):Pv(this.id,"path_update",t,[c],p.stroke.path),p.hasMotion&&(Xg(this,t,void 0,i),ct(this,"labels",t,s),ct(this,"annotations",t,...n))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new Ne}getFormattedMarkerStyle(e){const{xKey:t,yKey:i}=this.properties,s=this.getSeriesDomain("x"),n=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,e.datum,Za(e,t,i,s,n),!0)}computeFocusBounds(e){return _p(this,e)}};Kp.className="LineSeries";Kp.type="line";var Yy={type:ws("line"),xKey:Fe(xe),yKey:Fe(xe),xName:xe,yName:xe,title:xe,stacked:ye,stackGroup:xe,normalizedTo:Le,legendItemName:xe,showInMiniChart:ye,connectMissingData:ye,interpolation:dD,label:yl,marker:Wp,tooltip:la,errorBar:Wy,...Ao,...Gs,...Xo};Yy.pickOutsideVisibleMinorAxis=ye;Yy.focusPriority=Le;Yy.sparklineMode=ye;var fG={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new Kp(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{_seriesOverrideType:"node"}},stroke:By,strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear"},marker:{shape:"circle",size:7,strokeWidth:0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:nl},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}}},mG={type:"series",name:"line",chartType:"cartesian",options:Yy,create:e=>new Kp(e)},vG=class extends Hi{constructor(){super(...arguments),this.placement="top"}};D([E()],vG.prototype,"placement",2);var Zt=class extends aa{constructor(){super(...arguments),this.label=new vG,this.tooltip=new Ds,this.marker=new Ji}};D([E()],Zt.prototype,"xKey",2);D([E()],Zt.prototype,"yKey",2);D([E()],Zt.prototype,"labelKey",2);D([E()],Zt.prototype,"xFilterKey",2);D([E()],Zt.prototype,"yFilterKey",2);D([E()],Zt.prototype,"xName",2);D([E()],Zt.prototype,"yName",2);D([E()],Zt.prototype,"labelName",2);D([E()],Zt.prototype,"title",2);D([xt("marker.shape")],Zt.prototype,"shape",2);D([xt("marker.size")],Zt.prototype,"size",2);D([xt("marker.fill",{optional:!0})],Zt.prototype,"fill",2);D([xt("marker.fillGradientDefaults")],Zt.prototype,"fillGradientDefaults",2);D([xt("marker.fillPatternDefaults")],Zt.prototype,"fillPatternDefaults",2);D([xt("marker.fillOpacity")],Zt.prototype,"fillOpacity",2);D([xt("marker.stroke")],Zt.prototype,"stroke",2);D([xt("marker.strokeWidth")],Zt.prototype,"strokeWidth",2);D([xt("marker.strokeOpacity")],Zt.prototype,"strokeOpacity",2);D([xt("marker.lineDash")],Zt.prototype,"lineDash",2);D([xt("marker.lineDashOffset")],Zt.prototype,"lineDashOffset",2);D([xt("marker.itemStyler",{optional:!0})],Zt.prototype,"itemStyler",2);D([E()],Zt.prototype,"label",2);D([E()],Zt.prototype,"tooltip",2);var Ky=class extends vl{constructor(e){super({moduleCtx:e,directionKeys:Hc,directionNames:Vc,categoryKey:void 0,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Vp,label:ra},usesPlacedLabels:!0,clipFocusBox:!1}),this.properties=new Zt}get pickModeAxis(){return"main-category"}async processData(e){var d,p;if(!this.properties.isValid()||this.data==null||!this.visible)return;const t=(d=this.axes.x)==null?void 0:d.scale,i=(p=this.axes.y)==null?void 0:p.scale,{xScaleType:s,yScaleType:n}=this.getScaleInformation({xScale:t,yScale:i}),{xKey:o,yKey:r,xFilterKey:a,yFilterKey:c,labelKey:h}=this.properties;await this.requestDataModel(e,this.data,{props:[Je(o,s,{id:"xValue"}),Je(r,n,{id:"yValue"}),...a!=null?[Je(a,s,{id:"xFilterValue"})]:[],...c!=null?[Je(c,n,{id:"yFilterValue"})]:[],...h?[Je(h,"band",{id:"labelValue"})]:[]]}),this.animationState.transition("updateData")}xCoordinateRange(e,t){const i=this.axes.x.scale.convert(e),s=.5*this.properties.size*t;return[i-s,i+s]}yCoordinateRange(e,t){const i=this.axes.y.scale.convert(e[0]),s=.5*this.properties.size*t;return[i-s,i+s]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const s={x:"xValue",y:"yValue"},n=s[e],o=t.resolveProcessedDataDefById(this,n),r=t.getDomain(this,n,"value",i);if((o==null?void 0:o.def.type)==="value"&&(o==null?void 0:o.def.valueType)==="category")return r;const c=s[e==="x"?"y":"x"],h=this.domainForClippedRange(e,[n],c,!1);return Qs(ia(h))}getSeriesRange(e,t){return this.domainForVisibleRange("y",["yValue"],"xValue",t,!1)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["yValue"],e,t,i)}createNodeData(){const{axes:e,dataModel:t,processedData:i,visible:s}=this,{xKey:n,yKey:o,xFilterKey:r,yFilterKey:a,labelKey:c,xName:h,yName:d,labelName:p,marker:f,label:v}=this.properties,{placement:y}=v,b=Bi.anchor(f.shape),w=e.x,S=e.y;if(!(t&&i&&s&&w&&S))return;const M=t.resolveColumnById(this,"xValue",i),R=t.resolveColumnById(this,"yValue",i),A=c!=null?t.resolveColumnById(this,"labelValue",i):void 0,T=r!=null?t.resolveColumnById(this,"xFilterValue",i):void 0,F=a!=null?t.resolveColumnById(this,"yFilterValue",i):void 0,P=w.scale,N=S.scale,O=(P.bandwidth??0)/2,B=(N.bandwidth??0)/2,V=[],U=v.getFont(),se=qr.getMeasurer({font:U});return(i.dataSources.get(this.id)??[]).forEach((Se,H)=>{const q=M[H],ie=R[H],he=P.convert(q)+O,G=N.convert(ie)+B,W=T!=null&&F!=null?T[H]===q&&F[H]===ie:void 0,Y=this.getLabelText(v,{value:A!=null?A==null?void 0:A[H]:ie,datum:Se,xKey:n,yKey:o,labelKey:c,xName:h,yName:d,labelName:p}),X=se.measureText(Y);V.push({series:this,itemId:o,yKey:o,xKey:n,datum:Se,datumIndex:H,xValue:q,yValue:ie,capDefaults:{lengthRatioMultiplier:f.getDiameter(),lengthMax:1/0},point:{x:he,y:G,size:f.size},midPoint:{x:he,y:G},label:{text:Y,...X},anchor:b,placement:y,selected:W})}),{itemId:o,nodeData:V,labelData:V,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e;return this.isLabelEnabled()?((e=this.contextNodeData)==null?void 0:e.labelData)??[]:[]}updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,labelKey:o,marker:r,highlightStyle:a}=this.properties,c=Qe(i&&a.item,r.getStyle()),h=this.getShapeFillBBox();t.each((d,p)=>{this.updateMarkerStyle(r,d,p.datum,p.point,{xKey:s,yKey:n,labelKey:o},i,c,h,{selected:p.selected})}),i||r.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map(t=>({...t.datum,point:{x:t.x,y:t.y,size:t.datum.point.size}})),t=>{t.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{label:t}=this.properties;e.labelSelection.each((i,s)=>{var n,o;i.text=s.label.text,i.fill=t.color,i.x=((n=s.point)==null?void 0:n.x)??0,i.y=((o=s.point)==null?void 0:o.y)??0,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=t.fontSize,i.fontFamily=t.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(e){var F,P;const{id:t,dataModel:i,processedData:s,axes:n,properties:o}=this,{xKey:r,xName:a,yKey:c,yName:h,labelKey:d,labelName:p,title:f,tooltip:v,marker:y}=o,b=n.x,w=n.y;if(!i||!s||!b||!w)return;const S=(F=s.dataSources.get(this.id))==null?void 0:F[e],M=i.resolveColumnById(this,"xValue",s)[e],R=i.resolveColumnById(this,"yValue",s)[e],A=(P=this.contextNodeData)==null?void 0:P.nodeData[e];if(M==null||A==null)return;const T=this.getMarkerStyle(y,A.datum,{xKey:r,yKey:c,labelKey:d,highlighted:!0});return v.formatTooltip(this.properties,{symbol:this.legendItemSymbol(),title:f,data:[{label:a,fallbackLabel:r,value:b.formatDatum(M)},{label:h,fallbackLabel:c,value:w.formatDatum(R)}]},{seriesId:t,datum:S,title:h,xKey:r,xName:a,yKey:c,yName:h,labelKey:d,labelName:p,...T,...this.getModuleTooltipParams()})}legendItemSymbol(){return{marker:this.getMarkerStyle(this.properties.marker)}}getLegendData(e){if(!this.properties.isValid()||e!=="category")return[];const{yKey:t,yName:i,title:s,showInLegend:n}=this.properties,{id:o,ctx:{legendManager:r},visible:a}=this;return[{legendType:"category",id:o,itemId:t,seriesId:o,enabled:a&&r.getItemEnabled({seriesId:o,itemId:t}),label:{text:s??i??t},symbol:this.legendItemSymbol(),hideInLegend:!n}]}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,annotationSelections:s}=e;nD(this,this.ctx.animationManager,t),ct(this,"labels",this.ctx.animationManager,i),ct(this,"annotations",this.ctx.animationManager,...s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Ne}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,e.datum,{xKey:t,yKey:i,labelKey:s},!0)}computeFocusBounds(e){return _p(this,e)}};Ky.className="ScatterSeries";Ky.type="scatter";var gee={type:Fe(ws("scatter")),xKey:Fe(xe),yKey:Fe(xe),labelKey:xe,xName:xe,yName:xe,labelName:xe,title:xe,showInMiniChart:ye,label:{placement:je("top","right","bottom","left"),...yl},tooltip:la,errorBar:Wy,...Ao,...il(Wp,["enabled"])},pee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:e=>new Ky(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:{type:"gradient",gradient:"radial",bounds:"item",colorStops:{$palette:"gradient"},rotation:0,reverse:!0},fillPatternDefaults:nl,fillOpacity:.8,tooltip:{position:{_seriesOverrideType:"node"}},label:{enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},errorBar:{cap:{lengthRatio:1}}}}},yG={type:"series",name:"scatter",chartType:"cartesian",options:gee,create:e=>new Ky(e)},CG=class Dx{constructor(t,i,s,n){this.startAngle=t,this.endAngle=i,this.innerRadius=s,this.outerRadius=n}clone(){const{startAngle:t,endAngle:i,innerRadius:s,outerRadius:n}=this;return new Dx(t,i,s,n)}equals(t){return this.startAngle===t.startAngle&&this.endAngle===t.endAngle&&this.innerRadius===t.innerRadius&&this.outerRadius===t.outerRadius}[ty](t,i){return new Dx(this.startAngle*(1-i)+t.startAngle*i,this.endAngle*(1-i)+t.endAngle*i,this.innerRadius*(1-i)+t.innerRadius*i,this.outerRadius*(1-i)+t.outerRadius*i)}};function SG({startAngle:e,endAngle:t,innerRadius:i,outerRadius:s}){let n=1/0,o=1/0,r=-1/0,a=-1/0;const c=(h,d)=>{n=Math.min(h,n),o=Math.min(d,o),r=Math.max(h,r),a=Math.max(d,a)};return c(i*Math.cos(e),i*Math.sin(e)),c(i*Math.cos(t),i*Math.sin(t)),c(s*Math.cos(e),s*Math.sin(e)),c(s*Math.cos(t),s*Math.sin(t)),Va(0,e,t)&&c(s,0),Va(Math.PI*.5,e,t)&&c(0,s),Va(Math.PI,e,t)&&c(-s,0),Va(Math.PI*1.5,e,t)&&c(0,-s),new Me(n,o,r-n,a-o)}function zv(e,t,i){const s=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:n,outerRadius:o}=i;if(i.startAngle===i.endAngle||s<Math.min(n,o)||s>Math.max(n,o))return!1;const r=Bg(i.startAngle),a=Bg(i.endAngle),c=Math.atan2(t,e);return r<a?c<=a&&c>=r:c<=a&&c>=-Math.PI||c>=r&&c<=Math.PI}function _L(e,t){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:o}=t,r={x:o*Math.cos(i),y:o*Math.sin(i)},a={x:o*Math.cos(s),y:o*Math.sin(s)},c=n===0?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},h=n===0?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return Hu(e.start.x,e.start.y,e.end.x,e.end.y,r.x,r.y,c.x,c.y)||Hu(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,h.x,h.y)||lN(0,0,o,i,s,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function bG(e,t){const i={x:e.x,y:e.y},s={x:e.x+e.width,y:e.y},n={x:e.x,y:e.y+e.height},o={x:e.x+e.width,y:e.y+e.height};return _L({start:i,end:s},t)||_L({start:n,end:o},t)}function WL(e,t,i,s){if(i===0&&s===0)return 0;if(Math.asin(Math.abs(1*i)/(e+1*i))+Math.asin(Math.abs(1*s)/(e+1*s))-t<0)return 1;let o=0,r=1;for(let a=0;a<8;a+=1){const c=(o+r)/2;Math.asin(Math.abs(c*i)/(e+c*i))+Math.asin(Math.abs(c*s)/(e+c*s))-t<0?o=c:r=c}return o}var fee=1e-6;function Xa(e,t){return ny(e,t)<fee?t:Pt(e-t)+t}function Am(e,t,i=0){const n=Math.abs(t-e)>=2*Math.PI?2*Math.PI:Pt(t-e);return e=Xa(e,i),t=e+n,{startAngle:e,endAngle:t}}function Em(e,t,i,s,n,o){const r=Math.sin(o),a=Math.cos(o),c=e**2+t**2-i**2;let h,d,p,f;if(a>.5){const R=r/a,A=1+R**2,T=-2*(e+t*R),F=T**2-4*A*c;if(F<0)return;const P=(-T+Math.sqrt(F))/(2*A),N=(-T-Math.sqrt(F))/(2*A);h=P,d=P*R,p=N,f=N*R}else{const R=a/r,A=1+R**2,T=-2*(t+e*R),F=T**2-4*A*c;if(F<0)return;const P=(-T+Math.sqrt(F))/(2*A),N=(-T-Math.sqrt(F))/(2*A);h=P*R,d=P,p=N*R,f=N}const v=a,y=r,b=h*v+d*y,w=p*v+f*y,S=b>0?Xa(Math.atan2(d-t,h-e),s):NaN,M=w>0?Xa(Math.atan2(f-t,p-e),s):NaN;if(S>=s&&S<=n)return S;if(M>=s&&M<=n)return M}function Tm(e,t,i,s,n,o){const r=Math.hypot(e,t),a=(r**2-i**2+o**2)/(2*r),c=r-a,h=Math.atan2(t,e),d=Math.acos(-c/i),p=Xa(h+d,s),f=Xa(h-d,s);if(p>=s&&p<=n)return p;if(f>=s&&f<=n)return f}var uw=class{constructor(e,t,i,s,n){this.cx=e,this.cy=t,this.r=i,this.a0=s,this.a1=n,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){e==null||!this.isValid()||e<this.a0||(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(e){e==null||!this.isValid()||e>this.a1||(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},es=class extends zs{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){return SG(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:e}=this;let{innerRadius:t,outerRadius:i}=this;return t=t>0?t+e:0,i=Math.max(i-e,0),{innerRadius:t,outerRadius:i}}normalizedClipSector(){const{clipSector:e}=this;if(e==null)return;const{startAngle:t,endAngle:i}=Am(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:n}=this.normalizedRadii(),o=Am(e.startAngle,e.endAngle,t);return new CG(Math.max(t,o.startAngle),Math.min(i,o.endAngle),Math.max(s,e.innerRadius),Math.min(n,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,t,i,s,n,o,r,a){if(e<=0)return;const{startAngle:c,endAngle:h}=Am(this.startAngle,this.endAngle),{innerRadius:d,outerRadius:p}=this.normalizedRadii(),f=this.normalizedClipSector();if(a&&d<=0)return;const v=a?this.getAngleOffset(d+e):this.getAngleOffset(p-e),y=r?c+v+t:h-v-t,b=a?d+e:p-e,w=b*Math.cos(y),S=b*Math.sin(y);if(f!=null&&(!r&&!(y>=c-1e-6&&y<=f.endAngle-1e-6)||r&&!(y>=f.startAngle+1e-6&&y<=h-1e-6)||a&&b<f.innerRadius-1e-6||!a&&b>f.outerRadius+1e-6))return;const M=new uw(w,S,e,i,s);if(f!=null){a?(M.clipStart(Em(w,S,e,i,s,f.endAngle)),M.clipEnd(Em(w,S,e,i,s,f.startAngle))):(M.clipStart(Em(w,S,e,i,s,f.startAngle)),M.clipEnd(Em(w,S,e,i,s,f.endAngle)));let P,N;if(r?(P=Tm(w,S,e,i,s,f.innerRadius),N=Tm(w,S,e,i,s,f.outerRadius)):(P=Tm(w,S,e,i,s,f.outerRadius),N=Tm(w,S,e,i,s,f.innerRadius)),M.clipStart(P),M.clipEnd(N),P!=null){const{x:O,y:B}=M.pointAt(P),V=Xa(Math.atan2(B,O),c);r?o==null||o.clipStart(V):n.clipEnd(V)}if(N!=null){const{x:O,y:B}=M.pointAt(N),V=Xa(Math.atan2(B,O),c);r?n.clipStart(V):o==null||o.clipEnd(V)}}if(f!=null){const{x:P,y:N}=M.pointAt((M.a0+M.a1)/2);if(!zv(P,N,f))return}const{x:R,y:A}=M.pointAt(r===a?M.a0:M.a1),T=Xa(Math.atan2(A,R),c),F=a?o:n;return r?F==null||F.clipStart(T):F==null||F.clipEnd(T),M}updatePath(){const{path:t,centerX:i,centerY:s,concentricEdgeInset:n,radialEdgeInset:o}=this;let{startOuterCornerRadius:r,endOuterCornerRadius:a,startInnerCornerRadius:c,endInnerCornerRadius:h}=this;const{startAngle:d,endAngle:p}=Am(this.startAngle,this.endAngle),{innerRadius:f,outerRadius:v}=this.normalizedRadii(),y=this.normalizedClipSector(),b=p-d,w=b>=2*Math.PI-1e-6;if(t.clear(),f===0&&v===0||f>v)return;if(((y==null?void 0:y.startAngle)??d)===((y==null?void 0:y.endAngle)??p))return;if(w&&this.clipSector==null&&r===0&&a===0&&c===0&&h===0){t.moveTo(i+v*Math.cos(d),s+v*Math.sin(d)),t.arc(i,s,v,d,p),f>n&&(t.moveTo(i+f*Math.cos(p),s+f*Math.sin(p)),t.arc(i,s,f,p,d,!0)),t.closePath();return}else if(this.clipSector==null&&Math.abs(f-v)<1e-6){t.arc(i,s,v,d,p,!1),t.arc(i,s,v,p,d,!0),t.closePath();return}const S=this.getAngleOffset(f),M=this.getAngleOffset(v);if(b<2*M)return;const A=((y==null?void 0:y.innerRadius)??f)>n,T=f<n||b<2*S,F=v-f,P=Math.max(r,c,a,h),N=P>0?Math.min(F/P,1):1;r*=N,a*=N,c*=N,h*=N;const O=WL(v,b-2*M,-r,-a);if(r*=O,a*=O,!T&&A){const ue=WL(f,b-2*S,c,h);c*=ue,h*=ue}else c=0,h=0;const B=Math.max(r+c,a+h),V=B>0?Math.min(F/B,1):1;r*=V,a*=V,c*=V,h*=V;let U=0,se=0;const Ce=r/(v-r),Se=a/(v-a);if(Ce>=0&&Ce<1-1e-6)U=Math.asin(Ce);else{U=b/2;const ue=v/(1/Math.sin(U)+1);r=Math.min(ue,r)}if(Se>=0&&Se<1-1e-6)se=Math.asin(Se);else{se=b/2;const ue=v/(1/Math.sin(se)+1);a=Math.min(ue,a)}const H=Math.asin(c/(f+c)),q=Math.asin(h/(f+h)),ie=(y==null?void 0:y.outerRadius)??v,he=this.getAngleOffset(ie),G=new uw(0,0,ie,d+he,p-he),W=(y==null?void 0:y.innerRadius)??f,Y=this.getAngleOffset(W),X=A?new uw(0,0,W,d+Y,p-Y):void 0;y!=null&&(G.clipStart(y.startAngle),G.clipEnd(y.endAngle),X==null||X.clipStart(y.startAngle),X==null||X.clipEnd(y.endAngle));const ee=this.arc(r,U,d-Math.PI*.5,d+U,G,X,!0,!1),fe=this.arc(a,se,p-se,p+Math.PI*.5,G,X,!1,!1),le=this.arc(h,q,p+Math.PI*.5,p+Math.PI-q,G,X,!1,!0),be=this.arc(c,H,d+Math.PI+H,d+Math.PI*1.5,G,X,!0,!0);if(T){const ue=b<Math.PI*.5?o*(1+Math.cos(b))/Math.sin(b):NaN;let ae;ue>0&&ue<v?ae=Math.max(Math.hypot(o,ue),f):ae=o,ae=Math.max(ae,f);const we=d+b*.5;t.moveTo(i+ae*Math.cos(we),s+ae*Math.sin(we))}else if(!((be==null?void 0:be.isValid())===!0||(X==null?void 0:X.isValid())===!0)){const ue=d+b/2,ae=f*Math.cos(ue),we=f*Math.sin(ue);t.moveTo(i+ae,s+we)}if((ee==null?void 0:ee.isValid())===!0){const{cx:ue,cy:ae,r:we,a0:Re,a1:Ee}=ee;t.arc(i+ue,s+ae,we,Re,Ee)}if(G.isValid()){const{r:ue,a0:ae,a1:we}=G;t.arc(i,s,ue,ae,we)}if((fe==null?void 0:fe.isValid())===!0){const{cx:ue,cy:ae,r:we,a0:Re,a1:Ee}=fe;t.arc(i+ue,s+ae,we,Re,Ee)}if(!T){if((le==null?void 0:le.isValid())===!0){const{cx:ue,cy:ae,r:we,a0:Re,a1:Ee}=le;t.arc(i+ue,s+ae,we,Re,Ee)}if((X==null?void 0:X.isValid())===!0){const{r:ue,a0:ae,a1:we}=X;t.arc(i,s,ue,we,ae,!0)}if((be==null?void 0:be.isValid())===!0){const{cx:ue,cy:ae,r:we,a0:Re,a1:Ee}=be;t.arc(i+ue,s+ae,we,Re,Ee)}}t.closePath()}isPointInPath(e,t){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:o}=this.clipSector??this;return zv(e-this.centerX,t-this.centerY,{startAngle:i,endAngle:s,innerRadius:Math.min(n,o),outerRadius:Math.max(n,o)})}};es.className="Sector";D([ze()],es.prototype,"centerX",2);D([ze()],es.prototype,"centerY",2);D([ze()],es.prototype,"innerRadius",2);D([ze()],es.prototype,"outerRadius",2);D([ze()],es.prototype,"startAngle",2);D([ze()],es.prototype,"endAngle",2);D([ze()],es.prototype,"clipSector",2);D([ze()],es.prototype,"concentricEdgeInset",2);D([ze()],es.prototype,"radialEdgeInset",2);D([ze()],es.prototype,"startOuterCornerRadius",2);D([ze()],es.prototype,"endOuterCornerRadius",2);D([ze()],es.prototype,"startInnerCornerRadius",2);D([ze()],es.prototype,"endInnerCornerRadius",2);var hi={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Go={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},wG=class extends jt{constructor(){super(...arguments),this.showInLegend=!1}};D([E()],wG.prototype,"showInLegend",2);var CD=class extends Hi{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};D([E()],CD.prototype,"text",2);D([E()],CD.prototype,"spacing",2);var SD=class extends Be{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};D([E()],SD.prototype,"fill",2);D([E()],SD.prototype,"fillOpacity",2);var zh=class extends Hi{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};D([E()],zh.prototype,"offset",2);D([E(yn.restrict({min:0,max:360}))],zh.prototype,"minAngle",2);D([E()],zh.prototype,"minSpacing",2);D([E()],zh.prototype,"maxCollisionOffset",2);D([E()],zh.prototype,"avoidCollisions",2);var bD=class extends Hi{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};D([E()],bD.prototype,"positionOffset",2);D([E()],bD.prototype,"positionRatio",2);var $y=class extends Be{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};D([E(zi(ps(ar,Cn,lr)))],$y.prototype,"colors",2);D([E()],$y.prototype,"length",2);D([E()],$y.prototype,"strokeWidth",2);var qe=class extends xn{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(hi),this.strokes=Object.values(Go),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new mp(CD),this.title=new wG,this.innerCircle=new SD,this.shadow=new Ro,this.calloutLabel=new zh,this.sectorLabel=new bD,this.calloutLine=new $y,this.tooltip=new Ds}};D([E()],qe.prototype,"angleKey",2);D([E()],qe.prototype,"angleName",2);D([E()],qe.prototype,"angleFilterKey",2);D([E()],qe.prototype,"radiusKey",2);D([E()],qe.prototype,"radiusName",2);D([E()],qe.prototype,"radiusMin",2);D([E()],qe.prototype,"radiusMax",2);D([E()],qe.prototype,"calloutLabelKey",2);D([E()],qe.prototype,"calloutLabelName",2);D([E()],qe.prototype,"sectorLabelKey",2);D([E()],qe.prototype,"sectorLabelName",2);D([E()],qe.prototype,"legendItemKey",2);D([E(zi(_M))],qe.prototype,"defaultColorRange",2);D([E(zi(Cn))],qe.prototype,"defaultPatternFills",2);D([E(zi(ps(ar,Cn,lr)))],qe.prototype,"fills",2);D([E()],qe.prototype,"strokes",2);D([E()],qe.prototype,"fillOpacity",2);D([E()],qe.prototype,"strokeOpacity",2);D([E()],qe.prototype,"lineDash",2);D([E()],qe.prototype,"lineDashOffset",2);D([E()],qe.prototype,"cornerRadius",2);D([E()],qe.prototype,"itemStyler",2);D([E()],qe.prototype,"rotation",2);D([E()],qe.prototype,"outerRadiusOffset",2);D([E()],qe.prototype,"outerRadiusRatio",2);D([E()],qe.prototype,"innerRadiusOffset",2);D([E()],qe.prototype,"innerRadiusRatio",2);D([E()],qe.prototype,"strokeWidth",2);D([E()],qe.prototype,"sectorSpacing",2);D([E()],qe.prototype,"hideZeroValueSectorsInLegend",2);D([E()],qe.prototype,"innerLabels",2);D([E()],qe.prototype,"title",2);D([E()],qe.prototype,"innerCircle",2);D([E()],qe.prototype,"shadow",2);D([E()],qe.prototype,"calloutLabel",2);D([E()],qe.prototype,"sectorLabel",2);D([E()],qe.prototype,"calloutLine",2);D([E()],qe.prototype,"tooltip",2);function Cc(e,t,i,s){const n=[i.convert(0),i.convert(1)],o=[s.convert(0),s.convert(1)],r=Math.PI/-2+Wt(t),a=e?"initial":"update",c=({radius:y})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*y}),h=({radius:y})=>({innerRadius:o[0],outerRadius:o[0]+(o[1]-o[0])*y});return{nodes:{toFn:(y,b,w,{prevLive:S})=>{var N,O;let{startAngle:M,endAngle:R,innerRadius:A,outerRadius:T}=b;const{stroke:F,fill:P}=b.sectorFormat;if(w==="removed"&&S?(M=(N=S.datum)==null?void 0:N.endAngle,R=(O=S.datum)==null?void 0:O.endAngle):w==="removed"&&!S&&(M=r,R=r),w==="removed"){const B=c(b);A=B.innerRadius,T=B.outerRadius}return{startAngle:M,endAngle:R,outerRadius:T,innerRadius:A,stroke:F,fill:P}},fromFn:(y,b,w,{prevFromProps:S})=>{let{startAngle:M,endAngle:R,innerRadius:A,outerRadius:T}=y,{fill:F,stroke:P}=b.sectorFormat;if(w==="updated"&&y.previousDatum==null&&(w="added"),w==="unknown"||w==="added"&&!S?(M=r,R=r,A=b.innerRadius,T=b.outerRadius):w==="added"&&S&&(M=S.endAngle??r,R=S.endAngle??r,A=S.innerRadius??b.innerRadius,T=S.outerRadius??b.outerRadius),w==="added"&&!e){const N=h(b);A=N.innerRadius,T=N.outerRadius}return w==="updated"&&(F=y.fill??F,P=(typeof y.stroke=="string"?y.stroke:void 0)??P),{startAngle:M,endAngle:R,innerRadius:A,outerRadius:T,fill:F,stroke:P,phase:a}}},innerCircle:{fromFn:(y,b)=>{var w;return{size:((w=y.previousDatum)==null?void 0:w.radius)??y.size??0,phase:a}},toFn:(y,b)=>({size:b.radius??0})}}}function wD(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,stroke:t.sectorFormat.stroke}}function xD(e,t){const i=t.y-e.centerY,s=t.x-e.centerX,n=Math.atan2(i,s),o=e.getItemNodes();for(const r of o)if(r.datum.missing!==!0&&Va(n,r.startAngle,r.endAngle)){const a=Math.sqrt(s*s+i*i);let c=0;return a<r.innerRadius?c=r.innerRadius-a:a>r.outerRadius&&(c=a-r.outerRadius),{datum:r.datum,distance:c}}}var xG=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.LABEL=3]="LABEL",e))(xG||{}),Zy=class extends Q0{constructor({categoryKey:e,useLabelLayer:t=!1,pickModes:i=[1,0],canHaveAxes:s=!1,animationResetFns:n,...o}){super({...o,categoryKey:e,useLabelLayer:t,pickModes:i,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:s}),this.itemGroup=this.contentGroup.appendChild(new Ne),this.nodeData=[],this.itemSelection=wi.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=wi.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=wi.select(this.highlightGroup,()=>this.nodeFactory()),this.highlightLabelSelection=wi.select(this.highlightLabel,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=n,this.animationState=new wp("empty",{empty:{update:{target:"ready",action:r=>this.animateEmptyUpdateReady(r)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:r=>this.animateReadyHighlight(r),highlightMarkers:r=>this.animateReadyHighlightMarkers(r),resize:r=>this.animateReadyResize(r),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:r=>this.animateWaitingUpdateReady(r)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:r=>this.animateClearingUpdateEmpty(r)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[e,1],this.highlightGroup.zIndex=[e,2],this.labelGroup.zIndex=[e,3],!0):!1}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}labelFactory(){const e=new Gi;return e.pointerEvents=1,e}addChartEventListeners(){var e,t;this.destroyFns.push((e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-click",i=>this.onLegendItemClick(i)),(t=this.ctx.chartEventManager)==null?void 0:t.addListener("legend-item-double-click",i=>this.onLegendItemDoubleClick(i)))}getInnerRadius(){return 0}computeLabelsBBox(e,t){return null}getShapeFillBBox(){const e=this.radius;return{series:new Me(-e,-e,e*2,e*2),axis:new Me(-e,-e,e*2,e*2)}}resetAllAnimation(){const{item:e,label:t}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&Ki([this.itemSelection,this.highlightSelection],e),t&&Ki([this.labelSelection,this.highlightLabelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){const{item:t,label:i}=this.animationResetFns??{};t&&Ki([this.highlightSelection],t),i&&Ki([this.highlightLabelSelection],i)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(e){var i;const t=(i=this.getNodeData())==null?void 0:i[e.datumIndex];if(t!==void 0)return this.itemSelection.select(s=>s instanceof zs&&s.datum===t)[0]}getSeriesRange(e,t){return[NaN,NaN]}},mee=class extends Mp{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},qy=class extends Zy{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:wD,label:ra}}),this.properties=new qe,this.phantomNodeData=void 0,this.backgroundGroup=new Ps({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new yo,this.radiusScale=new yo,this.phantomGroup=this.backgroundGroup.appendChild(new Ne({name:"phantom"})),this.phantomSelection=wi.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new Ne({name:"pieCalloutLabels"})),this.calloutLabelSelection=new wi(this.calloutLabelGroup,Ne),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Ne({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Bi({shape:"circle"})),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Bi({shape:"circle"})),this.innerLabelsGroup=this.contentGroup.appendChild(new Ne({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new Ne({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=wi.select(this.innerLabelsGroup,Gi),this.innerCircleSelection=wi.select(this.innerCircleGroup,()=>new Bi({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=mee,this.angleScale=new yo,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),e==null||e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e==null||e.removeChild(this.backgroundGroup)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.backgroundGroup.zIndex=[0,e],!0):!1}nodeFactory(){return new es}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}async processData(e){var w,S;if(this.data==null||!this.properties.isValid())return;const{visible:t,id:i,ctx:{legendManager:s}}=this,{angleKey:n,angleFilterKey:o,radiusKey:r,calloutLabelKey:a,sectorLabelKey:c,legendItemKey:h}=this.properties,d=()=>(M,R)=>t&&s.getItemEnabled({seriesId:i,itemId:R})?M:0,p=!this.ctx.animationManager.isSkipped(),f=[],v=[];h?f.push(vo(h,"band",{id:"legendItemKey"})):a?f.push(vo(a,"band",{id:"calloutLabelKey"})):c&&f.push(vo(c,"band",{id:"sectorLabelKey"}));const y=this.radiusScale.type,b=this.angleScale.type;r&&v.push(N0(r,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,processor:d}),Je(r,y,{id:"radiusRaw",processor:d}),yc("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&v.push(Je(a,"band",{id:"calloutLabelValue"})),c&&v.push(Je(c,"band",{id:"sectorLabelValue"})),h&&v.push(Je(h,"band",{id:"legendItemValue"})),o&&v.push(Ug(o,b,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:d}),Je(o,b,{id:"angleFilterRaw"}),yc("angleFilterValue",[0,1],0,0)),p&&this.processedData&&f.length>0&&v.push(Ih(this.id,this.processedData)),v.push(Th()),await this.requestDataModel(e,this.data,{props:[...f,Ug(n,b,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:d}),Je(n,b,{id:"angleRaw"}),yc("angleValue",[0,1],0,0),...v]});for(const M of((S=(w=this.processedData)==null?void 0:w.defs)==null?void 0:S.values)??[]){const{id:R,missing:A,property:T}=M,F=p0(this,A);R!=="angleRaw"&&F>0&&de.warnOnce(`no value was found for the key '${String(T)}' on ${F} data element${F>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:e=[],phantomNodeData:t}=this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){const i=e.resolveColumnById(this,"angleValue",t),s=e.resolveColumnById(this,"angleRaw",t),n=this.properties.angleFilterKey!=null?e.resolveColumnById(this,"angleFilterValue",t):void 0,o=this.properties.angleFilterKey!=null?e.resolveColumnById(this,"angleFilterRaw",t):void 0,r=this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,a=this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,c=this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,h=this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,d=this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:n,angleFilterRawValues:o,radiusValues:r,radiusRawValues:a,calloutLabelValues:c,sectorLabelValues:h,legendItemValues:d}}createNodeData(){var N;const{id:e,processedData:t,dataModel:i,angleScale:s,ctx:{legendManager:n},visible:o}=this,{rotation:r,innerRadiusRatio:a}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:e,nodeData:[],labelData:[]};if(!i||(t==null?void 0:t.type)!=="ungrouped")return;const{angleValues:c,angleRawValues:h,angleFilterValues:d,angleFilterRawValues:p,radiusValues:f,radiusRawValues:v,calloutLabelValues:y,sectorLabelValues:b,legendItemValues:w}=this.getProcessedDataValues(i,t),S=(p==null?void 0:p.some((O,B)=>O>h[B]))??!1;let M=0,R=0;const A=[],T=p!=null?[]:void 0,F=t.dataSources.get(this.id)??[],P=(N=t.invalidData)==null?void 0:N.get(this.id);return F.forEach((O,B)=>{if((P==null?void 0:P[B])===!0)return;const V=S?d[B]:c[B],U=p!=null&&!S?Math.sqrt(p[B]/h[B]):1,se=s.convert(M)+Wt(r);M=V,R+=V;const Ce=s.convert(M)+Wt(r),Se=Math.abs(Ce-se),H=se+Se/2,q=h[B],he=((f==null?void 0:f[B])??1)*U,G=v==null?void 0:v[B],W=w==null?void 0:w[B],Y=this.getLabels(O,H,Se,!0,y==null?void 0:y[B],b==null?void 0:b[B],W),X=this.getSectorFormat(O,B,!1),ee={itemId:B,series:this,datum:O,datumIndex:B,angleValue:q,midAngle:H,midCos:Math.cos(H),midSin:Math.sin(H),startAngle:se,endAngle:Ce,radius:he,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(he),0),sectorFormat:X,radiusValue:G,legendItemValue:W,enabled:o&&n.getItemEnabled({seriesId:e,itemId:B}),focusable:!0,...Y};A.push(ee),T!=null&&T.push({...ee,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})}),this.zerosumOuterRing.visible=R===0,this.zerosumInnerRing.visible=R===0&&a!=null&&a!==1&&a>0,{itemId:e,nodeData:A,labelData:A,phantomNodeData:T}}getLabels(e,t,i,s,n,o,r){const{calloutLabel:a,sectorLabel:c,legendItemKey:h}=this.properties,d=!s||a.enabled?this.properties.calloutLabelKey:void 0,p=!s||c.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!p&&!h)return{};const f={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},v={};return d&&i>=Wt(a.minAngle)&&(v.calloutLabel={...this.getTextAlignment(t),text:this.getLabelText(a,{...f,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),p&&(v.sectorLabel={text:this.getLabelText(c,{...f,value:o})}),h!=null&&r!=null&&(v.legendItem={key:h,text:r}),v}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Bg(e),s=-.75*Math.PI,n=i-s,o=Math.floor(n/(Math.PI/2)),r=Ok(o,t.length);return t[r]}getNodeFill(e,t,i){return vc(e,{bounds:"series",colorStops:t.map(s=>({color:s})),gradient:"radial",rotation:0,reverse:!0},{pattern:"forward-slanted-lines",fill:i,fillOpacity:1,backgroundFill:"transparent",backgroundFillOpacity:1,stroke:i,strokeOpacity:1,strokeWidth:4,rotation:0})}getFillParams(e,t,i){if(!(!So(e)||e.bounds==="item"))return{centerX:0,centerY:0,innerRadius:t,outerRadius:i}}getSectorFormat(e,t,i){const{angleKey:s,radiusKey:n,calloutLabelKey:o,sectorLabelKey:r,legendItemKey:a,fills:c,strokes:h,defaultColorRange:d,defaultPatternFills:p,itemStyler:f}=this.properties,v=h[t%h.length],{fill:y,fillOpacity:b,stroke:w,strokeWidth:S,strokeOpacity:M,lineDash:R,lineDashOffset:A,cornerRadius:T}=Qe(i&&this.properties.highlightStyle.item,{fill:c.length>0?c[t%c.length]:void 0,stroke:v,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),F=d[t%d.length],P=p[t%p.length],N=y??"black";let O;return f&&(O=this.cachedDatumCallback(this.getDatumId(e,t)+(i?"-highlight":"-hide"),()=>this.callWithContext(f,{datum:e,angleKey:s,radiusKey:n,calloutLabelKey:o,sectorLabelKey:r,legendItemKey:a,fill:this.getNodeFill(N,F,P),fillOpacity:b,stroke:w,strokeWidth:S,strokeOpacity:M,lineDash:R,lineDashOffset:A,cornerRadius:T,highlighted:i,seriesId:this.id}))),{fill:this.getNodeFill((O==null?void 0:O.fill)??N,F,P),fillOpacity:(O==null?void 0:O.fillOpacity)??b,stroke:(O==null?void 0:O.stroke)??w,strokeWidth:(O==null?void 0:O.strokeWidth)??S,strokeOpacity:(O==null?void 0:O.strokeOpacity)??M,lineDash:(O==null?void 0:O.lineDash)??R,lineDashOffset:(O==null?void 0:O.lineDashOffset)??A,cornerRadius:(O==null?void 0:O.cornerRadius)??T}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,s=e*t+i;return s===e||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){var s;const t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);const i=n=>({...n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=(s=this.phantomNodeData)==null?void 0:s.map(i)}getTitleTranslationY(){var n;const e=Math.max(0,this.radiusScale.range[1]);if(e===0)return NaN;const i=2+(((n=this.properties.title)==null?void 0:n.spacing)??0),s=Math.max(0,-e);return-e-i-s}update({seriesRect:e}){const{title:t}=this.properties,i={seriesRectWidth:e==null?void 0:e.width,seriesRectHeight:e==null?void 0:e.height},s=er(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const n=this.getTitleTranslationY();t.node.y=isFinite(n)?n:0;const o=t.node.getBBox();t.node.visible=t.enabled&&isFinite(n)&&!this.bboxIntersectsSurroundingSeries(o)}for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(e)}updateTitleNodes(){var i,s;const{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&((i=this.labelGroup)==null||i.removeChild(e.node)),t&&(t.node.textBaseline="bottom",(s=this.labelGroup)==null||s.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){var t;const e=i=>{const s=i.innerRadius+(i.outerRadius-i.innerRadius)/2;i.midPoint={x:i.midCos*Math.max(0,s),y:i.midSin*Math.max(0,s)}};this.nodeData.forEach(e),(t=this.phantomNodeData)==null||t.forEach(e)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:o,innerLabelsSelection:r}=this,a=this.nodeData.map(h=>({...h,sectorFormat:{...h.sectorFormat}})),c=(h,d)=>{h.update(d,void 0,p=>this.getDatumId(p.datum,p.datumIndex)),this.ctx.animationManager.isSkipped()&&h.cleanup()};c(e,this.nodeData),c(t,a),c(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,h=>{const d=new wn;d.tag=0,d.pointerEvents=1,h.appendChild(d);const p=new Gi;p.tag=1,p.pointerEvents=1,h.appendChild(p)}),o.update(this.nodeData),s.update(a),r.update(this.properties.innerLabels,h=>{h.pointerEvents=1})}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const n=Math.min(i,this.getOuterRadius());t=Math.ceil(n*2+1)}const s=e?[{radius:t}]:[];this.innerCircleSelection.update(s)}updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(t==null?void 0:t.series)===this,this.highlightLabel.visible=i&&(t==null?void 0:t.series)===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((c,{radius:h})=>{var d,p;c.setProperties({fill:this.getNodeFill((d=this.properties.innerCircle)==null?void 0:d.fill,["black"],"black"),opacity:(p=this.properties.innerCircle)==null?void 0:p.fillOpacity,size:h})});const s=this.radiusScale.range[0],n=this.radiusScale.range[1],o=this.getShapeFillBBox(),r=this.ctx.animationManager.isSkipped(),a=(c,h,d,p)=>{const f=this.getSectorFormat(h.datum,h.itemId,p);h.sectorFormat.fill=f.fill,h.sectorFormat.stroke=f.stroke,r&&(c.startAngle=h.startAngle,c.endAngle=h.endAngle,c.innerRadius=h.innerRadius,c.outerRadius=h.outerRadius),(p||r)&&(c.fill=f.fill,c.stroke=f.stroke);const v=this.getFillParams(f.fill,s,n);My(c,f.fill,o,v),c.strokeWidth=f.strokeWidth,c.fillOpacity=f.fillOpacity,c.strokeOpacity=f.strokeOpacity,c.lineDash=f.lineDash,c.lineDashOffset=f.lineDashOffset,c.cornerRadius=f.cornerRadius,c.fillShadow=this.properties.shadow;const y=Math.max((this.properties.sectorSpacing+(f.stroke!=null?f.strokeWidth:0))/2,0);c.inset=y,c.lineJoin=this.properties.sectorSpacing>=0||y>0?"miter":"round"};this.itemSelection.each((c,h,d)=>a(c,h,d,!1)),this.highlightSelection.each((c,h,d)=>{a(c,h,d,!0),c.visible=h.itemId===(t==null?void 0:t.itemId)}),this.phantomSelection.each((c,h,d)=>a(c,h,d,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:{length:e,strokeWidth:t,colors:i},strokes:s}=this.properties,n=t,o=uN(i)?i??this.properties.strokes:s,{offset:r}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((a,c)=>{const h=a.closestDatum(),{calloutLabel:d,outerRadius:p}=h;if(d!=null&&d.text&&!d.hidden&&p!==0){a.visible=!0,a.strokeWidth=n,a.stroke=o[c%o.length],a.fill=void 0;const f=h.midCos*p,v=h.midSin*p;let y=h.midCos*(p+e),b=h.midSin*(p+e);if((d.collisionTextAlign??d.collisionOffsetY!==0)&&d.box!=null){const S=d.box;let M=y,R=b;y<S.x?M=S.x:y>S.x+S.width&&(M=S.x+S.width),b<S.y?R=S.y:b>S.y+S.height&&(R=S.y+S.height);const A=M-y,T=R-b,F=Math.sqrt(Math.pow(A,2)+Math.pow(T,2)),P=F-r;P>0&&(y=y+A*P/F,b=b+T*P/F)}a.x1=f,a.y1=v,a.x2=y,a.y2=b}else a.visible=!1})}getLabelOverflow(e,t,i){const s=-this.centerX,n=s+i.width,o=-this.centerY,r=o+i.height,a=1;let c=1;t.x+a<s?c=(t.x+t.width-s)/t.width:t.x+t.width-a>n&&(c=(n-t.x)/t.width);const h=t.y+a<o||t.y+t.height-a>r,d=c===1?e.length:Math.floor(e.length*c)-1,p=this.bboxIntersectsSurroundingSeries(t);return{textLength:d,hasVerticalOverflow:h,hasSurroundingSeriesOverflow:p}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(t==null)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s=t**2;return i.some(n=>n.x**2+n.y**2>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=t,o=e.convert(0),r=S=>!S.calloutLabel||S.outerRadius===0,a=this.calloutNodeData,c=a.filter(S=>!r(S));if(c.forEach(S=>{const M=S.calloutLabel;M!=null&&(M.hidden=!1,M.collisionTextAlign=void 0,M.collisionOffsetY=0)}),c.length<=1)return;const h=c.filter(S=>S.midCos<0).sort((S,M)=>S.midSin-M.midSin),d=c.filter(S=>S.midCos>=0).sort((S,M)=>S.midSin-M.midSin),p=c.filter(S=>{var M;return S.midSin<0&&((M=S.calloutLabel)==null?void 0:M.textAlign)==="center"}).sort((S,M)=>S.midCos-M.midCos),f=c.filter(S=>{var M;return S.midSin>=0&&((M=S.calloutLabel)==null?void 0:M.textAlign)==="center"}).sort((S,M)=>S.midCos-M.midCos),v=S=>{const M=S.calloutLabel;if(M==null)return Me.zero.clone();const R=S.outerRadius+i.length+s,A=S.midCos*R,T=S.midSin*R+M.collisionOffsetY,F=M.collisionTextAlign??M.textAlign,P=M.textBaseline;return Gi.computeBBox(M.text,A,T,{font:this.properties.calloutLabel,textAlign:F,textBaseline:P})},y=(S,M,R)=>{const A=v(S).grow(n/2),T=v(M).grow(n/2);A.x<T.x+T.width&&A.x+A.width>T.x&&(R==="to-top"?A.y<T.y+T.height:A.y+A.height>T.y)&&(M.calloutLabel.collisionOffsetY=R==="to-top"?A.y-T.y-T.height:A.y+A.height-T.y)},b=S=>{const M=S.slice().sort((A,T)=>Math.abs(A.midSin)-Math.abs(T.midSin))[0],R=S.indexOf(M);for(let A=R-1;A>=0;A--){const T=S[A+1],F=S[A];y(T,F,"to-top")}for(let A=R+1;A<S.length;A++){const T=S[A-1],F=S[A];y(T,F,"to-bottom")}},w=S=>{const M=c.some(N=>N.calloutLabel.collisionOffsetY!==0),R=S.map(N=>v(N)),A=R.map(N=>N.clone().grow(n/2));let T=!1;for(let N=0;N<A.length&&!T;N++){const O=A[N];for(let B=N+1;B<S.length;B++){const V=A[B];if(O.collidesBBox(V)){T=!0;break}}}const F=a.map(N=>{const{startAngle:O,endAngle:B,outerRadius:V}=N;return{startAngle:O,endAngle:B,innerRadius:o,outerRadius:V}}),P=R.some(N=>F.some(O=>bG(N,O)));!T&&!M&&!P||S.filter(N=>N.calloutLabel.textAlign==="center").forEach(N=>{const O=N.calloutLabel;N.midCos<0?O.collisionTextAlign="right":N.midCos>0?O.collisionTextAlign="left":O.collisionTextAlign="center"})};b(h),b(d),w(p),w(f)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:o,color:r}=i,a=new Gi;this.calloutLabelSelection.selectByTag(1).forEach(c=>{const h=c.closestDatum(),d=h.calloutLabel,p=t.convert(h.radius),f=Math.max(0,p);if(!(d!=null&&d.text)||f===0||d.hidden){c.visible=!1;return}const v=f+n+o,y=h.midCos*v,b=h.midSin*v+d.collisionOffsetY,w={textAlign:d.collisionTextAlign??d.textAlign,textBaseline:d.textBaseline};a.text=d.text,a.x=y,a.y=b,a.setFont(this.properties.calloutLabel),a.setAlign(w);const S=a.getBBox();let M=d.text,R=!0;if(i.avoidCollisions){const{textLength:A,hasVerticalOverflow:T}=this.getLabelOverflow(d.text,S,e);M=d.text.length===A?d.text:`${d.text.substring(0,A)}…`,R=!T}c.text=M,c.x=y,c.y=b,c.setFont(this.properties.calloutLabel),c.setAlign(w),c.fill=r,c.visible=R})}computeLabelsBBox(e,t){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:o,maxCollisionOffset:r,minSpacing:a}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const c=[],h=new Gi;let d;const{title:p}=this.properties;if(p!=null&&p.text&&p.enabled){const f=this.getTitleTranslationY();isFinite(f)&&(h.text=p.text,h.x=0,h.y=f,h.setFont(p),h.setAlign({textBaseline:"bottom",textAlign:"center"}),d=h.getBBox(),c.push(d))}return this.calloutNodeData.forEach(f=>{const v=f.calloutLabel;if(!v||f.outerRadius===0)return null;const y=f.outerRadius+n+o,b=f.midCos*y,w=f.midSin*y+v.collisionOffsetY;h.text=v.text,h.x=b,h.y=w,h.setFont(this.properties.calloutLabel),h.setAlign({textAlign:v.collisionTextAlign??v.textAlign,textBaseline:v.textBaseline});const S=h.getBBox();if(v.box=S,Math.abs(v.collisionOffsetY)>r){v.hidden=!0;return}if(d){const M=-this.centerY,R=new Me(d.x-a,M,d.width+2*a,d.y+d.height+a-M);if(S.collidesBBox(R)){v.hidden=!0;return}}if(e.hideWhenNecessary){const{textLength:M,hasVerticalOverflow:R,hasSurroundingSeriesOverflow:A}=this.getLabelOverflow(v.text,S,t),T=v.text.length>2&&M<2;if(R||T||A){v.hidden=!0;return}}v.hidden=!1,c.push(S)}),c.length===0?null:Me.merge(c)}updateSectorLabelNodes(){const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:o,positionOffset:r,positionRatio:a,color:c}=this.properties.sectorLabel,h=(d,p)=>{const{sectorLabel:f,outerRadius:v}=p;let y=!1;if(f&&v!==0){const b=t*(1-a)+v*a+r;d.fill=c,d.fontStyle=s,d.fontWeight=n,d.fontSize=i,d.fontFamily=o,d.text=f.text,d.x=p.midCos*b,d.y=p.midSin*b,d.textAlign="center",d.textBaseline="middle";const w=d.getBBox(),S=[[w.x,w.y],[w.x+w.width,w.y],[w.x+w.width,w.y+w.height],[w.x,w.y+w.height]],{startAngle:M,endAngle:R}=p,A={startAngle:M,endAngle:R,innerRadius:t,outerRadius:v};S.every(([T,F])=>zv(T,F,A))&&(y=!0)}d.visible=y};this.labelSelection.each(h),this.highlightLabelSelection.each(h)}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each((d,p)=>{const{fontStyle:f,fontWeight:v,fontSize:y,fontFamily:b,color:w}=p;d.fontStyle=f,d.fontWeight=v,d.fontSize=y,d.fontFamily=b,d.text=p.text,d.x=0,d.y=0,d.fill=w,d.textAlign="center",d.textBaseline="alphabetic",e.push(d.getBBox()),t.push(p.spacing)});const i=d=>d===0?0:t[d],s=d=>d===t.length-1?0:t[d],n=e.reduce((d,p,f)=>d+p.height+i(f)+s(f),0),o=Math.max(...e.map(d=>d.width)),r=this.getInnerRadius(),c=Math.sqrt(Math.pow(o/2,2)+Math.pow(n/2,2))<=(r>0?r:this.getOuterRadius()),h=[];for(let d=0,p=-n/2;d<e.length;d++){const v=e[d].height+p+i(d);h.push(v),p=v+s(d)}this.innerLabelsSelection.each((d,p,f)=>{d.y=h[f],d.visible=c})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}pickNodeClosestDatum(e){return xD(this,e)}getTooltipContent(e){var P;const{id:t,dataModel:i,processedData:s,properties:n}=this,{legendItemKey:o,calloutLabelKey:r,calloutLabelName:a,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:p,radiusKey:f,radiusName:v,tooltip:y}=n,b=this.properties.title.text;if(!i||!s)return;const w=(P=s.dataSources.get(this.id))==null?void 0:P[e],{angleRawValues:S,legendItemValues:M,calloutLabelValues:R,sectorLabelValues:A}=this.getProcessedDataValues(i,s),T=S[e],F=(M==null?void 0:M[e])??(r===d||R==null?void 0:R[e])??(c===d||A==null?void 0:A[e])??p;return y.formatTooltip(this.properties,{title:b,symbol:this.legendItemSymbol(e),data:[{label:F,fallbackLabel:d,value:$r(T,3)}]},{seriesId:t,datum:w,title:p,legendItemKey:o,calloutLabelKey:r,calloutLabelName:a,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:p,radiusKey:f,radiusName:v,...this.getSectorFormat(w,e,!1)})}legendItemSymbol(e){var d,p;const t=(p=(d=this.processedData)==null?void 0:d.dataSources.get(this.id))==null?void 0:p[e],i=this.getSectorFormat(t,e,!1),{fillOpacity:s,strokeOpacity:n,strokeWidth:o,lineDash:r,lineDashOffset:a}=this.properties;let{fill:c}=i;const{stroke:h}=i;return So(c)&&(c={...c,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:c,stroke:h,fillOpacity:s,strokeOpacity:n,strokeWidth:o,lineDash:r,lineDashOffset:a}}}getLegendData(e){var A,T,F,P,N,O;const{visible:t,processedData:i,dataModel:s,id:n,ctx:{legendManager:o}}=this;if(!s||!i||!this.properties.isValid()||e!=="category")return[];const{angleKey:r,calloutLabelKey:a,sectorLabelKey:c,legendItemKey:h,showInLegend:d}=this.properties;if(!h&&(!a||a===r)&&(!c||c===r))return[];const{angleRawValues:p,calloutLabelValues:f,sectorLabelValues:v,legendItemValues:y}=this.getProcessedDataValues(s,i),b=((A=this.properties.title)==null?void 0:A.showInLegend)&&this.properties.title.text,w=[],S=this.properties.hideZeroValueSectorsInLegend,M=i.dataSources.get(this.id),R=(T=i.invalidData)==null?void 0:T.get(this.id);for(let B=0;B<i.input.count;B++){const V=M==null?void 0:M[B],U=p[B];if((R==null?void 0:R[B])===!0||S&&U===0)continue;const se=[];b&&se.push(b);const Ce=this.getLabels(V,2*Math.PI,2*Math.PI,!1,f==null?void 0:f[B],v==null?void 0:v[B],y==null?void 0:y[B]);h&&Ce.legendItem!==void 0?se.push(Ce.legendItem.text):a&&a!==r&&((F=Ce.calloutLabel)==null?void 0:F.text)!==void 0?se.push((P=Ce.calloutLabel)==null?void 0:P.text):c&&c!==r&&((N=Ce.sectorLabel)==null?void 0:N.text)!==void 0&&se.push((O=Ce.sectorLabel)==null?void 0:O.text),se.length!==0&&w.push({legendType:"category",id:n,datum:V,itemId:B,seriesId:n,enabled:t&&o.getItemEnabled({seriesId:n,itemId:B}),label:{text:se.join(" - ")},symbol:this.legendItemSymbol(B),legendItemName:h!=null?V[h]:void 0,hideInLegend:!d})}return w}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:s}}=this;e.forEach((n,o)=>i.toggleItem(n,t,o)),i.update(),s.update(4)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=Cc(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);ii(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,n)=>this.getDatumId(n.datum,n.datumIndex)),ii(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),ct(this,"callout",t,this.calloutLabelSelection),ct(this,"sector",t,this.labelSelection),ct(this,"highlight",t,this.highlightLabelSelection),ct(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var v,y,b,w;const{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:s,radiusScale:n,previousRadiusScale:o}=this,{animationManager:r}=this.ctx,a=(y=(v=s==null?void 0:s.reduced)==null?void 0:v.diff)==null?void 0:y[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const c=((a==null?void 0:a.moved.size)??0)===0,h=((s==null?void 0:s.defs.keys.length)??0)>0,d=((w=(b=s==null?void 0:s.reduced)==null?void 0:b.animationValidation)==null?void 0:w.uniqueKeys)??!0;(!c||!h||!d)&&this.ctx.animationManager.skipCurrentBatch();const p=!this.nodeData.some(S=>S.enabled),f=Cc(!1,this.properties.rotation,n,o);ii(this.id,"nodes",r,[e,t,i],f.nodes,(S,M)=>this.getDatumId(M.datum,M.datumIndex),a),ii(this.id,"innerCircle",r,[this.innerCircleSelection],f.innerCircle),ct(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),ct(this,"sector",this.ctx.animationManager,this.labelSelection),ct(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.noVisibleData!==p&&(this.noVisibleData=p,ct(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=Cc(!1,this.properties.rotation,s,n);ii(this.id,"nodes",o,[e,t,i],r.nodes,(a,c)=>this.getDatumId(c.datum,c.datumIndex)),ii(this.id,"innerCircle",o,[this.innerCircleSelection],r.innerCircle),Ua(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Ua(this,"sector",this.ctx.animationManager,this.labelSelection),Ua(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),Ua(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(e,t){var o,r,a;const{calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties;return(a=(r=(o=this.processedData)==null?void 0:o.reduced)==null?void 0:r.animationValidation)!=null&&a.uniqueKeys?n?Xi(e[n]):i?Xi(e[i]):s?Xi(e[s]):`${t}`:`${t}`}};qy.className="DonutSeries";qy.type="donut";var Xy={type:Fe(ws("pie")),angleKey:Fe(xe),radiusKey:xe,calloutLabelKey:xe,sectorLabelKey:xe,legendItemKey:xe,angleName:xe,radiusName:xe,calloutLabelName:xe,sectorLabelName:xe,radiusMin:me,radiusMax:me,rotation:Le,outerRadiusOffset:Le,outerRadiusRatio:_t,hideZeroValueSectorsInLegend:ye,sectorSpacing:me,cornerRadius:me,itemStyler:yt,title:{enabled:ye,text:xe,showInLegend:ye,spacing:me,...pn},calloutLabel:{enabled:ye,offset:Le,minAngle:me,avoidCollisions:ye,formatter:yt,...pn},sectorLabel:{enabled:ye,positionOffset:Le,positionRatio:_t,formatter:yt,...pn},calloutLine:{colors:$t(Ye),length:me,strokeWidth:me},fills:$t(EM),strokes:$t(Ye),tooltip:la,shadow:jp,...Ao,...Xo,...il(Yn,["fill"]),...il(Gs,["stroke"])};Xy.defaultColorRange=$t($t(Ye));Xy.defaultPatternFills=$t(Ye);var vee={...Xy,type:Fe(ws("donut")),innerRadiusOffset:Le,innerRadiusRatio:_t,innerCircle:{fill:xe,fillOpacity:_t},innerLabels:Mc({text:Fe(xe),spacing:me,...pn},"inner label options array")},yee={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:[{$value:"$1"}]},{$isPattern:[{$value:"$1"}]}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$palette:"fills"},strokes:{$palette:"strokes"},defaultColorRange:{$palette:"gradients"},defaultPatternFills:X0,fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,innerRadiusRatio:{$if:[{$eq:[{$path:["./innerRadiusOffset",void 0]},void 0]},.7,void 0]},shadow:{enabled:!1,color:ml,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:2}},legend:{enabled:!0}},Cee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:e=>new qy(e),tooltipDefaults:{range:"exact"},themeTemplate:yee},See={type:"series",name:"donut",chartType:"polar",options:vee,create:e=>new qy(e)},MG=class extends jt{constructor(){super(...arguments),this.showInLegend=!1}};D([E()],MG.prototype,"showInLegend",2);var Hh=class extends Hi{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};D([E()],Hh.prototype,"offset",2);D([E(yn.restrict({min:0,max:360}))],Hh.prototype,"minAngle",2);D([E()],Hh.prototype,"minSpacing",2);D([E()],Hh.prototype,"maxCollisionOffset",2);D([E()],Hh.prototype,"avoidCollisions",2);var MD=class extends Hi{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};D([E()],MD.prototype,"positionOffset",2);D([E()],MD.prototype,"positionRatio",2);var Qy=class extends Be{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};D([E(zi(ps(ar,Cn,lr)))],Qy.prototype,"colors",2);D([E()],Qy.prototype,"length",2);D([E()],Qy.prototype,"strokeWidth",2);var ot=class extends xn{constructor(){super(...arguments),this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=Object.values(hi),this.strokes=Object.values(Go),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.title=new MG,this.shadow=new Ro,this.calloutLabel=new Hh,this.sectorLabel=new MD,this.calloutLine=new Qy,this.tooltip=new Ds}};D([E()],ot.prototype,"angleKey",2);D([E()],ot.prototype,"angleName",2);D([E()],ot.prototype,"angleFilterKey",2);D([E()],ot.prototype,"radiusKey",2);D([E()],ot.prototype,"radiusName",2);D([E()],ot.prototype,"radiusMin",2);D([E()],ot.prototype,"radiusMax",2);D([E()],ot.prototype,"calloutLabelKey",2);D([E()],ot.prototype,"calloutLabelName",2);D([E()],ot.prototype,"sectorLabelKey",2);D([E()],ot.prototype,"sectorLabelName",2);D([E()],ot.prototype,"legendItemKey",2);D([E(zi(_M))],ot.prototype,"defaultColorRange",2);D([E(zi(Cn))],ot.prototype,"defaultPatternFills",2);D([E(zi(ps(ar,Cn,lr)))],ot.prototype,"fills",2);D([E()],ot.prototype,"strokes",2);D([E()],ot.prototype,"fillOpacity",2);D([E()],ot.prototype,"strokeOpacity",2);D([E()],ot.prototype,"lineDash",2);D([E()],ot.prototype,"lineDashOffset",2);D([E()],ot.prototype,"cornerRadius",2);D([E()],ot.prototype,"itemStyler",2);D([E()],ot.prototype,"rotation",2);D([E()],ot.prototype,"outerRadiusOffset",2);D([E()],ot.prototype,"outerRadiusRatio",2);D([E()],ot.prototype,"strokeWidth",2);D([E()],ot.prototype,"sectorSpacing",2);D([E()],ot.prototype,"hideZeroValueSectorsInLegend",2);D([E()],ot.prototype,"title",2);D([E()],ot.prototype,"shadow",2);D([E()],ot.prototype,"calloutLabel",2);D([E()],ot.prototype,"sectorLabel",2);D([E()],ot.prototype,"calloutLine",2);D([E()],ot.prototype,"tooltip",2);var bee=class extends Mp{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},Jy=class extends Zy{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:wD,label:ra}}),this.properties=new ot,this.phantomNodeData=void 0,this.backgroundGroup=new Ps({name:`${this.id}-background`,zIndex:0}),this.previousRadiusScale=new yo,this.radiusScale=new yo,this.phantomGroup=this.backgroundGroup.appendChild(new Ne({name:"phantom"})),this.phantomSelection=wi.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new Ne({name:"pieCalloutLabels"})),this.calloutLabelSelection=new wi(this.calloutLabelGroup,Ne),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Ne({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Bi({shape:"circle"})),this.surroundingRadius=void 0,this.NodeEvent=bee,this.angleScale=new yo,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e==null||e.removeChild(this.backgroundGroup)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.backgroundGroup.zIndex=[0,e],!0):!1}nodeFactory(){const e=new es;return e.miterLimit=1e9,e}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}async processData(e){var w,S,M,R,A;if(this.data==null||!this.properties.isValid())return;const{visible:t,id:i,ctx:{legendManager:s}}=this,{angleKey:n,angleFilterKey:o,radiusKey:r,calloutLabelKey:a,sectorLabelKey:c,legendItemKey:h}=this.properties,d=()=>(T,F)=>t&&s.getItemEnabled({seriesId:i,itemId:F})?T:0,p=!this.ctx.animationManager.isSkipped(),f=[],v=[];h?f.push(vo(h,"band",{id:"legendItemKey"})):a?f.push(vo(a,"band",{id:"calloutLabelKey"})):c&&f.push(vo(c,"band",{id:"sectorLabelKey"}));const y=this.radiusScale.type,b=this.angleScale.type;r&&v.push(N0(r,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax,processor:d}),Je(r,y,{id:"radiusRaw",processor:d}),yc("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&v.push(Je(a,"band",{id:"calloutLabelValue"})),c&&v.push(Je(c,"band",{id:"sectorLabelValue"})),h&&v.push(Je(h,"band",{id:"legendItemValue"})),o&&v.push(Ug(o,b,{id:"angleFilterValue",onlyPositive:!0,invalidValue:0,processor:d}),Je(o,b,{id:"angleFilterRaw"}),yc("angleFilterValue",[0,1],0,0)),p&&((M=(S=(w=this.processedData)==null?void 0:w.reduced)==null?void 0:S.animationValidation)!=null&&M.uniqueKeys)&&f.length>0&&v.push(Ih(this.id,this.processedData)),v.push(Th()),await this.requestDataModel(e,this.data,{props:[...f,Ug(n,b,{id:"angleValue",onlyPositive:!0,invalidValue:0,processor:d}),Je(n,b,{id:"angleRaw"}),yc("angleValue",[0,1],0,0),...v]});for(const T of((A=(R=this.processedData)==null?void 0:R.defs)==null?void 0:A.values)??[]){const{id:F,missing:P,property:N}=T,O=p0(this,P);F!=="angleRaw"&&O>0&&de.warnOnce(`no value was found for the key '${String(N)}' on ${O} data element${O>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:e=[],phantomNodeData:t}=this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){const i=e.resolveColumnById(this,"angleValue",t),s=e.resolveColumnById(this,"angleRaw",t),n=this.properties.angleFilterKey!=null?e.resolveColumnById(this,"angleFilterValue",t):void 0,o=this.properties.angleFilterKey!=null?e.resolveColumnById(this,"angleFilterRaw",t):void 0,r=this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,a=this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,c=this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,h=this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,d=this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:n,angleFilterRawValues:o,radiusValues:r,radiusRawValues:a,calloutLabelValues:c,sectorLabelValues:h,legendItemValues:d}}createNodeData(){var P;const{id:e,processedData:t,dataModel:i,angleScale:s,ctx:{legendManager:n},visible:o}=this,{rotation:r}=this.properties;if(!i||(t==null?void 0:t.type)!=="ungrouped")return;const{angleValues:a,angleRawValues:c,angleFilterValues:h,angleFilterRawValues:d,radiusValues:p,radiusRawValues:f,calloutLabelValues:v,sectorLabelValues:y,legendItemValues:b}=this.getProcessedDataValues(i,t),w=(d==null?void 0:d.some((N,O)=>N>c[O]))??!1;let S=0,M=0;const R=[],A=d!=null?[]:void 0,T=t.dataSources.get(this.id)??[],F=(P=t.invalidData)==null?void 0:P.get(this.id);return T.forEach((N,O)=>{if((F==null?void 0:F[O])===!0)return;const B=w?h[O]:a[O],V=d!=null&&!w?Math.sqrt(d[O]/c[O]):1,U=s.convert(S)+Wt(r);S=B,M+=B;const se=s.convert(S)+Wt(r),Ce=Math.abs(se-U),Se=U+Ce/2,H=c[O],ie=((p==null?void 0:p[O])??1)*V,he=f==null?void 0:f[O],G=b==null?void 0:b[O],W=this.getLabels(N,Se,Ce,!0,v==null?void 0:v[O],y==null?void 0:y[O],G),Y=this.getSectorFormat(N,O,!1),X={itemId:O,series:this,datum:N,datumIndex:O,angleValue:H,midAngle:Se,midCos:Math.cos(Se),midSin:Math.sin(Se),startAngle:U,endAngle:se,radius:ie,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(ie),0),sectorFormat:Y,radiusValue:he,legendItemValue:G,enabled:o&&n.getItemEnabled({seriesId:e,itemId:O}),...W};R.push(X),A!=null&&A.push({...X,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)})}),this.zerosumOuterRing.visible=M===0,{itemId:e,nodeData:R,labelData:R,phantomNodeData:A}}getLabels(e,t,i,s,n,o,r){const{calloutLabel:a,sectorLabel:c,legendItemKey:h}=this.properties,d=!s||a.enabled?this.properties.calloutLabelKey:void 0,p=!s||c.enabled?this.properties.sectorLabelKey:void 0;if(!d&&!p&&!h)return{};const f={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},v={};return d&&i>=Wt(a.minAngle)&&(v.calloutLabel={...this.getTextAlignment(t),text:this.getLabelText(a,{...f,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),p&&(v.sectorLabel={text:this.getLabelText(c,{...f,value:o})}),h!=null&&r!=null&&(v.legendItem={key:h,text:r}),v}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Bg(e),s=-.75*Math.PI,n=i-s,o=Math.floor(n/(Math.PI/2)),r=Ok(o,t.length);return t[r]}getNodeFill(e,t,i){return vc(e,{bounds:"series",colorStops:t.map(s=>({color:s})),gradient:"radial",rotation:0,reverse:!0},{pattern:"forward-slanted-lines",fill:i,fillOpacity:1,backgroundFill:"transparent",backgroundFillOpacity:1,stroke:i,strokeOpacity:1,strokeWidth:4,rotation:0})}getFillParams(e,t,i){if(!(!So(e)||e.bounds==="item"))return{centerX:0,centerY:0,innerRadius:t,outerRadius:i}}getSectorFormat(e,t,i){const{angleKey:s,radiusKey:n,calloutLabelKey:o,sectorLabelKey:r,legendItemKey:a,fills:c,strokes:h,defaultColorRange:d,defaultPatternFills:p,itemStyler:f}=this.properties,v=h[t%h.length],{fill:y,fillOpacity:b,stroke:w,strokeWidth:S,strokeOpacity:M,lineDash:R,lineDashOffset:A,cornerRadius:T}=Qe(i&&this.properties.highlightStyle.item,{fill:c.length>0?c[t%c.length]:void 0,stroke:v,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties),F=d[t%d.length],P=p[t%p.length],N=y??"black";let O;return f&&(O=this.cachedDatumCallback(this.getDatumId(e,t)+(i?"-highlight":"-hide"),()=>this.callWithContext(f,{datum:e,angleKey:s,radiusKey:n,calloutLabelKey:o,sectorLabelKey:r,legendItemKey:a,fill:this.getNodeFill(N,F,P),strokeOpacity:M,stroke:w,strokeWidth:S,fillOpacity:b,lineDash:R,lineDashOffset:A,cornerRadius:T,highlighted:i,seriesId:this.id}))),{fill:this.getNodeFill((O==null?void 0:O.fill)??N,F,P),fillOpacity:(O==null?void 0:O.fillOpacity)??b,stroke:(O==null?void 0:O.stroke)??w,strokeWidth:(O==null?void 0:O.strokeWidth)??S,strokeOpacity:(O==null?void 0:O.strokeOpacity)??M,lineDash:(O==null?void 0:O.lineDash)??R,lineDashOffset:(O==null?void 0:O.lineDashOffset)??A,cornerRadius:(O==null?void 0:O.cornerRadius)??T}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(e){var s;const t=[0,this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);const i=n=>({...n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=(s=this.phantomNodeData)==null?void 0:s.map(i)}getTitleTranslationY(){var n;const e=Math.max(0,this.radiusScale.range[1]);if(e===0)return NaN;const i=2+(((n=this.properties.title)==null?void 0:n.spacing)??0),s=Math.max(0,-e);return-e-i-s}update({seriesRect:e}){const{title:t}=this.properties,i={seriesRectWidth:e==null?void 0:e.width,seriesRectHeight:e==null?void 0:e.height},s=er(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const n=this.getTitleTranslationY();t.node.y=isFinite(n)?n:0;const o=t.node.getBBox();t.node.visible=t.enabled&&isFinite(n)&&!this.bboxIntersectsSurroundingSeries(o)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(e)}updateTitleNodes(){var i,s;const{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&((i=this.labelGroup)==null||i.removeChild(e.node)),t&&(t.node.textBaseline="bottom",(s=this.labelGroup)==null||s.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){var t;const e=i=>{const s=i.innerRadius+(i.outerRadius-i.innerRadius)/2;i.midPoint={x:i.midCos*Math.max(0,s),y:i.midSin*Math.max(0,s)}};this.nodeData.forEach(e),(t=this.phantomNodeData)==null||t.forEach(e)}updateSelections(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:o}=this,r=this.nodeData.map(c=>({...c,sectorFormat:{...c.sectorFormat}})),a=(c,h)=>{c.update(h,void 0,d=>this.getDatumId(d.datum,d.datumIndex)),this.ctx.animationManager.isSkipped()&&c.cleanup()};a(e,this.nodeData),a(t,r),a(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,c=>{const h=new wn;h.tag=0,h.pointerEvents=1,c.appendChild(h);const d=new Gi;d.tag=1,d.pointerEvents=1,c.appendChild(d)}),o.update(this.nodeData),s.update(r)}updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(t==null?void 0:t.series)===this,this.highlightLabel.visible=i&&(t==null?void 0:t.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();const s=this.radiusScale.range[0],n=this.radiusScale.range[1],o=this.getShapeFillBBox(),r=this.ctx.animationManager.isSkipped(),a=(c,h,d,p)=>{const f=this.getSectorFormat(h.datum,h.itemId,p);h.sectorFormat.fill=f.fill,h.sectorFormat.stroke=f.stroke,r&&(c.startAngle=h.startAngle,c.endAngle=h.endAngle,c.innerRadius=h.innerRadius,c.outerRadius=h.outerRadius),(p||r)&&(c.fill=f.fill,c.stroke=f.stroke);const v=this.getFillParams(f.fill,s,n);My(c,f.fill,o,v),c.strokeWidth=f.strokeWidth,c.fillOpacity=f.fillOpacity,c.strokeOpacity=f.strokeOpacity,c.lineDash=f.lineDash,c.lineDashOffset=f.lineDashOffset,c.cornerRadius=f.cornerRadius,c.fillShadow=this.properties.shadow;const y=Math.max((this.properties.sectorSpacing+(f.stroke!=null?f.strokeWidth:0))/2,0);c.inset=y,c.lineJoin=this.properties.sectorSpacing>=0||y>0?"miter":"round"};this.itemSelection.each((c,h,d)=>a(c,h,d,!1)),this.highlightSelection.each((c,h,d)=>{a(c,h,d,!0),c.visible=h.itemId===(t==null?void 0:t.itemId)}),this.phantomSelection.each((c,h,d)=>a(c,h,d,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:{length:e,strokeWidth:t,colors:i},strokes:s}=this.properties,n=t,o=uN(i)?i:s,{offset:r}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((a,c)=>{const h=a.closestDatum(),{calloutLabel:d,outerRadius:p}=h;if(d!=null&&d.text&&!d.hidden&&p!==0){a.visible=!0,a.strokeWidth=n,a.stroke=o[c%o.length],a.fill=void 0;const f=h.midCos*p,v=h.midSin*p;let y=h.midCos*(p+e),b=h.midSin*(p+e);if((d.collisionTextAlign??d.collisionOffsetY!==0)&&d.box!=null){const S=d.box;let M=y,R=b;y<S.x?M=S.x:y>S.x+S.width&&(M=S.x+S.width),b<S.y?R=S.y:b>S.y+S.height&&(R=S.y+S.height);const A=M-y,T=R-b,F=Math.sqrt(Math.pow(A,2)+Math.pow(T,2)),P=F-r;P>0&&(y=y+A*P/F,b=b+T*P/F)}a.x1=f,a.y1=v,a.x2=y,a.y2=b}else a.visible=!1})}getLabelOverflow(e,t,i){const s=-this.centerX,n=s+i.width,o=-this.centerY,r=o+i.height,a=1;let c=1;t.x+a<s?c=(t.x+t.width-s)/t.width:t.x+t.width-a>n&&(c=(n-t.x)/t.width);const h=t.y+a<o||t.y+t.height-a>r,d=c===1?e.length:Math.floor(e.length*c)-1,p=this.bboxIntersectsSurroundingSeries(t);return{textLength:d,hasVerticalOverflow:h,hasSurroundingSeriesOverflow:p}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(t==null)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s=t**2;return i.some(n=>n.x**2+n.y**2>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=t,o=e.convert(0),r=S=>!S.calloutLabel||S.outerRadius===0,a=this.calloutNodeData,c=a.filter(S=>!r(S));if(c.forEach(S=>{const M=S.calloutLabel;M!=null&&(M.hidden=!1,M.collisionTextAlign=void 0,M.collisionOffsetY=0)}),c.length<=1)return;const h=c.filter(S=>S.midCos<0).sort((S,M)=>S.midSin-M.midSin),d=c.filter(S=>S.midCos>=0).sort((S,M)=>S.midSin-M.midSin),p=c.filter(S=>{var M;return S.midSin<0&&((M=S.calloutLabel)==null?void 0:M.textAlign)==="center"}).sort((S,M)=>S.midCos-M.midCos),f=c.filter(S=>{var M;return S.midSin>=0&&((M=S.calloutLabel)==null?void 0:M.textAlign)==="center"}).sort((S,M)=>S.midCos-M.midCos),v=S=>{const M=S.calloutLabel;if(M==null)return Me.zero.clone();const R=S.outerRadius+i.length+s,A=S.midCos*R,T=S.midSin*R+M.collisionOffsetY,F=M.collisionTextAlign??M.textAlign,P=M.textBaseline;return Gi.computeBBox(M.text,A,T,{font:this.properties.calloutLabel,textAlign:F,textBaseline:P})},y=(S,M,R)=>{const A=v(S).grow(n/2),T=v(M).grow(n/2);A.x<T.x+T.width&&A.x+A.width>T.x&&(R==="to-top"?A.y<T.y+T.height:A.y+A.height>T.y)&&(M.calloutLabel.collisionOffsetY=R==="to-top"?A.y-T.y-T.height:A.y+A.height-T.y)},b=S=>{const M=S.slice().sort((A,T)=>Math.abs(A.midSin)-Math.abs(T.midSin))[0],R=S.indexOf(M);for(let A=R-1;A>=0;A--){const T=S[A+1],F=S[A];y(T,F,"to-top")}for(let A=R+1;A<S.length;A++){const T=S[A-1],F=S[A];y(T,F,"to-bottom")}},w=S=>{const M=c.some(N=>N.calloutLabel.collisionOffsetY!==0),R=S.map(N=>v(N)),A=R.map(N=>N.clone().grow(n/2));let T=!1;for(let N=0;N<A.length&&!T;N++){const O=A[N];for(let B=N+1;B<S.length;B++){const V=A[B];if(O.collidesBBox(V)){T=!0;break}}}const F=a.map(N=>{const{startAngle:O,endAngle:B,outerRadius:V}=N;return{startAngle:O,endAngle:B,innerRadius:o,outerRadius:V}}),P=R.some(N=>F.some(O=>bG(N,O)));!T&&!M&&!P||S.filter(N=>N.calloutLabel.textAlign==="center").forEach(N=>{const O=N.calloutLabel;N.midCos<0?O.collisionTextAlign="right":N.midCos>0?O.collisionTextAlign="left":O.collisionTextAlign="center"})};b(h),b(d),w(p),w(f)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:o,color:r}=i,a=new Gi;this.calloutLabelSelection.selectByTag(1).forEach(c=>{const h=c.closestDatum(),d=h.calloutLabel,p=t.convert(h.radius),f=Math.max(0,p);if(!(d!=null&&d.text)||f===0||d.hidden){c.visible=!1;return}const v=f+n+o,y=h.midCos*v,b=h.midSin*v+d.collisionOffsetY,w={textAlign:d.collisionTextAlign??d.textAlign,textBaseline:d.textBaseline};a.text=d.text,a.x=y,a.y=b,a.setFont(this.properties.calloutLabel),a.setAlign(w);const S=a.getBBox();let M=d.text,R=!0;if(i.avoidCollisions){const{textLength:A,hasVerticalOverflow:T}=this.getLabelOverflow(d.text,S,e);M=d.text.length===A?d.text:`${d.text.substring(0,A)}…`,R=!T}c.text=M,c.x=y,c.y=b,c.setFont(this.properties.calloutLabel),c.setAlign(w),c.fill=r,c.visible=R})}computeLabelsBBox(e,t){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:o,maxCollisionOffset:r,minSpacing:a}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const c=[],h=new Gi;let d;const{title:p}=this.properties;if(p!=null&&p.text&&p.enabled){const f=this.getTitleTranslationY();isFinite(f)&&(h.text=p.text,h.x=0,h.y=f,h.setFont(p),h.setAlign({textBaseline:"bottom",textAlign:"center"}),d=h.getBBox(),c.push(d))}return this.calloutNodeData.forEach(f=>{const v=f.calloutLabel;if(!v||f.outerRadius===0)return null;const y=f.outerRadius+n+o,b=f.midCos*y,w=f.midSin*y+v.collisionOffsetY;h.text=v.text,h.x=b,h.y=w,h.setFont(this.properties.calloutLabel),h.setAlign({textAlign:v.collisionTextAlign??v.textAlign,textBaseline:v.textBaseline});const S=h.getBBox();if(v.box=S,Math.abs(v.collisionOffsetY)>r){v.hidden=!0;return}if(d){const M=-this.centerY,R=new Me(d.x-a,M,d.width+2*a,d.y+d.height+a-M);if(S.collidesBBox(R)){v.hidden=!0;return}}if(e.hideWhenNecessary){const{textLength:M,hasVerticalOverflow:R,hasSurroundingSeriesOverflow:A}=this.getLabelOverflow(v.text,S,t),T=v.text.length>2&&M<2;if(R||T||A){v.hidden=!0;return}}v.hidden=!1,c.push(S)}),c.length===0?null:Me.merge(c)}updateSectorLabelNodes(){var f;const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:o,positionOffset:r,positionRatio:a,color:c}=this.properties.sectorLabel,h=t>0,d=((f=this.ctx.legendManager.getData(this.id))==null?void 0:f.filter(v=>v.enabled).length)===1,p=(v,y)=>{const{sectorLabel:b,outerRadius:w,startAngle:S,endAngle:M}=y;let R=!1;if(b&&w!==0){const A=t*(1-a)+w*a+r;v.fill=c,v.fontStyle=s,v.fontWeight=n,v.fontSize=i,v.fontFamily=o,v.text=b.text,!h&&d?(v.x=0,v.y=0):(v.x=y.midCos*A,v.y=y.midSin*A),v.textAlign="center",v.textBaseline="middle";const F=v.getBBox(),P=[[F.x,F.y],[F.x+F.width,F.y],[F.x+F.width,F.y+F.height],[F.x,F.y+F.height]],N={startAngle:S,endAngle:M,innerRadius:t,outerRadius:w};P.every(([O,B])=>zv(O,B,N))&&(R=!0)}v.visible=R};this.labelSelection.each(p),this.highlightLabelSelection.each(p)}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2}pickNodeClosestDatum(e){return xD(this,e)}getTooltipContent(e){var P;const{id:t,dataModel:i,processedData:s,properties:n}=this,{legendItemKey:o,calloutLabelKey:r,calloutLabelName:a,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:p,radiusKey:f,radiusName:v,tooltip:y}=n,b=this.properties.title.text;if(!i||!s)return;const w=(P=s.dataSources.get(this.id))==null?void 0:P[e],{angleRawValues:S,legendItemValues:M,calloutLabelValues:R,sectorLabelValues:A}=this.getProcessedDataValues(i,s),T=S[e],F=(M==null?void 0:M[e])??(r===d||R==null?void 0:R[e])??(c===d||A==null?void 0:A[e])??p;return y.formatTooltip(this.properties,{title:b,symbol:this.legendItemSymbol(e),data:[{label:F,fallbackLabel:d,value:$r(T,3)}]},{seriesId:t,datum:w,title:p,legendItemKey:o,calloutLabelKey:r,calloutLabelName:a,sectorLabelKey:c,sectorLabelName:h,angleKey:d,angleName:p,radiusKey:f,radiusName:v,...this.getSectorFormat(w,e,!1)})}legendItemSymbol(e){var d,p;const t=(p=(d=this.processedData)==null?void 0:d.dataSources.get(this.id))==null?void 0:p[e],i=this.getSectorFormat(t,e,!1),{fillOpacity:s,strokeOpacity:n,strokeWidth:o,lineDash:r,lineDashOffset:a}=this.properties;let{fill:c}=i;const{stroke:h}=i;return So(c)&&(c={...c,gradient:"linear",rotation:0,reverse:!1}),{marker:{fill:c,stroke:h,fillOpacity:s,strokeOpacity:n,strokeWidth:o,lineDash:r,lineDashOffset:a}}}getLegendData(e){var A,T,F,P,N,O;const{id:t,visible:i,processedData:s,dataModel:n,ctx:{legendManager:o}}=this;if(!n||!s||e!=="category")return[];const{angleKey:r,calloutLabelKey:a,sectorLabelKey:c,legendItemKey:h,showInLegend:d}=this.properties;if(!h&&(!a||a===r)&&(!c||c===r))return[];const{calloutLabelValues:p,sectorLabelValues:f,legendItemValues:v,angleRawValues:y}=this.getProcessedDataValues(n,s),b=((A=this.properties.title)==null?void 0:A.showInLegend)&&this.properties.title.text,w=[],S=this.properties.hideZeroValueSectorsInLegend,M=s.dataSources.get(this.id),R=(T=s.invalidData)==null?void 0:T.get(this.id);for(let B=0;B<s.input.count;B++){const V=M==null?void 0:M[B],U=y[B];if((R==null?void 0:R[B])===!0||S&&U===0)continue;const se=[];b&&se.push(b);const Ce=this.getLabels(V,2*Math.PI,2*Math.PI,!1,p==null?void 0:p[B],f==null?void 0:f[B],v==null?void 0:v[B]);h&&Ce.legendItem!==void 0?se.push(Ce.legendItem.text):a&&a!==r&&((F=Ce.calloutLabel)==null?void 0:F.text)!==void 0?se.push((P=Ce.calloutLabel)==null?void 0:P.text):c&&c!==r&&((N=Ce.sectorLabel)==null?void 0:N.text)!==void 0&&se.push((O=Ce.sectorLabel)==null?void 0:O.text),se.length!==0&&w.push({legendType:"category",id:t,datum:V,itemId:B,seriesId:t,enabled:i&&o.getItemEnabled({seriesId:t,itemId:B}),label:{text:se.join(" - ")},symbol:this.legendItemSymbol(B),legendItemName:h!=null?V[h]:void 0,hideInLegend:!d})}return w}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:s}}=this;e.forEach((n,o)=>i.toggleItem(n,t,o)),i.update(),s.update(4)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=Cc(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);ii(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,n)=>this.getDatumId(n.datum,n.datumIndex)),ct(this,"callout",t,this.calloutLabelSelection),ct(this,"sector",t,this.labelSelection),ct(this,"highlight",t,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var f,v,y,b;const{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:s,radiusScale:n,previousRadiusScale:o}=this,{animationManager:r}=this.ctx,a=(v=(f=s==null?void 0:s.reduced)==null?void 0:f.diff)==null?void 0:v[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const c=((a==null?void 0:a.moved.size)??0)===0,h=((s==null?void 0:s.defs.keys.length)??0)>0,d=((b=(y=s==null?void 0:s.reduced)==null?void 0:y.animationValidation)==null?void 0:b.uniqueKeys)??!0;(!c||!h||!d)&&this.ctx.animationManager.skipCurrentBatch();const p=Cc(!1,this.properties.rotation,n,o);ii(this.id,"nodes",r,[e,t,i],p.nodes,(w,S)=>this.getDatumId(S.datum,S.datumIndex),a),ct(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),ct(this,"sector",this.ctx.animationManager,this.labelSelection),ct(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:o}=this.ctx,r=Cc(!1,this.properties.rotation,s,n);ii(this.id,"nodes",o,[e,t,i],r.nodes,(a,c)=>this.getDatumId(c.datum,c.datumIndex)),Ua(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Ua(this,"sector",this.ctx.animationManager,this.labelSelection),Ua(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumId(e,t){var o,r,a;const{calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties;return(a=(r=(o=this.processedData)==null?void 0:o.reduced)==null?void 0:r.animationValidation)!=null&&a.uniqueKeys?n?Xi(e[n]):i?Xi(e[i]):s?Xi(e[s]):`${t}`:`${t}`}};Jy.className="PieSeries";Jy.type="pie";var wee={series:{title:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},spacing:5},calloutLabel:{enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},offset:3,minAngle:.001},sectorLabel:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"backgroundColor"},positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2,colors:{$map:[{$if:[{$or:[{$isGradient:[{$value:"$1"}]},{$isPattern:[{$value:"$1"}]}]},{$path:["../../strokes/$index",{$ref:"foregroundColor"}]},{$value:"$1"}]},{$if:[{$eq:[{$path:"../strokeWidth"},0]},{$path:"../fills"},{$path:"../strokes"}]}]}},fills:{$palette:"fills"},strokes:{$palette:"strokes"},defaultColorRange:{$palette:"gradients"},defaultPatternFills:X0,fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:ml,xOffset:3,yOffset:3,blur:5}},legend:{enabled:!0}},xee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:e=>new Jy(e),tooltipDefaults:{range:"exact"},themeTemplate:wee},Mee={type:"series",name:"pie",chartType:"polar",options:Xy,create:e=>new Jy(e)};function Dee(){Uo.register(I1,bJ,O7,QJ,uG,cee,fG,pee,Cee,xee,hee);for(const e of[na,Gc,gl,Bc,Lh])mc.register(e.type,{moduleFactory:t=>new e(t)})}function Ree(){for(const e of Uo.modules){if(e.packageType==="enterprise"&&!wQ(e)&&de.errorOnce("Unexpected enterprise module registered: "+e.identifier),e.type==="root"&&e.themeTemplate)for(const t of e.chartTypes)cx.set(t,e.themeTemplate);if(e.type==="series"){if(e.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${e.identifier}`);Gn.register(e.identifier,e)}if(e.type==="series-option"&&e.themeTemplate)for(const t of e.seriesTypes)Gn.setThemeTemplate(t,e.themeTemplate);if(e.type==="axis-option"&&e.themeTemplate)for(const t of e.axisTypes){const i=mc.getThemeTemplate(t),s=Qe(e.themeTemplate,i);mc.setThemeTemplate(t,s)}e.type==="axis"&&mc.register(e.identifier,e),e.type==="legend"&&f0.register(e.identifier,e)}if(Uo.hasEnterpriseModules()){const e=xQ();e.length>0&&de.errorOnce("Enterprise modules expected but not registered: ",e)}}var Aee=["top","right","bottom","left"],eC=class DG extends Ry{constructor(t,i){super(t,i),this.paired=!0,this.lastUpdateClipRect=void 0,this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}onAxisChange(t,i){super.onAxisChange(t,i),this.ctx!=null&&this.ctx.zoomManager.updateAxes(t)}destroySeries(t){super.destroySeries(t),this.lastLayoutWidth=NaN,this.lastLayoutHeight=NaN}getChartType(){return"cartesian"}setRootClipRects(t){const{seriesRoot:i,annotationRoot:s}=this;i.setClipRect(t),s.setClipRect(t)}async processData(){await super.processData();for(const t of this.axes){const i=this.getSyncedDomain(t);i!=null&&t.setDomains(i)}this.ctx.updateService.dispatchProcessData({series:{shouldFlipXY:this.shouldFlipXY()}})}performLayout(t){const{seriesRoot:i,annotationRoot:s}=this,{clipSeries:n,seriesRect:o,visible:r}=this.updateAxes(t.layoutBox);this.seriesRoot.visible=r,this.seriesRect=o,this.animationRect=t.layoutBox;const{x:a,y:c}=o;if(t.width!==this.lastLayoutWidth||t.height!==this.lastLayoutHeight)for(const f of[i,s])f.translationX=Math.floor(a),f.translationY=Math.floor(c);else{const{translationX:f,translationY:v}=i;Qr(this.id,"seriesRect",this.ctx.animationManager,[i,s],{translationX:f,translationY:v},{translationX:Math.floor(a),translationY:Math.floor(c)},{phase:"update"})}this.lastLayoutWidth=t.width,this.lastLayoutHeight=t.height;const h=o.clone().grow(this.seriesArea.padding),d=this.seriesArea.clip||n?h:void 0,{lastUpdateClipRect:p}=this;this.lastUpdateClipRect=d,this.ctx.animationManager.isActive()&&p!=null?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:p,to:h,onUpdate:f=>this.setRootClipRects(f),onComplete:()=>this.setRootClipRects(d)}):this.setRootClipRects(d),this.ctx.layoutManager.emitLayoutComplete(t,{axes:this.axes.map(f=>f.getLayoutState()),series:{visible:r,rect:o,paddedRect:h},clipSeries:n})}updateAxes(t){const{clipSeries:i,seriesRect:s,overflows:n}=this.resolveAxesLayout(t);for(const o of this.axes)o.update(),o.setCrossLinesVisible(!n),this.clipAxis(o,s,t);return{clipSeries:i,seriesRect:s,visible:!n}}resolveAxesLayout(t){let i,s,n=0;const o=10;do if(s=i??this.getDefaultState(),i=this.updateAxesPass(new Map(s.axisAreaWidths),t.clone()),n++>o){de.warn("Max iterations reached. Unable to stabilize axes layout.");break}while(!this.isLayoutStable(i,s));return this.lastAreaWidths=i.axisAreaWidths,i}updateAxesPass(t,i){const s=new Map,n={};let o=!1,r=!1;for(const S of Aee){const M=this.seriesArea.padding[S],R=this.axes.findLast(A=>A.position===S);R?R.seriesAreaPadding=M:i.shrink(M,S)}const a=(t.get("left")??0)+(t.get("right")??0),c=(t.get("top")??0)+(t.get("bottom")??0),h=this.buildCrossLinePadding(t);i.width<=a+h.hPadding||i.height<=c+h.vPadding?o=!0:i.shrink(h);const d=i.clone().shrink(Object.fromEntries(t));for(const S of this.axes){const{position:M="left",direction:R}=S;this.sizeAxis(S,d,M);const A=R==="y",{primaryTickCount:T,bbox:F}=S.calculateLayout(S.nice?n[R]:void 0);n[R]??(n[R]=T),r||(r=S.dataDomain.clipped||S.visibleRange[0]>0||S.visibleRange[1]<1),s.set(S.id,Math.ceil(S.thickness??(A?F==null?void 0:F.width:F==null?void 0:F.height)??0))}const p=TM(this.axes,S=>S.position??"left"),{width:f,height:v,pixelRatio:y}=this.ctx.scene,b=new Map,w=new Map;for(const[S,M]of po(p)){let A=S==="left"||S==="right"?v%y:f%y,T=0;for(const F of M??[]){w.set(F.id,A);const P=s.get(F.id)??0;T=Math.max(T,A+P),F.layoutConstraints.stacked&&(A+=P+DG.AxesPadding)}b.set(S,Math.ceil(T))}for(const[S,M]of po(p))this.positionAxes({axes:M??[],position:S,axisWidths:s,axisOffsets:w,axisAreaWidths:b,axisBound:i,seriesRect:d});return{clipSeries:r,seriesRect:d,axisAreaWidths:b,overflows:o}}buildCrossLinePadding(t){const i={top:0,right:0,bottom:0,left:0,hPadding:0,vPadding:0};this.axes.forEach(s=>{var n;(n=s.crossLines)==null||n.forEach(o=>{var r;(r=o.calculatePadding)==null||r.call(o,i)})});for(const[s,n=0]of po(i))i[s]=Math.max(n-(t.get(s)??0),0);return i.hPadding=i.left+i.right,i.vPadding=i.top+i.bottom,i}clampToOutsideSeriesRect(t,i,s,n){const o=s==="x"?t.x:t.y,r=s==="x"?t.width:t.height;return n===1?Math.min(i,o+r):Math.max(i,o)}getSyncedDomain(t){const i=this.modulesManager.getModule("sync");if(!(i!=null&&i.enabled))return;const s=i.getSyncedDomain(t);if(s&&t.dataDomain.domain.length){let n;const{domain:o}=t.scale;if(Ct.is(t.scale)){const[r,a]=xi(s);n=r!==o[0]||a!==o[1]}else n=!jo(s,o);n&&!this.skipSync&&i.updateSiblings()}return s}sizeAxis(t,i,s){const n=t instanceof Gc,o=s==="left"||s==="right",{width:r,height:a}=i,c=o?a:r;let h=0,d=c,{min:p,max:f}=this.ctx.zoomManager.getAxisZoom(t.id);const{width:v,unit:y,align:b}=t.layoutConstraints;y==="px"?d=h+v:d=d*v/100,b==="end"&&(h=c-(d-h),d=c),o&&(n?[p,f]=[1-f,1-p]:[h,d]=[d,h]),t.range=[h,d],t.visibleRange=[p,f],t.gridLength=o?r:a}positionAxes(t){const{axes:i,axisBound:s,axisWidths:n,axisOffsets:o,axisAreaWidths:r,seriesRect:a,position:c}=t,h=r.get(c)??0;let d="x",p="y",f=1;(c==="top"||c==="bottom")&&(d="y",p="x");let v=s[d];(c==="right"||c==="bottom")&&(f=-1,v+=d==="x"?s.width:s.height);for(const y of i){const b=r.get(p==="x"?"left":"top")??0,w=n.get(y.id)??0,S=o.get(y.id)??0;y.gridPadding=h-S-w,y.translation[p]=s[p]+b,y.translation[d]=this.clampToOutsideSeriesRect(a,v+f*(S+w),d,f)}}shouldFlipXY(){return this.series.every(t=>t instanceof vl&&t.shouldFlipXY())}getDefaultState(){const t=new Map;if(this.lastAreaWidths)for(const{position:i="left"}of this.axes){const s=this.lastAreaWidths.get(i);s!=null&&t.set(i,s)}return{axisAreaWidths:t,clipSeries:!1,overflows:!1}}isLayoutStable(t,i){if(i.overflows!==t.overflows||i.clipSeries!==t.clipSeries)return!1;for(const s of t.axisAreaWidths.keys())if(!i.axisAreaWidths.has(s))return!1;for(const[s,n]of i.axisAreaWidths.entries()){const o=t.axisAreaWidths.get(s);if((n!=null||o!=null)&&n!==o)return!1}return!0}clipAxis(t,i,s){var c,h;const n=Math.ceil(((c=t.gridLine)==null?void 0:c.width)??0),o=Math.ceil(((h=t.line)==null?void 0:h.width)??0);let{width:r,height:a}=i;switch(r+=t.direction==="x"?n:o,a+=t.direction==="y"?n:o,t.clipGrid(i.x,i.y,r,a),t.position){case"left":case"right":t.clipTickLines(s.x,i.y-n,s.width+n,i.height+n*2);break;case"top":case"bottom":t.clipTickLines(i.x-n,s.y,i.width+n*2,s.height+n);const{label:d,labelNodes:p,scale:f}=t;if(Ct.is(f)&&d.enabled&&d.avoidCollisions&&p.length>1){const v=p.toSorted((S,M)=>S.translationY-M.translationY),y=v.at(-1),b=y.getBBox(),w=i.x+b.y+b.height<=s.x+s.width+this.padding.right;if(y.visible=w,w||t.visibleRange[0]>0||t.visibleRange[1]<1)v[0].visible=!0;else{const S=v[0].getBBox();v[0].visible=S.y>=0}}break}}};eC.className="CartesianChart";eC.type="cartesian";eC.AxesPadding=15;var Eee=eC,Tee=pt(e=>typeof HTMLElement>"u"||e instanceof HTMLElement,"an html element"),_c={mode:je("integrated","standalone"),container:Tee,theme:dn,series:qo,annotations:dn,navigator:dn,initialState:dn},RG={...Hs,..._c,axes:dn,data:qo},AG={...Hs,..._c,axes:dn,data:qo},Iee={...Hs,..._c,data:qo,topology:kg},Lee={...Hs,..._c,data:qo},Fee={...Hs,..._c,data:qo},Pee={...Hs,..._c,data:qo,nodes:qo},kee={...Hs,..._c,data:qo},Nee={type:"chart",name:"cartesian",options:RG,detect:A0,create(e,t){return new Eee(e,t)}},$p=()=>{throw new Error("Enterprise module placeholder cannot be initialised")},Oee={type:"chart",name:"flow-proportion",placeholder:!0,options:{},detect:ZO,create:$p},Gee={type:"chart",name:"gauge",placeholder:!0,options:{},detect:T0,create:$p},Bee={type:"chart",name:"hierarchy",placeholder:!0,options:{},detect:KO,create:$p},zee={type:"chart",name:"standalone",placeholder:!0,options:{},detect:E0,create:$p},Hee={type:"chart",name:"topology",placeholder:!0,options:{},detect:$O,create:$p},hh=class extends x0{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}updatePosition(){super.updatePosition();const e=Iv(this),t=b0(e);this.axisGroup.setProperties(this.getAxisTransform()),this.gridLineGroupSelection.each(t),this.tickLineGroupSelection.each(t),this.tickLabelGroupSelection.each(w0())}computeLabelsBBox(e,t){return null}computeRange(){}getAxisLinePoints(){}};D([E(bt(["polygon","circle"],"a polar axis shape"))],hh.prototype,"shape",2);D([E()],hh.prototype,"innerRadiusRatio",2);var DD=class extends Ry{constructor(e,t){super(e,t),this.padding=new ul(40),this.ctx.axisManager.axisGroup.zIndex=6}getChartType(){return"polar"}async performLayout(e){const{layoutBox:t}=e;t.shrink(this.seriesArea.padding.toJson());const i=t.clone();this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i),this.axes.forEach(s=>s.update()),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:i,paddedRect:i}})}updateAxes(e,t,i,s){var c;const n=this.axes.find(h=>h.direction==="x"),o=this.axes.find(h=>h.direction==="y");if(!(n instanceof hh)||!(o instanceof hh))return;const r=n.scale,a=o.innerRadiusRatio;n.innerRadiusRatio=a,n.computeRange(),n.gridLength=s,o.gridAngles=(c=r.ticks({nice:n.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0}))==null?void 0:c.map(h=>r.convert(h)),o.gridRange=n.range,o.range=[s,s*a],[n,o].forEach(h=>{h.translation.x=e.x+t,h.translation.y=e.y+i,h.calculateLayout()})}async computeCircle(e){const t=this.series.filter(Vee),i=this.axes.filter(_ee),s=(h,d,p)=>{this.updateAxes(e,h,d,p),t.forEach(v=>{v.centerX=h,v.centerY=d,v.radius=p});const f=t.filter(v=>v.type==="donut"||v.type==="pie");if(f.length>1){const v=f.map(y=>{const b=y.getInnerRadius();return{series:y,innerRadius:b}}).sort((y,b)=>y.innerRadius-b.innerRadius);v.at(-1).series.surroundingRadius=void 0;for(let y=0;y<v.length-1;y++)v[y].series.surroundingRadius=v[y+1].innerRadius}},n=e.width/2,o=e.height/2,r=Math.max(0,Math.min(e.width,e.height)/2);let a=r;s(n,o,a);const c=async({hideWhenNecessary:h=!1}={})=>{const d=[];for(const v of ac(i,t)){const y=await v.computeLabelsBBox({hideWhenNecessary:h},e);y&&d.push(y)}if(d.length===0){s(n,o,r);return}const p=Me.merge(d),f=this.refineCircle(p,a,e);s(f.centerX,f.centerY,f.radius),a=f.radius};await c(),await c(),await c(),await c({hideWhenNecessary:!0}),await c({hideWhenNecessary:!0});for(const h of ac(i,t))await h.computeLabelsBBox({hideWhenNecessary:!0},e);return{radius:a,centerX:n,centerY:o}}refineCircle(e,t,i){const n=-t,o=-t,r=t,a=t;let c=Math.max(0,n-e.x),h=Math.max(0,o-e.y),d=Math.max(0,e.x+e.width-r),p=Math.max(0,e.y+e.height-a);c=d=Math.max(c,d),h=p=Math.max(h,p);const f=i.width-c-d,v=i.height-h-p;let y=Math.min(f,v)/2;const b=.5*i.width/2,w=.5*i.height/2,S=Math.min(b,w);if(y<S){y=S;const A=c+d,T=h+p;if(2*y+T>i.height){const F=i.height-2*y;Math.min(h,p)*2>F?(h=F/2,p=F/2):h>p?h=F-p:p=F-h}if(2*y+A>i.width){const F=i.width-2*y;Math.min(c,d)*2>F?(c=F/2,d=F/2):c>d?c=F-d:d=F-c}}const M=c+2*y+d,R=h+2*y+p;return{centerX:(i.width-M)/2+c+y,centerY:(i.height-R)/2+h+y,radius:y}}};DD.className="PolarChart";DD.type="polar";function Vee(e){return e instanceof Zy}function _ee(e){return e instanceof hh}var Wee={type:"chart",name:"polar",options:AG,detect:YO,create(e,t){return new DD(e,t)}},jee={...Gh,..._y(Le),type:Fe(ws("number")),label:{format:Hy,...Oh},crosshair:Bh(!0)},Uee={...Gh,..._y(Le),type:Fe(ws("log")),base:hs(Vm,pt(e=>e!==1,"not equal to 1")),label:{format:Hy,...Oh},crosshair:Bh(!0)},Yee={...Gh,..._y(ti(Le,Bu),!0),type:Fe(ws("time")),label:{...Oh,format:xe},crosshair:Bh(!0)},Kee={...Gh,type:Fe(ws("category")),label:Oh,paddingInner:me,paddingOuter:me,groupPaddingInner:me,crosshair:Bh()},$ee={...Gh,type:Fe(ws("grouped-category")),label:Oh,crosshair:Bh(),paddingInner:me,groupPaddingInner:me,depthOptions:Mc({label:{enabled:ye,avoidCollisions:ye,...pn},tick:{enabled:ye,stroke:Ye,width:me}},"depth options objects array")},Zee={type:"axis",name:"number",chartType:"cartesian",options:jee,create:e=>new na(e)},qee={type:"axis",name:"log",chartType:"cartesian",options:Uee,create:e=>new Lh(e)},Xee={type:"axis",name:"time",chartType:"cartesian",options:Yee,create:e=>new gl(e)},Qee={type:"axis",name:"category",chartType:"cartesian",options:Kee,create:e=>new Gc(e)},Jee={type:"axis",name:"grouped-category",chartType:"cartesian",options:$ee,create:e=>new Bc(e)},ete=[Nee,Zee,qee,Xee,Qee,Jee,oG,hG,gG,pG,mG,yG],tte=[Wee,See,Mee],ite=[...ete,...tte,Oee,Gee,Bee,zee,Hee],Is={isEnterprise:!1},EG=(e=>(e.POINTER="pointer",e.NODE="node",e.CHART="chart",e))(EG||{}),TG=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e.TOP_LEFT="top-left",e.CENTER="center",e))(TG||{}),IG=(e=>(e.POINTER="pointer",e.NODE="node",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e))(IG||{}),qs=Symbol("IGNORED_PROP");function fn(e,t){const i={};for(const s of Object.keys(t)){const n=t[s];n!==qs&&Object.hasOwn(e,s)&&(i[s]=n)}return i}function ste(e){return e.type==="radial-gauge"}function nte(e){return e.type==="linear-gauge"}function LG(e){const{enabled:t,mode:i,showArrow:s,range:n,position:o,pagination:r,delay:a,wrapping:c,interaction:h,renderer:d,...p}=e,f=fn(e,{enabled:t,showArrow:s,range:n,position:o,interaction:h,renderer:d,...p});return{chartTooltipOptions:fn(e,{enabled:qs,showArrow:qs,range:qs,position:qs,mode:i,pagination:r,delay:a,wrapping:c,...p}),seriesTooltipOptions:f}}function ote(e){const{animation:t,background:i,container:s,contextMenu:n,footnote:o,height:r,listeners:a,locale:c,minHeight:h,minWidth:d,overrideDevicePixelRatio:p,padding:f,subtitle:v,theme:y,title:b,width:w,type:S,cursor:M,nodeClickRange:R,tooltip:A={},value:T,scale:F={},startAngle:P,endAngle:N,highlightStyle:O,segmentation:B,bar:V,needle:U,targets:se,outerRadius:Ce,innerRadius:Se,outerRadiusRatio:H,innerRadiusRatio:q,cornerRadius:ie,cornerMode:he,label:G,secondaryLabel:W,spacing:Y,...X}=e,{chartTooltipOptions:ee,seriesTooltipOptions:fe}=LG(A),le=fn(e,{animation:t,background:i,container:s,contextMenu:n,footnote:o,height:r,listeners:a,locale:c,minHeight:h,minWidth:d,overrideDevicePixelRatio:p,padding:f,subtitle:v,theme:y,title:b,tooltip:ee,width:w}),be=fn(e,{needle:U!=null?{enabled:!0,...U}:qs,startAngle:P,endAngle:N,scale:F,type:S,cursor:M,nodeClickRange:R,listeners:a,tooltip:fe,value:T,highlightStyle:O,segmentation:B,bar:V,targets:se,outerRadius:Ce,innerRadius:Se,outerRadiusRatio:H,innerRadiusRatio:q,cornerRadius:ie,cornerMode:he,label:G,secondaryLabel:W,spacing:Y,...X});return{...le,series:[be]}}function rte(e){const{animation:t,background:i,container:s,contextMenu:n,footnote:o,height:r,listeners:a,locale:c,minHeight:h,minWidth:d,overrideDevicePixelRatio:p,padding:f,subtitle:v,theme:y,title:b,width:w,type:S,cursor:M,nodeClickRange:R,tooltip:A={},value:T,scale:F={},direction:P="vertical",thickness:N,highlightStyle:O,segmentation:B,bar:V,targets:U,cornerRadius:se,cornerMode:Ce,label:Se,...H}=e,{chartTooltipOptions:q,seriesTooltipOptions:ie}=LG(A),he=fn(e,{animation:t,background:i,container:s,contextMenu:n,footnote:o,height:r,listeners:a,locale:c,minHeight:h,minWidth:d,overrideDevicePixelRatio:p,padding:f,subtitle:v,theme:y,title:b,tooltip:q,width:w}),G=fn(e,{scale:F,type:S,cursor:M,nodeClickRange:R,listeners:a,tooltip:ie,value:T,direction:P,thickness:N,highlightStyle:O,segmentation:B,bar:V,targets:U,cornerRadius:se,cornerMode:Ce,label:Se,...H});return{...he,series:[G]}}function jL(e,t){if(t==null)return e;const{targets:i,...s}=t;return e=Qe(e,s),e.targets!=null&&i!=null&&(e.targets=pv(e.targets,i)),e}function ate(e,t){if(ste(e)){const M=jL(e,t);return ote(M)}else if(nte(e)){const M=jL(e,t);return rte(M)}const{animation:i,background:s,container:n,contextMenu:o,footnote:r,height:a,listeners:c,locale:h,minHeight:d,minWidth:p,padding:f,subtitle:v,theme:y,title:b,tooltip:w,width:S}=e;return fn(e,{animation:i,background:s,container:n,contextMenu:o,footnote:r,height:a,listeners:c,locale:h,minHeight:d,minWidth:p,padding:f,subtitle:v,theme:y,title:b,tooltip:w,width:S})}var Nn={stroke:si},cs={fill:Fp},UL={color:"white",fill:si},Ir={color:si},Hv={color:Lp,fontSize:{$rem:[1.1666666666666667]},fontFamily:{$ref:"fontFamily"}},Im={...Hv,textAlign:"left"},Rx={...Hv,fontSize:{$ref:"fontSize"},color:Np,fill:Pp,stroke:kp,strokeWidth:1,divider:{stroke:Op,strokeWidth:1,strokeOpacity:.5}},hw={...Nn,background:{fill:Ii,fillOpacity:.2},handle:{...cs},text:{...Ir},statistics:{...Rx}},lte={line:{...Nn,handle:{...cs},text:{...Ir}},"horizontal-line":{...Nn,handle:{...cs},axisLabel:{...UL},text:{...Ir}},"vertical-line":{...Nn,handle:{...cs},axisLabel:{...UL},text:{...Ir}},"disjoint-channel":{...Nn,background:{fill:Ii,fillOpacity:.2},handle:{...cs},text:{...Ir}},"parallel-channel":{...Nn,background:{fill:Ii,fillOpacity:.2},handle:{...cs},text:{...Ir}},"fibonacci-retracement":{...Nn,strokes:Yg,rangeStroke:si,handle:{...cs},text:{...Ir,position:"center"},label:{...Hv,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},"fibonacci-retracement-trend-based":{...Nn,strokes:Yg,rangeStroke:si,handle:{...cs},text:{...Ir,position:"center"},label:{...Hv,color:void 0,fontSize:{$round:[{$mul:[{$ref:"fontSize"},10/12]}]}}},callout:{...Nn,...Im,color:{$ref:"textColor"},handle:{...cs},fill:Ii,fillOpacity:.2},comment:{...Im,color:"white",fontWeight:700,handle:{...cs},fill:si},note:{...Im,color:zp,fill:si,stroke:{$ref:"backgroundColor"},strokeWidth:1,strokeOpacity:1,handle:{...cs},background:{fill:Gp,stroke:Bp,strokeWidth:1}},text:{...Im,handle:{...cs}},arrow:{...Nn,handle:{...cs},text:{...Ir}},"arrow-up":{fill:Tp,handle:{...cs,stroke:si}},"arrow-down":{fill:Ip,handle:{...cs,stroke:si}},"date-range":{...hw},"price-range":{...hw},"date-price-range":{...hw},"quick-date-price-range":{up:{...Nn,fill:Ii,fillOpacity:.2,handle:{...cs},statistics:{...Rx,color:"#fff",fill:Ii,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}},down:{...Nn,stroke:$g,fill:Kg,fillOpacity:.2,handle:{...cs,stroke:$g},statistics:{...Rx,color:"#fff",fill:Kg,strokeWidth:0,divider:{stroke:"#fff",strokeWidth:1,strokeOpacity:.5}}}},axesButtons:{enabled:!0}},cte=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"],ute=[{icon:"trend-line-drawing",tooltip:"toolbarAnnotationsLineAnnotations",value:"line-menu"},{icon:"fibonacci-retracement-drawing",tooltip:"toolbarAnnotationsFibonacciAnnotations",value:"fibonacci-menu"},{icon:"text-annotation",tooltip:"toolbarAnnotationsTextAnnotations",value:"text-menu"},{icon:"arrow-drawing",tooltip:"toolbarAnnotationsShapeAnnotations",value:"shape-menu"},{icon:"measurer-drawing",tooltip:"toolbarAnnotationsMeasurerAnnotations",value:"measurer-menu"},{icon:"delete",tooltip:"toolbarAnnotationsClearAll",value:"clear"}];function hte(e,t,i){const{dateKey:s="date",highKey:n="high",openKey:o="open",lowKey:r="low",closeKey:a="close",volumeKey:c="volume",chartType:h="candlestick",navigator:d=!1,volume:p=!0,rangeButtons:f=!0,statusBar:v=!0,toolbar:y=!0,zoom:b=!0,theme:w,data:S,...M}=e,R=gte(h,s,n,r,o,a),A=dte(i,o,a,p,c),F={navigator:{enabled:d,...p?{miniChart:{enabled:d,series:[{type:"line",xKey:s,yKey:c,stroke:By,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null}},P={annotations:{enabled:y,optionsToolbar:{enabled:y},snap:!0,toolbar:{enabled:y,buttons:ute,padding:0},data:S,xKey:s,volumeKey:p?c:void 0}},N=v?{statusBar:{enabled:!0,data:S,highKey:n,openKey:o,lowKey:r,closeKey:a,volumeKey:p?c:void 0}}:null,O={zoom:{enabled:b,autoScaling:{enabled:!0},enableIndependentAxes:!0}},B={ranges:{enabled:f}},V=p?[{type:"number",position:"left",keys:[c],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percent",align:"end"}}]:[];return{theme:{baseTheme:typeof w=="string"?w:"ag-financial",...Qe(typeof w=="object"?w:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5},chartToolbar:{enabled:y},annotations:{...lte},axes:{number:{interval:{maxSpacing:45},label:{format:".2f"}}}},bar:{series:{fillOpacity:.5}},line:{series:{marker:{enabled:!1},...$L(h,{hlc:{stroke:Ny,strokeWidth:2},line:{stroke:uh},"step-line":{stroke:uh,interpolation:{type:"step"}}})}},candlestick:{series:{...$L(h,{"hollow-candlestick":{item:{up:{fill:"transparent"}}}})}},"range-area":{series:{fillOpacity:.3,strokeWidth:2}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...A,...R],axes:[{type:"number",position:"right",keys:[o,a,n,r],crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percent",align:"start"}},...V,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:S,...P,...F,...N,...O,...B,...M}}function dte(e,t,i,s,n){return s?[{type:"bar",xKey:"date",yKey:n,tooltip:{enabled:!1},itemStyler({datum:o}){const{up:r,down:a}=e().palette;return{fill:o[t]<o[i]?r==null?void 0:r.fill:a==null?void 0:a.fill}},focusPriority:1,fastDataProcessing:!0,highlight:{enabled:!1}}]:[]}var YL="range-area";function gte(e,t,i,s,n,o){const r={xKey:t,openKey:n,closeKey:o,highKey:i,lowKey:s},a={xKey:t,yKey:o},c={pickOutsideVisibleMinorAxis:!0};switch(e??"candlestick"){case"ohlc":return pte(c,r);case"line":case"step-line":return fte(c,a);case"hlc":return mte(c,a,r);case"high-low":return vte(c,r);case"candlestick":case"hollow-candlestick":return KL(c,r);default:return de.warnOnce(`unknown chart type: ${e}; expected one of: ${cte.join(", ")}`),KL(c,r)}}function pte(e,t){return[{type:"ohlc",focusPriority:0,...e,...t}]}function fte(e,t){return[{type:"line",focusPriority:0,...e,...t}]}function mte(e,t,{xKey:i,highKey:s,closeKey:n,lowKey:o}){return[{type:YL,focusPriority:0,...e,xKey:i,yHighKey:s,yLowKey:n,fill:Tp,stroke:Fy},{type:YL,focusPriority:0,...e,xKey:i,yHighKey:n,yLowKey:o,fill:Ip,stroke:Py},{type:"line",...e,...t}]}function vte(e,{xKey:t,highKey:i,lowKey:s}){return[{type:"range-bar",...e,xKey:t,yHighKey:i,yLowKey:s,fill:ky,stroke:uh,tooltip:{range:"nearest"},focusPriority:0,fastDataProcessing:!0}]}function KL(e,t){return[{type:"candlestick",focusPriority:0,...e,...t}]}function $L(e,t){return t[e]??t.default}var FG={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:Gy,lineDash:[0],label:{enabled:!1}}},dw={...FG,nice:!1},Lm={mode:"compact",position:{anchorTo:"node",placement:["right","left"]},showArrow:!1},gw={style:[{stroke:{$ref:"gridLineColor"}}],width:2},yte={number:{gridLine:gw},time:{gridLine:gw},category:{gridLine:gw}},Cte={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},navigator:{enabled:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...dw,interval:{values:[0]}},log:{...dw},time:{...dw},category:{...FG}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...Lm,position:{...Lm.position,anchorTo:"pointer"},range:"nearest"},axes:yte},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3}},tooltip:Lm},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4},tooltip:Lm}}},PG=Ts(Ste);function Ste(e,t){return typeof e=="string"?{...t,baseTheme:e}:e!=null?{...e,baseTheme:PG(e.baseTheme,t)}:t}function kG(e){if(Array.isArray(e)&&e.length!==0){const t=e[0];if(typeof t=="number")return{data:e.map((s,n)=>({x:n,y:s})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"};if(Array.isArray(t))return{data:e.map(s=>({x:s[0],y:s[1],datum:s})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}return{data:e}}function bte(e,t){switch(e==null?void 0:e.type){case"number":{const{type:i,min:s,max:n,reverse:o}=e;return fn(e,{type:i,reverse:o,min:s,max:n})}case"time":{const{type:i,min:s,max:n,reverse:o}=e;return fn(e,{type:i,reverse:o,min:s,max:n})}case"category":{const{type:i,paddingInner:s,paddingOuter:n,reverse:o}=e;return fn(e,{type:i,reverse:o,paddingInner:s,paddingOuter:n})}}return{type:t}}function wte(e,t,i){const s={};return(e==null?void 0:e.stroke)!=null&&(s.style=[{stroke:e==null?void 0:e.stroke}],s.enabled??(s.enabled=!0)),(e==null?void 0:e.strokeWidth)!=null&&(s.width=e==null?void 0:e.strokeWidth,s.enabled??(s.enabled=!0)),i.type==="bar"&&i.direction!=="horizontal"&&(s.enabled??(s.enabled=!0)),(e==null?void 0:e.visible)!=null&&(s.enabled=e.visible),s.enabled??(s.enabled=t),s}var xte=Ts((e,t,i)=>s=>{var c;const n=s.datum[s.xKey],o=s.datum[s.yKey],r=i!=null?s.datum[i]:s.datum,a=(c=t==null?void 0:t.renderer)==null?void 0:c.call(t,{context:e,datum:r,xValue:n,yValue:o});return typeof a=="string"?a:{heading:void 0,title:void 0,data:[{label:a==null?void 0:a.title,value:(a==null?void 0:a.content)??o.toFixed(2)}]}});function Mte(e){const{background:t,container:i,height:s,listeners:n,locale:o,minHeight:r,minWidth:a,overrideDevicePixelRatio:c,padding:h,width:d,theme:p,data:f,crosshair:v,axis:y,min:b,max:w,tooltip:S,context:M,...R}=e,A=fn(e,{background:t,container:i,height:s,listeners:n,locale:o,minHeight:r,minWidth:a,overrideDevicePixelRatio:c,padding:h,width:d,tooltip:qs,context:qs,data:qs,crosshair:qs,axis:qs,min:qs,max:qs,theme:qs}),{data:T,series:[F]=[],datumKey:P}=kG(f),N=R;F!=null&&Object.assign(N,F),N.tooltip={...S,renderer:xte(M,S,P)},A.theme=PG(p,Cte),A.data=T,A.series=[N];const O=N.type!=="bar"||N.direction!=="horizontal",[B,V]=O?["bottom","left"]:["left","bottom"],U={...bte(y,"category"),position:B,...fn(e,{crosshair:v})},se={type:"number",gridLine:wte(y,!1,e),position:V,...fn(e,{min:b,max:w})};return A.axes=O?[se,U]:[U,se],A}var Dte={"price-volume":hte,gauge:ate,sparkline:Mte},Rte={sparkline:kG};function ZL(e,t){var r,a,c,h;let i=[];const s=T0(e),n=ea(e),o=n?Kt.get(n):"unknown";for(const d of bp)if(!(o!=="unknown"&&!d.chartTypes.includes(o))){if(d.type==="root"||d.type==="legend"){const p=e[d.optionsKey];if(p==null)continue;d.optionsInnerKey?p[d.optionsInnerKey]&&(i.push(`${d.optionsKey}.${d.optionsInnerKey}`),delete p[d.optionsInnerKey]):(i.push(d.optionsKey),delete e[d.optionsKey])}else if(d.type==="axis"){if(!("axes"in e)||!Ue(e.axes)||!((r=e.axes)!=null&&r.some(p=>p.type===d.identifier)))continue;i.push(`axis[type=${d.identifier}]`),e.axes=e.axes.filter(p=>p.type!==d.identifier)}else if(d.type==="axis-option"){if(!("axes"in e)||!Ue(e.axes)||!((a=e.axes)!=null&&a.some(p=>p[d.optionsKey])))continue;i.push(`axis.${d.optionsKey}`),e.axes.forEach(p=>{p[d.optionsKey]&&delete p[d.optionsKey]})}else if(d.type==="series"){if(d.community||!Ue(e.series)||!((c=e.series)!=null&&c.some(p=>p.type===d.identifier)))continue;i.push(`series[type=${d.identifier}]`),e.series=e.series.filter(p=>p.type!==d.identifier)}else if(d.type==="series-option"){if(!Ue(e.series)||!((h=e.series)!=null&&h.some(p=>p[d.optionsKey])))continue;i.push(`series.${d.optionsKey}`),e.series.forEach(p=>{p[d.optionsKey]&&delete p[d.optionsKey]})}}if(i.length&&!t){s&&(i=["AgCharts.createGauge"]);let d="ag-charts-enterprise",p="https://www.ag-grid.com/charts/javascript/installation/";e.mode==="integrated"&&(d="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",p="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),de.warnOnce([`unable to use these enterprise features as '${d}' has not been loaded:`,"",...i,"",`See: ${p}`].join(`
`))}}function Ate(e){const t="mode"in e&&e.mode==="integrated";for(const i of Uo.byType("root","legend")){const s=e[i.optionsKey],n=s!=null&&s.enabled===!1,o=!("removable"in i)||i.removable===!0||i.removable==="standalone-only"&&!t;n&&o&&delete e[i.optionsKey]}}function NG(e){return e!=null&&e.up||e!=null&&e.down||e!=null&&e.neutral?"user-full":e!=null&&e.fills||e!=null&&e.strokes?"user-indexed":"inbuilt"}var pw="white",Ax={get cartesian(){return{seriesTypes:Kt.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Kt.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:Kt.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:Kt.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:Kt.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:Kt.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:Kt.gaugeTypes,commonOptions:[]}}},Ete={"radial-gauge":!0,"linear-gauge":!0};function qL(e){return Ete[e]===!0}var Tte=Object.values(Ax).reduce((e,{commonOptions:t})=>e.concat(t),[]),On=class cg{static getDefaultColors(){return{fills:hi,fillsFallback:Object.values(hi),strokes:Go,sequentialColors:Mn(hi),divergingColors:[hi.ORANGE,hi.YELLOW,hi.GREEN],hierarchyColors:["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"],secondSequentialColors:gt.interpolate([gt.fromHexString(hi.BLUE),gt.fromHexString("#cbdef5")],8).map(t=>t.toString()),secondDivergingColors:[hi.GREEN,hi.YELLOW,hi.RED],secondHierarchyColors:["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"],up:{fill:hi.GREEN,stroke:Go.GREEN},down:{fill:hi.RED,stroke:Go.RED},neutral:{fill:hi.GRAY,stroke:Go.GRAY},altUp:{fill:hi.BLUE,stroke:Go.BLUE},altDown:{fill:hi.ORANGE,stroke:Go.ORANGE},altNeutral:{fill:hi.GRAY,stroke:Go.GRAY}}}static getDefaultPublicParameters(){return{accentColor:"#2196f3",axisColor:{$foregroundBackgroundMix:[.675]},backgroundColor:pw,borderColor:{$foregroundBackgroundMix:[.818]},foregroundColor:"#464646",fontFamily:"Verdana, sans-serif",fontSize:12,fontWeight:400,gridLineColor:{$foregroundBackgroundAccentMix:[.93,.085]},padding:20,subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.38]},textColor:{$ref:"foregroundColor"},chromeBackgroundColor:{$foregroundBackgroundMix:[.975]},chromeFontFamily:{$ref:"fontFamily"},chromeFontSize:{$ref:"fontSize"},chromeFontWeight:{$ref:"fontWeight"},chromeTextColor:"#181d1f",chromeSubtleTextColor:{$mix:[{$ref:"chromeTextColor"},{$ref:"backgroundColor"},.38]},inputBackgroundColor:{$ref:"backgroundColor"},inputTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$ref:"foregroundColor"},crosshairLabelTextColor:{$ref:"backgroundColor"}}}static getAxisDefaults(t,i=!0){return Qe(t,i&&{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},{label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},spacing:11,color:{$ref:"textColor"},avoidCollisions:!0},line:{enabled:!0,width:1,stroke:{$ref:"axisColor"}},tick:{enabled:!1,width:1,stroke:{$ref:"axisColor"}},gridLine:{enabled:!0,style:[{stroke:{$ref:"gridLineColor"},lineDash:[]}]},crossLines:{enabled:!0,fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},fillOpacity:.1,strokeWidth:1,label:{fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},padding:5,color:{$ref:"textColor"}}}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:{$ref:"backgroundColor"}},padding:{top:{$ref:"padding"},right:{$ref:"padding"},bottom:{$ref:"padding"},left:{$ref:"padding"}},seriesArea:{padding:{top:0,right:0,bottom:0,left:0}},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",spacing:{$if:[{$path:"../subtitle/enabled"},10,20]},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.4166666666666667]},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},wrapping:"hyphenate",layoutStyle:Wa,textAlign:ja},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:Wa,textAlign:ja},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:{$rem:[1.0833333333333333]},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"subtleTextColor"},wrapping:"hyphenate",layoutStyle:Wa,textAlign:ja},legend:{position:"bottom",orientation:{$if:[{$or:[{$eq:[{$path:"./position"},"left"]},{$eq:[{$path:"./position"},"right"]}]},"vertical","horizontal"]},spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"}}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:{$ref:"foregroundColor"}},inactiveStyle:{fill:{$ref:"subtleTextColor"}},highlightStyle:{fill:{$ref:"foregroundColor"}},label:{color:{$ref:"textColor"}}}},tooltip:{enabled:!0,darkTheme:Zu,delay:0,pagination:!1},overlays:{darkTheme:Zu},listeners:{}}}constructor(t={}){const{overrides:i,palette:s}=zt(t),n=this.createChartConfigPerChartType(this.getDefaults()),o={};i&&this.mergeOverrides(n,o,i);const{fills:r,strokes:a,sequentialColors:c,...h}=this.getDefaultColors();this.palette=fc(Qe(s,{fills:Object.values(r),strokes:Object.values(a),sequentialColors:Object.values(c),...h})),this.paletteType=NG(s),this.config=fc(this.templateTheme(n)),this.presets=fc(o)}mergeOverrides(t,i,s){for(const{seriesTypes:n,commonOptions:o}of Object.values(Ax)){const r={...s.common};for(const a of Tte)o.includes(a)||delete r[a];if(r)for(const a of n){const c=a;qL(c)||(t[c]=Qe(r,t[c]))}}Kt.seriesTypes.forEach(n=>{const o=n,r=s[o];qL(o)?i[o]=r:t[o]=Qe(r,t[o])})}createChartConfigPerChartType(t){for(const[i,{seriesTypes:s}]of po(Ax)){const n=cx.get(i);for(const o of s)t[o]??(t[o]=zt(n))}return t}getDefaults(){const t=(i,s)=>{const n={},o={axes:{},...f0.getThemeTemplates(),...this.getChartDefaults(),...cx.get(i)};for(const r of s){n[r]=Qe(Gn.getThemeTemplate(r),n[r]??zt(o));const{axes:a}=n[r];for(const c of mc.keys())a[c]=Qe(a[c],mc.getThemeTemplate(c),cg.axisDefault[c])}return n};return Qe(t("cartesian",Kt.cartesianTypes),t("polar",Kt.polarTypes),t("hierarchy",Kt.hierarchyTypes),t("topology",Kt.topologyTypes),t("flow-proportion",Kt.flowProportionTypes),t("standalone",Kt.standaloneTypes),t("gauge",Kt.gaugeTypes))}static applyTemplateTheme(t,i,s){if(Ue(t))for(let n=0;n<t.length;n++){const o=t[n];typeof o=="symbol"&&(s!=null&&s.has(o))&&(t[n]=s.get(o))}else for(const n of Object.keys(t)){const o=t[n];typeof o=="symbol"&&(s!=null&&s.has(o))&&(t[n]=s.get(o))}}templateTheme(t,i=!0){const s=i?zt(t):t,n=this.getTemplateParameters();return Pr(s,cg.applyTemplateTheme,void 0,void 0,n),s}getDefaultColors(){return cg.getDefaultColors()}getPublicParameters(){return cg.getDefaultPublicParameters()}getTemplateParameters(){var n,o,r,a,c,h,d,p,f,v,y,b;const{isEnterprise:t}=Is,i=new Map;i.set(Zu,!1),i.set(U0,t),i.set(j0,!t),i.set(Ep,"#d9d9d9"),i.set(ml,"#00000080"),i.set(Gy,"#aaa"),i.set(Wa,"block"),i.set(ja,"center"),i.set(Yg,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),i.set(Oy,pw),i.set(si,hi.BLUE),i.set(Ii,hi.BLUE),i.set(Lp,hi.BLUE),i.set(Fp,pw),i.set(Pp,"#fafafa"),i.set(kp,"#ddd"),i.set(Np,"#000"),i.set(Op,"#181d1f"),i.set(Kg,"#e35c5c"),i.set($g,"#e35c5c"),i.set(Gp,"#fafafa"),i.set(Bp,"#ddd"),i.set(zp,"#000"),i.set(Hp,"top"),i.set(Vo,!1);const s=this.getDefaultColors();return i.set(Fy,((n=this.palette.up)==null?void 0:n.stroke)??s.up.stroke),i.set(Tp,((o=this.palette.up)==null?void 0:o.fill)??s.up.fill),i.set(Py,((r=this.palette.down)==null?void 0:r.stroke)??s.down.stroke),i.set(Ip,((a=this.palette.down)==null?void 0:a.fill)??s.down.fill),i.set(uh,((c=this.palette.neutral)==null?void 0:c.stroke)??s.neutral.stroke),i.set(ky,((h=this.palette.neutral)==null?void 0:h.fill)??s.neutral.fill),i.set(Y0,((d=this.palette.altUp)==null?void 0:d.stroke)??s.up.stroke),i.set($0,((p=this.palette.altUp)==null?void 0:p.fill)??s.up.fill),i.set(K0,((f=this.palette.altDown)==null?void 0:f.stroke)??s.down.stroke),i.set(Z0,((v=this.palette.altDown)==null?void 0:v.fill)??s.down.fill),i.set(q0,((y=this.palette.altNeutral)==null?void 0:y.fill)??s.altNeutral.fill),i.set(Ny,((b=this.palette.altNeutral)==null?void 0:b.stroke)??s.altNeutral.stroke),i}};On.axisDefault={number:On.getAxisDefaults({keys:[],line:{enabled:!1},crosshair:{enabled:!0}}),log:On.getAxisDefaults({keys:[],base:10,line:{enabled:!1},crosshair:{enabled:!0}}),category:On.getAxisDefaults({keys:[],groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:Vo},crosshair:{enabled:!1}}),"grouped-category":On.getAxisDefaults({keys:[],tick:{enabled:!0,stroke:Ep},label:{spacing:10,rotation:270},paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}}),time:On.getAxisDefaults({keys:[],gridLine:{enabled:Vo},crosshair:{enabled:!0}}),"ordinal-time":On.getAxisDefaults({keys:[],groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:Vo},crosshair:{enabled:!0}}),"angle-category":On.getAxisDefaults({label:{spacing:5},gridLine:{enabled:Vo},shape:{$path:["./shape",void 0,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]}},!1),"angle-number":On.getAxisDefaults({label:{spacing:5},gridLine:{enabled:Vo}},!1),"radius-category":On.getAxisDefaults({positionAngle:0,line:{enabled:!1}}),"radius-number":On.getAxisDefaults({positionAngle:0,line:{enabled:!1},shape:{$path:["./shape",void 0,{$find:[{$not:[{$isOperation:"./shape"}]},{$path:".."}]}]}})};var wo=On,fw="#192232",ns={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Vl={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},Vh=class extends wo{getDefaultColors(){return{fills:ns,fillsFallback:Object.values(ns),strokes:Vl,sequentialColors:Mn(ns),divergingColors:[ns.ORANGE,ns.YELLOW,ns.GREEN],hierarchyColors:["#192834","#253746","#324859","#3f596c","#4d6a80"],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[ns.GREEN,ns.YELLOW,ns.RED],secondHierarchyColors:["#192834","#3b5164","#496275","#577287","#668399"],up:{fill:ns.GREEN,stroke:Vl.GREEN},down:{fill:ns.RED,stroke:Vl.RED},neutral:{fill:ns.GRAY,stroke:Vl.GRAY},altUp:{fill:ns.BLUE,stroke:Vl.BLUE},altDown:{fill:ns.ORANGE,stroke:Vl.ORANGE},altNeutral:{fill:ns.GRAY,stroke:Vl.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),axisColor:{$foregroundBackgroundMix:[.263]},backgroundColor:fw,borderColor:{$foregroundBackgroundMix:[.784]},chromeBackgroundColor:{$foregroundBackgroundMix:[.93]},foregroundColor:"#fff",gridLineColor:{$foregroundBackgroundAccentMix:[.743,.01]},subtleTextColor:{$mix:[{$ref:"textColor"},{$ref:"backgroundColor"},.57]},chromeTextColor:{$ref:"textColor"},crosshairLabelBackgroundColor:{$foregroundBackgroundAccentMix:[.35,.1]}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(Zu,!0),e.set(Oy,fw),e.set(Ep,"#7f8389"),e.set(si,ns.BLUE),e.set(Lp,"#fff"),e.set(Ii,ns.BLUE),e.set(Fp,fw),e.set(Pp,"#28313e"),e.set(kp,"#4b525d"),e.set(Np,"#fff"),e.set(Op,"#fff"),e.set(Gp,"#28313e"),e.set(Bp,"#4b525d"),e.set(zp,"#fff"),e}constructor(e){super(e)}},Ks={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},_l={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Ite=class extends Vh{getDefaultColors(){return{...super.getDefaultColors(),fills:{...Ks},fillsFallback:Object.values({...Ks}),strokes:{..._l},sequentialColors:Mn(Ks),divergingColors:[Ks.GREEN,Ks.BLUE,Ks.RED],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],up:{fill:Ks.GREEN,stroke:_l.GREEN},down:{fill:Ks.RED,stroke:_l.RED},neutral:{fill:Ks.BLUE,stroke:_l.BLUE},altUp:{fill:Ks.GREEN,stroke:_l.GREEN},altDown:{fill:Ks.RED,stroke:_l.RED},altNeutral:{fill:Ks.GRAY,stroke:_l.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),gridLineColor:{$foregroundBackgroundAccentMix:[.88,.01]},padding:0}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,Ks.BLUE),e.set(Ii,Ks.BLUE),e.set(Wa,"overlay"),e.set(ja,"left"),e.set(Hp,"bottom"),e.set(Vo,!0),e}},$s={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},Wl={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Lte=class extends wo{getDefaultColors(){return{...super.getDefaultColors(),fills:{...$s},fillsFallback:Object.values({...$s}),strokes:{...Wl},sequentialColors:Mn($s),divergingColors:[$s.GREEN,$s.BLUE,$s.RED],up:{fill:$s.GREEN,stroke:Wl.GREEN},down:{fill:$s.RED,stroke:Wl.RED},neutral:{fill:$s.BLUE,stroke:Wl.BLUE},altUp:{fill:$s.GREEN,stroke:Wl.GREEN},altDown:{fill:$s.RED,stroke:Wl.RED},altNeutral:{fill:$s.GRAY,stroke:Wl.GRAY}}}getPublicParameters(){return{...super.getPublicParameters(),gridLineColor:{$foregroundBackgroundAccentMix:[.94,.01]},padding:0}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,$s.BLUE),e.set(Ii,$s.BLUE),e.set(Wa,"overlay"),e.set(ja,"left"),e.set(Hp,"bottom"),e.set(Vo,!0),e}},os={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},jl={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Fte=class extends Vh{getDefaultColors(){return{...super.getDefaultColors(),fills:os,fillsFallback:Object.values(os),strokes:jl,sequentialColors:Mn(os),divergingColors:[os.ORANGE,os.YELLOW,os.GREEN],secondSequentialColors:["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"],secondDivergingColors:[os.GREEN,os.YELLOW,os.RED],up:{fill:os.GREEN,stroke:jl.GREEN},down:{fill:os.RED,stroke:jl.RED},neutral:{fill:os.GRAY,stroke:jl.GRAY},altUp:{fill:os.BLUE,stroke:jl.BLUE},altDown:{fill:os.RED,stroke:jl.RED},altNeutral:{fill:os.GRAY,stroke:jl.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,os.BLUE),e.set(Ii,os.BLUE),e}},rs={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Ul={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Pte=class extends wo{getDefaultColors(){return{...super.getDefaultColors(),fills:rs,fillsFallback:Object.values(rs),strokes:Ul,sequentialColors:Mn(rs),divergingColors:[rs.ORANGE,rs.YELLOW,rs.GREEN],secondSequentialColors:["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"],secondDivergingColors:[rs.GREEN,rs.YELLOW,rs.RED],up:{fill:rs.GREEN,stroke:Ul.GREEN},down:{fill:rs.RED,stroke:Ul.RED},neutral:{fill:rs.GRAY,stroke:Ul.GRAY},altUp:{fill:rs.BLUE,stroke:Ul.BLUE},altDown:{fill:rs.RED,stroke:Ul.RED},altNeutral:{fill:rs.GRAY,stroke:Ul.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,rs.BLUE),e.set(Ii,rs.BLUE),e}},Qt={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Yl={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},kte=class extends Vh{getDefaultColors(){return{fills:Qt,fillsFallback:Object.values(Qt),strokes:Yl,sequentialColors:Mn(Qt),divergingColors:[Qt.BLUE,Qt.RED],hierarchyColors:[],secondSequentialColors:[Qt.BLUE,Qt.PURPLE,Qt.MAGENTA,Qt.PINK,Qt.RED,Qt.ORANGE,Qt.YELLOW,Qt.GREEN],secondDivergingColors:[Qt.BLUE,Qt.RED],secondHierarchyColors:[],up:{fill:Qt.GREEN,stroke:Yl.GREEN},down:{fill:Qt.RED,stroke:Yl.RED},neutral:{fill:Qt.GRAY,stroke:Yl.GRAY},altUp:{fill:Qt.BLUE,stroke:Yl.BLUE},altDown:{fill:Qt.RED,stroke:Yl.RED},altNeutral:{fill:Qt.GRAY,stroke:Yl.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,Qt.BLUE),e.set(Ii,Qt.BLUE),e}},Jt={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Kl={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},Nte=class extends wo{getDefaultColors(){return{...super.getDefaultColors(),fills:Jt,fillsFallback:Object.values(Jt),strokes:Kl,sequentialColors:Mn(Jt),divergingColors:[Jt.BLUE,Jt.RED],hierarchyColors:[],secondSequentialColors:[Jt.BLUE,Jt.PURPLE,Jt.MAGENTA,Jt.PINK,Jt.RED,Jt.ORANGE,Jt.YELLOW,Jt.GREEN],secondDivergingColors:[Jt.BLUE,Jt.RED],secondHierarchyColors:[],up:{fill:Jt.GREEN,stroke:Kl.GREEN},down:{fill:Jt.RED,stroke:Kl.RED},neutral:{fill:Jt.GRAY,stroke:Kl.GRAY},altUp:{fill:Jt.BLUE,stroke:Kl.BLUE},altDown:{fill:Jt.RED,stroke:Kl.RED},altNeutral:{fill:Jt.GRAY,stroke:Kl.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,Jt.BLUE),e.set(Ii,Jt.BLUE),e}},Ei={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Na={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Ote=class extends Vh{getDefaultColors(){return{...super.getDefaultColors(),fills:{...Ei,RED:Ei.ORANGE},fillsFallback:Object.values({...Ei,RED:Ei.ORANGE}),strokes:{...Na,RED:Na.ORANGE},sequentialColors:Mn({...Ei,RED:Ei.ORANGE}),divergingColors:[Ei.ORANGE,Ei.YELLOW,Ei.GREEN],secondSequentialColors:["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"],secondDivergingColors:[Ei.GREEN,Ei.YELLOW,Ei.ORANGE],up:{fill:Ei.GREEN,stroke:Na.GREEN},down:{fill:Ei.ORANGE,stroke:Na.ORANGE},neutral:{fill:Ei.GRAY,stroke:Na.GRAY},altUp:{fill:Ei.BLUE,stroke:Na.BLUE},altDown:{fill:Ei.ORANGE,stroke:Na.ORANGE},altNeutral:{fill:Ei.GRAY,stroke:Na.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,Ei.BLUE),e.set(Ii,Ei.BLUE),e}},Ni={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},Er={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Gte=class extends wo{getDefaultColors(){return{...super.getDefaultColors(),fills:{...Ni,RED:Ni.ORANGE},fillsFallback:Object.values({...Ni,RED:Ni.ORANGE}),strokes:{...Er,RED:Er.ORANGE},sequentialColors:Mn({...Ni,RED:Ni.ORANGE}),divergingColors:[Ni.ORANGE,Ni.YELLOW,Ni.GREEN],secondSequentialColors:["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"],secondDivergingColors:[Ni.GREEN,Ni.YELLOW,Ni.ORANGE],secondHierarchyColors:[],up:{fill:Ni.GREEN,stroke:Er.GREEN},down:{fill:Ni.ORANGE,stroke:Er.ORANGE},neutral:{fill:Er.GRAY,stroke:Er.GRAY},altUp:{fill:Ni.BLUE,stroke:Er.BLUE},altDown:{fill:Ni.ORANGE,stroke:Er.ORANGE},altNeutral:{fill:Ni.GRAY,stroke:Er.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,Ni.BLUE),e.set(Ii,Ni.BLUE),e}},as={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},$l={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Bte=class extends Vh{getDefaultColors(){return{fills:as,fillsFallback:Object.values(as),strokes:$l,sequentialColors:Mn(as),divergingColors:[as.ORANGE,as.YELLOW,as.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"],secondDivergingColors:[as.GREEN,as.YELLOW,as.RED],secondHierarchyColors:[],up:{fill:as.GREEN,stroke:$l.GREEN},down:{fill:as.RED,stroke:$l.RED},neutral:{fill:as.GRAY,stroke:$l.GRAY},altUp:{fill:as.BLUE,stroke:$l.BLUE},altDown:{fill:as.ORANGE,stroke:$l.ORANGE},altNeutral:{fill:as.GRAY,stroke:$l.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,as.BLUE),e.set(Ii,as.BLUE),e}},ls={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Zl={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},zte=class extends wo{getDefaultColors(){return{...super.getDefaultColors(),fills:ls,fillsFallback:Object.values(ls),strokes:Zl,sequentialColors:Mn(ls),divergingColors:[ls.ORANGE,ls.YELLOW,ls.GREEN],hierarchyColors:[],secondSequentialColors:["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"],secondDivergingColors:[ls.GREEN,ls.YELLOW,ls.RED],secondHierarchyColors:[],up:{fill:ls.GREEN,stroke:Zl.GREEN},down:{fill:ls.RED,stroke:Zl.RED},neutral:{fill:ls.GRAY,stroke:Zl.GRAY},altUp:{fill:ls.BLUE,stroke:Zl.BLUE},altDown:{fill:ls.ORANGE,stroke:Zl.ORANGE},altNeutral:{fill:ls.GRAY,stroke:Zl.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(si,ls.BLUE),e.set(Ii,ls.BLUE),e}},Xu=Ts(()=>new wo),Hte=Ts(()=>new Vh),Vte=at.create(!0,"perf"),oo=(e,t,i)=>{Vte("[CACHE] ChartTheme",e,t.name,i)},RD={"ag-default-dark":Hte,"ag-sheets-dark":Ts(()=>new Ote,oo),"ag-polychroma-dark":Ts(()=>new kte,oo),"ag-vivid-dark":Ts(()=>new Bte,oo),"ag-material-dark":Ts(()=>new Fte,oo),"ag-financial-dark":Ts(()=>new Ite,oo),null:Xu,undefined:Xu,"ag-default":Xu,"ag-sheets":Ts(()=>new Gte,oo),"ag-polychroma":Ts(()=>new Nte,oo),"ag-vivid":Ts(()=>new zte,oo),"ag-material":Ts(()=>new Pte,oo),"ag-financial":Ts(()=>new Lte,oo)},Vv=Ts(_te,oo);function _te(e){if(e instanceof wo)return e;if(e==null||typeof e=="string"){const i=RD[e];return i?i():(de.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),Xu())}const{errors:t}=lo(e,OG,"theme");if(!t.length){const i=Wte(e),s=i.baseTheme?Vv(i.baseTheme):Xu();return new s.constructor(i)}for(const{message:i}of t)de.warnOnce(i);return Xu()}function Wte(e){let t=e,i,s;const n=[];for(;typeof t=="object";)i??(i=t.palette),s??(s=t.params),t.overrides&&n.push(t.overrides),t=t.baseTheme;return{baseTheme:t,overrides:Qe(...n),params:s,palette:i}}var OG={baseTheme:ti(xe,kg),overrides:kg,params:{accentColor:Ye,axisColor:Ye,backgroundColor:Ye,borderColor:Ye,foregroundColor:Ye,fontFamily:xe,fontSize:Le,fontWeight:ti(xe,Le),gridLineColor:Ye,padding:Le,subtleTextColor:Ye,textColor:Ye,chromeBackgroundColor:Ye,chromeFontFamily:xe,chromeFontSize:Le,chromeFontWeight:ti(xe,Le),chromeSubtleTextColor:Ye,chromeTextColor:Ye,inputBackgroundColor:Ye,inputTextColor:Ye,crosshairLabelBackgroundColor:Ye,crosshairLabelTextColor:Ye},palette:{fills:$t(EM),strokes:$t(Ye),up:{fill:ti(Ye,Vb),stroke:Ye},down:{fill:ti(Ye,Vb),stroke:Ye},neutral:{fill:ti(Ye,Vb),stroke:Ye}}},XL=e=>`'${e}'`,_h=class Si{constructor(t,i,s,n,o,r,a=!1){this.themeParameters={},this.optionMetadata=o??{},this.processedOverrides=s??{};let c=null;t instanceof Si?(c=t,this.specialOverrides=c.specialOverrides,r===void 0&&(r=er(c.userOptions,i,Si.JSON_DIFF_OPTS)),this.userOptions=zt(Gg(r,c.userOptions),Si.OPTIONS_CLONE_OPTS)):(this.userOptions=zt(t??i,Si.OPTIONS_CLONE_OPTS),this.specialOverrides=this.specialOverridesDefaults({...n})),a&&this.removeLeftoverSymbols(this.userOptions);let h,d,p,f,v,y;!a&&r!==void 0&&Si.isFastPathDelta(r)&&c!=null?({activeTheme:h,processedOptions:d,defaultAxes:p,fastDelta:f}=this.fastSetup(r,c),v=c.themeParameters,y=c.annotationThemes):(Si.perfDebug("ChartOptions.slowSetup()"),{activeTheme:h,processedOptions:d,defaultAxes:p,themeParameters:v,annotationThemes:y}=this.slowSetup(s,r,a)),this.activeTheme=h,this.processedOptions=d,this.defaultAxes=p,this.fastDelta=f??void 0,this.themeParameters=v,this.annotationThemes=y,at.inDevelopmentMode(()=>fc(this))}static isFastPathDelta(t){for(const i of Object.keys(t??{}))if(!this.FAST_PATH_OPTIONS.has(i))return Si.perfDebug("ChartOptions.isFastPathDelta() - slow path required due to presence of: ",i),!1;return Si.perfDebug("ChartOptions.isFastPathDelta() - fast path possible."),!0}fastSetup(t,i){const{activeTheme:s,defaultAxes:n,processedOptions:o}=i,{presetType:r}=this.optionMetadata,a=r?Rte[r]:void 0;if(r!=null&&(t==null?void 0:t.data)!=null&&a!=null){const{series:h,data:d}=a(t.data);t=Qe({series:h,data:d},t)}this.fastSeriesSetup(t,o);const c=Qe(t,o);return Si.debug("ChartOptions.fastSetup() - processed options",c),{activeTheme:s,defaultAxes:n,processedOptions:c,fastDelta:t}}fastSeriesSetup(t,i){var s;t!=null&&t.series&&((s=t.series)!=null&&s.every((n,o)=>{var r;return vN(n,((r=i.series)==null?void 0:r[o])??{})})?delete t.series:t.series=t.series.map((n,o)=>{var r;return Gg(n,((r=i.series)==null?void 0:r[o])??{})}))}slowSetup(t,i,s=!1){var M,R;let n=zt(this.userOptions,Si.OPTIONS_CLONE_OPTS);i&&(n=Qe(i,n),s&&this.removeLeftoverSymbols(n));const{presetType:o}=this.optionMetadata;if(o!=null){const A=Dte[o],T=n,F=n.type,P=F!=null?Vv(n.theme).presets[F]:void 0;Si.debug(">>> AgCharts.createOrUpdate() - applying preset",T),n=(A==null?void 0:A(T,P,()=>this.activeTheme))??n}this.soloSeriesIntegrity(n),Is.isEnterprise||ZL(n);const r=Vv(n.theme);if(o!=null&&r.templateTheme(n,!1),this.validateSeriesOptions(n),this.chartDef=un.detectChartDefinition(n),!this.chartDef.placeholder){const{valid:A,errors:T}=lo(n,this.chartDef.options);T.forEach(F=>de.warn(F)),n=A}this.validatePluginOptions(n),this.validateAxesOptions(n),this.removeDisabledOptions(n);const a=this.optionsType(n),{annotations:c={},axes:h={},series:d,...p}=this.getSeriesThemeConfig(a,r),[f,v]=this.splitAnnotationsOptions(c),y=zt(v),b=this.getDefaultAxes(n,d);let w=Qe(t,n,f,p,b);this.processAxesOptions(w,h),this.processSeriesOptions(w,r),w=zt(w,Si.OPTIONS_CLONE_OPTS),(A0(w)||E0(w)||e7(w))&&((M=w.legend)==null?void 0:M.enabled)==null&&(w.legend??(w.legend={}),w.legend.enabled=w.series.length>1),this.enableConfiguredOptions(w,n);const S=this.getThemeParameters(r,w);return S.__palette=zt(r.palette),S.__palette.type=pi(n.theme)?NG((R=n.theme)==null?void 0:R.palette):"inbuilt",this.resolveThemeOperations(S,S),this.resolveThemeOperations(S,w),this.resolveThemeOperations(S,y),this.processMiniChartSeriesOptions(w),r.templateTheme(w,!1),Ate(w),Is.isEnterprise||ZL(w,!0),this.validateSeriesOptions(w),this.validateAxesOptions(w),Si.debug(()=>["ChartOptions.slowSetup() - processed options",zt(w)]),{activeTheme:r,processedOptions:w,defaultAxes:b,themeParameters:S,annotationThemes:y}}validatePluginOptions(t){var i;for(const s of un.listModulesByType(Hm.Plugin)){const n=s.name;if(n in t&&(!s.chartType||s.chartType===((i=this.chartDef)==null?void 0:i.name))){const{valid:o,errors:r}=lo(t[n],s.options,s.name);r.forEach(a=>de.warn(a)),t[n]=o}}}validateSeriesOptions(t){var r,a;const i=(r=this.chartDef)==null?void 0:r.name,s=[],n=((a=t.series)==null?void 0:a.length)??0;let o;for(let c=0;c<n;c++){const h=`series[${c}]`,d=t.series[c],p=un.getSeriesModule(d.type??"line");if(p==null){o??(o=Yw(Array.from(un.listModulesByType(Hm.Series)).filter(b=>!i||b.chartType===i).map(b=>b.name),"or",XL)),de.warn(`Unknown type \`${d.type}\` at \`${h}.type\`; expecting ${o}, ignoring.`);continue}else if(i&&p.chartType!==i){de.warn(`Series type \`${p.name}\` at \`${h}.type\` is not supported by chart type \`${i}\`, ignoring.`);continue}const{validate:f=lo}=p,{valid:v,errors:y}=f(d,p.options,h);y.forEach(b=>de.warn(b)),y.some(b=>b.required&&b.path===h)||s.push(v)}t.series=s}validateAxesOptions(t){var r;if(!("axes"in t)||!t.axes)return;const i=(r=this.chartDef)==null?void 0:r.name,s=[],n=t.axes.length??0;let o;for(let a=0;a<n;a++){const c=`axes[${a}]`,h=t.axes[a],d=un.getAxisModule(h.type);if(d==null){o??(o=Yw(Array.from(un.listModulesByType(Hm.Axis)).filter(y=>y.chartType===i).map(y=>y.name),"or",XL)),de.warn(`Unknown type \`${h.type}\` at  \`${c}.type\`; expecting one of ${o}, ignoring all axes options.`),delete t.axes;break}else if(d.chartType!==i){de.warn(`Axis type \`${d.name}\` at  \`${c}.type\` is not supported by chart type \`${i}\`, ignoring.`);break}const{validate:p=lo}=d,{valid:f,errors:v}=p(h,d.options,c);v.forEach(y=>de.warn(y)),v.some(y=>y.required&&y.path===c)||s.push(f)}t.axes=s}diffOptions(t){return this===t?{}:t==null?this.processedOptions:this.fastDelta??er(t.processedOptions,this.processedOptions,Si.JSON_DIFF_OPTS)}getSeriesThemeConfig(t,i){return(i==null?void 0:i.config[t])??{}}getDefaultAxes(t,i){var r;const s=this.optionsType(t),n=((r=t.series)==null?void 0:r.find(a=>(a.type??"line")===s))??{},o=Gn.cloneDefaultAxes(s);return Sv(o,{},void 0,Qe(n,i)),o}optionsType(t){var i,s;return((s=(i=t.series)==null?void 0:i[0])==null?void 0:s.type)??"line"}splitAnnotationsOptions(t){const{axesButtons:i=null,enabled:s=null,optionsToolbar:n=null,toolbar:o=null,...r}=t;return i==null&&s==null&&n==null&&o==null?[{},r]:[{annotations:{axesButtons:i,enabled:s,optionsToolbar:n,toolbar:o}},r]}processAxesOptions(t,i){var s;"axes"in t&&(t.axes=(s=t.axes)==null?void 0:s.map(n=>{var v,y,b;const{crossLines:o,...r}=Qe((v=i[n.type])==null?void 0:v[n.position],i[n.type]);n.crossLines&&(n.crossLines=pv(n.crossLines,o));const a=(y=r.gridLine)==null?void 0:y.style;(b=n.gridLine)!=null&&b.style&&(a!=null&&a.length)&&(n.gridLine.style=n.gridLine.style.map((w,S)=>w.stroke!=null||w.lineDash!=null?Qe(w,a.at(S%a.length)):w));const{top:c,right:h,bottom:d,left:p,...f}=Qe(n,r);return f}))}processSeriesOptions(t,i){var o;const s=this.getTooltipPositionDefaults(t),n=(o=t.series)==null?void 0:o.map(r=>{r.type??(r.type="line");const{innerLabels:a,...c}=this.getSeriesThemeConfig(r.type,i).series??{},h=un.getSeriesModule(r.type),d=!!(h!=null&&h.options.tooltip),p=!!(h!=null&&h.options.visible),f=d&&this.getTooltipRangeDefaults(t,r.type),v=Qe(this.getSeriesGroupingOptions(r),r,d&&s,f,c,p&&{visible:!0});return v.innerLabels&&(v.innerLabels=pv(v.innerLabels,a)),v});t.series=this.setSeriesGroupingOptions(n??[])}processMiniChartSeriesOptions(t){var s,n;let i=(n=(s=t.navigator)==null?void 0:s.miniChart)==null?void 0:n.series;i!=null&&(i=i.map(o=>(o.type??(o.type="line"),o)),t.navigator.miniChart.series=this.setSeriesGroupingOptions(i))}getThemeParameters(t,i){const s=t.getPublicParameters();if(!fi(i.theme)||!i.theme.params)return s;const{valid:n,errors:o}=lo(i.theme.params,OG.params);for(const{message:r}of o)de.warnOnce(r);return Qe(n,s)}resolveThemeOperations(t,i){const s=Sv(i,t,new Set(["palette","data","theme"]));Si.debug("ChartOptions.resolveTheme()",s)}getSeriesGroupingOptions(t){const i=Gn.isGroupable(t.type),s=Gn.isStackable(t.type),n=Gn.isStackedByDefault(t.type);t.grouped&&!i&&de.warnOnce(`unsupported grouping of series type "${t.type}".`),(t.stacked||t.stackGroup)&&!s&&de.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:o,stacked:r}=t;return r??(r=(n||t.stackGroup!=null)&&!(i&&o)),o??(o=!0),{stacked:s&&r,grouped:i&&o&&!(s&&r)}}setSeriesGroupingOptions(t){const i=this.getSeriesGrouping(t);Si.debug("ChartOptions.setSeriesGroupingOptions() - series grouping: ",i);const s={},n=i.reduce((o,r)=>{var a;return r.groupType==="default"||(o[a=r.seriesType]??(o[a]=0),o[r.seriesType]+=r.groupType==="stack"?1:r.series.length),o},{});return i.flatMap(o=>{var r;switch(s[r=o.seriesType]??(s[r]=0),o.groupType){case"stack":{const a=s[o.seriesType]++;return o.series.map((c,h)=>Object.assign(c,{seriesGrouping:{groupId:o.groupId,groupIndex:a,groupCount:n[o.seriesType],stackIndex:h,stackCount:o.series.length}}))}case"group":return o.series.map(a=>Object.assign(a,{seriesGrouping:{groupId:o.groupId,groupIndex:s[o.seriesType]++,groupCount:n[o.seriesType],stackIndex:0,stackCount:0}}))}return o.series}).map(({stacked:o,grouped:r,...a})=>a)}getSeriesGroupId(t){return[t.type,t.xKey,t.stacked?t.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){const i=new Map;return t.reduce((s,n)=>{const o=n.type;if(!n.stacked&&!n.grouped)s.push({groupType:"default",seriesType:o,series:[n],groupId:"__default__"});else{const r=this.getSeriesGroupId(n);if(!i.has(r)){const c={groupType:n.stacked?"stack":"group",seriesType:o,series:[],groupId:r};i.set(r,c),s.push(c)}i.get(r).series.push(n)}return s},[])}getTooltipPositionDefaults(t){var h;const i=(h=t.tooltip)==null?void 0:h.position;if(!fi(i))return;const{type:s,anchorTo:n,placement:o,xOffset:r,yOffset:a}=i,c={};return qi(s)&&zb(IG,s)&&(c.type=s),qi(n)&&zb(EG,n)&&(c.anchorTo=n),qi(o)&&zb(TG,o)&&(c.placement=o),nt(r)&&(c.xOffset=r),nt(a)&&(c.yOffset=a),{tooltip:{position:c}}}getTooltipRangeDefaults(t,i){var s,n;return{tooltip:{range:((s=t.tooltip)==null?void 0:s.range)??((n=Gn.getTooltipDefauls(i))==null?void 0:n.range)}}}soloSeriesIntegrity(t){if(!Ue(t.series))return;const i=t.series;if(i&&i.length>1&&i.some(s=>Gn.isSolo(s.type))){const s=this.optionsType(t);if(Gn.isSolo(s))de.warn(`series[0] of type '${s}' is incompatible with other series types. Only processing series[0]`),t.series=i.slice(0,1);else{const{solo:n,nonSolo:o}=TM(i,a=>Gn.isSolo(a.type)?"solo":"nonSolo"),r=w9(n.map(a=>a.type)).join(", ");de.warn(`Unable to mix these series types with the lead series type: ${r}`),t.series=o}}}static enableConfiguredJsonOptions(t,i){typeof i=="object"&&"enabled"in i&&!i._enabledFromTheme&&t.enabled==null&&(i.enabled=!0)}static cleanupEnabledFromThemeJsonOptions(t){t._enabledFromTheme!=null&&delete t._enabledFromTheme}enableConfiguredOptions(t,i){Pr(i,Si.enableConfiguredJsonOptions,new Set(["data","theme"]),t),Pr(t,Si.cleanupEnabledFromThemeJsonOptions,new Set(["data","theme"]))}static removeDisabledOptionJson(t){"enabled"in t&&t.enabled===!1&&Object.keys(t).forEach(i=>{i!=="enabled"&&delete t[i]})}removeDisabledOptions(t){Pr(t,Si.removeDisabledOptionJson,new Set(["data","theme"]))}static removeLeftoverSymbolsJson(t){if(!(!t||!pi(t)))for(const i of Object.keys(t)){const s=t[i];l9(s)&&delete t[i]}}removeLeftoverSymbols(t){Pr(t,Si.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(t){if(t.window==null?t.window=Et():s9(t.window),t.document==null?t.document=Yr():i9(t.document),t.window==null)throw new Error("AG Charts - unable to resolve global window");if(t.document==null)throw new Error("AG Charts - unable to resolve global document");return t}};_h.OPTIONS_CLONE_OPTS={shallow:new Set(["data","container"]),assign:new Set(["context","theme"])};_h.JSON_DIFF_OPTS=new Set(["data"]);_h.perfDebug=at.create(!0,"perf");_h.FAST_PATH_OPTIONS=new Set(["data","width","height","container"]);_h.debug=at.create(!0,"opts");var Ex=_h,jte=1e3,AD=class Ba{constructor(t,i,s,n,o,r=jte){this.name=t,this.buildItem=i,this.releaseItem=s,this.destroyItem=n,this.maxPoolSize=o,this.cleanupTimeMs=r,this.freePool=[],this.busyPool=new Set}static getPool(t,i,s,n,o){return this.pools.has(t)||this.pools.set(t,new Ba(t,i,s,n,o)),this.pools.get(t)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}hasFree(){return this.freePool.length>0}obtain(t){if(!this.hasFree()&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return i==null?(i=this.buildItem(t),Ba.debug(()=>[`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i])):Ba.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i]),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}obtainFree(){const t=this.freePool.pop();if(t==null)throw new Error("AG Charts - pool has no free instances");return Ba.debug(()=>[`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,t]),this.busyPool.add(t),{item:t,release:()=>this.release(t)}}release(t){if(!this.busyPool.has(t))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");Ba.debug(()=>[`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t]),this.releaseItem(t),this.busyPool.delete(t),this.freePool.push(t),Ba.debug(()=>[`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t]);const i=Date.now(),s=i+this.cleanupTimeMs*.5;this.cleanPoolTimer&&(this.cleanPoolDue??1/0)<s&&(clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=void 0),this.cleanPoolTimer||(this.cleanPoolDue=i+this.cleanupTimeMs,this.cleanPoolTimer=setTimeout(this.cleanPool.bind(this),this.cleanupTimeMs))}cleanPool(){const t=this.freePool.splice(0);for(const i of t)this.destroyItem(i);Ba.debug(()=>[`Pool[name=${this.name}]: Cleaned pool of ${t.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`])}destroy(){this.cleanPool();for(const t of this.busyPool.values())this.destroyItem(t);this.busyPool.clear()}};AD.pools=new Map;AD.debug=at.create(!0,"pool");var Ute=AD;un.registerMany(ite);var Fr=at.create(!0,"opts"),Ya=class{static licenseCheck(t){var i,s;this.licenseChecked||(this.licenseManager=(i=Is.licenseManager)==null?void 0:i.call(Is,t),(s=this.licenseManager)==null||s.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(t){var i;return(i=Is.licenseManager)==null?void 0:i.call(Is,{}).getLicenseDetails(t)}static getInstance(t){return QL.getInstance(t)}static create(t,i){return Fr.group("AgCharts.create()",()=>{var n,o;t=at.inDevelopmentMode(()=>fc(zt(t)))??t,this.licenseCheck(t);const s=QL.createOrUpdate({userOptions:t,licenseManager:this.licenseManager,optionsMetadata:i});return(n=this.licenseManager)!=null&&n.isDisplayWatermark()&&this.licenseManager&&((o=Is.injectWatermark)==null||o.call(Is,s.chart.ctx.domManager,this.licenseManager.getWatermarkMessage())),s})}static createFinancialChart(t){return Fr.group("AgCharts.createFinancialChart()",()=>this.create(t,{presetType:"price-volume"}))}static createGauge(t){return Fr.group("AgCharts.createGauge()",()=>this.create(t,{presetType:"gauge"}))}static __createSparkline(t){return Fr.group("AgCharts.__createSparkline()",()=>{const{pool:i,...s}=t;return this.create(s,{presetType:"sparkline",pool:i??!0,domMode:"minimal"})})}};Ya.licenseChecked=!1;var _o=class za{static getInstance(t){const i=Ry.getInstance(t);return i?ML.chartInstances.get(i):void 0}static initialiseModules(){za.initialised||(Dee(),Ree(),za.initialised=!0)}static createOrUpdate(t){var P,N,O,B,V;let{proxy:i}=t;const{userOptions:s,licenseManager:n,processedOverrides:o=((P=i==null?void 0:i.chart)==null?void 0:P.chartOptions.processedOverrides)??{},specialOverrides:r=((N=i==null?void 0:i.chart)==null?void 0:N.chartOptions.specialOverrides)??{},optionsMetadata:a=((O=i==null?void 0:i.chart)==null?void 0:O.chartOptions.optionMetadata)??{},deltaOptions:c,stripSymbols:h=!1}=t,d=Is.styles!=null?[["ag-charts-enterprise",Is.styles]]:[],{presetType:p}=a;za.initialiseModules(),Fr(()=>[">>> AgCharts.createOrUpdate() user options",zt(s)]);let f=s;Ya.optionsMutationFn&&f&&(f=Ya.optionsMutationFn(zt(f),p),Fr(()=>[">>> AgCharts.createOrUpdate() MUTATED user options",zt(f)]));const v=this.getPool(a);let y=!1,b,w=i==null?void 0:i.chart;w==null&&(v!=null&&v.hasFree())&&(b=v.obtainFree(),w=b.item);const{document:S,window:M,styleContainer:R,...A}=f??{},T=w==null?void 0:w.getChartOptions(),F=new Ex(T,A,o,{...r,document:S,window:M,styleContainer:R},a,c,h);return(w==null||un.detectChartDefinition(F.processedOptions)!==un.detectChartDefinition(w.chartOptions.processedOptions))&&(b==null||b.release(),b=(B=this.getPool(F.optionMetadata))==null?void 0:B.obtain(F),b?w=b.item:(y=!0,w=za.createChartInstance(F,w))),d.forEach(([U,se])=>{w.ctx.domManager.addStyles(U,se)}),i==null?(i=new ML(w,za.callbackApi,n),i.releaseChart=b==null?void 0:b.release):(b||y)&&((V=i.releaseChart)==null||V.call(i),i.chart=w,i.releaseChart=b==null?void 0:b.release),Fr.check()&&typeof window<"u"&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[w.id]=w),w.queuedUserOptions.push(F.userOptions),w.queuedChartOptions.push(F),w.requestFactoryUpdate(U=>{Fr.group(">>>> Chart.applyOptions()",()=>{U.applyOptions(F);const se=U.queuedUserOptions.indexOf(F.userOptions)+1;U.queuedUserOptions.splice(0,se),U.queuedChartOptions.splice(0,se)})}),i}static markRemovedProperties(t,i,s=!1){if(typeof t!="object")return s;for(const n of Object.keys(t))typeof t[n]>"u"&&(Object.assign(t,{[n]:Symbol("UNSET")}),s||(s=!0));return s}static updateUserDelta(t,i){i=zt(i,Ex.OPTIONS_CLONE_OPTS);const s=Pr(i,za.markRemovedProperties,new Set(["data"]),void 0,void 0,!1);Fr(()=>[">>> AgCharts.updateUserDelta() user delta",zt(i)]),za.createOrUpdate({proxy:t,deltaOptions:i,stripSymbols:s})}static createChartInstance(t,i){const s=i==null?void 0:i.destroy({keepTransferableResources:!0});return un.detectChartDefinition(t.processedOptions).create(t,s)}static getPool(t){if(t.pool===!0)return Ute.getPool(t.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};_o.caretaker=new AN(xv);_o.initialised=!1;_o.callbackApi={caretaker:_o.caretaker,create(e,t,i,s){return _o.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:i,optionsMetadata:s})},update(e,t){return _o.createOrUpdate({userOptions:e,proxy:t})},updateUserDelta(e,t){return _o.updateUserDelta(e,t)}};_o.detachAndClear=e=>e.detachAndClear();_o.destroy=e=>e.destroy();var QL=_o,Yte={};xo(Yte,{Arc:()=>ur,BBox:()=>Me,Caption:()=>jt,CategoryScale:()=>Rp,Group:()=>Ne,Line:()=>wn,LinearScale:()=>yo,Marker:()=>Bi,Path:()=>zs,RadialColumnShape:()=>Jn,Rect:()=>Ms,Scene:()=>my,Sector:()=>es,Shape:()=>$n,TranslatableGroup:()=>Ps,getRadialColumnWidth:()=>GG,toRadians:()=>Wt});var ur=class extends zs{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return Bo(Pt(this.startAngle),Pt(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?e.closePath():this.type===2&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new Me(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(e,t){const i=this.getBBox();return this.type!==0&&i.containsPoint(e,t)&&this.path.isPointInPath(e,t)}};ur.className="Arc";D([ze()],ur.prototype,"centerX",2);D([ze()],ur.prototype,"centerY",2);D([ze()],ur.prototype,"radius",2);D([ze()],ur.prototype,"startAngle",2);D([ze()],ur.prototype,"endAngle",2);D([ze()],ur.prototype,"counterClockwise",2);D([ze()],ur.prototype,"type",2);function mw(e,t,i){const s=Math.sqrt(e**2+t**2),o=Math.atan2(t,e)+i;return{x:Math.cos(o)*s,y:Math.sin(o)*s}}var Jn=class extends zs{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(e){}computeBBox(){const{innerRadius:e,outerRadius:t,columnWidth:i}=this,s=this.getRotation(),n=-i/2,o=i/2,r=-t,a=-e;let c=1/0,h=1/0,d=-1/0,p=-1/0;for(let f=0;f<4;f+=1){const{x:v,y}=mw(f%2===0?n:o,f<2?r:a,s);c=Math.min(v,c),h=Math.min(y,h),d=Math.max(v,d),p=Math.max(y,p)}return new Me(c,h,d-c,p-h)}getRotation(){const{startAngle:e,endAngle:t}=this,i=ny(e,t);return Pt(e+i/2+Math.PI/2)}updatePath(){const{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:e,innerRadius:t,outerRadius:i,path:s}=this,n=-e/2,o=e/2,r=-i,a=-t,c=this.getRotation(),h=[[n,a],[n,r],[o,r],[o,a]].map(([d,p])=>mw(d,p,c));s.clear(!0),s.moveTo(h[0].x,h[0].y),s.lineTo(h[1].x,h[1].y),s.lineTo(h[2].x,h[2].y),s.lineTo(h[3].x,h[3].y),s.closePath()}updateBeveledPath(){const{columnWidth:e,path:t,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:o,isRadiusAxisReversed:r}=this,a=Bo(s,n),c=Math.asin(e/2/s),h=this.getRotation(),d=(N,O)=>mw(N,O,h),p=(N,O)=>Math.sqrt(N**2+O**2),f=(N,O)=>O>N?0:Math.sqrt(N**2-O**2),v=(N,O,B)=>B?N<O:N>O,y=a&&!isNaN(c)&&c<Math.PI/6;let b=-e/2,w=e/2;const S=-i,M=-s*(y?Math.cos(c):1),R=v(o,p(s,e/2),!r);if(R){const N=f(o,s);b=-N,w=N}t.clear(!0);const A=d(b,M);t.moveTo(A.x,A.y);const T=Bo(s,i),F=v(o,p(i,e/2),!r);if(T&&y)t.arc(0,0,s,Pt(-c-Math.PI/2)+h,Pt(c-Math.PI/2)+h,!1);else if(F){const N=-f(o,e/2),O=f(o,i);if(!R){const B=d(b,N);t.lineTo(B.x,B.y)}if(t.arc(0,0,o,Math.atan2(N,b)+h,Math.atan2(S,-O)+h,!1),!Bo(O,0)){const B=d(O,S);t.lineTo(B.x,B.y)}t.arc(0,0,o,Math.atan2(S,O)+h,Math.atan2(N,w)+h,!1)}else{const N=d(b,S),O=d(w,S);t.lineTo(N.x,N.y),t.lineTo(O.x,O.y)}const P=d(w,M);if(t.lineTo(P.x,P.y),y)t.arc(0,0,s,Pt(c-Math.PI/2)+h,Pt(-c-Math.PI/2)+h,!0);else{const N=d(b,M);t.lineTo(N.x,N.y)}t.closePath()}};Jn.className="RadialColumnShape";D([ze()],Jn.prototype,"isBeveled",2);D([ze()],Jn.prototype,"columnWidth",2);D([ze()],Jn.prototype,"startAngle",2);D([ze()],Jn.prototype,"endAngle",2);D([ze()],Jn.prototype,"outerRadius",2);D([ze()],Jn.prototype,"innerRadius",2);D([ze()],Jn.prototype,"axisInnerRadius",2);D([ze()],Jn.prototype,"axisOuterRadius",2);D([ze()],Jn.prototype,"isRadiusAxisReversed",2);function GG(e,t,i,s,n){const o=ny(e,t),r=o*(1-s)/2;if(e+=r,t-=r,o<.001)return 2*i*n;if(o>=2*Math.PI){const v=e+o/2;e=v-Math.PI,t=v+Math.PI}const a=i*Math.cos(e),c=i*Math.sin(e),h=i*Math.cos(t),d=i*Math.sin(t),p=Math.floor(Math.sqrt((a-h)**2+(c-d)**2)),f=2*i*n;return Math.max(1,Math.min(f,p))}var Kte={};xo(Kte,{ChartTheme:()=>wo,DEFAULT_ANNOTATION_HANDLE_FILL:()=>Fp,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>Np,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>Op,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>Kg,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>$g,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>Pp,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>kp,DEFAULT_CAPTION_ALIGNMENT:()=>ja,DEFAULT_CAPTION_LAYOUT_STYLE:()=>Wa,DEFAULT_FIBONACCI_STROKES:()=>Yg,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_BACKGROUND_FILL:()=>Ii,DEFAULT_FINANCIAL_CHARTS_ANNOTATION_COLOR:()=>si,DEFAULT_GRIDLINE_ENABLED:()=>Vo,DEFAULT_POLAR_SERIES_STROKE:()=>Oy,DEFAULT_SEPARATION_LINES_COLOUR:()=>Ep,DEFAULT_SHADOW_COLOUR:()=>ml,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>Gy,DEFAULT_TEXTBOX_COLOR:()=>zp,DEFAULT_TEXTBOX_FILL:()=>Gp,DEFAULT_TEXTBOX_STROKE:()=>Bp,DEFAULT_TEXT_ANNOTATION_COLOR:()=>Lp,DEFAULT_TOOLBAR_POSITION:()=>Hp,IS_COMMUNITY:()=>j0,IS_DARK_THEME:()=>Zu,IS_ENTERPRISE:()=>U0,PALETTE_ALT_DOWN_FILL:()=>Z0,PALETTE_ALT_DOWN_STROKE:()=>K0,PALETTE_ALT_NEUTRAL_FILL:()=>q0,PALETTE_ALT_NEUTRAL_STROKE:()=>Ny,PALETTE_ALT_UP_FILL:()=>$0,PALETTE_ALT_UP_STROKE:()=>Y0,PALETTE_DOWN_FILL:()=>Ip,PALETTE_DOWN_STROKE:()=>Py,PALETTE_NEUTRAL_FILL:()=>ky,PALETTE_NEUTRAL_STROKE:()=>uh,PALETTE_UP_FILL:()=>Tp,PALETTE_UP_STROKE:()=>Fy,getChartTheme:()=>Vv,resolveOperation:()=>Zte,themeNames:()=>$te,themeSymbols:()=>W0,themes:()=>RD});var $te=Object.keys(RD);function Zte(e){const t=wo.getDefaultPublicParameters();t.__palette=wo.getDefaultColors();const i={operation:e};return Sv(i,t),i.operation}var qte={};xo(qte,{Color:()=>gt,interpolateColor:()=>_N});var Xte={};xo(Xte,{AND:()=>cl,ARRAY:()=>zM,ARRAY_OF:()=>zi,AbstractBarSeries:()=>rG,AbstractBarSeriesProperties:()=>fD,ActionOnSet:()=>Js,AnchoredPopover:()=>VG,Animation:()=>YN,AnimationManager:()=>ZN,Arc:()=>ur,Axis:()=>x0,AxisGroupZIndexMap:()=>VO,AxisInterval:()=>Oc,AxisLabel:()=>Vi,AxisTick:()=>Rh,AxisTickGenerator:()=>WO,AxisTicks:()=>Cie,BBox:()=>Me,BBoxValues:()=>ey,BOOLEAN:()=>sN,BOOLEAN_ARRAY:()=>hZ,Background:()=>Fh,BackgroundModule:()=>I1,BandScale:()=>Sp,BarSeries:()=>Up,BarSeriesModule:()=>uG,BaseModuleInstance:()=>Jv,BaseProperties:()=>Be,BaseToolbar:()=>PD,ButtonWidget:()=>yp,COLOR_GRADIENT:()=>ar,COLOR_PATTERN:()=>lr,COLOR_STRING:()=>Cn,COLOR_STRING_ARRAY:()=>_M,CachedTextMeasurer:()=>xN,CachedTextMeasurerPool:()=>qr,Caption:()=>jt,CartesianAxis:()=>xp,CartesianSeries:()=>vl,CartesianSeriesNodeEvent:()=>J0,CartesianSeriesProperties:()=>aa,CategoryAxis:()=>Gc,CategoryScale:()=>Rp,ChangeDetectableProperties:()=>B0,Chart:()=>Ry,ChartAxisDirection:()=>QM,ChartEventManager:()=>qN,ChartOptions:()=>Ex,ChartUpdateType:()=>Sg,CollapseMode:()=>K1,Color:()=>gt,ColorScale:()=>Mh,ConicGradient:()=>Jk,ContextMenuRegistry:()=>XN,ContinuousScale:()=>Ct,DATE:()=>HM,DATE_ARRAY:()=>pZ,DATE_OR_DATETIME_MS:()=>VM,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>Hc,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Vc,DEFAULT_TOOLTIP_CLASS:()=>$i,DEFAULT_TOOLTIP_DARK_CLASS:()=>i1,DIRECTION:()=>AZ,DIRECTION_SWAP_AXES:()=>B1,DOMManager:()=>NN,DataController:()=>EO,DataModel:()=>RO,DataModelSeries:()=>Q0,DataService:()=>vy,Debug:()=>at,Deprecated:()=>JO,DeprecatedAndRenamedTo:()=>g7,DragInterpreter:()=>tO,DraggablePopover:()=>_G,DropShadow:()=>Ro,ExtendedPath2D:()=>sh,FILL_PATTERN_DEFAULTS:()=>nl,FONT_SIZE_RATIO:()=>_0,FONT_STYLE:()=>bZ,FONT_WEIGHT:()=>wZ,FUNCTION:()=>lZ,FillGradientDefaults:()=>Xn,FillPatternDefaults:()=>ai,FloatingToolbar:()=>Eie,GREATER_THAN:()=>cy,Gradient:()=>ry,Group:()=>Ne,GroupedCategoryAxis:()=>Bc,HdpiCanvas:()=>r0,HierarchyNode:()=>fie,HierarchySeries:()=>mie,HierarchySeriesProperties:()=>hr,HighlightManager:()=>QN,HighlightProperties:()=>z0,HighlightStyle:()=>Ap,INTERACTION_RANGE:()=>TZ,INTERPOLATION_STEP_POSITION:()=>LJ,INTERPOLATION_TYPE:()=>IJ,Image:()=>Wh,InteractionManager:()=>$N,InteractionState:()=>KN,InterpolationProperties:()=>Nh,Invalidating:()=>xh,LABEL_PLACEMENT:()=>IZ,LARGEST_KEY_INTERVAL:()=>b1,LESS_THAN:()=>ly,LINE_CAP:()=>mZ,LINE_DASH:()=>CZ,LINE_JOIN:()=>vZ,LINE_STYLE:()=>yZ,Label:()=>Hi,LayoutElement:()=>JM,LayoutManager:()=>DN,LegendMarkerLabel:()=>Qn,Line:()=>wn,LineSeries:()=>Kp,LineSeriesModule:()=>fG,LinearGradient:()=>eN,LinearScale:()=>yo,Listeners:()=>Xr,LogScale:()=>G0,LonLatBBox:()=>vie,MARKER_SHAPE:()=>vJ,MATCHING_CROSSLINE_TYPE:()=>S0,MAX_SPACING:()=>FZ,MIN_SPACING:()=>LZ,Marker:()=>Bi,Menu:()=>Die,MercatorScale:()=>yie,ModuleRegistry:()=>un,Motion:()=>nx,NAN:()=>ay,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>ho,NUMBER:()=>yn,NUMBER_ARRAY:()=>dZ,NUMBER_OR_NAN:()=>BM,NativeWidget:()=>rh,NewAreaSeriesModule:()=>oG,NewBarSeriesModule:()=>hG,NewBubbleSeriesModule:()=>gG,NewHistogramSeriesModule:()=>pG,NewLineSeriesModule:()=>mG,NewScatterSeriesModule:()=>yG,NiceMode:()=>GO,Node:()=>Kr,NumberAxis:()=>na,OBJECT:()=>iN,OBJECT_ARRAY:()=>fZ,OR:()=>ps,OVERFLOW_STRATEGY:()=>RZ,ObserveChanges:()=>hl,OrdinalTimeScale:()=>Hr,PHASE_METADATA:()=>Vg,PHASE_ORDER:()=>Nu,PLACEMENT:()=>EZ,PLAIN_OBJECT:()=>aZ,POSITION:()=>SZ,POSITION_TOP_COORDINATES:()=>Tv,POSITIVE_NUMBER:()=>GM,PREV_NEXT_KEYS:()=>$u,Padding:()=>ul,ParallelStateMachine:()=>LQ,Path:()=>zs,PointerEvents:()=>Kk,PolarAxis:()=>hh,PolarSeries:()=>Zy,PolarZIndexMap:()=>xG,Popover:()=>FD,PropertiesArray:()=>mp,ProxyInteractionService:()=>zN,ProxyOnWrite:()=>M8,ProxyProperty:()=>xt,ProxyPropertyOnWrite:()=>Qi,QUICK_TRANSITION:()=>Mv,RATIO:()=>uZ,REAL_NUMBER:()=>cZ,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>kv,RadialColumnShape:()=>Jn,Range:()=>Mo,Rect:()=>Ms,RepeatType:()=>UN,Rotatable:()=>Dh,RotatableGroup:()=>$Z,RotatableText:()=>MN,SAFE_FILLS_OPERATION:()=>X0,SAFE_FILL_OPERATION:()=>wJ,SAFE_RANGE2_OPERATION:()=>xJ,SAFE_STROKE_FILL_OPERATION:()=>By,SKIP_JS_BUILTINS:()=>NM,SMALLEST_KEY_INTERVAL:()=>S1,SORT_DOMAIN_GROUPS:()=>w1,STRING:()=>nN,STRING_ARRAY:()=>gZ,Scalable:()=>UM,ScalableGroup:()=>KZ,Scene:()=>my,SceneChangeDetection:()=>De,ScenePathChangeDetection:()=>ze,Sector:()=>es,SectorBox:()=>CG,Selection:()=>wi,Series:()=>Dy,SeriesContentZIndexMap:()=>XO,SeriesGroupingChangedEvent:()=>I0,SeriesItemHighlightStyle:()=>oa,SeriesMarker:()=>Ji,SeriesNodeEvent:()=>Mp,SeriesNodePickMode:()=>QO,SeriesProperties:()=>xn,SeriesTooltip:()=>Ds,SeriesZIndexMap:()=>qO,Shape:()=>$n,SimpleTextMeasurer:()=>qM,SliderWidget:()=>o0,StateMachine:()=>wp,StateMachineProperty:()=>IQ,StopProperties:()=>WM,SvgPath:()=>LD,TEXT_ALIGN:()=>MZ,TEXT_WRAP:()=>xZ,TICK_INTERVAL:()=>_Q,TempValidate:()=>E,Text:()=>Gi,TextUtils:()=>Ht,TextWrapper:()=>XM,ThemeConstants:()=>F1,ThemeSymbols:()=>W0,TimeScale:()=>vO,Toolbar:()=>Rie,ToolbarButtonProperties:()=>Zp,ToolbarButtonWidget:()=>WG,ToolbarWidget:()=>fy,Tooltip:()=>qn,TooltipManager:()=>Dv,TooltipPosition:()=>ta,Transformable:()=>ri,TransformableText:()=>nh,Translatable:()=>Pc,TranslatableGroup:()=>Ps,TranslatableLine:()=>Lv,UNION:()=>bt,UpdateService:()=>bO,VERTICAL_ALIGN:()=>DZ,Validate:()=>rZ,Vec2:()=>Ou,Vec4:()=>jg,WIDGET_HTML_EVENTS:()=>$M,Widget:()=>cr,WidgetEventUtil:()=>zr,ZIndexMap:()=>VN,ZoomManager:()=>CO,accumulateGroup:()=>x1,accumulateStack:()=>M1,accumulatedValue:()=>d1,accumulativeValueProperty:()=>Ug,addHitTestersToQuadtree:()=>gD,adjustLabelPlacement:()=>cG,angleBetween:()=>ny,animationValidation:()=>Th,applyShapeFillBBox:()=>My,applyShapeStyle:()=>Ec,areScalingEqual:()=>qu,area:()=>yx,autoSizedLabelOptionsDefs:()=>qJ,buildFormatter:()=>Cp,buildResetPathFn:()=>aD,calculateDefaultTimeTickFormat:()=>hO,calculateDerivativeExtrema:()=>Qw,calculateDerivativeExtremaXY:()=>cN,calculateLabelChartPadding:()=>NO,calculateLabelTranslation:()=>dx,calculatePlacement:()=>e1,cartesianAxisCrosshairOptions:()=>Bh,cartesianAxisLabelOptionsDefs:()=>Oh,cartesianAxisOptionsDefs:()=>Gh,cartesianChartOptionsDefs:()=>RG,cartesianCrossLineOptionsDefs:()=>sG,checkCrisp:()=>aG,clampArray:()=>rx,clippedRoundRect:()=>Ym,collapsedStartingBarPosition:()=>Jg,commonAxisLabelOptionsDefs:()=>cD,commonAxisOptionsDefs:()=>Vy,commonChartOptionsDefs:()=>Hs,commonCrossLineLabelOptionsDefs:()=>lD,commonCrossLineOptionsDefs:()=>iG,commonSeriesOptionsDefs:()=>Ao,compareDates:()=>nO,computeBarFocusBounds:()=>vD,computeMarkerFocusBounds:()=>_p,continuousAxisOptions:()=>_y,countExpandingSearch:()=>eO,createButton:()=>Sie,createCheckbox:()=>bie,createDatumId:()=>Xi,createDeprecationWarning:()=>L0,createElementId:()=>QZ,createIcon:()=>HG,createId:()=>vn,createSelect:()=>wie,createTextArea:()=>xie,dateToNumber:()=>Ss,datesSortOrder:()=>c0,datumKeys:()=>Av,datumStylerProperties:()=>Za,deconstructSelectionsOrNodes:()=>yy,deepClone:()=>zt,deepFreeze:()=>fc,defaultTimeTickFormat:()=>h0,diff:()=>Ih,drawCorner:()=>lg,drawMarkerUnitPolygon:()=>ag,easing:()=>nx,enterpriseModule:()=>Is,errorBarOptionsDefs:()=>Wy,evaluateBezier:()=>mv,extent:()=>ia,extractDecoratedProperties:()=>Zk,findMinMax:()=>xi,findQuadtreeMatch:()=>pD,findRangeExtent:()=>ah,fixNumericExtent:()=>Qs,flowProportionChartOptionsDefs:()=>Pee,focusCursorAtEnd:()=>qZ,formatNumber:()=>BN,formatPercent:()=>GN,formatValue:()=>$r,fromToMotion:()=>ii,gaugeChartOptionsDefs:()=>kee,generateUUID:()=>Zw,getAngleRatioRadians:()=>Xk,getColorStops:()=>aN,getCrossLineValue:()=>PO,getDateTicksForInterval:()=>g0,getDatumRefPoint:()=>l0,getElementBBox:()=>fN,getIconClassNames:()=>hy,getLastFocus:()=>i0,getMissCount:()=>p0,getPath:()=>ih,getPathComponents:()=>DO,getRadialColumnWidth:()=>GG,getSequentialColors:()=>Mn,getShapeFill:()=>vc,getShapeStyle:()=>Yo,groupAccumulativeValueProperty:()=>qa,groupAverage:()=>h1,groupCount:()=>vx,groupStackValueProperty:()=>C1,groupSum:()=>u1,hasNoModifiers:()=>py,hierarchyChartOptionsDefs:()=>Fee,initMenuKeyNav:()=>LN,initRovingTabIndex:()=>IN,interpolatePoints:()=>Nv,interpolationValidator:()=>dD,isAgFlowProportionChartOptions:()=>ZO,isAgGaugeChartOptions:()=>T0,isAgHierarchyChartOptions:()=>KO,isAgStandaloneChartOptions:()=>E0,isAgTopologyChartOptions:()=>$O,isBetweenAngles:()=>Va,isButtonClickEvent:()=>t0,isContinuous:()=>by,isDecoratedObject:()=>fp,isDenseInterval:()=>ch,isGradientFill:()=>So,isGradientOrPatternFill:()=>YZ,isInputPending:()=>mN,isPatternFill:()=>Dc,isProperties:()=>Jo,isScaleValid:()=>qg,jsonApply:()=>yg,jsonDiff:()=>er,jsonPropertyCompare:()=>vN,jsonResolveOperations:()=>Sv,jsonWalk:()=>Pr,keyProperty:()=>vo,labelDirectionHandling:()=>OO,legendSymbolSvg:()=>t1,lineDistanceSquared:()=>vg,listDecoratedProperties:()=>$a,makeAccessibleClickListener:()=>Q8,mapValues:()=>qk,markerFadeInAnimation:()=>Xg,markerOptionsDefs:()=>Wp,markerScaleInAnimation:()=>nD,markerSwipeScaleInAnimation:()=>oD,merge:()=>Gg,mergeArrayDefaults:()=>pv,mergeDefaults:()=>Qe,midpointStartingBarPosition:()=>JJ,moduleRegistry:()=>Uo,motion:()=>Iie,nearestSquared:()=>iy,nearestSquaredInContainer:()=>_9,normaliseGroupTo:()=>Ey,normalisePropertyTo:()=>yc,normalisedExtentWithMetadata:()=>k0,normalizeAngle180:()=>Bg,normalizeAngle360:()=>Pt,normalizeAngle360Inclusive:()=>iZ,numberFormatValidator:()=>Hy,objectsEqual:()=>Qo,objectsEqualWith:()=>kM,pairUpSpans:()=>xg,partialAssign:()=>Xw,pathFadeInAnimation:()=>Ov,pathMotion:()=>Pv,pathSwipeInAnimation:()=>rD,pickByMatchingAngle:()=>xD,plotAreaPathFill:()=>J1,plotInterpolatedAreaSeriesFillSpans:()=>$m,plotInterpolatedLinePathStroke:()=>Km,plotLinePathStroke:()=>tD,polarChartOptionsDefs:()=>AG,predicateWithMessage:()=>St,prepareAreaFillAnimationFns:()=>eG,prepareAreaPathAnimation:()=>tG,prepareAxisAnimationContext:()=>Iv,prepareAxisAnimationFunctions:()=>BO,prepareBarAnimationFunctions:()=>ep,prepareLinePathAnimation:()=>Q1,prepareLinePathPropertyAnimation:()=>sD,prepareLinePathStrokeAnimationFns:()=>iD,preparePieSeriesAnimationFunctions:()=>Cc,range:()=>Wg,rangedValueProperty:()=>N0,resetAxisGroupFn:()=>zO,resetAxisLabelSelectionFn:()=>w0,resetAxisLineSelectionFn:()=>HO,resetAxisSelectionFn:()=>b0,resetBarSelectionsFn:()=>tp,resetIds:()=>U9,resetLabelFn:()=>ra,resetMarkerFn:()=>Vp,resetMarkerPositionFn:()=>Qg,resetMotion:()=>Ki,resetPieSelectionsFn:()=>wD,rowCountProperty:()=>v1,scale:()=>Cs,sectorBox:()=>SG,seriesLabelFadeInAnimation:()=>ct,seriesLabelFadeOutAnimation:()=>Ua,seriesLabelOptionsDefs:()=>yl,setAttribute:()=>At,setAttributes:()=>Rc,setElementBBox:()=>Cv,setElementStyle:()=>uo,setPath:()=>OM,shadowOptionsDefs:()=>jp,shallowClone:()=>KM,solveBezier:()=>vv,sortAndUniqueDates:()=>ax,splitBezier:()=>yv,standaloneChartOptionsDefs:()=>Lee,staticFromToMotion:()=>Qr,stopPageScrolling:()=>FN,sum:()=>B7,sumValues:()=>Ay,toDegrees:()=>sZ,toRadians:()=>Wt,toolbarButtonOptionsDefs:()=>Mx,tooltipContentAriaLabel:()=>n1,tooltipHtml:()=>r1,tooltipOptionsDefs:()=>la,topologyChartOptionsDefs:()=>Iee,trailingAccumulatedValue:()=>g1,trailingAccumulatedValueProperty:()=>_7,updateClipPath:()=>Gv,updateLabelNode:()=>lG,validateCrossLineValue:()=>kO,valueProperty:()=>Je,visibleRangeIndices:()=>JN,without:()=>il});var Ou={add:Qte,angle:nie,apply:gie,equal:hie,distance:tie,distanceSquared:iie,from:die,gradient:rie,intercept:aie,intersectAtX:cie,intersectAtY:lie,length:TD,lengthSquared:eie,multiply:Jte,normalized:sie,origin:BG,required:pie,rotate:oie,round:uie,sub:ED};function Qte(e,t){return typeof t=="number"?{x:e.x+t,y:e.y+t}:{x:e.x+t.x,y:e.y+t.y}}function ED(e,t){return typeof t=="number"?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function Jte(e,t){return typeof t=="number"?{x:e.x*t,y:e.y*t}:{x:e.x*t.x,y:e.y*t.y}}function TD(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function eie(e){return e.x*e.x+e.y*e.y}function tie(e,t){const i=ED(e,t);return Math.sqrt(i.x*i.x+i.y*i.y)}function iie(e,t){const i=ED(e,t);return i.x*i.x+i.y*i.y}function sie(e){const t=TD(e);return{x:e.x/t,y:e.y/t}}function nie(e,t){return t==null?Math.atan2(e.y,e.x):Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)}function oie(e,t,i=BG()){const s=TD(e);return{x:i.x+s*Math.cos(t),y:i.y+s*Math.sin(t)}}function rie(e,t,i){const s=t.x-e.x;return(i==null?t.y-e.y:i-t.y-(i-e.y))/s}function aie(e,t,i){return(i==null?e.y:i-e.y)-t*e.x}function lie(e,t,i=0,s){return{x:e===1/0?1/0:(i-t)/e,y:s==null?i:s-i}}function cie(e,t,i=0,s){const n=e===1/0?1/0:e*i+t;return{x:i,y:s==null?n:s-n}}function uie(e,t=2){return{x:wI(e.x,t),y:wI(e.y,t)}}function hie(e,t){return e.x===t.x&&e.y===t.y}function die(e,t){if(typeof e=="number")return{x:e,y:t};if("currentX"in e)return{x:e.currentX,y:e.currentY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw new Error(`Values can not be converted into a vector: [${JSON.stringify(e)}] [${t}]`)}function gie(e,t){return e.x=t.x,e.y=t.y,e}function pie(e){return{x:(e==null?void 0:e.x)??0,y:(e==null?void 0:e.y)??0}}function BG(){return{x:0,y:0}}var zG=class Zm{constructor(t,i,s,n,o,r,a,c,h){this.series=t,this.datumIndex=i,this.datum=s,this.sizeValue=n,this.colorValue=o,this.sumSize=r,this.depth=a,this.parent=c,this.children=h,this.midPoint={x:0,y:0}}get hasChildren(){return this.children.length>0}walk(t,i=Zm.Walk.PreOrder){i===Zm.Walk.PreOrder&&t(this),this.children.forEach(s=>{s.walk(t,i)}),i===Zm.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*t}};zG.Walk={PreOrder:0,PostOrder:1};var fie=zG,mie=class extends Dy{constructor(e){super({moduleCtx:e,pickModes:[1,0]}),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new Mh,this.animationState=new wp("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}processData(){const{NodeClass:e}=this,{childrenKey:t,sizeKey:i,colorKey:s,colorRange:n}=this.properties;let o=0,r=1/0,a=-1/0;const c=(f,v,y)=>{const b=y.depth!=null?y.depth+1:0,w=t!=null?f[t]:void 0,S=w==null||w.length===0;let M=i!=null?f[i]:void 0;Number.isFinite(M)?M=Math.max(M,0):M=S?1:0;const R=M;o=Math.max(o,b);const A=s!=null?f[s]:void 0;return typeof A=="number"&&(r=Math.min(r,A),a=Math.max(a,A)),h(new e(this,v,f,M,A,R,b,y,[]),w)},h=(f,v)=>{const{datumIndex:y}=f;return v==null||v.forEach((b,w)=>{const S=c(b,y.concat(w),f);f.children.push(S),f.sumSize+=S.sumSize}),f},d=h(new e(this,[],void 0,0,void 0,0,void 0,void 0,[]),this.data),p=[r,a];this.colorScale.domain=r<a?[r,a]:[0,1],this.colorScale.range=n??["black"],this.colorScale.update(),this.rootNode=d,this.maxDepth=o,this.colorDomain=p}update({seriesRect:e}){this.updateSelections(),this.updateNodes();const t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)}resetAllAnimation(e){this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(){return{}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(e){const{colorKey:t,colorName:i,colorRange:s}=this.properties,{id:n,ctx:{legendManager:o},visible:r}=this;return e==="gradient"&&t!=null&&s!=null?[{legendType:"gradient",enabled:r&&o.getItemEnabled({seriesId:n}),seriesId:n,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return e.datumIndex.join(":")}getDatumId(e){return this.getDatumIdFromData(e)}removeMeIndexPathForIndex(e){var t;return((t=this.datumSelection.at(e+1))==null?void 0:t.datum.datumIndex)??[]}removeMeIndexForIndexPath(e){for(const{index:t,datum:i}of this.datumSelection)if(jo(i.datumIndex,e))return t-1;return 0}pickFocus(e){var c;if(!((c=this.rootNode)!=null&&c.children.length))return;const t=Ge(0,e.datumIndex-e.datumIndexDelta,this.datumSelection.length-1),{datumIndexDelta:i,otherIndexDelta:s}=e;let n=this.removeMeIndexPathForIndex(t);const o=n.reduce((h,d)=>h.children[d],this.rootNode);if(s>0&&o.hasChildren)n=[...n,0];else if(s<0&&n.length>1)n=n.slice(0,-1);else if(s===0&&i!==0){const h=o.parent.children.length-1;n=n.slice(),n[n.length-1]=Ge(0,n[n.length-1]+i,h)}const r=n.reduce((h,d)=>h.children[d],this.rootNode),a=this.computeFocusBounds(this.datumSelection.at(t+1));if(a!=null)return{datum:r,datumIndex:this.removeMeIndexForIndexPath(n),otherIndex:r.depth,bounds:a,clipFocusBox:!0}}getDatumAriaText(e,t){if(!(e instanceof this.NodeClass)){de.error(`datum is not HierarchyNode: ${JSON.stringify(e)}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(e.depth??-1)+1,count:e.children.length,description:t})}getCategoryValue(e){}datumIndexForCategoryValue(e){}},hr=class extends xn{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(hi),this.fillGradientDefaults=new Xn,this.fillPatternDefaults=new ai,this.strokes=Object.values(Go)}};D([E()],hr.prototype,"childrenKey",2);D([E()],hr.prototype,"sizeKey",2);D([E()],hr.prototype,"colorKey",2);D([E()],hr.prototype,"colorName",2);D([E(zi(ps(ar,lr,Cn)))],hr.prototype,"fills",2);D([E()],hr.prototype,"fillGradientDefaults",2);D([E()],hr.prototype,"fillPatternDefaults",2);D([E()],hr.prototype,"strokes",2);D([E()],hr.prototype,"colorRange",2);var vie=class{constructor(e,t,i,s){this.lon0=e,this.lat0=t,this.lon1=i,this.lat1=s}merge(e){this.lon0=Math.min(this.lon0,e.lon0),this.lat0=Math.min(this.lat0,e.lat0),this.lon1=Math.max(this.lon1,e.lon1),this.lat1=Math.max(this.lat1,e.lat1)}},tC=Math.PI/180,vw=e=>e*tC,yw=e=>-Math.log(Math.tan(Math.PI*.25+e*tC*.5)),Cw=e=>e/tC,Sw=e=>(Math.atan(Math.exp(-e))-Math.PI*.25)/(tC*.5),yie=class Tx extends oy{constructor(t,i){super(),this.domain=t,this.range=i,this.type="mercator",this.bounds=Tx.bounds(t)}static bounds(t){const[[i,s],[n,o]]=t,r=vw(i),a=yw(s),c=vw(n),h=yw(o);return new Me(Math.min(r,c),Math.min(a,h),Math.abs(c-r),Math.abs(h-a))}static fixedScale(){return new Tx([[Cw(0),Sw(0)],[Cw(1),Sw(1)]],[[0,0],[1,1]])}toDomain(){}normalizeDomains(...t){let i=-1/0,s=1/0,n=-1/0,o=1/0;for(const r of t)for(const[a,c]of r)i=Math.min(a,i),s=Math.max(a,s),n=Math.min(c,n),o=Math.max(c,o);return{domain:[[i,n],[s,o]],animatable:!0}}convert([t,i]){const[[s,n],[o,r]]=this.range,a=(o-s)/this.bounds.width,c=(r-n)/this.bounds.height;return[(vw(t)-this.bounds.x)*a+s,(yw(i)-this.bounds.y)*c+n]}invert([t,i]){const[[s,n],[o,r]]=this.range,a=(o-s)/this.bounds.width,c=(r-n)/this.bounds.height;return[Cw((t-s)/a+this.bounds.x),Sw((i-n)/c+this.bounds.y)]}},ID=class Ix{constructor(){this.id=vn(this),this.axisGroup=new Ps({name:`${this.id}-AxisTicks`,zIndex:2}),this.labelSelection=wi.select(this.axisGroup,Gi),this.interval=new Oc,this.label=new Vi,this.scale=new yo,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(t){t.appendChild(this.axisGroup)}calculateLayout(){const t=[],i=this.generateTicks(),{translationX:s,translationY:n}=this;return this.labelSelection.update(i.ticks.map(o=>this.createLabelDatum(o)),void 0,o=>o.tickId),this.labelSelection.each((o,r)=>{o.setProperties(r),r.visible&&t.push(o.getBBox())}),this.axisGroup.setProperties({translationX:s,translationY:n}),t.length>0?Me.merge(t):void 0}getLabelParams(t){const{padding:i}=this,{translate:s}=t;switch(this.position){case"top":case"bottom":return{x:s,y:i,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:i,y:s,textAlign:"start",textBaseline:"middle"}}}inRange(t,i=.001){const[s,n]=xi(this.scale.range);return t>=s-i&&t<=n+i}createLabelDatum(t){const{x:i,y:s,textBaseline:n,textAlign:o}=this.getLabelParams(t);return{visible:!!t.tickLabel,tickId:t.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:t.tickLabel,textAlign:o,textBaseline:n,x:i,y:s}}generateTicks(){const{minSpacing:t,maxSpacing:i}=this.interval,{maxTickCount:s,minTickCount:n,tickCount:o}=mO(ah(this.scale.range),1,t,i,Ix.DefaultTickCount,Ix.DefaultMinSpacing),r=this.getTicksData({nice:!0,interval:this.interval.step,tickCount:o,minTickCount:n,maxTickCount:s});if(this.position==="bottom"||this.position==="top"){const a=qr.getMeasurer({font:this.label}),{domain:c}=this.scale,d=c[0]>c[1]?-1:1;let p=-1/0*d;r.ticks=r.ticks.filter(f=>Math.sign(f.translate-p)!==d?!1:(p=f.translate+a.textWidth(f.tickLabel,!0)*d,!0))}return r}getTicksData(t){var h,d;const i=[],s=t.nice?this.scale.niceDomain(t):this.scale.domain,n=this.scale.ticks(t,s),o=n.reduce((p,f)=>Math.max(p,LM(f)),0),r=[],a=M0(),c=this.label.format?this.scale.tickFormatter({domain:s,ticks:n,fractionDigits:o,specifier:this.label.format}):p=>$r(p,o);for(let p=0;p<n.length;p++){const f=n[p],v=this.scale.convert(f);if(!this.inRange(v))continue;const y=((d=(h=this.label).formatter)==null?void 0:d.call(h,{value:f,index:p,domain:s,fractionDigits:o,boundSeries:r}))??c(f),b=a(y);i.push({tick:f,tickId:b,tickLabel:y,translate:v})}return{rawTicks:n,fractionDigits:o,ticks:i}}};ID.DefaultTickCount=5;ID.DefaultMinSpacing=10;var Cie=ID;function Sie(e,t){const i=$e("button",iC("ag-charts-input ag-charts-button",t));return e.label!==void 0?i.append(e.label):(i.append(HG(e.icon)),i.ariaLabel=e.altText),i.addEventListener("click",e.onPress),Rc(i,t),i}function bie(e,t){const i=$e("input",iC("ag-charts-input ag-charts-checkbox",t));return i.type="checkbox",i.checked=e.checked,i.addEventListener("change",s=>e.onChange(i.checked,s)),i.addEventListener("keydown",s=>{t0(s)&&(s.preventDefault(),i.click())}),Rc(i,t),i}function wie(e,t){const i=$e("select",iC("ag-charts-input ag-charts-select",t));return i.append(...e.options.map(s=>{const n=$e("option");return n.value=s.value,n.textContent=s.label,n})),At(i,"data-preventdefault",!1),i.value=e.value,i.addEventListener("change",s=>e.onChange(i.value,s)),Rc(i,t),i}function xie(e,t){const i=$e("textarea",iC("ag-charts-input ag-charts-textarea",t));return i.value=e.value,i.addEventListener("input",s=>e.onChange(i.value,s)),Rc(i,t),At(i,"data-preventdefault",!1),i}function HG(e){const t=$e("span",`ag-charts-icon ag-charts-icon-${e}`);return At(t,"aria-hidden",!0),t}function iC(e,t){return t==null?e:`${e} ${t.class}`}var LD=class extends zs{constructor(e=""){super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=e}get d(){return this._d}set d(e){if(e!==this._d){this._d=e,this.commands.length=0;for(const[t,i,s]of e.matchAll(/([A-Z])([0-9. ]*)/g)){const n=s.split(/\s+/g).map(Number);this.commands.push([i,n])}this.checkPathDirty()}}updatePath(){const{path:e,x:t,y:i}=this;e.clear();let s=t,n=i;for(const[o,r]of this.commands)switch(o){case"M":e.moveTo(t+r[0],i+r[1]),s=t+r[0];break;case"C":e.cubicCurveTo(t+r[0],i+r[1],t+r[2],i+r[3],t+r[4],i+r[5]),s=t+r[4],n=i+r[5];break;case"H":e.lineTo(t+r[0],n),s=i+r[0];break;case"L":e.lineTo(t+r[0],i+r[1]),s=t+r[0],n=i+r[1];break;case"V":e.lineTo(s,i+r[0]),n=i+r[0];break;case"Z":e.closePath();break;default:throw new Error(`Could not translate command '${o}' with '${r.join(" ")}'`)}e.closePath()}};D([ze()],LD.prototype,"x",2);D([ze()],LD.prototype,"y",2);var Wh=class extends Kr{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}render(e){const{ctx:t}=e,i=this.sourceImage;i&&(t.globalAlpha=this.opacity,t.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(e)}};D([De()],Wh.prototype,"x",2);D([De()],Wh.prototype,"y",2);D([De()],Wh.prototype,"width",2);D([De()],Wh.prototype,"height",2);D([De()],Wh.prototype,"opacity",2);var Mie={};xo(Mie,{ButtonWidget:()=>yp,NativeWidget:()=>rh,SliderWidget:()=>o0,ToolbarWidget:()=>fy,WIDGET_HTML_EVENTS:()=>$M,Widget:()=>cr,WidgetEventUtil:()=>zr});var JL="canvas-overlay",FD=class extends Jv{constructor(e,t,i){super(),this.ctx=e,this.hideFns=[],this.moduleId=`popover-${t}`,i!=null&&i.detached?this.element=$e("div"):this.element=e.domManager.addChild(JL,this.moduleId),this.element.setAttribute("role","presentation"),this.destroyFns.push(()=>e.domManager.removeChild(JL,this.moduleId))}attachTo(e){this.element.parentElement||e.element.append(this.element)}hide(e){const{lastFocus:t=this.lastFocus}=e??{};this.element.children.length!==0&&(this.hideFns.forEach(i=>i()),t==null||t.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}showWithChildren(e,t){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");const i=$e("div","ag-charts-popover");if(t.ariaLabel!=null&&i.setAttribute("aria-label",t.ariaLabel),t.class!=null&&i.classList.add(t.class),i.replaceChildren(...e),this.element.replaceChildren(i),this.hideFns.push(()=>this.removeChildren()),t.onHide&&this.hideFns.push(t.onHide),t.initialFocus&&t.sourceEvent){const s=i0(t.sourceEvent);s!==void 0&&(this.lastFocus=s,this.initialFocus=t.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(e){var i;const t=this.getPopoverElement();t&&(t.style.setProperty("right","unset"),t.style.setProperty("bottom","unset"),e.x!=null&&t.style.setProperty("left",`${Math.floor(e.x)}px`),e.y!=null&&t.style.setProperty("top",`${Math.floor(e.y)}px`),(i=this.initialFocus)==null||i.focus(),this.initialFocus=void 0)}},VG=class extends FD{setAnchor(e,t){this.anchor=e,this.fallbackAnchor=t,this.updatePosition(e),this.repositionWithinBounds()}showWithChildren(e,t){const i=t.anchor??this.anchor,s=t.fallbackAnchor??this.fallbackAnchor,n=super.showWithChildren(e,t);return i&&this.setAnchor(i,s),Et().requestAnimationFrame(()=>{this.repositionWithinBounds()}),n}repositionWithinBounds(){const{anchor:e,ctx:t,fallbackAnchor:i}=this,s=this.getPopoverElement();if(!e||!s)return;const n=t.domManager.getBoundingClientRect(),{offsetWidth:o,offsetHeight:r}=s;let a=Ge(0,e.x,n.width-o),c=Ge(0,e.y,n.height-r);a!==e.x&&(i==null?void 0:i.x)!=null&&(a=Ge(0,i.x-o,n.width-o)),c!==e.y&&(i==null?void 0:i.y)!=null&&(c=Ge(0,i.y-r,n.height-r)),this.updatePosition({x:a,y:c})}},Die=class extends VG{show(e){const t=e.items.map(s=>this.createRow(e,s)),i=this.showWithChildren(t,e);i.classList.add("ag-charts-menu"),i.setAttribute("role","menu"),this.menuCloser=LN({orientation:"vertical",menu:i,buttons:t,sourceEvent:e.sourceEvent,closeCallback:()=>this.hide()}),this.hideFns.push(()=>{var s;(s=this.menuCloser)==null||s.finishClosing(),this.menuCloser=void 0})}createRow(e,t){const{menuItemRole:i="menuitem"}=e,s=t.value===e.value,n=$e("div","ag-charts-menu__row");if(n.setAttribute("role",i),i==="menuitemradio"&&n.setAttribute("aria-checked",(e.value===t.value).toString()),typeof t.value=="string"&&(n.dataset.popoverId=t.value),n.classList.toggle("ag-charts-menu__row--active",s),t.icon!=null){const c=$e("span",`ag-charts-menu__icon ${hy(t.icon)}`);n.appendChild(c)}const o=t.strokeWidth!=null;if(o&&(n.classList.toggle("ag-charts-menu__row--stroke-width-visible",o),n.style.setProperty("--strokeWidth",o?`${t.strokeWidth}px`:null)),t.label!=null){const c=$e("span","ag-charts-menu__label");c.textContent=this.ctx.localeManager.t(t.label),n.appendChild(c)}"altText"in t&&(n.ariaLabel=this.ctx.localeManager.t(t.altText));const r=()=>{var c;(c=e.onPress)==null||c.call(e,t)},a=c=>{t0(c)&&(r(),c.preventDefault(),c.stopPropagation())};return n.addEventListener("keydown",a),n.addEventListener("click",a),n.addEventListener("mousemove",()=>{n.focus({preventScroll:!0})}),n}},_G=class extends FD{constructor(){super(...arguments),this.dragged=!1}setDragHandle(e){e.addListener("drag-start",t=>{e.addClass(this.dragHandleDraggingClass),this.onDragStart(t)}),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",()=>{e.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(e){const t=this.getPopoverElement();t&&(e.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:Ou.from(e.clientX,e.clientY),position:Ou.from(Number(t.style.getPropertyValue("left").replace("px","")),Number(t.style.getPropertyValue("top").replace("px","")))})}onDragMove(e){const{dragStartState:t}=this,i=this.getPopoverElement();if(!t||!i)return;const s=Ou.sub(Ou.from(e.clientX,e.clientY),t.client),n=Ou.add(t.position,s),o=this.ctx.domManager.getBoundingClientRect(),r={};n.x>=0&&n.x+i.offsetWidth<=o.width&&(r.x=n.x),n.y>=0&&n.y+i.offsetHeight<=o.height&&(r.y=n.y),this.updatePosition(r)}onDragEnd(){this.dragStartState=void 0}},Zp=class extends Be{};D([E()],Zp.prototype,"icon",2);D([E()],Zp.prototype,"label",2);D([E()],Zp.prototype,"ariaLabel",2);D([E()],Zp.prototype,"tooltip",2);var WG=class extends yp{constructor(e){super(),this.localeManager=e}update(e){const{localeManager:t}=this;e.tooltip&&(this.elem.title=t.t(e.tooltip));let i="";if(e.icon!=null&&(i=`<span class="${hy(e.icon)} ag-charts-toolbar__icon"></span>`),e.label!=null){const s=t.t(e.label);i=`${i}<span class="ag-charts-toolbar__label">${s}</span>`}this.elem.innerHTML=i}setChecked(e){At(this.elem,"aria-checked",e)}},eF="ag-charts-toolbar__button--active",PD=class extends fy{constructor(e,t="horizontal"){super(t),this.localeManager=e,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new Xr,this.hasPrefix=!1,this.buttonWidgets=[],this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal",t==="horizontal"),this.toggleClass("ag-charts-toolbar--vertical",t==="vertical")}addToolbarListener(e,t){return this.events.addListener(e,t)}clearButtons(){for(const e of this.buttonWidgets)e.destroy();this.buttonWidgets.splice(0)}updateButtons(e){const{buttonWidgets:t}=this;for(const[i,s]of e.entries())(this.buttonWidgets.at(i)??this.createButton(i,s)).update(s);for(let i=e.length;i<t.length;i++){const s=this.buttonWidgets.at(i);s==null||s.destroy()}this.buttonWidgets.splice(e.length),this.refreshButtonClasses()}updateButtonByIndex(e,t){var i;(i=this.buttonWidgets.at(e))==null||i.update(t)}clearActiveButton(){for(const e of this.buttonWidgets)e.toggleClass(eF,!1)}toggleActiveButtonByIndex(e){if(e!==-1)for(const[t,i]of this.buttonWidgets.entries())i.toggleClass(eF,e!=null&&e===t)}toggleButtonEnabledByIndex(e,t){var i;e!==-1&&((i=this.buttonWidgets.at(e))==null||i.setEnabled(t))}toggleSwitchCheckedByIndex(e,t){var i;e!==-1&&((i=this.buttonWidgets.at(e))==null||i.setChecked(t))}getButtonBounds(){return this.buttonWidgets.map(e=>this.getButtonWidgetBounds(e))}setButtonHiddenByIndex(e,t){var i;(i=this.buttonWidgets.at(e))==null||i.setHidden(t)}getButtonWidgetBounds(e){const t=this.getBounds(),i=e.getBounds();return new Me(i.x+t.x,i.y+t.y,i.width,i.height)}refreshButtonClasses(){var o;const{buttonWidgets:e,hasPrefix:t}=this;let i,s,n;for(const[r,a]of e.entries())i=!t&&r===0||n!=a.section,s=r===e.length-1||a.section!=((o=e.at(r+1))==null?void 0:o.section),a.toggleClass("ag-charts-toolbar__button--first",i),a.toggleClass("ag-charts-toolbar__button--last",s),a.toggleClass("ag-charts-toolbar__button--gap",r>0&&i),n=a.section}createButton(e,t){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",s=>{const n={index:e,...t instanceof Be?t.toJson():t},o=this.getButtonWidgetBounds(i);this.events.dispatch("button-pressed",{event:s,button:n,buttonBounds:o})}),i.addListener("focus",()=>{this.events.dispatch("button-focused",{button:{index:e}})}),t.section&&(i.section=t.section),this.buttonWidgets.push(i),this.addChild(i),i}},Rie=class extends PD{createButtonWidget(){return new WG(this.localeManager)}},Aie=class extends _G{constructor(e,t,i){super(e,t),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(e,t={}){this.showWithChildren(e,{...t,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){const e=this.getPopoverElement();return new Me((e==null?void 0:e.offsetLeft)??0,(e==null?void 0:e.offsetTop)??0,(e==null?void 0:e.offsetWidth)??0,(e==null?void 0:e.offsetHeight)??0)}hasBeenDragged(){return this.dragged}setAnchor(e,t,i){const s=this.getPopoverElement();if(!s)return;const n=e.position??"above",{offsetWidth:o,offsetHeight:r}=s;let a=e.y-r-i,c=e.x-o/2;n==="below"?a=e.y+i:n==="right"?(a=e.y-r/2,c=e.x+t):n==="above-left"&&(c=e.x),this.updatePosition({x:c,y:a})}ignorePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="none")}capturePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="unset")}updatePosition(e){const t=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();e.x=Math.floor(Ge(0,e.x,i.width-t.width)),e.y=Math.floor(Ge(0,e.y,i.height-t.height)),super.updatePosition(e),this.onPopoverMoved()}},Eie=class extends PD{constructor(e,t){super(e.localeManager),this.hasPrefix=!0,this.popover=new Aie(e,t,this.onPopoverMoved.bind(this)),this.dragHandle=new Tie(e.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}show(e={}){this.popover.show([this.dragHandle.getElement(),this.getElement()],e)}hide(){this.popover.hide()}setAnchor(e){this.popover.setAnchor(e,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){var i;const e=this.popover.getBounds();if((i=this.popoverBounds)!=null&&i.equals(e))return;this.popoverBounds=e.clone();const t=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:e,buttonBounds:t})}getButtonWidgetBounds(e){const t=this.popover.getBounds(),i=super.getButtonWidgetBounds(e),s=this.dragHandle.getBounds();return new Me(i.x+t.x-s.width,i.y+t.y,i.width,i.height)}},Tie=class extends rh{constructor(e){super($e("div","ag-charts-floating-toolbar__drag-handle"));const t=new rh($e("span",`${hy("drag-handle")} ag-charts-toolbar__icon`));t.setAriaHidden(!0),this.addChild(t),this.elem.title=e}},Iie={...IO,...LO};Ya.create.bind(Ya),Ya.__createSparkline.bind(Ya);function tF(e,t){return{...e,container:t.current}}function Lie(e,t){const i=L.forwardRef(function(n,o){const{options:r,style:a,className:c}=n,h=L.useRef(null),d=L.useRef();L.useLayoutEffect(()=>{const f=e(tF(r,h));return d.current=f,()=>{f.destroy()}},[]);const p=d.current===void 0;return L.useEffect(()=>{var f;p||(f=d.current)==null||f.update(tF(r,h)).catch(v=>console.error(v))},[r]),L.useImperativeHandle(o,()=>d.current,[]),L.useMemo(()=>L.createElement("div",{ref:h,style:a,className:c}),[a,c])});return i.displayName=t,i}var Fie=Lie(e=>Ya.create(e),"AgCharts");function Pie(){const[e,t]=L.useState([]),[i,s]=L.useState(null),[n,o]=L.useState({title:{text:"IMDb Ratings",fontSize:18},data:[],series:[],axes:[],background:{fill:"#1e1e1e"}}),{id:r}=fF(),[a,c]=L.useState(!1);ph();const h=localStorage.getItem("token"),d=L.useMemo(()=>({flex:1}),[]),[p]=L.useState([{headerName:"Role",field:"role"},{headerName:"Movie",field:"movie"},{headerName:"Character",field:"character"},{headerName:"Rating",field:"rating"}]);return L.useEffect(()=>{(async()=>{var v;if(!h){c(!0);return}try{const y=await L6(r,h);s(y),t(y.roles.map(b=>{var w;return{role:b.category,movie:b.movieName,character:((w=b.characters)==null?void 0:w[0])||"N/A",rating:b.imdbRating}})),o({title:{text:`IMDb Ratings for ${(y==null?void 0:y.name)||"N/A"}`,fontSize:20,color:"#f0f0f0"},background:{fill:"#1e1e1e"},data:((v=y==null?void 0:y.roles)==null?void 0:v.map(b=>({movieName:b.movieName,imdbRating:parseFloat(b.imdbRating)})))||[],series:[{type:"bar",xKey:"movieName",yKey:"imdbRating",yName:"IMDb Rating",fill:"#0d6efd",stroke:"#0a58ca",label:{enabled:!0,color:"#ffffff",fontWeight:"bold"}}],axes:[{type:"category",position:"bottom",title:{text:"Movie",color:"#f0f0f0"},label:{rotation:-45,color:"#f0f0f0",wrapping:"character",maxWidth:80,overflow:"hidden"}},{type:"number",position:"left",title:{text:"Rating",color:"#f0f0f0"},label:{color:"#f0f0f0"},min:0,max:10,tickCount:11,tickFormat:"d",tickInterval:1}],legend:{enabled:!1}})}catch(y){y.message==="Unauthorized"&&c(!0),console.error("Error fetching person data:",y)}})()},[r,h]),a?ve.jsxs("div",{className:"unauthorized",children:[ve.jsx("h2",{children:"You must be logged in to view this page."}),ve.jsxs("p",{children:["Please ",ve.jsx("a",{href:"/login",children:"Login"})," to continue"]})]}):i?ve.jsxs("div",{className:"person-page",style:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[ve.jsxs("div",{className:"person-page-header mb-3",style:{width:"100%"},children:[ve.jsx("h1",{children:i.name}),ve.jsxs("h2",{children:[i.birthYear,"-",i.deathYear||"Present"]})]}),ve.jsxs("div",{style:{display:"flex",width:"80%",maxWidth:"1200px"},children:[ve.jsx("div",{className:"person-ag-grid-container",style:{width:"700px",minWidth:"700px",marginRight:"2rem",height:"400px",minHeight:"400px"},children:ve.jsx("div",{className:"ag-theme-material-dark",style:{height:"100%",width:"100%"},children:ve.jsx(xM,{rowData:e,columnDefs:p,domLayout:"autoHeight",defaultColDef:d})})}),ve.jsx("div",{className:"person-ag-charts-container",style:{width:"700px",minWidth:"700px",height:"300px",minHeight:"300px"},children:ve.jsx("div",{className:"ag-charts-component",style:{height:"100%",width:"100%"},children:ve.jsx(Fie,{options:n})})})]})]}):ve.jsx("div",{children:"Loading..."})}function iF(){var p;const[e,t]=L.useState({email:"",password:""}),[i,s]=L.useState(""),n=ph(),r=((p=ol().state)==null?void 0:p.from)||"/movies",[a,c]=L.useState(""),h=f=>{t({...e,[f.target.name]:f.target.value})},d=async f=>{if(f.preventDefault(),s(""),!e.email||!e.password){s("Email and password are required.");return}try{const v=await P6(e);localStorage.setItem("token",v.bearerToken.token),localStorage.setItem("refreshToken",v.refreshToken.token),localStorage.setItem("tokenExpiry",Date.now()+v.bearerToken.expires_in*1e3),c("Logged in successfully."),n(r)}catch{try{const y=await F6(e);localStorage.setItem("token",y.bearerToken.token),localStorage.setItem("refreshToken",y.refreshToken.token),c("Registered successfully. Welcome!"),n(r)}catch{s("Login failed, and registration also failed.")}}};return ve.jsx("div",{className:"person-page",children:ve.jsxs("div",{className:"auth-form-container",children:[ve.jsx("h2",{className:"text-center mb-4",children:"Login or Register"}),ve.jsxs("form",{onSubmit:d,children:[ve.jsx("input",{type:"email",name:"email",placeholder:"Email",value:e.email,onChange:h,className:"form-control"}),ve.jsx("input",{type:"password",name:"password",placeholder:"Password",value:e.password,onChange:h,className:"form-control"}),ve.jsx("button",{type:"submit",children:"Continue"})]}),i&&ve.jsx("p",{className:"auth-error",children:i})]})})}function kie(){return ve.jsx("div",{children:ve.jsxs(E2,{children:[ve.jsx(N6,{}),ve.jsxs(n2,{children:[ve.jsx(ql,{path:"/",element:ve.jsx(B2,{})}),ve.jsx(ql,{path:"/movies",element:ve.jsx(k6,{})}),ve.jsx(ql,{path:"/movies/:id",element:ve.jsx(O6,{})}),ve.jsx(ql,{path:"/people/:id",element:ve.jsx(Pie,{})}),ve.jsx(ql,{path:"/login",element:ve.jsx(iF,{})}),ve.jsx(ql,{path:"/register",element:ve.jsx(iF,{})})]})]})})}pH.createRoot(document.getElementById("root")).render(ve.jsx(L.StrictMode,{children:ve.jsx(kie,{})}));
